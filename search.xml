<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Account Management in Git</title>
    <url>/2020/03/07/Account-Management-in-Git/</url>
    <content><![CDATA[<img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR47zQflbjfccDWmMhgzZ6Na_e2jNfmWLhWHYSmZbjcySYzqnVTbw" width="100%"/>

<a id="more"></a>

<h2 id="Git-中-GitHub-账号的管理"><a href="#Git-中-GitHub-账号的管理" class="headerlink" title="Git 中 GitHub 账号的管理"></a>Git 中 GitHub 账号的管理</h2><p>本文记录关于 Git 中管理账号时可能遇到的一些问题，使用的远程仓库托管平台是 GitHub。</p>
<h3 id="单账号管理"><a href="#单账号管理" class="headerlink" title="单账号管理"></a>单账号管理</h3><blockquote>
<p>假设 GitHub 的账号信息如下：</p>
<p>账号：username</p>
<p>密码：password</p>
<p>假设 GitHub 中托管的仓库地址如下：</p>
<p>HTTPS：<code>https://github.com/username/repository.git</code></p>
<p>SSH：<code>git@github.com:username/repository.git</code></p>
</blockquote>
<p>Git 中链接远程仓库有 HTTPS 和 SSH 两种方式，HTTPS 相对比较简单，而 SSH 则具有更高的安全性。</p>
<h4 id="HTTPS-方式"><a href="#HTTPS-方式" class="headerlink" title="HTTPS 方式"></a>HTTPS 方式</h4><p>使用 HTTPS 的方式时，会遇到每次提交都要输入 GitHub 的账号密码的问题，可以通过将账号密码缓存到内存或者保存到本地磁盘来解决这个问题。具体详情可查看【<a href="https://git-scm.com/book/zh/v2/Git-工具-凭证存储" target="_blank" rel="noopener">凭证存储 - Git</a>】</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 将账号密码保存到磁盘，默认存储位置是 ~/.git-credentials</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git config --global credential.helper store</span></span><br></pre></td></tr></table></figure>

<p>但这种方式是明文存储的，查看 <code>~/.git-credentials</code> 可以看到具体的账号信息。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">https:&#x2F;&#x2F;username:password@github.com</span><br></pre></td></tr></table></figure>

<h4 id="SSH-方式"><a href="#SSH-方式" class="headerlink" title="SSH 方式"></a>SSH 方式</h4><p>通过 SSH 方式链接 GitHub 时需要通过密钥来实现，所以 SSH 具有比较高的安全性。</p>
<ol>
<li><p>生成密钥对</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> -t 指定密钥类型，默认是 rsa</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -C 注释</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -f 指定文件名，默认是 ~/.ssh/id_rsa（私钥）和 ~/.ssh/id_rsa.pub（公钥）</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ssh-keygen -t rsa -C <span class="string">"username@email.com"</span></span></span><br></pre></td></tr></table></figure>

<p>生成密钥时会提示让输入密码，此时的密码是以后 Git 提交时需要输入的密码，可以不填直接回车，那在提交的时候就不需要再输入密码了。</p>
</li>
<li><p>GitHub 中添加公钥</p>
<p>登陆 GitHub，在 <code>Personal settings &gt; SSH and GPG keys &gt; New SSH key</code> 将 <code>~/.ssh/id_rsa.pub</code> 文件中公钥添加进去。</p>
</li>
<li><p>设置本地仓库中的远程仓库地址为 SSH 格式</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git remote <span class="built_in">set</span>-url origin <span class="string">"git@github.com:username/repository.git"</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 或者</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git config remote.origin.url <span class="string">"git@github.com:username/repository.git"</span></span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="多账号管理"><a href="#多账号管理" class="headerlink" title="多账号管理"></a>多账号管理</h3><blockquote>
<p>假设 GitHub 的账号信息如下：</p>
<p>账号A</p>
<ul>
<li>账号：usernameA</li>
<li>密码：passwordA</li>
<li>邮箱：<a href="mailto:usernameA@163.com">usernameA@163.com</a></li>
</ul>
<p>账号B</p>
<ul>
<li>账号：usernameB</li>
<li>密码：passwordB</li>
<li>邮箱：<a href="mailto:usernameB@163.com">usernameB@163.com</a></li>
</ul>
<p>假设 GitHub 中托管的仓库地址如下：</p>
<p>仓库A</p>
<ul>
<li><p>HTTPS：<code>https://github.com/usernameA/repositoryA.git</code></p>
</li>
<li><p>SSH：<code>git@github.com:usernameA/repositoryA.git</code></p>
</li>
</ul>
<p>仓库B</p>
<ul>
<li><p>HTTPS：<code>https://github.com/usernameB/repositoryB.git</code></p>
</li>
<li><p>SSH：<code>git@github.com:usernameB/repositoryB.git</code></p>
</li>
</ul>
</blockquote>
<h4 id="账号切换"><a href="#账号切换" class="headerlink" title="账号切换"></a>账号切换</h4><blockquote>
<p>假设账号A和账号B都有权限管理仓库A，此时想将本地仓库原本的账号A切换到账号B。</p>
</blockquote>
<ol>
<li><p>查看本机是否缓存或保存了账号A的账号信息</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看 <span class="built_in">local</span> 级别的配置中是否有关于 credential.helper 的配置</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git config --<span class="built_in">local</span> --get credential.helper</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看 global 级别的配置中是否有关于 credential.helper 的配置</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git config --global --get credential.helper</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看 system 级别的配置中是否有关于 credential.helper 的配置</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git config --system --get credential.helper</span></span><br></pre></td></tr></table></figure>

<p>如果返回结果为：<code>cache</code> /  <code>store</code> /  <code>osxkeychain</code> /  <code>winstore</code> 则表示本地存在账号A的账号信息</p>
</li>
<li><p>如果存在账号A的信息则清除掉其账号信息</p>
<p>删除 <code>~/.git-credentials</code> 文件中账号A的账号信息</p>
</li>
<li><p>切换本地仓库中的 Git 用户名和邮箱</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git config --<span class="built_in">local</span> user.name <span class="string">"usernameB"</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git config --<span class="built_in">local</span> user.email <span class="string">"usernameB@163.com"</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>将账号B的账号信息保存到本机</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git config --<span class="built_in">local</span> credential.helper store</span></span><br></pre></td></tr></table></figure>

<p>下一次提交时会提示让输入用户名和密码，输入账号B的用户名和密码即可。</p>
</li>
</ol>
<p>经过以上 4 步之后就完成了账号的切换工作，之后再提交时使用的就是账号B了。</p>
<h4 id="多账号共存"><a href="#多账号共存" class="headerlink" title="多账号共存"></a>多账号共存</h4><p>以上情况都是本机中只存在一个 GitHub 账号，如果需要使用不同的账号管理不同的仓库时则需要对每个仓库和账号进行相应的配置以达到理想的匹配作用。</p>
<h5 id="HTTPS-方式-1"><a href="#HTTPS-方式-1" class="headerlink" title="HTTPS 方式"></a>HTTPS 方式</h5><p>如果想要本机中同时保存账号A和账号B的账号信息，对于本地仓库A，可能随时想要选用账号A或账号B中的一个来提交时。只需要在本地仓库的远程仓库地址中加上相应的用户名，然后再将 Git 用户名和密码切换到相应的用户即可。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 先设置保存密码的配置</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git config --<span class="built_in">local</span> credential.helper store</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 想要切换到账号A时</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git remote <span class="built_in">set</span>-url origin <span class="string">"https://usernameA@github.com/usernameA/repositoryA.git"</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git config --<span class="built_in">local</span> user.name <span class="string">"usernameA"</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git config --<span class="built_in">local</span> user.email <span class="string">"usernameA@163.com"</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 想要切换到账号B时</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git remote <span class="built_in">set</span>-url origin <span class="string">"https://usernameB@github.com/usernameA/repositoryA.git"</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git config --<span class="built_in">local</span> user.name <span class="string">"usernameB"</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git config --<span class="built_in">local</span> user.email <span class="string">"usernameB@163.com"</span></span></span><br></pre></td></tr></table></figure>

<h5 id="SSH-方式-1"><a href="#SSH-方式-1" class="headerlink" title="SSH 方式"></a>SSH 方式</h5><blockquote>
<p>假设要通过 SSH 的方式来让账户A和账户B再本地仓库A中自由的切换</p>
</blockquote>
<p>使用 SSH 方式时需要对不用的账号生成不同的密钥，并配置账号与 GitHub 域名的匹配信息。</p>
<ol>
<li><p>生成各自密钥</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> -t 指定密钥类型，默认是 rsa</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -C 注释</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -f 指定文件名，默认是 ~/.ssh/id_rsa（私钥）和 ~/.ssh/id_rsa.pub（公钥）</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ssh-keygen -t rsa -C <span class="string">"usernameA@email.com"</span> -f <span class="string">"id_rsa_A"</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ssh-keygen -t rsa -C <span class="string">"usernameB@email.com"</span> -f <span class="string">"id_rsa_B"</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>将密钥全部添加到 SSH Agent 中</p>
<blockquote>
<p>部分终端中需要手动开启 ssh-agent</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ssh-agent bash</span></span><br></pre></td></tr></table></figure>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ssh-add ~/.ssh/id_rsa_A</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ssh-add ~/.ssh/id_rsa_B</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>添加配置文件 <code>~/.ssh/config</code></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> usernameA</span></span><br><span class="line">Host hostA #别名，之后配置本地仓库的远程仓库地址时需要使用</span><br><span class="line">  HostName github.com</span><br><span class="line">  IdentityFile ~/.ssh/id_rsa</span><br><span class="line">  User usernameA</span><br><span class="line"><span class="meta">#</span><span class="bash"> usernameB</span></span><br><span class="line">Host hostB</span><br><span class="line">  HostName github.com</span><br><span class="line">  IdentityFile ~/.ssh/id_rea2</span><br><span class="line">  User usernameB</span><br></pre></td></tr></table></figure>
</li>
<li><p>远程仓库托管平台中添加对应的公钥</p>
<p>登陆相应的远程仓库托管平台，将公钥添加上去。</p>
</li>
<li><p>修改本地仓库对应的远程仓库地址</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 想要切换到账户A时</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git remote <span class="built_in">set</span>-url origin <span class="string">"git@hostA:usernameA/repositoryA.git"</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git config --<span class="built_in">local</span> user.name <span class="string">"usernameA"</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git config --<span class="built_in">local</span> user.email <span class="string">"usernameA@163.com"</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 想要切换到账号B时</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git remote <span class="built_in">set</span>-url origin <span class="string">"git@hostB:usernameA/repositoryA.git"</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git config --<span class="built_in">local</span> user.name <span class="string">"usernameB"</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git config --<span class="built_in">local</span> user.email <span class="string">"usernameB@163.com"</span></span></span><br></pre></td></tr></table></figure>

</li>
</ol>
]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>Study Notes of Shell</title>
    <url>/2020/03/07/Study-Notes-of-Shell/</url>
    <content><![CDATA[<blockquote>
<p><a href="https://www.yinwang.org/blog-cn/2013/03/29/scripting-language" target="_blank" rel="noopener">https://www.yinwang.org/blog-cn/2013/03/29/scripting-language</a></p>
<p><a href="https://www.learnshell.org/" target="_blank" rel="noopener">https://www.learnshell.org/</a></p>
<p><a href="https://www.tutorialspoint.com/unix/shell_scripting.htm" target="_blank" rel="noopener">https://www.tutorialspoint.com/unix/shell_scripting.htm</a></p>
<p><a href="https://github.com/qinjx/30min_guides/blob/master/shell.md" target="_blank" rel="noopener">https://github.com/qinjx/30min_guides/blob/master/shell.md</a></p>
<p><a href="http://www.freeos.com/guides/lsst/" target="_blank" rel="noopener">http://www.freeos.com/guides/lsst/</a></p>
<p><a href="https://linuxconfig.org/bash-scripting-tutorial-for-beginners" target="_blank" rel="noopener">https://linuxconfig.org/bash-scripting-tutorial-for-beginners</a></p>
<p><a href="https://bash.cyberciti.biz/guide/Main_Page" target="_blank" rel="noopener">https://bash.cyberciti.biz/guide/Main_Page</a></p>
<p><a href="https://book.douban.com/subject/26854226/" target="_blank" rel="noopener">https://book.douban.com/subject/26854226/</a></p>
<p><a href="https://coding.imooc.com/class/314.html" target="_blank" rel="noopener">https://coding.imooc.com/class/314.html</a></p>
</blockquote>
]]></content>
  </entry>
  <entry>
    <title>Surfing Internet Scientifically</title>
    <url>/2020/03/03/Surfing-Internet-Scientifically/</url>
    <content><![CDATA[<img src="https://hyw-space-1253436760.cos.ap-shanghai.myqcloud.com/%E5%85%B6%E4%BB%96/xxx.jpg" width="100%"/>

<a id="more"></a>

<p>SSR-Android 无法使用扫描功能</p>
<blockquote>
<p><a href="https://github.com/shadowsocksrr/shadowsocksr-android/issues/182" target="_blank" rel="noopener">扫描二维码bug？#182</a></p>
</blockquote>
]]></content>
  </entry>
  <entry>
    <title>Configing Procy of Network in Mac Terminal</title>
    <url>/2020/03/03/Configing-Procy-of-Network-in-Mac-Terminal/</url>
    <content><![CDATA[<img src="https://i.ytimg.com/vi/dMLK0cx7V_Y/maxresdefault.jpg" width="100%"/>

<a id="more"></a>

<div class="note ">
            <p>在用 IDEA 调用 Google Calendar API 的时候，报 <code>Connect time out</code> 的错，但电脑已经打开了 shadowsocks，浏览器也可以正常访问 Google。搜索后发现是终端中的代理需要另外设置。</p><p>浏览器的翻墙通过 <a href="https://github.com/shadowsocks/ShadowsocksX-NG" target="_blank" rel="noopener">shadowsocks</a> 实现，但是终端中还是会走默认的网关。</p>
          </div>

<h2 id="查看当前公网网关"><a href="#查看当前公网网关" class="headerlink" title="查看当前公网网关"></a>查看当前公网网关</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> curl ip.cn</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> or</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> curl cip.cc</span></span><br></pre></td></tr></table></figure>

<h2 id="当前窗口中配置"><a href="#当前窗口中配置" class="headerlink" title="当前窗口中配置"></a>当前窗口中配置</h2><p>打开一个终端窗口，输入一下命令：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">export</span> http_proxy=http://ip:port</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">export</span> https_proxy=http://ip:port</span></span><br></pre></td></tr></table></figure>

<p>ip 和 port 可以从 <code>shadowsocks&gt;HTTP代理设置</code> 中查看。</p>
<p>这种方式只对当前窗口有效，关闭后失效。每次打开新的窗口时需要重新输入配置命令。</p>
<h2 id="将配置写入用户脚本文件中"><a href="#将配置写入用户脚本文件中" class="headerlink" title="将配置写入用户脚本文件中"></a>将配置写入用户脚本文件中</h2><ol>
<li><p>在 <code>~/.bash_profile</code> 中添加以下代码：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">proxy_on</span></span>()&#123;</span><br><span class="line">    <span class="built_in">export</span> http_proxy=http://127.0.0.1:1087</span><br><span class="line">    <span class="built_in">export</span> https_proxy=http://127.0.0.1:1087</span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">"已开启代理"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">proxy_off</span></span>()&#123;</span><br><span class="line">    <span class="built_in">unset</span> http_proxy</span><br><span class="line">    <span class="built_in">unset</span> https_proxy</span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">"已关闭代理"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>重新执行刚修改的脚本文件，使之立即生效</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ <span class="built_in">source</span> ~/.bash_profile</span><br></pre></td></tr></table></figure>
</li>
<li><p>开启代理</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> proxy_on</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>关闭代理</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> proxy_off</span></span><br></pre></td></tr></table></figure>



</li>
</ol>
<h2 id="IDEA-配置代理"><a href="#IDEA-配置代理" class="headerlink" title="IDEA 配置代理"></a>IDEA 配置代理</h2><p><code>Preferences&gt;Appearance &amp; Behavior&gt;System Settings&gt;HTTP Proxy&gt;Manual proxy configurationation</code></p>
<p>填写相应的 Host 和 Port 即可。</p>
<p><img src="https://img2018.cnblogs.com/blog/478956/201810/478956-20181019112723115-194000758.png" alt=""></p>
]]></content>
  </entry>
  <entry>
    <title>Study Notes of Google Calendar API</title>
    <url>/2020/03/02/Study-Notes-of-Google-Calendar-API/</url>
    <content><![CDATA[<img src="https://www.techapple.com/wp-content/uploads/2017/10/GOOGLE-CALENDER.jpg" width="100%"/>

<a id="more"></a>

<h2 id="任务安排"><a href="#任务安排" class="headerlink" title="任务安排"></a>任务安排</h2><h3 id="阅读官方文档"><a href="#阅读官方文档" class="headerlink" title="阅读官方文档"></a>阅读官方文档</h3><blockquote>
<p><a href="https://developers.google.com/calendar" target="_blank" rel="noopener">Calendar API | Google Developers</a></p>
</blockquote>
<ol>
<li><del>首页</del></li>
<li>指南<ol>
<li><del>Get Started</del></li>
<li><a href="https://developers.google.com/calendar/auth" target="_blank" rel="noopener">Authorizing Requests</a></li>
</ol>
</li>
<li>参考</li>
<li>示例<ol>
<li>Java</li>
</ol>
</li>
<li>支持</li>
</ol>
<p><a href="https://developers.google.com/api-client-library/java" target="_blank" rel="noopener">Google API Client Libraries &gt; Java</a></p>
<h2 id="身份验证"><a href="#身份验证" class="headerlink" title="身份验证"></a>身份验证</h2><blockquote>
<p><a href="https://developers.google.com/identity/protocols/OAuth2" target="_blank" rel="noopener">Using OAuth 2.0 to Access Google APIs</a></p>
<p><a href="https://developers.google.com/identity/protocols/OAuth2#webserver" target="_blank" rel="noopener">Scenarios: Web server applications</a></p>
<p><a href="https://developers.google.com/api-client-library/java/google-api-java-client/oauth2#authorization_code_flow" target="_blank" rel="noopener">Authorization code flow | Google-API-Client-Library &gt; java</a></p>
<p><a href="https://developers.google.com/oauthplayground" target="_blank" rel="noopener">OAuth 2.0 Playground | Google Developers</a></p>
</blockquote>
<p>认证流程图</p>
<p><img src="https://developers.google.com/accounts/images/webflow.png" alt=""></p>
<div class="tabs" id="authorize"><ul class="nav-tabs"><li class="tab active"><a href="#authorize-1">1.获取凭证 →</a></li><li class="tab"><a href="#authorize-2">2.获取 code →</a></li><li class="tab"><a href="#authorize-3">3.获取 token →</a></li></ul><div class="tab-content"><div class="tab-pane active" id="authorize-1"><p>在  <a href="https://console.developers.google.com/" target="_blank" rel="noopener">Google API Console</a> 中获取 OAuth 2.0 认证凭证(例如  client ID、client secret)。</p></div><div class="tab-pane" id="authorize-2"><p>…</p></div><div class="tab-pane" id="authorize-3"><p>…</p></div></div></div>

]]></content>
      <categories>
        <category>Study Notes</category>
        <category>Google Calendar API</category>
      </categories>
  </entry>
  <entry>
    <title>Study Notes of Regular Expression</title>
    <url>/2020/02/24/Study-Notes-of-Regular-Expression/</url>
    <content><![CDATA[<img src="https://blog.malwarebytes.com/wp-content/uploads/2018/08/regex_puzzle-900x506.jpg" width="100%"/>

<a id="more"></a>

<h2 id="教程"><a href="#教程" class="headerlink" title="教程"></a>教程</h2><blockquote>
<p><a href="https://github.com/ziishaned/learn-regex" target="_blank" rel="noopener">learn-regex | GitHub</a></p>
</blockquote>
<h2 id="什么是正则表达式？"><a href="#什么是正则表达式？" class="headerlink" title="什么是正则表达式？"></a>什么是正则表达式？</h2><blockquote>
<span class="label info">正则表达式</span><mark>是</mark>一组由字母和符号组成的<span class="label info">特殊文本</span>，它可以<mark>用来</mark>从文本中找出满足你想要的格式的句子。
</blockquote>
<h2 id="元字符"><a href="#元字符" class="headerlink" title="元字符"></a>元字符</h2><blockquote>
<p>元字符<mark>不</mark>代表他们本身的字面意思，他们都有特殊的含义。</p>
</blockquote>
<table>
<thead>
<tr>
<th>元字符</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>.</td>
<td>匹配<span class="label info">任意</span><span class="label danger">单个</span>字符<mark>除了</mark>换行符。</td>
</tr>
<tr>
<td>[ ]</td>
<td>字符集。匹配方括号内的任意字符。</td>
</tr>
<tr>
<td>[^ ]</td>
<td>否定的字符种类。匹配<mark>除了</mark>方括号里的任意字符</td>
</tr>
<tr>
<td>*</td>
<td>匹配 <mark>&gt;=0</mark> 个重复的在 <code>*</code> 号之前的字符。</td>
</tr>
<tr>
<td>+</td>
<td>匹配 <mark>&gt;=1</mark> 个重复的 <code>+</code> 号前的字符。</td>
</tr>
<tr>
<td>?</td>
<td>标记 <code>?</code> 之前的字符为<mark>可选</mark>.</td>
</tr>
<tr>
<td>{n,m}</td>
<td>匹配 num 个大括号之间的字符 (n &lt;= num &lt;= m).</td>
</tr>
<tr>
<td>(xyz)</td>
<td>字符集，匹配与 xyz <mark>完全相等</mark>的字符串.</td>
</tr>
<tr>
<td>|</td>
<td>或元字符，匹配符号<span class="label info">前</span><mark>或</mark><span class="label info">后</span>的字符.</td>
</tr>
<tr>
<td>\</td>
<td>转义字符，用于匹配一些<mark>保留字符</mark> `[ ] ( ) { } . * + ? ^ $ \</td>
</tr>
<tr>
<td>^</td>
<td>正则表达式的<mark>开始符号</mark>.</td>
</tr>
<tr>
<td>$</td>
<td>正则表达式的<mark>结束符号</mark>.</td>
</tr>
</tbody></table>
<h3 id="元字符-1"><a href="#元字符-1" class="headerlink" title="元字符 ."></a>元字符 <code>.</code></h3><h3 id="字符集"><a href="#字符集" class="headerlink" title="字符集 []"></a>字符集 <code>[]</code></h3><p>方括号用来指定一个字符集。</p>
<ol>
<li><p>括号中的字符集<mark>不关心顺序</mark>。</p>
<p>表达式<code>[Tt]he</code> 匹配 <code>the</code> 和 <code>The</code></p>
</li>
<li><p>方括号的点号<mark>就</mark>表示点号</p>
<p>表达式 <code>ar[.]</code> 匹配 <code>ar.</code>字符串</p>
</li>
</ol>
<h4 id="否定字符集"><a href="#否定字符集" class="headerlink" title="否定字符集"></a>否定字符集</h4><p>一般来说 <code>^</code> 表示一个字符串的开头，但当它用在方括号里面的开头时，它表示这个字符集是否定的。 例如，表达式 <a href="https://regex101.com/r/nNNlq3/1" target="_blank" rel="noopener"><code>[^c]ar</code></a> 匹配一个后面跟着 <code>ar</code> 的除了 <code>c</code> 的任意字符。</p>
<h3 id="重复次数"><a href="#重复次数" class="headerlink" title="重复次数"></a>重复次数</h3><p>后面跟着元字符 <code>+</code>，<code>*</code> or <code>?</code> 的，用来指定匹配子模式的次数。 这些元字符在不同的情况下有着不同的含义。</p>
<h4 id="元字符-2"><a href="#元字符-2" class="headerlink" title="元字符 *"></a>元字符 <code>*</code></h4><p><code>*</code> 号匹配在 <code>*</code> 之前的字符出现 <mark>&gt;=0</mark> 次。 例如，表达式 <code>a*</code> 匹配 0个或者多个以 a 开头的字符。表达式 <a href="https://regex101.com/r/7m8me5/1" target="_blank" rel="noopener"><code>[a-z]*</code></a> 匹配所有以小写字母开头的字符串。</p>
<p><code>*</code> 元字符和 <code>.</code> 元字符搭配可以匹配所有的字符(<code>.*</code>)。</p>
<p><code>*</code> 和空格元字符 <code>\s</code> 连起来用，如表达式 <a href="https://regex101.com/r/gGrwuz/1" target="_blank" rel="noopener"><code>\s*cat\s*</code></a> 匹配以 0个或多个空格开头，中间是 cat，并且以 0个或多个空格结尾的字符串。</p>
<h4 id="元字符-3"><a href="#元字符-3" class="headerlink" title="元字符 +"></a>元字符 <code>+</code></h4><p><code>+</code> 元字符匹配 <code>+</code> 号之前的字符出现 <mark>&gt;=1</mark> 次。 例如表达式 <a href="https://regex101.com/r/Dzf9Aa/1" target="_blank" rel="noopener"><code>c.+t</code></a> 匹配以字母 <code>c</code> 开头以 <code>t</code> 结尾，中间跟着至少一个字符的字符串。</p>
<h4 id="元字符-4"><a href="#元字符-4" class="headerlink" title="元字符 ?"></a>元字符 <code>?</code></h4><p>元字符 <code>?</code> 表示前面的字符为<mark>可选字符</mark>，即出现 0 次或 1 次。 例如，表达式 <a href="https://regex101.com/r/kPpO2x/1" target="_blank" rel="noopener"><code>[T]?he</code></a> 匹配字符串 <code>he</code> 和 <code>The</code>。</p>
<h3 id="元字符-5"><a href="#元字符-5" class="headerlink" title="元字符 {}"></a>元字符 <code>{}</code></h3><p>在正则表达式中 <code>{}</code> 是一个量词，常用来表示一个或一组字符可以重复出现的次数。 例如，表达式 <a href="https://regex101.com/r/juM86s/1" target="_blank" rel="noopener"><code>[0-9]{2,3}</code></a> 匹配最少 2 位最多 3 位 0~9 的数字。</p>
<p>可以省略第二个参数。 例如，<a href="https://regex101.com/r/Gdy4w5/1" target="_blank" rel="noopener"><code>[0-9]{2,}</code></a> 匹配至少两位 0~9 的数字。</p>
<p>如果逗号也省略掉，则表示重复固定的次数。 例如，<a href="https://regex101.com/r/Sivu30/1" target="_blank" rel="noopener"><code>[0-9]{3}</code></a> 匹配 3 位 0~9 的数字</p>
<h3 id="元字符-6"><a href="#元字符-6" class="headerlink" title="元字符 ()"></a>元字符 <code>()</code></h3><p>元字符 <code>()</code> 表示将括号内的子模式绑定为一个组，将这个组作为一个新的子模式进行匹配。</p>
<p>例如之前说的 <code>{}</code> 是用来表示前面一个字符出现指定次数。但如果在 <code>{}</code> 前用括号将一串字符括起来，则表示整个括号内的字符重复 N 次。例如，表达式 <code>(ab)*</code> 匹配连续出现 0 个或多个 <code>ab</code>。</p>
<p>还可以在 <code>()</code> 中用 <code>|</code> 表示或。例如，<a href="https://regex101.com/r/tUxrBG/1" target="_blank" rel="noopener"><code>(c|g|p)ar</code></a> 匹配 <code>car</code> 或 <code>gar</code> 或 <code>par</code>.</p>
<h3 id="元字符-7"><a href="#元字符-7" class="headerlink" title="元字符 |"></a>元字符 <code>|</code></h3><p>元字符 <code>|</code> 表示或，用作判断条件。</p>
<p>例如 <a href="https://regex101.com/r/fBXyX0/1" target="_blank" rel="noopener"><code>(T|t)he|car</code></a> 匹配 <code>(T|t)he</code> 或 <code>car</code>。</p>
<h3 id="元字符-8"><a href="#元字符-8" class="headerlink" title="元字符 \"></a>元字符 <code>\</code></h3><p>元字符 <code>\</code> 用于转义紧跟其后的字符。用于转义 <code>{ } [ ] / \ + * . $ ^ | ?</code> 这些特殊字符。如果想要匹配这些特殊字符则要在其前面加上反斜线 <code>\</code>。</p>
<p>例如 <code>.</code> 是用来匹配除换行符外的所有单个字符的。如果想要匹配句子中的 <code>.</code> 则要写成 <code>\.</code>。</p>
<p>例如 <a href="https://regex101.com/r/DOc5Nu/1" target="_blank" rel="noopener"><code>(f|c|m)at\.?</code></a> 匹配以 <code>f</code> 或者 <code>c</code> 或者 <code>m</code> 开头，中间是 <code>mt</code>，后面有 0 个或者 1 个 <code>.</code></p>
<h3 id="锚点"><a href="#锚点" class="headerlink" title="锚点"></a>锚点</h3><p>正则表达式中，想要匹配指定开头或结尾的字符串就要使用到锚点。<code>^</code> 指定开头，<code>$</code> 指定结尾。</p>
<h3 id="元字符-9"><a href="#元字符-9" class="headerlink" title="元字符 ^"></a>元字符 <code>^</code></h3><p><code>^</code> 用来检查匹配的字符串是否在所匹配字符串的开头。</p>
<p>例如，在 <code>abc</code> 中使用表达式 <code>^a</code> 会得到结果 <code>a</code>。但如果使用 <code>^b</code> 将匹配不到任何结果。因为在字符串 <code>abc</code> 中并没有以 <code>b</code> 开头的字符串。</p>
<p>例如，<a href="https://regex101.com/r/jXrKne/1" target="_blank" rel="noopener"><code>^(T|t)he</code></a> 匹配以 <code>The</code> 或 <code>the</code> 开头的字符串。</p>
<h3 id="元字符-10"><a href="#元字符-10" class="headerlink" title="元字符 $"></a>元字符 <code>$</code></h3><p>与 <code>^</code> 同理，元字符 <code>$</code> 用来检查匹配的字符串是否在所匹配字符串的结尾。</p>
<p>例如，<a href="https://regex101.com/r/t0AkOd/1" target="_blank" rel="noopener"><code>(at\.)$</code></a> 匹配以 <code>at.</code> 结尾的字符串。</p>
<h2 id="简写字符集"><a href="#简写字符集" class="headerlink" title="简写字符集"></a>简写字符集</h2><p>正则表达式提供一些常用的字符集简写。如下:</p>
<table>
<thead>
<tr>
<th>简写</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>.</td>
<td>除<mark>换</mark>行符外的所有单个字符</td>
</tr>
<tr>
<td>\w</td>
<td>匹配所有<mark>字母数字</mark>，等同于 <code>[a-zA-Z0-9_]</code></td>
</tr>
<tr>
<td>\W</td>
<td>匹配所有<mark>非字母数字</mark>，即符号，等同于： <code>[^\w]</code></td>
</tr>
<tr>
<td>\d</td>
<td>匹配<mark>数字</mark>： <code>[0-9]</code></td>
</tr>
<tr>
<td>\D</td>
<td>匹配<mark>非数字</mark>： <code>[^\d]</code></td>
</tr>
<tr>
<td>\s</td>
<td>匹配所有<mark>空格字符</mark>，等同于： <code>[\t\n\f\r\p{Z}]</code></td>
</tr>
<tr>
<td>\S</td>
<td>匹配所有<mark>非空格字符</mark>： <code>[^\s]</code></td>
</tr>
<tr>
<td>\f</td>
<td>匹配一个<mark>换页符</mark></td>
</tr>
<tr>
<td>\n</td>
<td>匹配一个<mark>换行符</mark></td>
</tr>
<tr>
<td>\r</td>
<td>匹配一个<mark>回车符</mark></td>
</tr>
<tr>
<td>\t</td>
<td>匹配一个<mark>制表符</mark></td>
</tr>
<tr>
<td>\v</td>
<td>匹配一个<mark>垂直制表符</mark></td>
</tr>
<tr>
<td>\p</td>
<td>匹配 CR/LF（等同于 <code>\r\n</code>），用来匹配 DOS 行<mark>终止符</mark></td>
</tr>
</tbody></table>
<h2 id="零宽度断言"><a href="#零宽度断言" class="headerlink" title="零宽度断言"></a>零宽度断言</h2><p>零宽度断言用来指定一个<mark>位置(零宽度)</mark>，这个位置应该满足一定的<mark>条件(断言)</mark>。断言其实就相当于一个布尔值，只能是 0 或者 1。</p>
<p>由零宽度断言的定义可以看出来，它必须和和其他的表达式结合起来使用才具有意义，否则单纯的零宽度断言表达式的匹配结果就是个位置，什么字符都没有！</p>
<p>零宽度断言共四种：</p>
<table>
<thead>
<tr>
<th>符号</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>?=</td>
<td>正先行断言</td>
</tr>
<tr>
<td>?!</td>
<td>负先行断言</td>
</tr>
<tr>
<td>?&lt;=</td>
<td>正后发断言</td>
</tr>
<tr>
<td>?&lt;!</td>
<td>负后发断言</td>
</tr>
</tbody></table>
<p>理解：</p>
<ul>
<li>正/负：指是否满足条件(即断言)，正(负)表示(不)满足。</li>
<li>先行/后发：指的是位置(最终的匹配结果)和条件(即断言)的前后关系，先行(后发)指位置在条件前(后)。</li>
</ul>
<p>另外，零宽度断言都要用括号扩起来。</p>
<h3 id="正先行断言"><a href="#正先行断言" class="headerlink" title="正先行断言 ?="></a>正先行断言 <code>?=</code></h3><p>语法：<code>表达式1(?=表达式2)</code></p>
<p>表示满足表达式1的字符串后面必须跟着满足表达式2的字符串，结果只返回满足匹配表达式1的字符串。</p>
<p>例如，表达式 <a href="https://regex101.com/r/IDDARt/1" target="_blank" rel="noopener"><code>(T|t)he(?=\sfat)</code></a> 匹配 <code>The</code> 或者 <code>the</code>，而且 <code>The</code> 和 <code>the</code> 后面紧跟着 <code>空格fat</code>。</p>
<h3 id="负先行断言"><a href="#负先行断言" class="headerlink" title="负先行断言 ?!"></a>负先行断言 <code>?!</code></h3><p>语法：<code>表达式1(?=表达式2)</code></p>
<p>表示满足表达式1的字符串后面必须<mark>不</mark>能跟着满足表达式2的字符串，结果只返回满足匹配表达式1的字符串。</p>
<p>例如，表达式 <a href="https://regex101.com/r/V32Npg/1" target="_blank" rel="noopener"><code>(T|t)he(?!\sfat)</code></a> 匹配 <code>The</code> 或者 <code>the</code>，而且 <code>The</code> 和 <code>the</code> 后面<mark>不</mark>跟着 <code>空格fat</code>。</p>
<h3 id="正后发断言-lt"><a href="#正后发断言-lt" class="headerlink" title="正后发断言 ?&lt;="></a>正后发断言 <code>?&lt;=</code></h3><p>语法：<code>(?&lt;=表达式1)表达式2</code></p>
<p>表示满足表达式2的字符串<mark>前</mark>面面必须能跟着满足表达式1的字符串，结果只返回满足匹配表达式2的字符串。</p>
<p>例如，表达式 <a href="https://regex101.com/r/avH165/1" target="_blank" rel="noopener"><code>(?&lt;=(T|t)he\s)(fat|mat)</code></a> 匹配 <code>fat</code> 和 <code>mat</code>，且其前面跟着 <code>The空格</code> 或 <code>the空格</code>。</p>
<h3 id="负后发断言-lt"><a href="#负后发断言-lt" class="headerlink" title="负后发断言 ?&lt;!"></a>负后发断言 <code>?&lt;!</code></h3><p>语法：<code>(?&lt;!表达式1)表达式2</code></p>
<p>表示满足表达式2的字符串<mark>前</mark>面面必须<mark>不</mark>能跟着满足表达式1的字符串，结果只返回满足匹配表达式2的字符串。</p>
<p>例如，表达式 <a href="https://regex101.com/r/8Efx5G/1" target="_blank" rel="noopener"><code>(?&lt;!(T|t)he\s)(cat)</code></a> 匹配 <code>cat</code>，且其前<mark>不</mark>跟着 <code>The</code> 或 <code>the</code>。</p>
<h2 id="标志"><a href="#标志" class="headerlink" title="标志"></a>标志</h2><p>标志也叫<span class="label info">模式修正符</span>，因为它可以用来修改表达式的搜索结果。 这些标志可以任意的组合使用，它也是整个正则表达式的一部分。</p>
<table>
<thead>
<tr>
<th>标志</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>i</td>
<td>忽略大小写。</td>
</tr>
<tr>
<td>g</td>
<td>全局搜索。</td>
</tr>
<tr>
<td>m</td>
<td>多行修饰符：锚点元字符 <code>^</code> <code>$</code> 工作范围在每行的起始。</td>
</tr>
</tbody></table>
<h3 id="忽略大小写（Case-Insensitive）"><a href="#忽略大小写（Case-Insensitive）" class="headerlink" title="忽略大小写（Case Insensitive）"></a>忽略大小写（Case Insensitive）</h3><p>修正符 <code>i</code> 用于忽略大小写。 例如，表达式 <a href="https://regex101.com/r/ahfiuh/1" target="_blank" rel="noopener"><code>/The/gi</code></a> 表示在全局搜索 <code>The</code>，在后面的 <code>i</code> 将其条件修改为忽略大小写，则变成搜索 <code>the</code> 和 <code>The</code>，<code>g</code> 表示全局搜索。</p>
<h3 id="全局搜索（Global-search）"><a href="#全局搜索（Global-search）" class="headerlink" title="全局搜索（Global search）"></a>全局搜索（Global search）</h3><p>修正符 <code>g</code> 常用于执行一个全局搜索匹配，即不仅仅返回第一个匹配的，而是返回全部。 例如，表达式 <a href="https://regex101.com/r/dO1nef/1" target="_blank" rel="noopener"><code>/.(at)/g</code></a> 表示全局搜索 <code>非换行符以外任意单个字符</code> 后面跟着 <code>at</code>。</p>
<h3 id="多行修正符（Multiline）"><a href="#多行修正符（Multiline）" class="headerlink" title="多行修正符（Multiline）"></a>多行修正符（Multiline）</h3><p>多行修正符 <code>m</code> 用于执行一个多行匹配。</p>
<p>之前介绍的 <code>^</code> 和 <code>$</code> 用于检查模式是否是在待检测字符串的开头或结尾。但我们如果想要它在<mark>每</mark>行的开头和结尾生效，我们需要用到多行修正符 <code>m</code>。</p>
<p>例如，表达式 <a href="https://regex101.com/r/E88WE2/1" target="_blank" rel="noopener"><code>/at(.)?$/gm</code></a> 表示小写字符 <code>a</code> 后跟小写字符 <code>t</code> ，末尾再跟上一个除换行符以外的任意字符，再根据 <code>m</code> 修正符，现在表达式匹配每行的结尾。</p>
<h3 id="贪婪匹配与惰性匹配（Greedy-vs-lazy-matching）"><a href="#贪婪匹配与惰性匹配（Greedy-vs-lazy-matching）" class="headerlink" title="贪婪匹配与惰性匹配（Greedy vs lazy matching）"></a>贪婪匹配与惰性匹配（Greedy vs lazy matching）</h3><p>正则表达式默认采用贪婪匹配模式，在该模式下意味着会匹配尽可能长的子串。我们可以使用 <code>?</code> 将贪婪匹配模式转化为惰性匹配模式。</p>
<p>例如 <a href="https://regex101.com/r/AyAdgJ/1" target="_blank" rel="noopener"><code>/(.*at)/</code></a> 表示匹配以 <code>at</code> 结尾，前面有任意多个非换行字符的子字符串中长度最<mark>长</mark>的一个。</p>
<p>而 <a href="https://regex101.com/r/AyAdgJ/2" target="_blank" rel="noopener"><code>/(.*?at)/</code></a> 表示匹配以 <code>at</code> 结尾，前面有任意多个非换行字符的子字符串中长度最短的一个。</p>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><h3 id="以某个字符串开始字符串，并且以另一个字符串结尾字符串"><a href="#以某个字符串开始字符串，并且以另一个字符串结尾字符串" class="headerlink" title="以某个字符串开始字符串，并且以另一个字符串结尾字符串"></a>以某个字符串开始字符串，并且以另一个字符串结尾字符串</h3><p>例如要搜索以 <code>https://img.alicdn.com</code> 开始，以 <code>jpg_80x80.jpg</code> 结束的子字符串。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">https:\&#x2F;\&#x2F;img\.alicdn\.com.*jpg_80x80\.jpg</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Study Notes</category>
        <category>Regular Expression</category>
      </categories>
  </entry>
  <entry>
    <title>Changsha</title>
    <url>/2020/01/17/Changsha-Tour/</url>
    <content><![CDATA[<img src="https://www.minmetalsland.com/uploads/allimg/191204/1-1912040UI9E6.jpg" width="100%"/>

<a id="more"></a>

<blockquote>
<p><a href="https://www.mafengwo.cn/gonglve/ziyouxing/217006.html" target="_blank" rel="noopener">长沙初游地盘点（吃喝玩乐1-5日游路线推荐）</a></p>
<p><a href="https://www.mafengwo.cn/gonglve/ziyouxing/45884.html" target="_blank" rel="noopener">长沙美食评测，我吃的那些美食街区及餐厅</a></p>
</blockquote>
<h2 id="总揽"><a href="#总揽" class="headerlink" title="总揽"></a>总揽</h2><iframe  width='100%' height='700' frameBorder='0' src='https://libo9527.github.io/static/map/amap/2020-0117-0120/changsha/all/index.html'>
</iframe>

<h3 id="行程规划"><a href="#行程规划" class="headerlink" title="行程规划"></a>行程规划</h3><iframe  width='100%' height='700' frameBorder='0' src='https://libo9527.github.io/static/map/amap/2020-0117-0120/changsha/timeline/index.html'>
</iframe>]]></content>
      <categories>
        <category>Tour</category>
      </categories>
      <tags>
        <tag>Tour</tag>
      </tags>
  </entry>
  <entry>
    <title>The Southern Sacred Mountain Hengshan</title>
    <url>/2020/01/15/The-Southern-Sacred-Mountain-Hengshan/</url>
    <content><![CDATA[<img src="http://buy.nanyue.net.cn/image/cache/catalog/spot-1-500x282.png" width="100%"/>

<a id="more"></a>

<h2 id="南岳衡山"><a href="#南岳衡山" class="headerlink" title="南岳衡山"></a>南岳衡山</h2><blockquote>
<p><a href="http://www.nanyue.net.cn/" target="_blank" rel="noopener">南岳</a></p>
<p><a href="http://www.mafengwo.cn/gonglve/ziyouxing/69466.html" target="_blank" rel="noopener">徒步登顶南岳衡山祝融峰，行程详解</a></p>
<p><a href="http://www.mafengwo.cn/gonglve/ziyouxing/76418.html" target="_blank" rel="noopener">这里有一份爬衡山超详细问题解答，快收</a><br>去衡山看什么？<br>一是南岳佛道并存的宗教文化，从山脚到山顶都有许多寺庙、道观，有没有信仰都可以去参观欣赏。<br>二当然是山里的自然环境、溪水湖泊等等。<br>三是登顶远望，早晚可以看日出日落，夜晚看星空，天气不好时可以看云海，冬季可以看雾凇。</p>
<p>无论是云海日出、雾凇冰挂、冰雪奇观，还是当地美食，衡山都值得一去。中华五岳，恒山如行，泰山如坐，华山如立，嵩山如卧，<strong>唯有南岳独如飞。</strong></p>
<p><a href="http://richuriluo.qhdi.com/poi/172579.html" target="_blank" rel="noopener">中国湖南省衡阳市衡山县的日出日落时间表</a><br>2020-01-18 日出时间: 07:19:12 AM 日落时间: 05:58:14 PM</p>
<p>南岳四绝<br>“南岳四绝”是关于衡山的四个著名景点而言的，即：祝融峰之高、方广寺之深、藏经阁之秀和水帘洞之奇。<br><a href="http://www.mafengwo.cn/i/3484391.html" target="_blank" rel="noopener">6个小时玩转南岳（超强攻略）</a><br>忠烈祠是我国唯一纪念国军在抗日中死去将士的祠堂)</p>
<p><a href="http://www.mafengwo.cn/i/17454946.html" target="_blank" rel="noopener">衡山 | 访佛道大庙，走梵音古道，观烟云日出，汇攻略干</a></p>
<p><a href="http://www.mafengwo.cn/i/8226062.html" target="_blank" rel="noopener">看衡山雾凇，住寺庙中，找得一条雪多人少的路，一直走到白</a></p>
</blockquote>
<h3 id="上下山线路图"><a href="#上下山线路图" class="headerlink" title="上下山线路图"></a>上下山线路图</h3><iframe  width='100%' height='700' frameBorder='0' src='https://libo9527.github.io/static/map/amap/2020-0117-0120/hengshan/index.html'>
</iframe>

<h3 id="行程规划"><a href="#行程规划" class="headerlink" title="行程规划"></a>行程规划</h3><iframe  width='100%' height='700' frameBorder='0' src='https://libo9527.github.io/static/map/amap/2020-0117-0120/hengshan/timeline/index.html'>
</iframe>



<h3 id="南岳大庙"><a href="#南岳大庙" class="headerlink" title="南岳大庙"></a>南岳大庙</h3><p>南岳大庙分为九进四重院落，包括正殿、寝宫、御书楼、盘龙亭等建筑。四周围以红墙，角楼高耸，寿涧山泉，绕墙流注，颇似北京故宫风貌。南岳大庙佛道共存，东侧为八个道观，西侧为八个佛寺，堪称我国寺庙一绝。南岳大庙四群院落和九个建筑体组成，保持了唐宋以来的艺术精华。</p>
<p>南岳大庙是中国江南最大的古建筑群，有”江南第一庙””南国故宫”之称，根据现存资料记载始建于唐，后经唐、宋、元、明、清六次大火和十六次修缮扩建，于光绪八年(1882年)形成现在98500平方米的规模。<br>南岳大庙分为九进四重院落，四周围以红墙，角楼高耸，寿涧山泉，绕墙流注，颇似北京故宫风貌。南岳大庙佛道共存，东侧为八个道观，西侧为八个佛寺，堪称我国寺庙一绝，每年八月十五，这里都要举行盛大规模的庙会，不少东南亚的佛国华侨，日本佛教界人士，以及回乡的善男信女，都不惜长途跋涉来此朝拜，因此这里常年香火不息。</p>
<h3 id="祝融峰"><a href="#祝融峰" class="headerlink" title="祝融峰"></a>祝融峰</h3><p>祝融峰是南岳最高峰，离上封寺不到一里，海拔1290米。祝融峰的名字与上古的神话有关，相传祝融是黄帝身边的大臣，是火神，他曾以衡山为栖息之所，死后葬在衡山的最高峰，后人便以它的名字命名该峰。祝融峰上有祝融殿，因山高风大，所以建筑是用坚固的花岗岩砌墙，以铁瓦盖的顶，殿宇凌风傲雪，巍然屹立在绝顶巨石之上。殿后有望月台，是一块高耸的巉岩，上有石刻，字迹清晰可辨。</p>
<p>【景区交通】<br>景区交通实行“车索一体化”（就是一张票通用）经营。你可以关注“南岳 <a href="http://www.mafengwo.cn/travel-scenic-spot/mafengwo/11886.html" target="_blank" rel="noopener">衡山</a> 景区交通”微信公众号在线购票，上车时候出示二维码。上行（环保车或者索道，包括支线车）44元，下行44元，上下行78元。环保车班次很密集，运行线为“R”形（这个R要仔细看，才明白）：<br>上行线路始发站为游客服务中心，途经华严湖、忠烈祠、诚信林、 <a href="http://www.mafengwo.cn/travel-scenic-spot/mafengwo/143811.html" target="_blank" rel="noopener">延寿</a> 亭、穿岩诗林到达半山亭换乘站。在半山亭换乘站可选择乘坐环保车途经磨镜台、西岭、民俗文化城到达南 <a href="http://www.mafengwo.cn/travel-scenic-spot/mafengwo/62977.html" target="_blank" rel="noopener">天门</a> ；也可以换乘索道直达南 <a href="http://www.mafengwo.cn/travel-scenic-spot/mafengwo/62977.html" target="_blank" rel="noopener">天门</a> 。<br>下行线路始发站为南 <a href="http://www.mafengwo.cn/travel-scenic-spot/mafengwo/62977.html" target="_blank" rel="noopener">天门</a> 。环保车由东线往下行驶，依次经过邺候书院、财富山庄到达半山亭，也可以乘坐索道直达半山亭。到达半山亭后乘坐环保车途经忠烈祠、华严湖到达终点站游客服务中心。</p>
<p><a href="http://www.mafengwo.cn/photo/11886/scenery_17454946/873929145.html" target="_blank" rel="noopener"><img src="http://p1-q.mafengwo.net/s15/M00/53/78/CoUBGV2djD-AMWPBAAKLaQevPEI381.jpg?imageMogr2%2Fthumbnail%2F1360x%2Fstrip%2Fquality%2F90" alt="img"></a><a href="http://www.mafengwo.cn/poi/6325752.html" target="_blank" rel="noopener">南岳衡山</a></p>
<p>tips：<br>1、环保车可以随时停下，但是要到指定站点上车。<br>2、这张图上标出了 <a href="http://www.mafengwo.cn/travel-scenic-spot/mafengwo/11886.html" target="_blank" rel="noopener">衡山</a> 三大碑（“五岳独秀”、“寿比南山”、“南岳 <a href="http://www.mafengwo.cn/travel-scenic-spot/mafengwo/11886.html" target="_blank" rel="noopener">衡山</a> ”）的前两个碑位置，打卡的游客不要错过，“南岳 <a href="http://www.mafengwo.cn/travel-scenic-spot/mafengwo/11886.html" target="_blank" rel="noopener">衡山</a> ”碑在山顶祝融庙旁。<br>3、这张图让我踩了两个坑，a、梵音古道只画了一半；b、各景点距离仅参考。后面景区路线部分详说。</p>
<p>【景区路线】<br>我原本的计划上山全程徒步，下山返程索道公交。前面说的两个坑的第一个，下图才是梵音古道的全程图，终点在邺候书院。吐槽一下 <a href="http://www.mafengwo.cn/travel-scenic-spot/mafengwo/11886.html" target="_blank" rel="noopener">衡山</a> 的指示牌，我在梵音古道走丢了，后来查了一下，应该是在上桎木潭迷路了，我却直接向上，走到半山亭了，没有去成忠烈祠，返程时候补打了个卡。</p>
<p><a href="http://www.mafengwo.cn/photo/11886/scenery_17454946/873987914.html" target="_blank" rel="noopener"><img src="http://p1-q.mafengwo.net/s15/M00/5D/E4/CoUBGV2dkPeASI3AABOfMnbaS1I888.jpg?imageMogr2%2Fthumbnail%2F1360x%2Fstrip%2Fquality%2F90" alt="img"></a><a href="http://www.mafengwo.cn/poi/6325752.html" target="_blank" rel="noopener">南岳衡山</a></p>
<p>第二个坑，不要被各景点间标识的公里数误导，不能按照里程估算所耗时间（体力）。下图是我南岳GPS记录。在半山亭有两个分叉。我先去看一下麻姑仙境、磨镜台，从半山亭到磨镜台2km（下图那么长的线），坡度不大，大概20-30分钟就能走完。但是从半山亭到南 <a href="http://www.mafengwo.cn/travel-scenic-spot/mafengwo/62977.html" target="_blank" rel="noopener">天门</a> 几乎全是上坡，花了我整整一个半小时。</p>
<p><a href="http://www.mafengwo.cn/photo/11886/scenery_17454946/874064156.html" target="_blank" rel="noopener"><img src="http://p1-q.mafengwo.net/s15/M00/6C/32/CoUBGV2dl0aAePiwAADxNNksVa0451.jpg?imageMogr2%2Fthumbnail%2F1360x%2Fstrip%2Fquality%2F90" alt="img"></a><a href="http://www.mafengwo.cn/poi/6325752.html" target="_blank" rel="noopener">南岳衡山</a></p>
<p>【其它】<br>1、除了梵音古道外，登山途中的补给点还是比较多的。矿泉水最贵的为5元，所以不用背负太多水。不过各个卖点的水果偏少。<br>2、各种公众号（景区、景区交通）、app可以提前下载好。</p>
]]></content>
      <categories>
        <category>Scenic Spot</category>
      </categories>
      <tags>
        <tag>Scenic Spot</tag>
      </tags>
  </entry>
  <entry>
    <title>Hunan Tour at Spring 2020</title>
    <url>/2020/01/10/Hunan-Tour-at-Spring-2020/</url>
    <content><![CDATA[<img src="http://n1-q.mafengwo.net/s5/M00/3C/C8/wKgB21A-JrDEN_kzAAnaoaVE30Y54.jpeg?imageView2%2F2%2Fw%2F2000%2Fh%2F600%2Fq%2F90" width="100%"/>

<a id="more"></a>

<h2 id="总揽"><a href="#总揽" class="headerlink" title="总揽"></a>总揽</h2><iframe  width='100%' height='700' frameBorder='0' src='https://libo9527.github.io/static/map/amap/2020-0117-0120/all/index.html?_ijt=ue33lrqvmo27reetlcsf3qpdn'>
</iframe>


<h2 id="往返线路"><a href="#往返线路" class="headerlink" title="往返线路"></a>往返线路</h2><iframe  width='100%' height='700' frameBorder='0' src='https://libo9527.github.io/static/map/amap/2020-0124-0131/round-trip-route-map/index.html'>
</iframe>

<h3 id="深圳-株洲-衡山-长沙-岳阳-北京"><a href="#深圳-株洲-衡山-长沙-岳阳-北京" class="headerlink" title="深圳 - 株洲 - 衡山 - 长沙 - 岳阳 - 北京"></a>深圳 - 株洲 - 衡山 - 长沙 - 岳阳 - 北京</h3><table>
<thead>
<tr>
<th>车次/航班</th>
<th>起始站</th>
<th>终点站</th>
<th>起始时间</th>
<th>到达时间</th>
<th>票价</th>
<th>状态</th>
<th>乘客</th>
<th>渠道</th>
<th>账号</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>K6618</td>
<td>深圳</td>
<td>株洲</td>
<td>2020-01-18 01:05</td>
<td>2020-01-18 10:43</td>
<td>无座：¥77</td>
<td><sapn style="color: green; font-weight: bolder;">已出票</span></td>
<td>李博</td>
<td>12306</td>
<td><a href="mailto:871759358@qq.com">871759358@qq.com</a></td>
<td></td>
</tr>
<tr>
<td>K9001</td>
<td>株洲</td>
<td>衡山</td>
<td>2020-01-18 10:59</td>
<td>2020-01-18 11:49</td>
<td>硬座：¥14.5</td>
<td><sapn style="color: green; font-weight: bolder;">已出票</span><br /><sapn style="color: #31E69D; font-weight: bolder;">15 车 108号</span></td>
<td>李博</td>
<td>12306</td>
<td><a href="mailto:871759358@qq.com">871759358@qq.com</a></td>
<td></td>
</tr>
<tr>
<td>K9002</td>
<td>衡山</td>
<td>长沙</td>
<td>2020-01-19 15:35</td>
<td>2020-01-19 17:19</td>
<td>硬座：¥21.5</td>
<td><sapn style="color: green; font-weight: bolder;">已出票</span><br /><sapn style="color: #31E69D; font-weight: bolder;">15 车 110号</span></td>
<td>李博</td>
<td>12306</td>
<td><a href="mailto:871759358@qq.com">871759358@qq.com</a></td>
<td></td>
</tr>
<tr>
<td>K968</td>
<td>长沙</td>
<td>岳阳</td>
<td>2020-01-20 07:45</td>
<td>2020-01-20 09:13</td>
<td>硬座：¥23.5</td>
<td><sapn style="color: green; font-weight: bolder;">已出票</span><br /><sapn style="color: #31E69D; font-weight: bolder;">6 车 003号</span></td>
<td>李博</td>
<td>12306</td>
<td><a href="mailto:871759358@qq.com">871759358@qq.com</a></td>
<td></td>
</tr>
<tr>
<td>中国联合航空KN5806</td>
<td>岳阳三荷机场</td>
<td>北京大兴国际机场</td>
<td>2020-01-20 15:40</td>
<td>2020-01-20 18:00</td>
<td>机票：¥200 <br />机建燃油：¥50</td>
<td><sapn style="color: green; font-weight: bolder;">已出票</span><br /><sapn style="color: #31E69D; font-weight: bolder;">值机柜台：1-6</sapn><br /><sapn style="color: #31E69D; font-weight: bolder;">预约座位：38A</span></td>
<td>李博</td>
<td>飞猪</td>
<td>18598046892</td>
<td></td>
</tr>
</tbody></table>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><table>
<thead>
<tr>
<th>车次/航班</th>
<th>起始站</th>
<th>终点站</th>
<th>起始时间</th>
<th>到达时间</th>
<th>票价</th>
<th>状态</th>
<th>乘客</th>
<th>渠道</th>
<th>账号</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>K6618</td>
<td>深圳</td>
<td>长沙</td>
<td>2020-01-17 01:05</td>
<td>2020-01-17 18:13</td>
<td>硬座：¥112<br />退票费：¥4</td>
<td><sapn style="color: red; font-weight: bolder;">已退票</span></td>
<td>李博</td>
<td>12306</td>
<td><a href="mailto:871759358@qq.com">871759358@qq.com</a></td>
<td></td>
</tr>
<tr>
<td><a href="http://www.huochepiao.com/search/chaxun/resultc.asp?txtCheCi=K1348" target="_blank" rel="noopener">K1348</a></td>
<td>深圳</td>
<td>长沙</td>
<td>2020-01-24 08:10</td>
<td>2020-01-24 18:13</td>
<td>硬座：¥112<br />退票费：¥5.5</td>
<td><sapn style="color: red; font-weight: bolder;">已退票</span></td>
<td>李博</td>
<td>12306</td>
<td>twhssz</td>
<td></td>
</tr>
<tr>
<td>海航HU7136</td>
<td>长沙黄花机场T2</td>
<td>北京首都机场T1</td>
<td>2020-01-24 21:45</td>
<td>2020-01-24 23:55</td>
<td>机票：¥238<br />燃油：¥50<br />退票费：¥71</td>
<td><sapn style="color: red; font-weight: bolder;">已退票</span></td>
<td>李博</td>
<td>携程</td>
<td>18598046892</td>
<td></td>
</tr>
</tbody></table>
<h2 id="行程安排"><a href="#行程安排" class="headerlink" title="行程安排"></a><a href="https://libo9527.github.io/static/map/amap/2020-0117-0120/timeline/index.html" target="_blank" rel="noopener">行程安排</a></h2><iframe  width='100%' height='700' frameBorder='0' src='https://libo9527.github.io/static/map/amap/2020-0117-0120/timeline/index.html'>
</iframe>

<h2 id="景点"><a href="#景点" class="headerlink" title="景点"></a>景点</h2><h3 id="南岳衡山"><a href="#南岳衡山" class="headerlink" title="南岳衡山"></a><a href="https://libo9527.github.io/2020/01/15/The-Southern-Sacred-Mountain-Hengshan/" target="_blank" rel="noopener">南岳衡山</a></h3><h2 id="必备物品"><a href="#必备物品" class="headerlink" title="必备物品"></a>必备物品</h2><ol>
<li>牙刷、牙膏、面巾纸</li>
<li>雨伞</li>
<li>现金</li>
</ol>
<h2 id="支出明细"><a href="#支出明细" class="headerlink" title="支出明细"></a>支出明细</h2><table>
<thead>
<tr>
<th>名称</th>
<th>支付时间</th>
<th>支付金额</th>
<th>支付渠道</th>
<th>支付方式</th>
<th>商品类型</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>路飞青年旅舍</td>
<td>2020-01-17 15:43</td>
<td>¥40</td>
<td>南岳官网</td>
<td>支付宝</td>
<td>住宿</td>
<td>2020-01-19 ～ 2020-01-20</td>
</tr>
<tr>
<td>衡山门票</td>
<td>2020-01-17 12:25</td>
<td>¥80</td>
<td>南岳官网</td>
<td>支付宝</td>
<td>门票</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>总计</td>
<td></td>
<td>¥80</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>Tour</category>
      </categories>
      <tags>
        <tag>Tour</tag>
      </tags>
  </entry>
  <entry>
    <title>Forbidden City</title>
    <url>/2020/01/10/Forbidden-City/</url>
    <content><![CDATA[<img src="http://img.mp.itc.cn/upload/20160507/9df596813d3640468330b7bf6535f336_th.jpg" width="100%"/>

<a id="more"></a>

<h3 id="故宫"><a href="#故宫" class="headerlink" title="故宫"></a>故宫</h3><blockquote>
<p><a href="https://www.dpm.org.cn/Home.html" target="_blank" rel="noopener">故宫博物院</a></p>
<p><a href="http://webapp.vizen.cn/gugong_app_pc/index.html" target="_blank" rel="noopener">全景故宫</a></p>
<p><a href="http://tv.cntv.cn/videoset/C15339" target="_blank" rel="noopener">《故宫》_纪录片_视频_央视网</a></p>
</blockquote>
<h4 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h4><ul>
<li>中国明清两代皇朝的宫殿</li>
<li>世界上保留最大最完整的宫殿建筑群</li>
<li>故宫的整座城池建造暗合五行阴阳学说，是中国传统风水理念的完美实践作品。</li>
<li>北京故宫（旧称紫禁城）——明、清两代皇宫的遗址。</li>
<li>1987年，被联合国教科文组织列入“世界文化遗产”名录。</li>
</ul>
<h4 id="购票说明"><a href="#购票说明" class="headerlink" title="购票说明"></a>购票说明</h4><ul>
<li>门票提前10天预售，售完为止。</li>
<li>故宫购票实行实名制，所有观众需录入身份证或护照信息方可预定。</li>
<li>下单时填写了二代身份证号的观众可在入院日当日持身份证或户口本原件在任意检票口直接入院，无须兑换纸质门票。</li>
</ul>
<h4 id="时间"><a href="#时间" class="headerlink" title="时间"></a>时间</h4><p>除法定节假日，故宫博物院全年实行周一闭馆。</p>
<p><img src="https://gugong.ktmtech.cn/Content/images/canguantime.png" alt=""></p>
<h4 id="路线"><a href="#路线" class="headerlink" title="路线"></a>路线</h4><ul>
<li>午门（南门）：只作为参观入口，观众一律从午门进入故宫；</li>
<li>神武门（北门）：只作为参观出口；</li>
<li>东华门（东门）：只作为参观出口；</li>
</ul>
<h4 id="票务政策"><a href="#票务政策" class="headerlink" title="票务政策"></a>票务政策</h4><h5 id="门票价格："><a href="#门票价格：" class="headerlink" title="门票价格："></a>门票价格：</h5><p>（1）每年4月1日至10月31日为旺季，大门票60元/人；<br>（2）每年11月1日至次年3月31日为淡季，大门票40元/人。<br>（3）珍宝馆（即进入宁寿宫区，还包括戏曲馆、石鼓馆）参观门票：10元/人。<br>（4）钟表馆（即进入奉先殿区）参观门票：10元/人。</p>
<h5 id="主开放区优惠政策（不含珍宝馆、钟表馆）："><a href="#主开放区优惠政策（不含珍宝馆、钟表馆）：" class="headerlink" title="主开放区优惠政策（不含珍宝馆、钟表馆）："></a>主开放区优惠政策（不含珍宝馆、钟表馆）：</h5><p>（2）6周岁（不含6周岁）至18周岁（含18周岁）未成年人，可凭身份证、户口本或护照购买学生票，20元/人。<br>（3）60岁以上（含60岁）老年人凭身份证原件，门票半价优惠。<br>（6）6周岁（含6周岁）以下或身高1.2米（含1.2米）以下儿童免票参观。<br>（7）残疾人凭残疾人证件，免票参观。</p>
<h5 id="内馆优惠政策（珍宝馆、钟表馆）："><a href="#内馆优惠政策（珍宝馆、钟表馆）：" class="headerlink" title="内馆优惠政策（珍宝馆、钟表馆）："></a>内馆优惠政策（珍宝馆、钟表馆）：</h5><p>（2）6周岁（不含6周岁）至18周岁（含18周岁）未成年人，可凭身份证、户口本或护照购买学生票，5元/人。<br>（3）60岁以上（含60岁）老年人凭身份证原件，门票半价优惠，5元/人。<br>（6）6周岁（含6周岁）以下或身高1.2米（含1.2米）以下儿童免票参观。<br>（7）残疾人凭残疾人证件，免票参观。</p>
<h4 id="客服服务时间"><a href="#客服服务时间" class="headerlink" title="客服服务时间"></a>客服服务时间</h4><p>旺季（每年4月1日至10月31日）8:30-16:15<br>淡季（每年11月1日至次年3月31日）8:30-15:45<br>注：除法定节假日，故宫博物院全年实行周一闭馆，闭馆期间不提供服务。</p>
<h4 id="观众守则"><a href="#观众守则" class="headerlink" title="观众守则"></a>观众守则</h4><ul>
<li>禁止吸烟。</li>
<li>禁止刻画涂写。</li>
<li>在展厅请勿使用闪光灯和三脚架拍照。</li>
<li>请勿随地吐痰。</li>
<li>请勿乱丢垃圾废物。</li>
</ul>
<h4 id="故宫-100-解说词"><a href="#故宫-100-解说词" class="headerlink" title="故宫 100 解说词"></a>故宫 100 解说词</h4><blockquote>
<p><a href="https://www.youtube.com/watch?v=bGm0j9qB8fg&list=PLwXMmy5fUrVwfYRkCSvET1ksp-Ep6SJT5" target="_blank" rel="noopener">故宫 100 | YouTube</a></p>
<p><a href="https://www.bilibili.com/video/av4114589/" target="_blank" rel="noopener">【央视纪录片】故宫100【全100集】【720P】 - 哔哩哔哩</a></p>
</blockquote>
<h5 id="1-天地之间"><a href="#1-天地之间" class="headerlink" title="1 天地之间"></a>1 天地之间</h5><p>气味、声音、光线，稍纵即逝，被时光切割的记忆构成了我们的生活，而对于这座城，我们几乎没有记忆，因为从前百姓不能进入这座城，他的记忆只属于皇帝，皇帝的记忆不能说，别人也无从知道，那些想象中已经褪色的历史，如今依然清晰的封存在这个空间散落的碎片里。一座城，一座大得令人茫然的城。<br>它是大地上长出的天空之城，人在天地间，也在历史和现实间。秦时明月，汉唐风度，在这明清的城里，我们生活中那些被称为历史的东西可以被真实的触摸，走进这座城，不论是有心还是无意，都会留下与这座城彼此映照的影像，成为它记忆中一部分，紫禁城是一面镜子，天空、大地、记忆、未来，所有的地方，所有的时光，所有有情的生命都刻在这一刻的映照中被唤醒</p>
<h5 id="2-至大无外"><a href="#2-至大无外" class="headerlink" title="2 至大无外"></a>2 至大无外</h5><p>紫，是古人心目中的王者之星,紫薇，来自天上。<br>禁，是权力来自于人。<br>城，是这一片连绵殿宇在大陆上的辉煌建筑。<br>太和门广场和他身后的太和殿广场构成立紫禁城的重心。广场在中国的传统里叫做庭院，庭院源于古人聚居的居住形式，在共同的空间里，一家人围拢的不单是安全，更是中国文化里相互关怀照应和守望的伦理价值和亲情。一般来讲，家庭越大院子就越大，就像一棵大树那样，分枝抽条、开枝散叶、秩序分明。<br>皇帝以天下为自己的责任,以国为家，他所住的皇宫庭院也层层相约紧紧相连，成为现在我们所见到的伟大宫殿。帝王所在便是宫廷，在家为庭，在宫则廷。<br>传统民居中轴对称，院落重门的格局没有改变，放大的空间营造出超越民居的大格局，它不仅可以应付这个庞大家庭现实生活的需要，还处处殚精竭虑把王朝的秩序和信仰纳入其中，让帝王的生活成为权力的展示和伦理的示范。<br>这里曾经是皇帝一个人的庭院，体现着天下一人的权威，古代帝王以无限的权力在他的家国里俯仰天下。就体现在一个又一个巨大的空间里。<br>建筑的本质是界定生命活动的空间，正如杯子的意义是虚空的部分，而建筑物最重要的,正是没有建筑的部分。这些现代的语言，其实都是在重复着中国几千年的智慧。实者虚之，是这个文化自然而然的精华</p>
<h5 id="3-有容乃大"><a href="#3-有容乃大" class="headerlink" title="3 有容乃大"></a>3 有容乃大</h5><p>它，是紫禁城里最大的门。它，矗立在紫禁城中轴线的开端，开启宫城的冷峻威严。它的布局、结构和形制，表达着中国人对神圣的理解。它所处的方位和拥有的形态，昭示着一种古老的和谐。它的造型和凤凰有关。它在曾经的国家仪式中，总是接受万人的跪拜。<br>它，就是午门，紫禁城正式的大门。<br>正午的太阳，总是出现在正南方向，所以南门叫做“午门”。坐北朝南的是天子，所以正南方向的午门，就是紫禁城里最尊贵的大门。<br>午门的形制，好像中国古代木建筑中的一个关键的连接部件“榫卯”。<br>方位上属性至阳的午门，却采取了带着阴性意象的凹形形制，这其中充满中国古代哲学意味，榫卯与它的外部空间，形成的凹凸结构，指向阴阳和谐，标明有界与无形其实相对存在，印证和象征中国人，对天地人关系的理解。有容乃大，是它的气魄。<br>古代典籍《周礼》中规定，皇宫的正门叫做“雉门”。雉，也叫朱雀，是传说中一种火红的神鸟。午门凹字台墩上，五座屋脊微翘的楼阁，形似五只举翅的大鸟。朱雀到底是怎样的，没有人知道，倒是凤凰好像近一些，所以民间往往称这里叫做“五凤楼”。门虽设而常关，熟练掌握开合之道，才是真正的帝王。<br>公元1760年，一场惨烈的战争后，战败者被千里迢迢押解到京师，当做战俘献给皇帝，这个仪式叫“献俘礼”。明清两代，都在午门上演，成千上万的战俘，颤抖着跪在广场上，不敢抬头。<br>午门城楼的最高处，皇帝端坐。在这个位置俯望，战俘皆匍匐于视线下方的地平线上。威严的气势中，君王忽然粲然一笑，下令赦免。一切罪罚与恐惧，忠诚与背叛，都化作乌有。<br>这就是午门，开合之间，威严与宽厚瞬间转换。</p>
<h5 id="4-五凤朝天"><a href="#4-五凤朝天" class="headerlink" title="4 五凤朝天"></a>4 五凤朝天</h5><p>紫禁城的午门，从正面看有三个门洞，从背面看却有五个。其实，在午门正面东、西燕翅楼下方，分别还有两个掖门，就像两道暗门。于是，午门门洞便有了“明三暗五”的说法，这样设计自然会有特定的规制。五座门洞中，除了中门，剩下的四个门洞，都是为王公大臣进宫上朝设置的。<br>每当早朝，大臣必须午夜起床，穿越半个京城前往午门。《大明会典》记载：凌晨三点，大臣到达午门外等候。当午门城楼上的鼓敲响时，就要排好队伍。钟声响起时，宫门开启。文武百官走东偏门，宗室王公走西偏门，东西两个拐角处的左右掖门平日不开，只有逢大朝之时，官员按文东武西，分别由掖门出入。<br>今天，人们进入故宫，可以完全不理会过去的规矩，随意出入午门的各个门洞，包括居中的那个门洞。而在100多年前，这座门洞是皇帝独享的通道。除了皇帝，只有很少很少的人能从这座门经过，所以，这条路又叫“御路”。皇帝之外，有一个人一生能从这里进入一次，有三个人能从这里出来一回。<br>进来的人是皇后。皇帝大婚，皇后的花轿在锦簇的仪仗簇拥中，沿着御道穿过午门入宫。这条御道就好像迎接新娘的红地毯。夫妻是人伦之本，中国文化更是强调阴阳和合，皇帝娶皇后入宫，自然要以天下最隆重的一条路迎接她的到来。<br>春末夏初，科举考试的最后一关“殿试”在紫禁城结束，这次考试的前三名：状元、榜眼和探花，接受皇帝的接见后走出皇宫。三位幸运儿得以享用了，只有皇帝和皇后才能走过的道路，这是天下读书人梦境中最漫长的一段路。金榜题名的读书人走出紫禁城，把以文治国的传统，施于天下。<br>皇后从午门走进，为皇族血脉的延续带来希望；而从午门走出去的三个人，则肩负皇帝的重托，去实现家国兴旺的理想。</p>
<h5 id="5-四面玲珑"><a href="#5-四面玲珑" class="headerlink" title="5 四面玲珑"></a>5 四面玲珑</h5><p>在紫禁城的四个角落上，各有一座角楼，它高居在紫禁城十米高的城墙上。作为城墙上的高点，它肩负着观察、守望和防卫紫禁城的任务。从明永乐十八年开始，它静静地站在这里将近六百年，它的形制，它的玲珑，护卫着这座宫殿的神圣，那是一段浮动着守护与尊严、生与死的年代。<br>今天，那段岁月已经渐渐被遗忘，它褪去了防御、镇守的历史角色。成为被我们眺望的，那个美的存在。角楼，因为时光的洗礼，韵味十足，也许这时的它，才有了远离尘世的自由感，因为，它是天上的星宿下凡到紫禁城的栖息之所。<br>紫禁城的建筑，除了符合功能与审美的需要，也都符合八卦阴阳之理，所以角楼也不会例外。它的修建，是为了让二十八星宿中的角宿住在里边，以镇守宫城。既然星宿下凡，那就要住大房子，而建筑以楼阁为大，那这四座大房子便取名为“角楼”。<br>从南往北眺望紫禁城，午门充满力量与庄严感，城墙则无处不让人感觉大气、厚重。而角楼的存在，让城墙的延长线在末端向上微微翘起，厚重的城墙如大鸟的翅膀，顿时轻盈。<br>角楼，由六个歇山顶交叠而成，三层屋檐共有二十八个翼角。十面山花，七十二条脊，吻兽共二百三十只，素有“九梁十八柱，七十二条脊”的说法。这种科学而精妙的建筑结构，使它成为紫禁城里，造型最为复杂的建筑，科学与美完美地融为一体。<br>一缕微风，如手指般，在角楼的梁柱之间，弹奏着潺潺音符，原来的它，静静地守护着宫城，凝望着这个世界；而现在，却成为被人们观望的，最美的结构。<br>它在水中的倒影如此宁静，如一位经历了风风雨雨的老人般，波澜不惊。生命的跃动，在它自己的乐章中得到休息。</p>
<h5 id="6-玉带天河"><a href="#6-玉带天河" class="headerlink" title="6 玉带天河"></a>6 玉带天河</h5><p>御沟春水晓潺潺，直似长虹曲似环。流入宫城才咫尺，便分天上与人间。<br>诗人笔下的玉河，就是皇宫里唯一的河流：金水河。它的河水来自北京西北的玉泉山，山上的河水由北向南，一路变换着名字流入京师。<br>这里它叫昆明湖。这里它叫昆玉河。而蜿蜒进入皇宫的这一支叫做金水河。河水的源头在西边，西方属金，金生丽水，金水河的名字便由此得来。<br>小河从西而入，进入紫禁城的这个庭院。在冷峻威严的皇城前廷，留下这条柔软的弧线。世上第一大皇宫的前廷，是小桥流水的格局，这是风水中背山面水的尊贵设置。<br>明代这里曾经种植荷花，同时兼备分区排水、供水、防火和装饰的功能。本来只是一条沟渠，经过一番布置就成了一幅动人景象。<br>金水河隔开的两座空间，被五座石桥相连，相对于天安门太庙社稷坛的另外七座外金水桥，它们叫做内金水桥。<br>路和桥，在中国文化里总被赋予各种意义，其中有家国的礼法，更有做人的信条。<br>五座内金水桥，居中的是御道桥，曾经作为皇帝的专用通道。桥面弧度比民间石桥更为平缓，皇帝坐轿入宫，前后轿夫只需轻抬轻放，便可以顺畅通过。御道桥边左右两侧是王公桥，只能进出皇亲国戚。最外侧两边的品级桥，才是大臣行走的通道。这些都是内金水桥的等级。<br>这条弧线，像一把拉满的弓，而五座金水桥，像是搭在弓上的五支箭。按照中国人的理解，这五支箭应该代表：仁义礼智信。<br>仁、义、礼、智、信，这曾今是人人所要恪守的精神法则。紫禁城里的这张弓，似乎要把这五个信念发射出去，让天下接收到来自家国中心的理想传递。</p>
<h5 id="7-威猛铜狮"><a href="#7-威猛铜狮" class="headerlink" title="7 威猛铜狮"></a>7 威猛铜狮</h5><p>我是百兽之王，也曾叫狻猊。我是龙的儿子，也是佛的坐骑，我本来自西域，东汉才到这里，化身大门守卫，看护家宅官邸，进入紫禁城中，只管保卫皇帝，身影并不孤单，伙伴就在附近。<br>紫禁城里的龙不计其数，看门的狮子却只有六对，最大的一对就在这里。<br>这对狮子一雄一雌，大概从明朝开始，就一直守在太和门前，看着那些通过午门，跨过金水河，进入紫禁城的人们。<br>老百姓过年，家家户户放起烟花爆竹，祈福迎春。为了家宅平安，还会在家门上贴福字，请门神。<br>原来，紫禁城也画过门神，但现在人们只能看到我们，我们负责皇帝的家宅平安，也镇守国家的法统威严。我们虽然来自西域，却在这里住了几千年，不知不觉我们的表达，已经变成这儿的语言。<br>它们的头和身体是圆形，底座是方形，体现中国古人天圆地方的地理认识。他们头上有45个发髻，呼应皇帝九五之尊的称谓。<br>东侧是雄狮，脚踩绣球，象征掌握社稷；西边是雌狮，抚摸幼狮，象征子嗣昌隆。<br>除了太和门，紫禁城后庭：乾清门、养心门、宁寿门、养性门和长春宫前，也各有一对形制不同的狮子。<br>后廷的这些兄弟姐妹，和我们不一样，他们身上都是鎏金的，因为他们比我年轻多了。其实我们原来也很光鲜，我们在前朝值班，要挺起腰板，睁大眼睛，竖起耳朵。这里是皇帝宣读诏书的地方，我得时刻关注任何风吹草动。他们不用这么紧张，总是耷拉耳朵，眯缝着眼睛。因为那里是皇帝休息的地方，不能多听多看多想。<br>最小的狮子，是在慈禧太后住过的长春宫。慈禧太后权力比皇帝都大，她还是低调地把狮子设成最小的款式，曾经的威猛铜狮，此刻也变得温馨静谧。<br>我已在这里看了几百年的世事变迁，不知道还要再待多少年？还好，我并不孤独，因为身旁永远都有她相伴。</p>
<h5 id="8-皇帝归宿"><a href="#8-皇帝归宿" class="headerlink" title="8 皇帝归宿"></a>8 皇帝归宿</h5><p>公元1850年2月25日，农历正月十四，元宵节的喜庆气氛已经弥散。道光皇帝在弥留之际写下一道朱谕：死后灵位不入太庙，不立神功圣德碑。<br>庙，最早是指祭祀祖先的地方。《礼记•曲礼》中记载：君子将营宫室，宗庙为先，厩库次之，宫室为后。古时候，人们在家中，有婚丧嫁娶等大事时，都要先去宗庙祭祀，为的是向祖先求得认可。<br>天下最大的家是皇帝的家。最大的宗庙就是太庙。<br>当年永乐皇帝按照《周礼•考工记》中“前朝后寝，左祖右社”的规定，在紫禁城的左前方建造了太庙。这里曾经安放过明清两代帝后的神位。<br>太庙营建的规格，不亚于紫禁城里任何一栋建筑，就宫殿本身的建筑高度而言，太庙正殿的高度，甚至超过了皇帝主理朝政的太和殿。<br>如今，它是世界上最大的，以金丝楠木为主体的宫殿，殿内六十八根大柱，及主要梁部件，全部使用金丝楠木。<br>紫禁城自建成以来，经历了数次天灾人祸，但太庙都幸运地躲了过去。明清两代，这里一直上演着庄严的帝国礼仪。<br>祭祖的三天前，皇帝和文武百官就开始斋戒。不饮酒、不吃荤、不处理刑事案件，甚至不看病，敬候祭祀大典的到来。<br>时光流转，道光皇帝在位之际，延续千年的礼仪，遭受了前所未有的挑战。<br>签署了近代中国第一份不平等条约，道光皇帝自感愧对祖先，更没有颜面像列位先祖一样，接受后世子孙的祭拜，这才留下了那道亲笔朱谕：“死后灵位不入太庙”。这一有违祖训的决定，显然难住了儿子咸丰皇帝。如果遵从父命，无疑把自己排除在爱新觉罗氏孝子贤孙之外。最终，道光皇帝的神位还是进入了太庙，不情愿地接受着后世子孙的祭拜。<br>皇家祭祖的香火，在1924年熄灭了。那以后，这曾经的皇家禁地，变成了人们参观游览的公园。</p>
<h5 id="9-大地色彩"><a href="#9-大地色彩" class="headerlink" title="9 大地色彩"></a>9 大地色彩</h5><p>2011年9月21日，北京中山公园的音乐堂里，一场西方古典音乐会正在进行。而在五百多年前，这里却是戒备森严的皇家禁地。<br>在明清两代，这里被叫做：社稷坛，除了每年两次定期的祭祀外，如遇出征、班师、献俘等重要事件，这里都会举行盛大的典礼。<br>每年春、秋的祭祀日，皇帝都会在日出前一个小时赶往社稷坛。他要去祭祀的，是中国古代神话中两位重要的神仙：社和稷。太社之神名叫“句龙”，专管土地；太稷之神名叫“弃”，主管谷物。古人认为，土地和粮食是养育人民的根本，也是一个国家建立和存在的基础，社稷后来慢慢演变成了国家的同义词。<br>当年，永乐皇帝在肇建紫禁城时，按照《周礼》中左祖右社的规定，在紫禁城西侧建造了社稷坛。<br>每次大祭前，都会将社稷坛坛面上的土重新更换，这个传统一直延续到今天。每年阴历的二月和八月，工作人员都会将坛面上的土翻整一新，因为，这些土壤放在这里有着特殊的含义。<br>明朝在祭社稷前，要从河南取黄色的土；从浙江、福建、两广地区，取红色的土；从江西、湖广、陕西，取白色的土；从山东取青色的土，而黑色的土则从北京取得。全国三百多个县，每县各取土百斤，再从四面八方运往京城。<br>五种颜色的土，铺洒在社稷坛上，象征着：普天之下莫非王土，代表着海内的一统。清代取土的地方，自然与明代有所不同，但五色土也是取自全国各地，契合了四时时令，自然是对风调雨顺最好的企盼。<br>古人敬畏自然，对于大地的膜拜，已延续了几千年，但这并不能给封建王朝带来江山永固。<br>1911年秋天，这里在举行了最后一次祭社稷的仪式后，五色土的神圣地位，渐渐被人们淡忘，这里也再没有了庄严肃穆的祭祀音乐。<br>如今，人们来这里的目的，多是娱乐休闲，放松身心，聆听来自世界各地的音乐之声。</p>
<h5 id="10-国家仪式"><a href="#10-国家仪式" class="headerlink" title="10 国家仪式"></a>10 国家仪式</h5><p>每天早晨八点，故宫的门一扇一扇打开。<br>太和殿广场是游人必经的地方。但曾经，除了举行国家的重大仪式，这里没有人可以踏进。<br>公元1661年，清朝顺治十八年，正月初九，顺治皇帝驾崩后的第二天，八岁的爱新觉罗•玄烨将举行登极大典。<br>凌晨三点，帝国最重要的仪式开始准备，皇帝的步辇、丹陛大乐、中和韶乐、卤簿仪仗依次排列。皇帝登极的诏书、表文、御玺陈列完毕。<br>此刻，太和殿所有的大门都已打开，吉时已到，礼部尚书恭请玄烨登上太和殿宝座。<br>皇帝的面前，是全世界最大的建筑物内部广场，面积超过三万平方米。侍臣鸣鞭，广场上的官员，向新皇帝行三跪九叩大礼。<br>其实，广场上的人根本看不到殿内的皇帝，他们之间的垂直落差足足有十米。而皇帝坐在宝座上，视线被丹陛遮挡，也完全看不见广场上的大臣，他们只是在上演程式化的正剧，惟有天在看。<br>笼罩在先帝丧礼气息中的登极大典，气氛肃穆，中和韶乐，丹陛大乐只是陈设，并不演奏，但这乐章每年至少会奏响三场：皇帝的生日、元旦、冬至。这三天，这个广场上都会举行最盛大的仪式。<br>除了这些国家仪式，这个可以容纳十多万人的广场，绝大多数时间是空荡荡，静悄悄的。<br>1945年，侵华日军宣布无条件投降。10月10日，华北战区正式受降仪式在太和殿广场举行，这也是它最后一场国家的仪式。<br>历史大戏的主角们已经远去，留下这风云散尽的舞台，静静倾听着后来者的足音。</p>
<h5 id="11-检阅天下"><a href="#11-检阅天下" class="headerlink" title="11 检阅天下"></a>11 检阅天下</h5><p>在佛教经典中，世界的中心有座须弥山。因此，在佛国，佛、菩萨的造像都供奉在须弥台座上。在人世间，帝王业居于高台上。于是，紫禁城的建筑就有了须弥石座。中央者土，君宫也。<br>公元1420年，这里垒起了中国最高、最大的“土”字，八米高台，三层须弥座。<br>高台，凝固了四千多年的古老记忆，材质从夯土变成硬石。可以观天、望气、观敌、检阅，并能抬高木建筑，免受水浸。<br>关于石头与水，这三层台基还有更巧妙的设计：石栏杆的每块栏板边都有小洞，用来排水；每根望柱下都有一个石雕兽头，嘴里有穿透的圆孔。它叫“螭”（chī），传说中龙的一个儿子，喜欢水。大雨白如练，小雨如冰柱，1142个螭首，宛若千龙吐水，这些奇妙的部件，将实用和审美融为一体。<br>没有建筑的台是“坛”，祭神敬天的场所。紫禁城三大殿的高台，既有台的功能，又有坛的意象。<br>那些渴望与上天沟通的帝王，早已远去，一代人来，一代人往。惟有这三层高台依然伫立，静静守护着，六百年的历史记忆。</p>
<h5 id="12-光影时间"><a href="#12-光影时间" class="headerlink" title="12 光影时间"></a>12 光影时间</h5><p>日晷，掌握时间的象征，设置在紫禁城重要的宫殿前。<br>盘面和赤道平行，指针和地轴同向，有一些依然可以清晰地看到上下两面的刻度，从子到亥，十二个时辰均匀分布。<br>每年，从春分到秋分的半年中，太阳直射在北半球，晷针的影子投在晷盘正面。从秋分到第二年春分，太阳直射在南半球，要从晷盘的背面读取刻度。<br>古人心中的紫禁城，与天上的紫微星垣相对应，以紫微星垣为中心，划出天下大地。在古代，人们就是利用太阳的影子制定历法。直到有一天，古老的方式遭到了挑战。<br>1669年，正月，午门，一场历法的生死对决即将上演。虽然在明代，传教士已经带来了西方历法，但中西两派一直争论不休，难分高下。这一天，历法之争被权力之争推到了最高峰。<br>15岁的康熙皇帝登极已经八年，但实权一直掌握在辅政大臣鳌拜手中，鳌拜支持的传统历法推算方式出现错误，康熙意识到这是打击鳌拜的好机会。康熙和鳌拜一同来到午门广场，用不同的方法测算正午时分日影的长度。结果，传统历法再次测算失误，康熙一方的测算则准确无误。<br>记录天时，颁行历法，是国家要政，掌握这项授时权力的只有一个人，就是国家的统治者。<br>科学带来了更精确的计时器，日晷的计时功能已经淡去，但作为时间的象征，仍然伫立在太和殿前。</p>
<h5 id="13-帝王心镜"><a href="#13-帝王心镜" class="headerlink" title="13 帝王心镜"></a>13 帝王心镜</h5><p>2005年，故宫博物院修缮太和殿时，发现木牌匾上依稀有满文的痕迹。这些痕迹正在讲述着这个国家的变迁。主人在更换，主人对这里的界定，也在改变。<br>1915年，袁世凯登极称帝，他把满族皇帝镶嵌在牌匾上的满文抠掉，把汉文移到中间。现在，故宫外朝大殿的牌匾，都只有汉字，而在后宫，却还保留着满汉两种文字。<br>1644年，满族皇帝成为了紫禁城的新主人。面对刚统一的国家，最迫切的愿望就是“和”。第二年，三大殿重修完成，命名为：太和殿、中和殿、保和殿，旁边配上了满文。<br>太和殿，最初叫：奉天殿，之后，它又改过一次名字。那是在公元1521年，明朝正德皇帝驾崩时，没有子嗣，作为最近支的宗亲，藩王朱厚熜继位，改年号嘉靖。那一年，朱厚熜15岁，他已经格外在意维护自己的正统名分。<br>之后，他改建了紫禁城的多个地方，但在最重要的建筑上，还没有烙上自己的标记。<br>终于，在继位41年后，机会来了。烧毁的三大殿重建落成，沿用曾经的名字本是顺理成章，但朱厚熜却下旨，改殿名为：皇极殿、中极殿、建极殿。<br>极，就是在屋内正中间，最高处的木件，引申为：中正之道。朱厚熜用这三个“极”，标榜自己统治天下，符合中正之道。但这时的朱厚熜，沉浸于炼制丹药，已经快二十年没有上朝了，三大殿的名字，只是宣示着他维护了大半辈子的名分。<br>宽阔的广场上，大典的匾额仿佛一幅中国画，盖上主人的印章，映照出主人的心意。</p>
<h5 id="14-金砖墁地"><a href="#14-金砖墁地" class="headerlink" title="14 金砖墁地"></a>14 金砖墁地</h5><p>一两黄金，可以是明朝初年一千五百斤精米的价格；可以是清朝初年三个县令一月的薪酬；也可以是一块地砖的造价。<br>它们本是江南的土，黏而不散、粉而不沙。经过掘、运、晒、推、舂、磨、筛七道工序，露天放置整整一年，去掉土性。它们沉浸于姑苏的水，经过三级水池的澄清、沉淀、过滤、晒干、踏踩、摔打六道工序，它们炼成稠密的泥，它们将要成为紫禁城里的金砖。<br>用木板、木框做成模具，把泥放入模具里，工匠在泥上踩，直到踩实为止。去掉多余的泥，用木棍磨平整，砖的另一面也要同样磨平。放置在阴凉处，阴干八个月。经过糠草烧一个月，去除水分；片柴烧一个月，棵柴烧一个月，松枝柴烧四十天，一共一百三十天烧制才完成。<br>工匠爬上窑顶，向滚烫的窑内浇水降温，冷却四五天，到了出窑的日子。漫长的过程中，稍有不慎，整窑砖都会毁坏。出窑的砖还只是半成品。又再经过复杂的砍磨，浸桐油，每人一天只能砍磨三块。<br>烧制着年代、规格、产地、督造府、工匠名的砖，由运河北上，直达北京通州。再经过官府逐一严格检查，每用一块砖必有三块以上备选，没选上的一律销毁。<br>如此珍贵的金砖，也只有皇帝经常光顾的宫殿才有资格陈设，紫禁城大部分地方看不到它们的身影。无名工匠复杂而漫长的劳作，使原本不名一文的泥土，竟有了黄金的身价。<br>皇帝可以用四年的时间，肇建一座宫城；也可以用近两年的时间，仅仅打磨一块砖。速度与精致，都微缩在小小的金砖里。</p>
<h5 id="15-座拥天下"><a href="#15-座拥天下" class="headerlink" title="15 座拥天下"></a>15 座拥天下</h5><p>五百年间，这是中国最重要的一张椅子，坐到了这里就能坐拥天下。<br>“ 1959年，我在一张光绪二十六年的旧照片上，看到了从前太和殿内的原状：雕龙髹金大椅，这就是皇帝的御座。”曾经在故宫工作多年的朱家溍先生，对第一次见到的太和殿御座，写下了这段文字。<br>御座是皇帝的符号，他是天下唯一的主人。2377平方米的太和殿，乃至三万多平方米的太和殿广场中，再没有第二张椅子。一切的焦点都汇聚在宝座上，它被七级台阶高高托起，香筒、香炉、瑞兽围绕。<br>仙鹤，保佑皇帝健康长寿。<br>宝象，象征着国家安定稳固；宝瓶中盛着五谷。大象，驮宝瓶而来，带来了丰收和吉祥，寓意：太平有象。<br>甪端，带来广博知识，显示皇帝身在宝座，通晓天下。<br>屏风，周代诞生时专设在宝座背后，以示天子权威。<br>这把最重要的椅子，却在1915年被袁世凯撤换，从此，没有人知道它的去向。于是，根据这张照片进一步查找，终于在故宫一处，存放着破旧家居的库房中，发现一个残破的雕龙髹金大椅。<br>1963年，故宫决定修复这件龙椅。<br>宝座虽然精美，但坐得并不舒适，也没有任何地方可以倚靠。雕饰的13条龙，时刻在警醒着皇帝：他坐的不是一把椅子，而是天下。<br>国家的重心在紫禁城，紫禁城的重心在太和殿，太和殿的重心在皇帝的宝座之上。<br>屏风，内金水河，乾清门，外金水河，直向景山，长城，黄河，长江。如同层层涟漪，将宝座上发出的决策，扩散向天下。</p>
<h5 id="16-六龙御天"><a href="#16-六龙御天" class="headerlink" title="16 六龙御天"></a>16 六龙御天</h5><p>薄如蝉翼，柔似绸缎，轻若鸿毛。金箔，在太和殿里造就一个神话。<br>古时候，人们把白天和夜晚，各分为六个阶段，传说每个阶段都有一条龙在天体上飞驰，六条龙相衔接，驾驭时间的流动。<br>太和殿的中心，六根盘龙金柱，围绕出一个金光闪亮的神圣空间。大金柱高12.7米，直径1.06米，三、四个人才能围抱起来。<br>这么粗的柱子，至少要在木材外面批两层麻，抹六次灰，然后再用沥粉贴金的工艺装饰图案。<br>南京的一家金箔厂，至今还保留着这项工艺。<br>贴金，用的是纯度99.99%的黄金。经过多道工序，制成小片的金叶，夹在用煤油熏炼成的乌金纸里，再进行两万次捶打。这道工序现在已经有机器完成，但在古时候，人们要手工捶打六到八个小时，才能把1克黄金，打成大约0.5平方米的金箔，厚度只有万分之1.5毫米。<br>贴上了金箔，六条蟠龙便在水江崖纹上腾云驾雾。东边三根金柱的龙头向西上方望，西边的向东上方望，和藻井中的金龙相呼应。金色的空间里，蟠龙藻井、屏风、宝座，构成一个龙的空间，烘托出座上的真龙天子。<br>六根金柱，恰似一幅横着的乾卦，乾，是天运行的动力。《周易》说：“时乘六龙以御天。”象征帝王统御着时势的运转。<br>古人在这神圣空间内，演绎着天地的奥秘。</p>
<h5 id="17-为君之道"><a href="#17-为君之道" class="headerlink" title="17 为君之道"></a>17 为君之道</h5><p>（建极绥猷）这几个字，曾经在至高无上的位置，俯瞰着这个国家。曾经，它也随同中国最后一个王朝，消失在历史中。<br>1915年岁末，袁世凯拿下了清朝乾隆年间悬挂的匾联，从此，它们就不见了踪迹。<br>苑洪琪，太和殿匾联修复总指挥。“当时恢复这个匾的时候，一点资料都没有，我们就凭着一张照片，那张照片是1900年一个外国记者拍的。照片上，太和殿大匾的位置，我们跟实际的位置进行了对照，设计出来的这个尺寸。”<br>照片上，匾额的字迹仍然清晰，这是乾隆皇帝的御笔亲书。<br>上承天命的皇帝，应做九州万民的榜样，这是多么艰难的事，怎么能不恭敬呢？上天帮助同心同德的人，愿永远保佑天下太平。<br>极，是屋脊正中的梁；建极，就是要建立中正的治国方略。绥，是顺应的意思；猷，为道，为法则。建极绥猷，是说天子上对皇天，下对庶民，都有神圣的使命，他应当中正地治理国家，顺应大道。<br>（苑洪琪）“当年，皇帝在这块匾下面，无论是坐着还是站着，他都要考虑到自己的责任。匾联上的这些警句，对他是一种约束。想着自己统治天下，行使权力的这些责任和义务。”<br>这幅楹联告诫皇帝：皇权受命于天，祖宗创业艰难，守业的君主须敬天爱民，执政公允，永保四海太平，九州澄清。<br>西方的宫殿，雕刻具体的人物形象，人物也成为建筑的装饰。而在中国，悬挂的是书法。抽象的文字，宣示着观念、诺言、祝愿、目标。<br>2002年，故宫博物院上百人协作，依据1900年的照片，历时一年，复制了这套匾联。<br>建极绥猷，时刻劝诫着君王，要保有这样的治国理想。<br>（苑洪琪）“尤其是我们作为宫廷历史研究者，就更应该把这件事情做好。因为，恢复历史，让人们知道历史所发生的一切，这是我们的责任。”<br>每年冬至，太阳照在北半球的角度，是一年中最低的一天。<br>这一天，阳光照进太和殿深处，照亮“建极绥猷”。</p>
<h5 id="18-镇殿神符"><a href="#18-镇殿神符" class="headerlink" title="18 镇殿神符"></a>18 镇殿神符</h5><p>2005年，距离太和殿上次重修过去了310年，故宫博物院在对它进行全面修缮。<br>在天花板的上面，还有一个空间，称为：举架。除了当年修建的工匠之外，很少有人走进。这次勘测中，有了一个意外的发现。<br>专家们查阅史料发现，雍正九年八月十二日，雍正皇帝降旨，在紫禁城最重要的三个地方：养心殿、太和殿、乾清宫，各安放一块符板。<br>养心殿，是雍正皇帝起居，和处理日常政务的场所。<br>乾清宫，是接见廷臣和使臣，举办筵宴的地方。<br>太和殿，是整个紫禁城的核心。<br>太和殿顶棚上的符板，有五座：建筑中心的藻井正上方一座；东、南、西、北四个方位，朝向正中各供奉一座。上面刻的内容大致相同，只有守护五个方位的尊神名号不同。<br>灵芝、烛台、香炉，这些供品既用于佛教，也用于道教。<br>符板的正面，刻着四层内容：汉传佛教的经文；佛教与道教融合的方位神的名号；藏传佛教的咒语；道教的璇玑八卦。八卦中的北斗星，在道教中时天子的象征，被视作：斗神，主宰生死。<br>雍正八年起，紫禁城多处供奉斗神。这一年，雍正皇帝得了一场大病。第二年，皇宫里安放了这些神秘的符板。雍正皇帝相信，不论修心还是治国，儒释道都是共通的，只要心诚，愿望就能实现。<br>符板背面，七十二道太上秘法镇宅灵符，也是七十二个愿望。<br>符，在汉代已经出现，许多民居的墙角，或者屋顶都会安放符。<br>镇宅保平安吉祥，驱鬼辟邪，厌除疾病，不做噩梦，招财进宝，家畜农田丰收，和睦，长寿，孕妇顺产，盗贼不侵，万事如意。<br>雍正皇帝，想借助大千世界，五方诸神，紫微天帝，来庇佑家国天下。</p>
<h5 id="19-巧夺天工"><a href="#19-巧夺天工" class="headerlink" title="19 巧夺天工"></a>19 巧夺天工</h5><p>中国木构建筑，好似一棵树的演化，其中，技术做复杂的就是斗栱；最简单的组合，也是斗栱。<br>一块像盛米的斗，一块像挽起的弓。斗上置栱，栱上置斗，斗上又置栱。结构千篇一律，造型却又千变万化。<br>清代《工程做法则例》列举的斗栱形式，就有三十多种。斗托着栱，栱又托着斗，由一点绽放开去，使宫殿如同一棵参天大树，舒展，沉稳。<br>中国建筑，如果把所有的墙都拆除，依然会结结实实地站在那里。斗栱，一层一层伸展开，扩大了横梁的着力面积，将大屋顶的重量，向下传给立柱，架起一座木建筑。<br>其实，到了清代，建筑结构已经变化，梁的承重功能加强，斗栱变得更精巧、更漂亮，成为建筑装饰的一部分。它自身也被画上隆重的色彩，承载木建筑辉煌的美。<br>斗栱的数量，也成为彰显建筑等级的标志，斗栱层数越多，建筑等级越高。<br>现代力学认为，这种顶上不固定，地下不生根的几何可变体系，是站不住的，但太和殿已经站了三百多年。而且，当地震来临时，它好似弹簧般，在一阵颤抖后又恢复一个整体。<br>这就是榫卯结构的虚位，相互吻合，又相互留下余地。这份余地，在有形的木与木之间，也在无形的心与心之间。<br>斗栱承接的，不仅是椽子梁柱枋，更是中国建筑的物理、心理、哲理。</p>
<h5 id="20-金光灿烂"><a href="#20-金光灿烂" class="headerlink" title="20 金光灿烂"></a>20 金光灿烂</h5><p>中国古代的房子，其实，就是在讲述木头与泥土的故事。<br>泥土夯实为地基，托起这根根木构。泥土也可飞升到屋顶，化作这片片琉璃。<br>琉璃瓦，皇家的瓦。琉璃厂古玩街，烧制过元明清三朝的琉璃瓦，乾隆皇帝大概觉得这个地方离皇宫太近，烧制琉璃的浓烟污染了蓝天，刺鼻的气味影响了空气质量。于是，他下令将琉璃烧制基地，迁到了西郊的门头沟，现在那个地方还叫：琉璃渠，也还在烧制琉璃瓦。<br>给成型的瓦片上釉料，再次入窑，就能烧得色泽光鲜，如同琉璃。不同的颜色，正是因为釉彩中含有不同的金属氧化物。<br>红色的氧化铁釉料，将烧成黄色的琉璃瓦。氧化铜的釉料，烧成翠绿色。氧化钴烧成蓝色。<br>在一切都有规矩的紫禁城里，这些颜色的使用也是有秩序的。五行中的五种元素，各代表一个方位，一种颜色。<br>黄色属土，土居中。帝王居天下之中，紫禁城绝大多数屋顶是黄色的。<br>南三所位东，属木，主青，主生。年幼的皇子皇孙学习成长的地方，屋顶是绿瓦。<br>北方属水，主黑。神武门内东西大房用黑顶。<br>不同规格的琉璃瓦，彼此咬合，层层叠叠，一直延伸到屋檐末端的瓦当。它的背上留有一个圆孔，钉入瓦定，防止下滑。整个屋顶的琉璃瓦，就此连接成密不透风的保护伞，为宫殿挡风遮雨。<br>琉璃瓦本是泥土，生于大地，经过活得淬炼，水的洗礼，有了金子般的秉性，高高居于紫禁城的屋顶。<br>这一刻，雨水滑过它们，带着它们的气息，滴落庭院，回归大地。</p>
<h5 id="21-吉祥瑞兽"><a href="#21-吉祥瑞兽" class="headerlink" title="21 吉祥瑞兽"></a>21 吉祥瑞兽</h5><p>大家叫它真人，或者仙人，它是齐闵王的化身。作战失败，走投无路，被飞来的凤凰所救。它安坐于屋脊，会带来绝处逢生的好运。它们从清朝时就站在屋顶上，身上的釉彩已经斑驳。<br>龙，是天下动物的领袖，能在水里游，云中飞，陆上走。<br>凤，是百鸟之王，带来天下太平。<br>狮子，是万兽之王，威武的护法神。<br>天马，日行千里，追风逐日。<br>海马，忠勇智慧，通天入海。<br>押鱼，能祈雨，灭火防灾。<br>狻猊，骁勇善战。<br>獬豸，是忠诚、正义的化身。<br>斗牛，擅长吞云吐雾，能逢凶化吉。<br>它，只在太和殿出现，它是举世无双的第十只角兽，大家不知道给它起什么名字，看它排行第十，就叫它：行什。清代人说它是猴子，其实，它有翅膀，手拿金刚宝杵，会降魔。它是传说中雷震子的化身。<br>中国木构建筑，最怕遭遇雷击，它是人们防雷的希望。<br>它们也有建筑功能。屋脊的坡度，会使脊瓦下滑，交梁上需要铁钉固定。为了保护铁钉免受雨雪侵蚀，角兽就用来当做铁钉的帽子，并起到装饰作用。垂兽，戗兽，套兽，也都是一样的作用。<br>（关怀，气魄，正直，勇猛，吉祥，聪慧，灵敏，威武，高贵，尊贵，坚忍）它们身上寄托着风调雨顺，国泰民安的愿望。<br>角兽最多的太和殿（8条垂脊，8位仙人，80只角兽），除了举行国家重大典礼，平常的日子空无一人，惟有屋顶上的小兽，默默守望着几百年的寂寞。</p>
<h5 id="22-木建筑"><a href="#22-木建筑" class="headerlink" title="22 木建筑"></a>22 木建筑</h5><p>每个中国人的心底都有一棵树。<br>在自己田边种着树，在树边搭建屋，世世代代在木建筑下生活。在梦中，隐约看到祖先如何在广袤森林外，再造一座森林。<br>紫禁城，世界上面积最大的木建筑群。皇帝重新将一棵棵树，种出世上最华丽的大森林。<br>纵观西方著名建筑，埃及的金字塔，古希腊的神庙，古罗马的斗兽场，中世纪欧洲的大教堂，无一不是砖石结构。而中国的紫禁城，成千上万的构建，不靠一枚钉就能紧紧扣在一起。木材，是这个庞大建筑群最重要的材料，是这个民族对树的感情，对木材的了解，和是否缺乏石材无关。<br>与西方砖石的层叠结构相比，中国传统木建筑所运用的构架，像一座房屋的骨架，其中一个最大的特色：墙倒屋不塌，正是对木构建筑原则的描述，本质上和现代框架楼房并无二致。<br>木作的构件规格多样，可以事先预制加工，然后现场组合安装。在四根立柱的上端，以梁枋纵横连接成一间。一间一间又一间，从一座小房子，一直搭建出最大的皇宫，坚固亦永恒。<br>石建筑，是西方人在征服世界的旅程中，留下的一块块凝固的作品，脆弱亦轻灵。<br>木建筑，是东方人在顺应自然的生活中，为自己的心灵划定的一片栖息地。在这里，我们冥想，呼吸，生老病死，淡然中成就另一种永恒。</p>
<h5 id="23-中间意味"><a href="#23-中间意味" class="headerlink" title="23 中间意味"></a>23 中间意味</h5><p>这间房子，居于三大殿的中心，在壮阔的紫禁城里，显得低矮，狭小。像旅途中歇脚的凉亭，更像僧侣们冥想的禅房。四角攒尖的屋顶，安装了圆形宝顶，正方形的房体四面开窗，周围的风景尽收眼底。它的名字叫：中和殿。<br>中，天地万物最神秘的那个点，静与动，爱与恨，进与退，治与乱，大千世界的平衡就决定在某个微小的点上，中和殿的圆形宝顶，或许就是紫禁城保持平衡的中点；在这尊宝顶下的思考，或许就是天下和谐的关键。<br>紫禁城，前朝三大殿，礼仪与盛典，宏大热闹中，只有这间房子可供皇帝独自一人静静思索。<br>康熙十八年，京师强烈地震，紫禁城里多处宫殿受损，皇帝不得不住进帐篷，所幸中和殿保存完好。<br>八月十四日早上，康熙皇帝前往中和殿，审阅天坛祭文，为第二天的祭祀做准备。在这间小房子里，康熙陷入了沉思。<br>中和殿内的冥想，是皇帝出席重大活动前的必修课。出宫祭祖，祭祀社稷、太庙，皇帝要在这里审阅祭文。太和殿举行大典前，皇帝也会先到这里稍事休息。<br>在前朝，惟有这里，皇帝可以躲开随从静静独处，审视自己的责任与过失。刚刚发生的大地震，被认为是上天的警示，天子必须做出回应。<br>祭祀后，皇帝的罪己诏出来了，他认为发生地震，是由于自己对于各地官员管束不当，以致吏治松弛，天怒人怨。<br>在这间房子里的独处，自省，或许会使皇帝更深刻地体味到中和的意味。<br>中，天下之本；和，天下之道。</p>
<h5 id="24-皇家殿试"><a href="#24-皇家殿试" class="headerlink" title="24 皇家殿试"></a>24 皇家殿试</h5><p>如果你能站在这里，你已经是帝国顶尖的知识分子了。你有机会执掌帝国重权，你能荣华风光几世几代。<br>这里，就是中国读书人梦想登上的殿堂：保和殿。清帝国三年一次的殿试就在这里举行。<br>光绪三十年春天的一个清晨，273名书生，就怀着这样的心情，走进了紫禁城。经过层层高墙和众多宫门，他们来到了见证荣耀的地点：保和殿。<br>如果说，太和殿就像毛笔字的起势，那么，中和殿就是转笔，而保和殿是一个秀丽的收势。三大殿层层叠叠的白色丹陛，如同云彩，托起考生心中金碧辉煌的梦幻。<br>来自广东的书生商衍鎏，也在考生队伍中，后来，他撰文描述了这次难忘的经历：<br>（商衍鎏）“我在光绪三十年，参加甲辰科的殿试，进入保和殿坐下来答题的时候，我发现皇帝并没有像传闻中那样亲临现场。正中龙椅空空的。殿试所用的考试桌，样子像炕几一样，只有一尺多高，盘着腿坐下来写文章，一般的考生都很不习惯，所以他们自带考试的桌椅。桌面是薄木板，四条灵活折叠的铁条扣在背面，就可以随身携带，拉伸开来就可以做桌腿。考生用藤筐装着布箱，里面放着考试用的物品。这个藤筐刚好可以当椅子用。“安坐完毕，将是整整一天的笔答，每个考生要把毕生所学，在这短短的一天时间里，做出完美阐释，书写天下。此次殿试的答卷，商衍鎏并没有描述。<br>这份清朝乾隆年间的殿试答卷，现存于中国第一历史档案馆。考生以工整的楷书，完成皇帝亲自拟定的考题，在太阳落山前交卷。卷首写有考生的年龄，籍贯、本人、父亲、祖父的名字、身份、参加科举考试的经历，之后，严密封存。<br>殿试第一名，称为状元。第二名榜眼，第三名是探花。明清两代600多年，累计文状元不过208名。<br>这一年殿试，商衍鎏高中探花，他有幸享受了皇帝才有的待遇：从正中御道出宫。当时他不知道的是，这种仪式，在他之后，再也没有人享受过。<br>第二年，清廷就废止了实行千年的科举制度。商衍鎏因此成为末代探花，中国也进入了变革的时代。</p>
<h5 id="25-最大构件"><a href="#25-最大构件" class="headerlink" title="25 最大构件"></a>25 最大构件</h5><p>明朝永乐年间，冬季的北京城，常常可以看到一支庞大的队伍缓慢前行，这是向紫禁城工地运送石材的队伍。<br>肇建紫禁城，需要大量的巨型石材，这些巨石来自于北京西南郊房山的大石窝，距离紫禁城90公里。运送的道路，漫长而艰难。<br>那时，这条道路上出现了很多凿井的人。井，凿得很密，一里地，一口井，这让沿途百姓颇为费解的举止，其实，正是解决运输难题的关键。待冬天到临，运送的先头部队从井里汲水，泼洒在路上，使路面结冰。于是，工人和骡马便可以拖拽石头，在冰面上滑行。<br>其中，最大的一块，即使用这种方式，仍要动用超过两万民工，两千头骡马，每天只能缓慢移动3公里左右。经过28天的艰苦旅途才送到工地。<br>它被安放在前朝三大殿的北端，经过能工巧匠的精心雕琢，紫禁城里最大的一块石雕，终于浮出水面。<br>汹涌的波涛，荡漾着仙草，流动的浮云，九条蟠龙翻腾其间，寓意着皇帝生活在高高的天宫。这块最大的石雕，重达200吨，被安放在保和殿后面，称作：云龙阶石。<br>当时，其实还有一块同样体积的巨石，因为搬运工程实在太艰巨，而只得放弃，那块石头，至今还静静地躺在石场里。<br>那些同样费尽心力，运到紫禁城的巨石，大部分都被安放在故宫中轴线上。<br>百年之前，这条路是没人敢走的，只有皇帝才能通过，它被称为：御道。御道，不用最好的石材，而是用最大的体量，和最浩繁的人工，显示这条道路的至尊地位。<br>云龙石雕，就是前朝御道的终结处，呈现给世人的，一个巨大的感叹号。</p>
<h5 id="26-王者中轴"><a href="#26-王者中轴" class="headerlink" title="26 王者中轴"></a>26 王者中轴</h5><p>在紫禁城的中轴线上，这是最小的一扇门。门后，是紫禁城唯一的道教建筑：钦安殿。殿上的金顶里，藏着3000多部藏文经卷，镇守着这条王者的轴线。<br>当晨霭升起，呈现出一派祥和，此时此景，你愿意相信万物是有神灵庇佑的。<br>中轴线上的空旷之地，有明显的石道，是由两万多块巨石铺成的，被称作：御道。太和门前的御道，又配以五座石桥，以扇形拱卫，称为：金水桥。御道贯穿的，就是那片梦幻之城。<br>往南，顺着午门屋顶，无数个瓦片形成了一种节奏，一种秩序；形成了无数伸展的线条，遥指帝国广袤的疆土。这些线条，和中轴线上雄伟的建筑合作一处，把王者的气势，发散出去。<br>轴线贯穿的，是一个王朝的气脉，所以，每一个王朝之始，总要确立自己的轴线，以此轴线为中心，为平衡点，从上至下，建立国家的秩序。<br>元大都的中轴线，在今天故宫武英殿东边的断虹桥上，和现在的中轴线相距150米，两条轴线平行延展向北，指向不同的宿命。<br>中轴线笔直、简洁，却绝不单调。高低起伏，错落有致的宫殿群，令原本僵直的空间，具有了音乐的节奏。它是北京城的脊梁，是穿行于大地的龙，是将天意融入人心的通道。只有阳光普照之日，它会呈现出更夺人的气魄。微蓝的天空之下，红色，黄色，更具诱人的迷幻。它是远古走来的梦幻之都，它是浩如烟海的记忆之城，它是无数生命叠加的精神之城。<br>这座依据最隆重，最严谨的秩序，所筑成的宫殿之城，正是中国古代最后一个王朝，用木石砖瓦，给我们行的最后一个大礼。<br>洋洋723633平方米，一直留在那里，由一条惟王者才有资格拥有的轴线贯穿。从辉煌的过去，直笔笔的画到现在和未来。</p>
<h5 id="27-九五之尊（龙飞在天）"><a href="#27-九五之尊（龙飞在天）" class="headerlink" title="27 九五之尊（龙飞在天）"></a>27 九五之尊（龙飞在天）</h5><p>又是一个龙年，龙的形象无处不在，而最多数量的龙，在紫禁城。<br>作为华夏先民的图腾，起初不过是采自荒山的一块毛石，粗犷而简陋，在历史老人的手中，它被不断裁切，琢磨。<br>商周予它威武，汉唐给它大度，在魏晋有了仙风道骨。在辽金则如草原野马，恣肆奔腾。明清时期，龙的形象更加精雕细刻。<br>最早将皇帝和龙等同的记载，出现在司马迁的《史记》<br>他在《秦始皇本纪》中写道：秦始皇三十六年的秋天，秦始皇的一位使者，从关东夜过华阴平舒道，有人对这位使者说：“今年祖龙死”。祖龙，就是指秦始皇。<br>中国的第一位皇帝既然是龙的化身，那么历代君主，则无不自称自己是真龙天子。<br>皇帝的脸叫龙颜，皇帝的身体叫龙体，皇帝的孩子称龙种。皇帝穿的衣服叫龙袍，皇帝用的床叫龙床，帝王贵胄使它至尊至贵。<br>最后一位以龙自居的人，已经在100年前退位。龙，不再是某个人独享的尊号，它落入凡间，融入十几亿人的生命，在每一次呼吸，言语，举手投足间，彰显着龙的传人的尊严。</p>
<h5 id="28-龙宫未故"><a href="#28-龙宫未故" class="headerlink" title="28 龙宫未故"></a>28 龙宫未故</h5><p>公元1421年5月，一个阴云密布的夜晚，一道霹雳直中奉天殿屋顶，刚刚落成四个月的三大殿，化为灰烬。既使贵为帝王，面对雷火也无可奈何，保佑宫殿的希望，被寄托在传说中的神兽身上。<br>在故宫众殿的正脊两端，有一种被称为螭吻的神兽。相传，螭吻喜欢吞火，所以，它多安在屋脊两头，作消灾灭火的功效。<br>《明史•五行志》中记载：紫禁城，在明朝共遭受13起雷击，其中有6次是击中宫殿的螭吻，螭吻受损，而宫殿安然无恙。<br>这个螭吻，是龙的第九个儿子。龙生九子，各个不同。<br>龙的大儿子囚牛，平生爱好音乐，常常蹲在琴头上，欣赏弹拨弦拉的音乐。<br>二龙子睚眦，平生好斗喜杀，刀环，刀柄，龙吞口的龙纹，便是睚眦的像。<br>龙三子嘲风，喜欢蹲在险要的位置上，向远处张望，它不仅象征着吉祥，美观和威严，还具有威慑妖魔，清除灾祸的含义。<br>龙的第四个儿子蒲牢，是形似盘曲的龙，蒲牢喜欢鸣吼，于是，人们只要铸造大钟时，就把蒲牢铸为钟纽。<br>排行第五的龙子狻猊，形状像狮子，狻猊喜欢静坐，又喜欢烟火，因此，佛坐上和香炉上的脚部，多用狻猊装饰。<br>第六个儿子负屃，形象最像父亲，重文采，因为喜欢碑碣上的碑文，甘愿化作龙纹图案，去衬托这些传世的文学珍品，装饰碑座，和人底座的霸下相配在一起，更觉壮观。<br>老七霸下，又叫赑屃，形状像一只乌龟，有一排牙齿，喜欢负重，力大无穷。<br>第八位龙子狴犴，又名宪章，形状像虎，它重义气，能明辨是非，仗义执言，因此，古人将它装饰在门上，让它虎视眈眈地对来者环视察看。<br>九子螭吻，又叫鸱尾，就是我们在开篇提到的保护宫殿的神兽。<br>民间传说中的龙子，远远不止这九个，中国古代传统文化中，往往以九来表示极多，而且有至高无上的地位。所谓龙生九子，并非龙恰好生了九个儿子，九是贵数，又是虚数。<br>故宫，因凝固着龙与它的儿子们，成为了中国传统建筑，龙文化的圣地。龙纹，是这里的主要装饰。据统计，仅太和殿上上下下，里里外外及殿内陈设上，造型各异的行龙，围龙，蟠龙等，就有13844条。<br>曾经坐在这轩辕镜下，九龙屏风前，宝座之上，那个身穿龙袍的人，也就是这座皇宫的主人，被称为：九五之尊。<br>然而，遍布紫禁城的龙，并不能护佑帝王的江山永固。而今，帝王时代早已终结，宝座已空，皇宫已故。故宫里无法数计的龙，仿佛在对我们说：如今，只有龙宫犹存。</p>
<h5 id="29-门钉纪事"><a href="#29-门钉纪事" class="headerlink" title="29 门钉纪事"></a>29 门钉纪事</h5><p>这一年的故宫大修，工人给宫门换装了新的门钉。<br>紫禁城，东西南北四座城门，和宫城里每一个院门上，都有一排排门钉，朱红色的大门，镶嵌着饱满厚重的金黄色。<br>据说，门钉是鲁班发明的，它不仅具有构造功能，也是装饰品，更体现着中国封建等级制度的森严。<br>在大门上装门钉，本来出自构造的需要。在大门本板和穿带部位钉上铁钉，是为防止门板松散，但钉帽外露，有碍美观，古人就把钉帽打成泡头的形状，这样，门钉就有了装饰的功能。<br>自隋唐以来，人们就在大门上使用门钉了。<br>普通的门钉进入皇宫，身份需要进一步提升，这里的门钉不仅有加固和装饰大门的建筑意义，也充满权力与等级的政治意义。<br>皇家建筑，体量大，门也大，需要门钉的路数也多。<br>通常皇家门钉，设竖九路，横九路。亲王家设七路乘九路；王府家设七路乘七路；再往下就是五路乘五路。<br>紫禁城，作为明清两代的皇家建筑，门钉规格为每扇门的门钉，横九路竖九路，一共是九九八十一颗门钉。<br>九，在中国古代数字中，被认为是最高的阳数，属于天子的礼制。门钉采用九，来代表至高无上的皇权。<br>紫禁城南午门，北神武门，西西华门三门，都设九路门钉，也就是九行九列，共八十一颗门钉。<br>唯独东边的东华门，是八行九列，共七十二颗门钉。为什么这里用代表因数的偶数门钉，而不用代表阳数的奇数门钉，至今无从详考。有人说：东华门是鬼门，所以用阴数门钉。因为，皇帝和皇帝家人死后，灵柩要从这里出入。然而，皇帝外出巡幸，走的也是东华门，而西华门，也有出入灵柩的记载，所以，鬼门的说法有些牵强。还有一种说法：东华门设置偶数门钉，是为了五行生克，这里面充满复杂的中国古代风水理论。事实上，东华门门钉的设计，与古代的堪舆理论有关，是古人文化心理现象在紫禁城设计中，采取逢凶化吉、趋吉避凶的体现。<br>门钉，如同这座建筑里的每一个细节，经历了从无意成形到有意为之的过程，通过实用，装饰与意义的结合，成为神秘的信息载体，拥有了特殊的魅力与含义。</p>
<h5 id="30-四合院子（紫禁天街）"><a href="#30-四合院子（紫禁天街）" class="headerlink" title="30 四合院子（紫禁天街）"></a>30 四合院子（紫禁天街）</h5><p>在故宫，守卫皇宫的官兵都发有一块腰牌，这是一枚特别通行证，颁发时再书写上使用者的相貌和编号等，以便查实。<br>通行重要的禁门，则必须使用由阴阳两扇组成的合符。通行者持阳文，守卫存阴文，两相和合无误才能通行。<br>在合符分与合的森严戒备中，有一条特殊的通道。这条通道，它连接着前朝与后宫，它是分隔国与家的界限。它是清朝后宫女性，一生走不出去的，前朝大臣若非奏召，严禁进入的地方。<br>这就是景运门与隆宗门之间的这条天街。<br>中国古人，视空间为一个阴阳的组合概念。紫禁城布局在阴阳融汇的环境里，而阴阳又把紫禁城划分为两极，天街与中轴相交，形成紫禁城的中枢，而天街，就位于紫禁城最平衡的中心。<br>紫禁城的中轴天街，既是左右，前后，内外，阴阳的划分，同时又恰好是一切划分的汇合。这是以空间来分隔，以空间作缓冲、黏合的巧妙布置，骤看，并不突出，却非常重要。<br>这个过渡的空间，南北宽度最窄处只有约30米，清代的御门听政、斋戒等典礼仪式，都在这里举行。<br>处于内外朝之间的天街，也成为内朝与外廷两个势力圈的中心点，皇帝就在中心点做出平衡。两方势力在这里渗透，博弈。<br>在古代，任何获准踏足这里的官员，都只能从广场东西两端的禁门进入，他们所见的，就是一个纵深两百米的深邃庭院，长长的天街了。<br>这座禁城，这样一条戒备森严的要道，也曾发生过历史的意外。<br>清，嘉庆十八年，公元1813年，中原一带发生天理教农民起义。京城附近一支队伍，直接攻打入天街西侧的隆宗门。<br>当年激战时，有两支利箭射在隆宗门上。一支射在隆宗门内，东侧北起第二排第四根椽头上；另一支射在隆宗门外悬挂的门额上。<br>两支箭的箭杆今已不存，箭镞深深地射入椽头和门额的木质中，不知何故，当年未被拔去。<br>这两支射向相反方向的利箭，仿佛清朝皇家的警示，被封存在这天街的一角，距今已经190年了。</p>
<h5 id="31-御门听政"><a href="#31-御门听政" class="headerlink" title="31 御门听政"></a>31 御门听政</h5><p>如果能把紫禁城折叠，正中的地方就是乾清门。<br>这，是紫禁城的一条分界线，之前为国，之后为家，家国之间共有7道门连接，其中，最重要的门就是乾清门，它是天子居所的门户。<br>乾清门，不仅仅是一道门，还是一个舞台，国家最高级别的会议“御门听政”就在这里举行。<br>明清两代的御门听政不尽相同。明代，皇帝在皇极门举行听政，也就是今天的太和门。而清代，皇帝选择在乾清门听政。一个选择在国门口听政，更重仪式；一个选择在家门口听政，就近从简，更加务实。<br>不管是太和门，还是乾清门，明清两朝的听政，都选择了露天的方式。而且，每天一早，天没亮，大臣们就得从家出发，不管酷暑严寒，风雨无阻。<br>为什么不选择在殿内进行呢？这里面有个说法：<br>作为天子，承天命而治百姓，与臣民商量的事情，也要让上天知道。露天听政，表明了恭谨的态度，和坦诚的胸怀。但是，一些私密性的接见和递呈，也需经过乾清门。公开或隐秘的政治游戏，在乾清门前交替上演。<br>从远处看乾清门，就像一个宝座，两个影壁梯形展开，更增添了宝座的气势。从更远的地方看过去，乾清门，如同张开的怀抱。<br>最令人叫绝的是，左右两边长长的红墙，又将后宫遮盖得严严实实，只在红墙上方，留下一抹金黄，一抹遐想。<br>庄严，平和，开放，而又内敛。<br>这，也许就是王者的姿态吧。</p>
<h5 id="32-正大光明"><a href="#32-正大光明" class="headerlink" title="32 正大光明"></a>32 正大光明</h5><p>1644年，满清入关，年轻的顺治皇帝，成为清朝入住紫禁城的第一位皇帝。<br>他把寝宫选在了乾清宫，后来，他在殿中央挂了一块匾额“正大光明”，这是新王朝的治国宣言。<br>后宫的建筑以乾清宫为首，很多关乎国家命运的决策，从这里下发全国。顺治帝的治国宣言，后来逐渐演化出另一种味道。<br>就在这块匾额下，康熙的众多皇子为争夺皇位，兄弟反目，明争暗斗，耗尽了老皇帝的心力，此情此景，不过是千百年来皇位传承，戏剧的重演而已。<br>最终的胜出者雍正，也许太有感触，所以，痛定思痛，创建了秘密建储制度。<br>所谓的秘密建储，就是皇位继承人的选定，从此不再公开讨论，而由皇帝将自己选中的人名书写两份，一份随身携带，一份封入匣子，放在“正大光明”匾额背后，等皇帝驾崩后，取出匣子，两份对照，拥戴新皇即位。<br>雍正，可以说是清代历史上最具争议的皇帝。<br>他是生性多疑，手段残酷，刻薄寡恩，擅弄权术，喜怒无常的雍正。他也是刚毅果决，勤于理政，勇于革新，讲求实际，承先启后的英明君主。两种截然相反的评价，同时出现在一个人身上，说明雍正本身，具有极强的矛盾性。正大光明，和它背后的匣子，尤其凸显了这种矛盾。最公正的宣言，却隐藏着一个最不公开的秘密。<br>秘密建储制度确立之后，乾清宫开始了优雅的假面舞会。每个皇子都戴上假面，表演优雅的人格魅力，以博得皇帝欢心。而在日复一日的舞会中，内心也许越来越焦虑，越来越扭曲。<br>秘密立储的盒子已不知所踪，只留下这块匾额，为那些已被遗忘的戏剧，默默做着注解。</p>
<h5 id="33-深宫传说"><a href="#33-深宫传说" class="headerlink" title="33 深宫传说"></a>33 深宫传说</h5><p>乾清宫，紫禁城的中心，明清十多位皇帝的居所，自从四百多年前火灾重建后，这座宫殿就一直保存到今天，见证了两个王朝的沧桑变迁。<br>乾清宫重修后，住进来的主人是以藩王身份继承大统的嘉靖皇帝。<br>据说，嘉靖皇帝在此居住期间，曾经放置过27张床。皇帝一人休息，何以需要如此众多的床榻？故宫宫廷部专家王子林曾在乾清宫做过考察。<br>王子林：“现在我们看见的这个乾清宫是清代修建的。在明代，跟这个格局完全不一样，明代这个柱子后面是暖阁，一共有9间房子，每间房子里面摆了3张床，一共里面有27张床。”<br>明代乾清宫的布局，和现在西暖阁柱子后面的阁楼有些相像，这样的阁楼，在明代共有9间，均匀分布在大殿的柱子之间。而明末崇祯年间的一个官员的笔记中，也曾描述过皇帝在乾清宫的居所。<br>王子林：“（官员笔记中说）崇祯皇帝就寝的地方，是在一个木台上面，这个木台高一丈多，梯子爬上去，里面摆的就是床榻，崇祯皇帝睡的是在高的地方。那就跟嘉靖时候的27张床在高处是一样的，所以说，可以肯定明代的时候，乾清宫里面有27张床。”<br>嘉靖住进乾清宫十几年后，紫禁城发生了一件惊天大案，十几名宫女合谋刺杀皇帝，史称“壬寅宫变”。<br>这一离奇案件为何会发生？正史中的说法，是嘉靖沉迷炼丹术，修炼手段神秘而残酷，甚至给身边的宫女带来性命之忧，宫女们不堪忍受，终于铤而走险。<br>王子林：“说咱们动手吧，不然就死在他手下了，这怎么都是死，那咱们不如先动手呢。但是，因为绳子打了一个死结，没有成功，嘉靖皇帝幸免于难。”<br>慌乱中的宫女，最终没能勒死嘉靖，失败后被处以极刑。由于事涉宫闱隐私，皇家极力掩盖此事，但终归无法阻止传言的滋生，27张床的传说，就是在这时被渲染出来的。<br>王子林：“第一种传说，就是“壬寅宫变”之前，这里面就有27张床，它本来就存在。另外一种说法，“壬寅宫变”的时候，这里面没有27张床，“壬寅宫变”之后，嘉靖皇帝害怕了，我在里面设置了27张床，我谁在哪个地方以后别人找不到了。”<br>27张床何时设置，至今没有定论。<br> “壬寅宫变”后，嘉靖不顾大臣的反对，搬出了紫禁城的中心——乾清宫。<br>二十多年间，嘉靖驳回了大臣们一次又一次移驾乾清宫的请求，但终究无法彻底违背祖制。皇帝去世，灵柩必须停放在乾清宫。<br>终于，嘉靖皇帝在弥留之际，回到了乾清宫，回到当初他登上皇位时的居所，一个带给他终身梦靥的地方。 </p>
<h5 id="34-传国宝玺"><a href="#34-传国宝玺" class="headerlink" title="34 传国宝玺"></a>34 传国宝玺</h5><p>一个神秘的人，一个神秘的包裹，包藏着神秘的传国玉玺。<br>紫禁城建成后的五百多年间，这一幕总是重复上演。那些献宝的人总是说，他们手中的，是秦国的那方，用和氏璧打造的传国玉玺。它虽然没能护佑秦王朝千秋万代，却是千百年来，无数帝王梦寐以求的宝物。<br>这是存放在紫禁城中，不知何时、何人敬献的一块所谓传国玉玺。据专家分析，它其实是用泥土制成的。<br>乾隆皇帝对和氏璧的传说，并不以为然，他更看重的是本朝玉玺。<br>交泰殿，清代25方皇家宝玺曾经都收藏于此。它们是皇权的象征，也是发号施令的凭证。<br>交泰殿，中轴线上的后三宫之一，外形与前朝的中和殿相同，是座四角攒尖，镀金圆宝顶的方形殿。<br>交泰殿，是中轴线上最年轻的宫殿，大约建于明代后期。<br>在明代，皇帝寝宫为乾清宫，皇后为坤宁宫，交泰殿建在两宫之间，意味着：乾为天，坤为地，天地交泰，阴阳合和。<br>紫禁城宫殿的纹饰图案，到交泰殿第一次出现了凤，人们推测，这是一座为帝后过夫妻生活而设计的宫殿。<br>到了清代，多数皇帝、皇后不再入住乾清、坤宁两宫，交泰殿成了内廷的小礼堂，象征皇权的25宝，存放在位置重要，寓意深刻的交泰殿，可能是皇帝特意为之。<br>在乾隆11年以前，交泰殿贮藏宝玺曾经多达39枚，真假混杂，其中就包括那枚假的传国玉玺。<br>乾隆认为，即便是真的秦代玉玺，也不能与大清国的宝玺放在一起。乾隆最终确定了可用的御宝25枚。<br>自古以来，没有任何一个王朝能永远不灭亡，<br>《周易》称：天数二十有五。乾隆皇帝将宝玺的数字定为25，就是借《周易》所记，祈求上苍，保佑大清的江山能延续二十五代。但实际上，乾隆之后，王位仅仅往下传了六代。<br>今天，交泰殿依然收藏着当年存放印玺的盒子，供参观者品味历史。</p>
<h5 id="35-天地交泰"><a href="#35-天地交泰" class="headerlink" title="35 天地交泰"></a>35 天地交泰</h5><p>面对不可测度的时间，我们的祖先创造了计时器。他们或许没有想到，这项创造，使得他们子孙的生活，从此被无形的刻度所分割：每一小时，每一分钟，每一秒。<br>紫禁城里的计时器，矗立在交泰殿，自鸣钟报告着皇家的时间。<br>每天，它响过之后，神武门鸣钟鼓，钟鼓楼也接着鸣钟鼓。京城里的人，都以此为标准，给自己的钟表上发条。<br>制定时间标准的自鸣钟，高达5.8米，按现代楼层计算，接近有两层楼高。钟楼背面有一个小阶梯，每月会有一名太监，登着梯子爬上去开锁上弦，一次上满弦，可走一个月。这座钟能报时报刻，一时一鸣，一刻一响。<br>这种自动按时打点的钟表，最早由明代外国传教士带入宫廷。随着欧洲钟表的传入，我国也能制造具有民族特点的各式钟表。<br>现在这座大自鸣钟，是清代嘉庆三年，宫廷造办处制造的，而在它到来之前，报告时间的计时仪器是它——铜壶滴漏。<br>滴漏，是我国古代人民三千多年前就发明出来的一种计时器。交泰殿内这个大型滴漏，是乾隆十年制造的，每天注水100公升，就可以滴漏报时刻了。<br>乾隆年后，滴漏就不再使用了，虽然已失去了实用价值，但由于左安铜壶刻漏，右安自鸣钟，已成一种格式，也就没有把滴漏移走，而作为一种装饰，长期陈设于此。东西方的交泰，也在交泰殿上演。<br>以后的岁月，这样的组合，还会出现在中国其他地方。</p>
<h5 id="36-皇帝大婚"><a href="#36-皇帝大婚" class="headerlink" title="36 皇帝大婚"></a>36 皇帝大婚</h5><p>这是一场历时104天的漫长婚礼，清代260多年间，这样的婚礼只举办过4次。最后一次，也是最盛大的一次。<br>光绪十四年，宫廷画家庆宽等人接到了一个任务，要为当朝皇帝的大婚绘制图册，展现光绪皇帝迎取皇后的全过程。<br>紫禁城里最喜庆，最热闹的活动，就是皇帝大婚。清代只有顺治，康熙，同治，光绪思维幼年登基的皇帝，才有幸在紫禁城举办过婚礼。<br>极为尊贵的中轴线建筑，只有在皇帝大婚的时候，才能最完整的得到使用。因为大部分庆典，都集中在紫禁城的政治区域——前朝的三大殿，只有大婚那天的新皇后，才能乘坐凤舆，从午门，沿中轴线，直达内廷的坤宁宫。<br>光绪大婚，礼仪非常复杂，从选后到洞房，历时104天才完成。<br>庆宽等人，最终出色完成了这一套《皇帝大婚图》。它共分为八册，以连环画的形式，为我们重现了光绪皇帝大婚的全过程。<br>然而，有一个场景，是光绪大婚图中所没有的，那就是坤宁宫，也就是大婚洞房。<br>坤宁宫，这座明朝皇后的寝宫，自清朝入关后，被改为祭神和节庆朝贺的地方。大婚时，坤宁宫东暖阁，就是新婚帝后的洞房，他们将在这里共度三天。<br>画家们或许是奉旨替皇帝留点隐私的空间，但这一举动，显然阻止不了人们想像和探秘的热情。<br>坤宁宫东暖阁，依然保持着百余年前，光绪大婚时的布置。<br>最能传递新婚之喜的，是龙凤喜床上铺的被子。来自江南的精工织绣，一百个天真烂漫的儿童，称作“百子被”，以象征皇帝多子多孙，江山万年。<br>古人认为：皇帝多子多孙，国运才能昌盛，而无后，对于皇室来说，是一个王朝行将覆灭的不详征兆。洞房的精心设计，寓意不言自明。而这精心设计的苦心，终究落空。<br>这间看似喜乐的洞房，对没有爱情的帝后来说，只是苦闷生活的开始。</p>
<h5 id="37-萨满祭祀"><a href="#37-萨满祭祀" class="headerlink" title="37 萨满祭祀"></a>37 萨满祭祀</h5><p>子夜三刻，紫禁城的北门——神武门，打开了，宫禁森严的紫禁城，每天最早进入的，是一个老妇人和两头活猪，这一行，即将前往坤宁宫。<br>坤宁宫，位于中轴线上，地位非常尊贵，明代是皇后的寝宫。<br>来到坤宁宫的老妇人，并不是来见母仪天下的皇后，而是来参加一项每天都要进行的活动——萨满祭神，老妇人就是主持活动的萨满。<br>每次祭祀，萨满必跳舞，俗称“跳神”。每次祭神，都要在神位前杀猪，在这里用清水煮熟，再向神灵贡献。两头活猪，就是祭神时要宰杀和敬献的牲口。<br>杀猪跳神，本是满族在关外的传统。清朝入住紫禁城，皇宫的格局几乎全部照收前朝，中轴线上唯一重大的改变，就在这坤宁宫。<br>满族入关前，皇后的寝宫，就是皇室进行萨满教祭神的场所，入关以后，他们把民族记忆搬进了紫禁城的坤宁宫。这里每天早晚都有祭神活动，凡是大祭的日子，和每月初一，十五，皇帝皇后都亲自祭神。祭神后，皇帝会率领王公大臣吃祭神肉，<br>进坤宁宫吃肉，名为“分福”，一向被大臣们视为殊荣。其实，到坤宁宫吃祭肉，并不是什么享受的美事。祭神的肉被称为“怍肉”，也就是白水煮肉，没有任何调料，而且都是大块大块的端过来，但不吃是大不敬。于是，常有人偷偷的在袖子里，藏一点盐来度过难关。<br>为了配合萨满祭祀，坤宁宫的改造是随处可见的。<br>坤宁宫室内西、北、南三面，修起了环形大炕，供奉神位。东北角，是祭祀时煮肉用的灶台，有三口大锅，两只猪各占一锅，另一锅蒸切糕。<br>一个个看似简单的改动，其实并不简单。<br>在传统汉文化中，位于中轴线上的建筑，被纳入到宗法体系中，在地位和象征意义上，受到典章、制度的约束。改造位于中轴线的坤宁宫，意味着满清皇室，希望把满族的印记，列入到千年的宗法体制之中。<br>在今天的故宫，坤宁宫的特别陈设，让我们触摸到一个民族，古老的记忆。</p>
<h5 id="38-时间机器"><a href="#38-时间机器" class="headerlink" title="38 时间机器"></a>38 时间机器</h5><p>在这座城里，时间可以被看见，可以被听到，可以被触摸，而有时却只有用心才能感受得到。<br>奉先殿，是宫内皇帝的家庙，明清帝王供奉祭祀祖先的地方。每年，皇帝出入这里至少六十次。如今，人们来这里，多是为了聆听时间的声音。<br>2004年9月，奉先殿内部改成了钟表陈列馆，近两百件钟表，是近200年世界钟表发展史的缩影，很多式样在这世上绝无仅有。<br>最为精巧、数量最多的，当属乾隆年间制造的。其中一件，最受乾隆皇帝喜爱，以至于退居太上皇以后，还命人把那座钟，搬到自己养老的宫殿，以便随时欣赏把玩。<br>这座钟（铜镀金写字人钟），有两套完全独立的机械装置组成。表盘部分，由英国伦敦制表名师提摩西•威廉森专门定制。下面的机械部分，则是由瑞士著名的雅凯•德罗家族铸造。<br>当时，外国的传教士们为了传播福音，想尽办法，来满足乾隆皇帝贪图奇巧的心思。<br>这座钟的特别之处在于，这位欧洲绅士，开动之前，先帮他将毛笔蘸好墨汁，开关打开，这位绅士就会工工整整地书写八个字：八方向化，九土来王。<br>这是特意为满足中国皇帝的需求，而做出的改变。瑞士纳沙泰尔博物馆里，也收藏着几件原理类似的机械人，书写的却是外文。<br>在得到写字人钟之后，乾隆皇帝对于机械人的热爱，一发不可收拾。当时，皇宫里另一位会书写“万寿无疆”的机械人，也被乾隆皇帝勒令：必须再学会写满蒙藏三种文字。机械师耗尽心力，却没能成功。<br>这些钟表，从西洋来到紫禁城，为了迎合皇帝的喜好，小则改变装饰，大则整容，它们被视为精美的工艺品，计时是否精准，倒很少有人在意。<br>如今，这些钟表在经过调试以后，大多还可以运行，但曾经把玩它们的主人，早已离去。今天的人们，在这钟表的滴答声中，或许可以听到那些逝者的足音。<br>时间是无情的；时间，又是有情的……</p>
<h5 id="39-清风尚武"><a href="#39-清风尚武" class="headerlink" title="39 清风尚武"></a>39 清风尚武</h5><p>弓、箭是制服猛兽的利器，也是征服天下的武器。弓马骑射作为满族的传统习俗，体现了他们的尚武精神。<br>箭亭，清朝初年建于奉先殿的南边。奉先殿，是供奉清代列祖列宗牌位的地方，箭亭建于此处，意思就是告诫子孙，不要忘记祖训，秉承八旗尚武的传统。<br>箭亭，是昔日清朝武举殿试的地方，也是清代皇帝及其子孙，练习骑马射箭的场所。<br>箭亭的外观十分引人注目，二十根朱漆大柱，承托整个屋顶。它并不像一般的亭子那样是空敞的，而更像是殿堂，亭角微微翘起，房脊成人字形漫坡。<br>每当皇帝操演时，列队武士擂鼓助威，箭亭大门全部打开，皇帝站在亭内开弓放箭，场面壮观，尽显皇家风范。<br>骁勇善战的八旗子弟，入主中原后，解鞍挂甲，耽于享乐。清乾隆为了防止满族骑射习俗的遗失，而至祖制湮灭，在亭内御制一座《训守冠服骑射》卧碑，碑文刊刻了清太宗皇太极，训诫满洲贵族不要效仿金朝，因忘旧制，废骑射，效汉俗，而导致社稷倾覆，国家灭亡的谕旨。太宗皇帝，在告诫八旗子弟时曾说过：若废骑射，宽衣大袖，待他人割肉而后食，是忘本亡国的根由。但这座措辞严厉，告诫子孙的石碑，没能阻挡历史的进程。<br>今天，似乎只有这些皇家的文物在提醒我们，曾经那个马鸣蹄鼓的王朝。<br>虽然嘉庆，道光，咸丰，同治诸位皇帝，也多次在此检阅武举殿试，但是这些都没能重塑清风尚武的辉煌。似乎只有这些碑文，在祭奠那个已远去的时代。<br>弓箭，从清初拥有极高的地位，到最后被迫退出战场，是历史发展的结局，也是中国传统弓箭发展史上的终结篇。<br>清风尚武。箭亭，是为信奉“马上得天下”的创国理念而设置，亭前跑马射箭，武举殿试，都随着帝国的衰亡硝烟散尽。<br>最终，箭亭成为了满清弓马骑射的纪念碑。</p>
<h5 id="40-宫廷绘画"><a href="#40-宫廷绘画" class="headerlink" title="40 宫廷绘画"></a>40 宫廷绘画</h5><p>这是公元1903年的紫禁城。在美国人柯林顿•西蒙斯拍下它之前，关于这座城的影像记忆，大多来自宫廷画师们的笔下。<br>正如这幅《光绪大婚图册》，用写实的笔法，再现了光绪皇帝大婚的外朝礼仪全景，工笔彩绘，极为精细，犹如一部纪录电影，诸多细节，历历在目。<br>这些画的作者，通常被称呼为“画画人”或是“画匠”，他们多少会与一个叫如意馆的地方联系在一起。严格意义上讲，如意馆只是画师们的一个工作地点，而不是一个职能机构的名称。<br>档案记载：如意馆最早的地点，设置在武英殿的北边，临近前朝三大殿。光绪年间，慈禧太后下令重建，如意馆的地点移到了北五所之一的西所。<br>慈禧太后前后征集的画师有近二十人，这些画师分成三组，每月轮流作画十天。每日清晨，他们一般从东华门附近的住处步行进宫，到如意馆的画室作画。<br>画室的条件并不是特别的好，夏天炎热，似乎很难长时间的静心作画；冬天寒冷，经常要把一缸缸颜料，放在小炭炉上烘着，以免凝结。一天的工作时间，通常要到下午五时才结束。<br>他们平时的画作，有的寓意长寿，有的寓意吉祥。比较而言，康雍乾时期的画师们，似乎拥有更大的创作空间。一批西洋画师的加入，融入了中西结合的绘画技法。<br>在《乾隆大阅图》中，意大利人郎世宁，引入欧洲的造型艺术和透视法，只有远山的结构，保留了清宫写诗山水的一些痕迹。<br>宫廷画师，是怎样完成这些绘画的创作的呢？答案也许就在画中。<br>这幅《万国来朝图》，展现的是乾隆年间，藩属及外国使臣到紫禁城朝贺的场面。画中出现了几处奇妙的处理方式，比如：外国使团所进贡的物品中，这只奇特的动物，酷似中国传说中的麒麟。中和殿屋顶是圆形殿顶，而真实的中和殿殿顶，为单檐四角攒尖。<br>这些奇妙的处理方式，让人产生许多的联想：也许他们没有进入前朝三大殿的资格，没有亲眼目睹万国来朝的情景，一切都只是素材和想像的结合。<br>当然，这些宫廷画师的创作，几乎都是由皇帝钦定主题，在定稿之前，要先把草稿送皇帝审查，批准后再正式绘制。<br>宫廷画师，执行者皇帝的意志，遵循着皇家的清规戒律。他们记录下了宫廷的生活，身影往往却被这些恢宏的绘画所湮没。 </p>
<h5 id="41-秘书班子（内阁大堂）"><a href="#41-秘书班子（内阁大堂）" class="headerlink" title="41 秘书班子（内阁大堂）"></a>41 秘书班子（内阁大堂）</h5><p>明正德元年，宫廷里爆发了一场激烈的争斗。<br>一方是内阁为首的外朝大臣；一方是皇帝宠信的内廷宦官。他们互相弹劾，争得你死我活，最终，宦官占得先机，打压了大臣，曾经显赫一时的内阁大堂，一时，归于沉寂。<br>元、明、清三朝，共有五万多名进士，进入内阁，是他们的最高理想。<br>这个院子就是内阁大堂。它偏离中轴，格局和造型显得简单朴素，但在四百多年前，这里一度是国家运转重要的枢纽，更是天下每个书生向往的地方。<br>跨越这座高墙，进入这个院落，就走进了帝国运筹帷幄的中心，辅君左右，为君智囊。<br>第一个住进紫禁城的皇帝明成祖，雄心勃勃，他设立内阁，希望用这个集体决策机构，替代位高权重的宰相。一方面解除相权对君权的威胁；一方面辅佐他料理政事。<br>国家的精英汇聚在这个院落里，通宵达旦的轮值工作，为帝王提供政务咨询和决策指导。闲暇时的他们，则以围棋博弈为乐，这成为一个传统，许多人的围棋水平达到国手级别。<br>围棋，讲求的是平静无声的谋划、拼杀和争夺。棋盘上的博弈，是压力下的排遣，也是他们对现实政治的训练和推演。<br>现实，总是超出规划。明朝皇帝怠惰的子孙，把更多的时间消磨在后宫中。内阁远离了皇帝，而掌管后宫的宦官机构司礼监，慢慢掌握了大权，内阁官员与内廷宦官之间，开始进入一场漫长的对抗。曾经有上百名小宦官，冲进内阁大堂，肆无忌惮的殴打内阁官员；而内阁官员，有时也会发威，在皇宫中大肆捕杀宦官。<br>在这盘棋上，内阁的目标在于赢得整个国家，而宦官们，只要赢得帝王一个人就够了。这一局棋，历经峰回路转，双方各有得失。明朝皇帝短暂的寿命，总是拂乱刚摆开的棋子，而最终，内阁和宦官，都没有来得及成为最后的赢家，紫禁城已经换了主人。<br>女真族的皇帝不信任宦官，也不信任汉族知识分子。<br>康熙皇帝在乾清宫建立了南书房；雍正皇帝在养心殿旁边成立了军机处。内阁，落子东南边地，再也难以在中盘大局有所作为了。<br>1957年以后，内阁小院成为故宫博物院紫禁城学会的办公所在地，游客们有时会贸然到访。当年的遗迹已荡然无存，显得影壁上的这几个字（为人民服务）特别清晰。</p>
<h5 id="42-皇家藏书"><a href="#42-皇家藏书" class="headerlink" title="42 皇家藏书"></a>42 皇家藏书</h5><p>古代中国人的藏书馆，一般都建在水边。因为，书籍最怕火，放到水边，理论上是最安全的，皇家也因循这个传统。<br>紫禁城的藏书楼——文渊阁，就矗立在一汪清池旁边。<br>文渊阁，它的名字本身就有远离火灾的含义，但在漫长历史中，它还是无法躲避大火的洗劫。明代的文渊阁，在农民起义的战火中，付之一炬。<br>公元1773年，乾隆皇帝下诏开设《四库全书》馆，编纂《四库全书》。<br>第二年，为了贮藏《四库全书》，他下诏在烧毁的文渊阁原址，文华殿的后面，设计规划重建文渊阁。<br>浙江宁波的“天一阁”，是江南最著名的私人藏书楼，不仅藏书多达七万卷，建筑形制和书橱款式也颇有特点。于是，江南情结浓厚的乾隆皇帝，便仿造“天一阁”，在紫禁城里，修建他自己的图书馆。<br>带着民间血统的文渊阁，在故宫里显得有些另类。屋顶是黑色的琉璃瓦，似乎不合代表皇帝的黄色，但黑在五行里代表水，印合文渊以水喻文的意义。<br>紫禁城的惯例，建筑面宽开间多为奇数，而文渊阁面宽六间。紫禁城建筑外墙多为红墙，而这里是灰色，廊柱和窗栏为绿色。建筑内部的油漆彩画，也以“河马负书”和“翰墨卷帙”为主题，在一片金碧辉煌中，卓然不群。<br>皇家的建筑师，曾经面临这样一个难题：面宽六间的房子，皇帝在这里读书，他的宝座应该安放在哪里呢？<br>在这里，建筑师使用了一个小小的障眼法。<br>楼梯在不显眼的位置，占据了一部分空间，剩余的五间再次成为奇数，皇帝还是可以位居正中，享受坐拥书城的快感。<br>动用国家力量编修的《四库全书》三万六千册，存放在这里。<br>文渊阁，是皇帝一个人的图书馆。皇帝喜欢在这里和大臣谈经论道，受到赏识的官员，也会得到允许，在这里翻上几天书，真正能享用这些书的人，寥寥可数。<br>清朝的重臣曾国藩，在受到重用之前，有四年时间，一直在文渊阁做皇家图书馆馆长助理，想必皇家图书的浩瀚，让他一生受益匪浅吧。<br>文渊阁，在中国各地还有六个兄弟，模样长得大致相同，它们的名字分别是：文源、文津、文溯、文汇、文澜、文宗，全都与水有关。<br>《四库全书》被抄成六份，分别储藏在这些兄弟图书馆中，中国公共图书馆的雏形，就这样慢慢开始形成了。</p>
<h5 id="43-皇帝学堂"><a href="#43-皇帝学堂" class="headerlink" title="43 皇帝学堂"></a>43 皇帝学堂</h5><p>中国历史上，10岁以下当皇帝的孩子，一共有44位。紫禁城里，当然也少不了这样的故事。<br>1572年的某天，一个小男孩接受了文武百官的朝贺，开始接管祖宗的江山，他就是万历皇帝，这一年他才九岁。一个只会玩耍的孩子，怎么管理天下呢？<br>中国两千多年的帝王史，当然不缺乏这样的经验。万历小皇帝的老师，内阁首辅张居正，为皇帝定下了日常生活的规则：小皇帝每月只用九天上朝听政，其余时间，则去文华殿上课学习。<br>文华殿，成了小皇帝日常生活中最重要的地方。它位于紫禁城外朝东侧，与西侧的武英殿左右对应。这里最早是为太子设计的，太子成了小皇帝，规格大大提高，原来屋脊上的绿瓦也改成了黄瓦。<br>皇帝必须要好学，这是中国历史上的传统。自汉朝以来，皇帝就开始定期接受儒家思想的熏陶，经筵、日讲这些概念，专门是皇帝听课用的。<br>辅佐万历皇帝的张居正，成立了一个皇家教材编写小组，把皇帝治理天下的故事挑选出来，配上图画和浅显的解释，作为小皇帝的专用课本，这本书就叫做《帝鉴图说》。<br>《任贤图治》，讲述上古帝王尧，求贤若渴，任用有才能的人治理国家。<br>《览图禁杖》，则是讲唐太宗看到一本医术中讲“人的五脏都附于背部”，便规定：日后用刑，不得鞭打囚犯的背部。<br>《敛财侈费》，则是讲唐玄宗晚年注重享乐，整个统治阶层生活奢华，造成老百姓生活艰难，国家也陷入困境。<br>这本书，像是今天的连环画册，在图文并茂中，讲述如何成为好的皇帝，吸引小皇帝的兴趣。<br>小皇帝，享受到天下最好的早期教育，但是他失去了快乐的童年。《帝鉴图说》虽然鲜活生动，但还是政治。一向缜密的张居正，经常利用讲课的机会，阐述自己的主张，影响皇帝的决断。<br>在文华殿，皇帝不光要听讲，必要的时候他还要讲课。明清两代皇帝，每逢春分、秋分，要在文华殿举办讲座。<br>文华殿，可以说是紫禁城里的微型大学，皇帝学习、讲课、祭拜孔子、国家科举阅卷都在这里进行。君臣之礼，师生之谊，维护帝王千年的道统，在这个朦胧的空间里，尤其神圣不可侵犯。</p>
<h5 id="44-以心传心"><a href="#44-以心传心" class="headerlink" title="44 以心传心"></a>44 以心传心</h5><p>这座建造于康熙二十四年的院落，在故宫博物院东华门内附近。<br>清晨九点钟，进出的人们和广播体操的队列，都带着一种习以为常的平淡，这平淡将心跳调试出宁静的节拍。<br>三百多年前，紫禁城的这个院落，是一国之君求取治国真谛，和心灵传承的地方。皇帝在文华殿读圣贤书，举行经筵前，会派遣官员或亲自到这里祭拜，这里供奉着华夏民族，自上古以来最著名的十一位圣贤：<br>皇师伏羲、神农、轩辕、帝师尧、舜、王师禹、汤、周之文武、先圣周公、先师孔子。<br>他们的灵脉，仿佛就栖息在这里，守护者大殿，守护着三个题字：传心殿。<br>传心，这颗让帝王得以统定天下，并代代传承的心，到底是什么？<br>人心惟危，道心惟微，惟精惟一，允执厥中。<br>《尚书•大舜谟》里记载：在舜传位给禹的时候，说了这十六个字。这以心为主题的谆谆嘱咐，后来也成为中国文化中著名的“十六字心传”。<br>人心惟危，道心惟微。人心，是危险的，或是声色，或是名利，它会被贪欲所蒙蔽，沉溺于恶习。人心也应该危惧，小心谨慎，如履薄冰，有所敬畏。道心，是天地自然的心，圣人无常心，以百姓心为心，得道的心本与万物融为一体，彼此不分你我，这也便是亲民的内涵。<br>惟精惟一，允执厥中。身为帝王，更要精研，专一，把握这独一无二的真心，平心静气，言行符合不偏不倚的中正之道，体悟这天人合一的境界。<br>传心，传的是十六字的警示恒言。一国之君，要与先贤心念相合，更要与民众同胞情怀相通，成就天下同生的基础，才可以成就王道。<br> “允执厥中”四个字，由乾隆皇帝御笔书写，高挂在紫禁城正中央的中和殿内。<br> 十六字心传的句号，划在三大殿中最低矮、最谦卑的建筑里。而传心殿和文华殿、文渊阁左右相依，位于紫禁城的东南，就好像这座宫城的心脏一般。</p>
<h5 id="45-大内出版"><a href="#45-大内出版" class="headerlink" title="45 大内出版"></a>45 大内出版</h5><p>2005年，武英殿大修，是百年来的第一次大修。1869年，清朝同治八年，它曾毁于大火。<br>在更早的1644年，它见证了紫禁城遭受的，最惨烈的伤痛。那一年的四月二十九日，李自成在这里做了一天皇帝。此前，他率领的农民军攻入紫禁城，崇祯皇帝自尽。然而，李自成在紫禁城只停留了四十天左右，就在满清的攻势下败退了。农民军撤离时，紫禁城的大部分建筑遭到焚毁。武英殿，或许是这位农民领袖登基的地方，得以免遭火灾。<br>武英殿的新主人是多尔衮，他在这里迎来了满清定鼎中原后的第一位皇帝——顺治。<br>武英殿，位于外朝西路，与太和殿东侧的文华殿相对称，暗合文东武西，单从字面理解，这里是讲武的地方，而事实上，与彰显武力毫无关系。<br>明朝，皇帝把这里当作便殿，用来斋居和召见大臣。崇祯的时候，皇后过生日，也曾在这里举行朝贺仪式。<br>武英殿功能最大的改变，发生在康熙朝。这些代表了中国最高印刷水准的图书，均出自武英殿。武英殿刻印的书籍，校勘精细，字体、刻工俱佳，并用特制的墨及洁白细腻的开化纸印刷，质地精美，因此被称为“殿本”，平定了天下的康熙，将武英殿便成了皇家刻书场，历经康雍乾三朝，武英殿刻书达到极盛。<br>乾隆时期，《四库全书》的精华版《武英殿聚珍版丛书》完成后，由于丛书中刊行的书籍，都是《四库全书》珍本秘籍，社会上流传较少，再加上殿本刊刻精美，装帧富丽，各地士子闻风而至，纷纷购买，刊刻而成的三百部，很快销售一空。<br>要想满足社会需要，只有增加印书数量。但武英殿聚珍版各书，在印刷完毕后版块都已拆掉，无法再版通行，即便已经刻印的书籍，想要增加数量，也势必会影响到当时整个《四库全书》刊印的进度。于是，乾隆皇帝同意将所印各书，发送给东南五省各一份，并允许翻版通行。<br>2005年，大修结束，武英殿改造成了书画馆，常人难得一见的历代书画珍品，在这里一一呈现。</p>
<h5 id="46-玄武大帝"><a href="#46-玄武大帝" class="headerlink" title="46 玄武大帝"></a>46 玄武大帝</h5><p>仿佛天宫映射凡间。据说，紫禁城里每一座主要的宫殿，都对应着天上星宿。<br>古人深信，天上四维，大地四方，都有灵兽镇守。东青龙，西白虎，南朱雀，北玄武。北方的七颗星星，形似龟与蛇在夜空交搏，龟蛇便成了坐镇北方的，玄武神的象征。<br>北宋时期，为避开宋真宗赵玄郎的名讳，玄武改称真武。从午门一直向北，御花园内，便是真武大帝在紫禁城的居所——钦安殿。<br>紫禁城的第一位主人朱棣，从北方起兵，顺利夺取大明政权，因此，深信镇守北方的真武大帝，正是他的守护神灵。建造紫禁城时，他特意在象征法统的中轴线上，修建了这座唯一的神殿。<br>公元1420年，钦安殿与紫禁城同时落成，朱棣“天子守边”的梦想，终于实现。<br>钦安殿里，真武大帝身穿金甲，位震北极，在中轴线上一直守护着他的帝国。在中国文化里，北方属水，玄武神除了威武的一面外，他还兼职水神。<br>在元代地基石雕里，游龙栖身于花丛中。而这块游龙戏水栏板，它位于钦安殿后墙栏板的正中，是整个紫禁城正北极点所在的地方。可见，明之后的雕刻，气象大改，各类水中生灵乘风驾雨，游走而来，与明初的国运共同风生水起。<br>水，被以为是滋润万物，万物萌生的根本，故天一生水，地六成之。钦安殿前的丹壁上，碧波之间盘旋的六条龙，应和地六之数。<br>钦安殿前垣门的匾额，上书“天一门”，天一与地六相互呼应，天一生水的卦象得以圆满。水能生木，木知春秋。宫城后的景山，山势如同匍匐大地的神龟。<br>明初的钦安殿，左右曾设有东西七所，象征北方天空的七颗星宿。真武大帝居中而坐，手把酷似灵蛇的金水河，俯瞰全城。<br>远眺紫禁城北部，可以想见，它的建造者朱棣当年何等用心良苦。<br>神定钦安殿，气拥北极天，借着玄武的神力，护佑起大明王朝的一片锦绣河山。</p>
<h5 id="47-庇佑大明"><a href="#47-庇佑大明" class="headerlink" title="47 庇佑大明"></a>47 庇佑大明</h5><p>2004年9月，在修缮钦安殿时，发现了宝顶内的三千多部经卷，这是故宫建院以来最重要的考古发现之一。本就不同寻常的钦安殿，更添神秘。<br>紫禁城建成的491年间，遭遇大大小小火灾四五十次，而钦安殿次次幸免于难。传说这是坐镇此处的真武大帝威力显现。<br>今天，钦安殿内的陈列，仍基本保持初建时的原貌，似乎时间驻足于此，任春去冬来，我自不改。<br>中央正龛，真武大帝披发跣足，踏龟蛇，披玄氅，手执断魔雄剑，身着青云缎八团龙袍，端坐于王座之上。这尊铜像，自明代永乐年间起，就一直安放在这里。真武大帝短须垂面，双目炯炯有神，竟与紫禁城的缔造者朱棣，有几分神似。<br>当年，朱棣在北方起事，率燕军南下，从侄儿手中夺取皇位。誓师当日，东方云开，一道霞光拨开数尺青天，洞彻上下。朱棣立即披发仗剑，告谕将士，自己乃真武显灵附身，燕军乃神佑之师，南征乃神佑之战<br>登基之后，他更是谕告天下：至我朝，真武阐扬灵化，荫佑国家，福庇生民，十分显应。尊奉真武为：北极真武玄天上帝。<br>于是，真武大帝便上升为大明王朝最尊贵的保护神，接受明朝各代皇帝的祭拜。每逢四季更迭之时，紫禁城里都要拈香行礼，祈求真武保佑皇宫消火除灾。<br>真武大帝，掌握枢机，朝运洪化，一如紫禁城中的天之北辰。<br>后来的清帝乾隆，更是在此题下：“统握元枢”敬谒之语，昭告世人。真武大帝也同样决定着大清帝国的生机运转。<br>发现佛经一年之后，大部分经卷又被放回钦安殿宝顶，还原了这座大殿的静穆庄严。<br>明清交替，时光荏苒，真武大帝始终目光如炬，看护着中国最后两个封建王朝。</p>
<h5 id="48-皇家选秀"><a href="#48-皇家选秀" class="headerlink" title="48 皇家选秀"></a>48 皇家选秀</h5><p>这道门，改变了无数女子的命运。恭顺与忠贞，是门的名字，也是走过这道门的女子们必须恪守的训诫。这是鲤鱼跳龙门的起点，也是冰火两重天的界碑。<br>这张照片，拍摄于清末光绪年间，列队站立的小姑娘，是清宫的应选秀女。<br>中国历代君主，都要选择美女充侍后宫，清代皇帝与以往不同，创立了独特的选秀女制度。上至皇后下至宫女，都是在旗人女子中挑选的。从清宫为数不多的几张照片来看，秀女与我们印象中的后宫佳丽，相去甚远。<br>这条路，是秀女进宫之路。由最北边的神武门进入紫禁城后，这些稚气未脱的少女，会在顺贞门前停下。顺贞门，是神武门通往内廷的重要通道，无故禁开。<br>明、清两代的后宫女子，走进顺贞门，心情或许相似，命运却不相同。<br>明代的宫女，将在皇宫内度过一生，年老或患重病，会被安置在北海附近的安乐堂，在那里走完人生。而清代宫女，在宫中服务的时间有限。如果没有得到皇帝的御幸，到了二十多岁时就可以出宫成为自由人，若患病，可以提前离开皇宫。<br>顺贞门内的世界，门外的人其实也有机会得以窥看。<br>顺贞门紧邻北门神武门，太后、皇后出宫游园，或者返回大内；太监出宫办事，回宫交差，都由神武门出入。神武门开启的时刻，顺贞门外就成了宫中女眷与亲人会面的地方。大家在这里交流感情，互赠物品，这些事情都是违反宫规的。然而，森严的宫规很难遵行。到了清末慈禧掌权年间，连最普通的宫女也有机会与家人相见，甚至有了每月固定的时间。这一天，顺贞门外的热闹，堪比当初选秀女。</p>
<h5 id="49-皇宫禁苑"><a href="#49-皇宫禁苑" class="headerlink" title="49 皇宫禁苑"></a>49 皇宫禁苑</h5><p>（庄士敦）：“这处古色古香，幽静安谧的娱乐场所，坐落在紫禁城最北部的中央，位于乾清宫和坤宁宫之后，在紫禁城中，我对它的印象，将永远是最美好的。”<br>这段对御花园最美好的记忆，来自一个世纪前的英国人庄士敦。<br>庄士敦，中国历史上唯一拥有帝师头衔的外国人，1919年进入紫禁城，成为末代皇帝溥仪的英文老师。<br>在他的眼里，御花园是皇帝们的周末，来到御花园，他们脱下龙袍，从一国之君变回一家之主。<br>假山，山洞，古树和曲径，使它成为罕见的美妙迷人之处。御花园的甬道，花卉，戏曲，美人，典故，五颜六色的卵石，九百幅团案。<br>时间也栽种在这里，一株木化石，拥有比紫禁城里最年长的树木还要古老的记忆。前朝罕见的树木在这里涌现，紫禁城居民最清澈的呼吸，从这里开始。御花园，是紫禁城的肺。<br>石头洗去棱角，假山乔装云朵。在这里，泰山变身为一方石头；黄河浓缩为一弯泉水；万里江山凝结在一株盆栽，足不出户，尽收天下之美。中国最有权力的人，深谙园林的奥秘，这奥秘也感染了有幸居住在此的庄士敦。<br>（庄士敦）“皇上在御花园中给了我一处房子，对于宫内属臣们来说，这是破天荒的。我向皇上讲了一些有关泰戈尔诗的问题，并请求允许带他到紫禁城来，这个请求马上得到应允。在御花园我的亭阁中的会见，肯定使皇上和诗人都很愉快，我想是如此。”<br>在这一年，溥仪在庄士敦的帮助下，结识了更多的外国朋友，这些会见的地点，几乎总是御花园，在这所露天的会客厅里，千年的宫廷规矩，正在逐渐消融。</p>
<h5 id="50-再见紫禁城"><a href="#50-再见紫禁城" class="headerlink" title="50 再见紫禁城"></a>50 再见紫禁城</h5><p>（溥仪）：“根据事先的计划，我先出养心殿，直奔神武门，荷兰人欧登科的汽车就在门外等候。这位外国公使团的首席公使还承诺，只要我能够溜出神武门，一切都不成问题。从我第一天的食宿，到脚踏上英国的土地，进入英国学校的大门，他全可以负责。”<br>这是八十九年前（1923年），发生在紫禁城的一次潜逃，逃跑者是皇帝。十七岁的爱新觉罗•溥仪试图从神武门逃走。<br>三百六十八年前（1644年），另一位绝望的皇帝，也将目光投向了神武门。那一天，崇祯皇帝的紫禁城，随着京师一同沦陷。<br>一道神武门，为两位皇帝托付了生与死。<br>神武门，位于紫禁城中轴线最北端，是皇家的后门。<br>（溥仪）：“比预定的时间提前，皇上要离宫的消息就传开了。我的父亲传下令来，各宫门断绝出入，紫禁城全部进入戒严状态。从那次出逃以后，我最怕看见高墙。我站在堆秀山上望着城墙，常常这样念叨 监狱，监狱，监狱！”<br>穿过神武门三十一米的城楼，可以看到景山。<br>公元1644年，那里叫煤山。崇祯皇帝走上煤山，面朝紫禁城，自缢殉国。<br>1924年11月5日，冯玉祥将军向溥仪下达了驱逐令。那天下午，神武门看着紫禁城的最后一任主人匆匆离去。<br>一道城门，成为中国帝王史，最后的梦呓。<br>再见，紫禁城。</p>
<h5 id="51-隐形的历史"><a href="#51-隐形的历史" class="headerlink" title="51 隐形的历史"></a>51 隐形的历史</h5><p>时间甚至不是物理的<br>却一直在冲刷每一代的生命痕迹<br>这样由清晰到隐藏的过程中<br>高贵与卑微在逐渐褪色<br>时间却越来越清晰<br>但那些真实存在过的情感<br>确实驱散了生命中的孤单</p>
<h5 id="52-元代记忆"><a href="#52-元代记忆" class="headerlink" title="52 元代记忆"></a>52 元代记忆</h5><p>金水河上一共有14座桥。桥与水的相遇，仿佛是一场又一场的对话，不过风格各有不同。有时候，只是寥寥数语打个招呼；有时候，则是危襟正坐，像是一场谈判。<br>相看两不厌的，只有金水河与断虹桥。在太和殿与武英殿之间的树荫里，这场娓娓道来的对话，已经有五百年。<br>这边是一条通道，那边是一条长长的空地，连接两岸的地方并非特别重要，可断虹桥仍然是一座特别的石桥。<br>这是一座单孔汉白玉石拱桥，南北走向，全长18.7米，通宽9.2米，呈两头宽中间细的喇叭腰形，桥面并没有特别隆起，乘坐轿子的帝王后妃，甚至可以忽略桥的存在。<br>河水在经过武英殿之后，在这里特别地向北饶了一个弯，好像是特别为桥而来。<br>的确，这是一座先于河存在的桥。学者对这座桥投入巨大的精力，经过对历代资料的梳理，几乎可以确认，在明朝人修建皇宫之前，这座石桥已经存在了。<br>修建这座桥的人是元代的帝王，它可能是元代皇宫正门外的桥。尽管那时候桥下也有水流过，但是谁能保证，元朝的金水河和明朝的金水河，是同一条河流呢？<br>元朝人来自蒙古，他们的审美还带着朴素和天真，没有繁杂的礼法和制度，所以，这座桥上的石雕，也是故宫中独一无二的。<br>小狮子蹲在桥的最高处望柱头上，而龙位则盘踞桥的栏板。狮子的位置怎么可以高过龙？在故宫别的地方是不可想象的。但是，蒙古人才不在乎这些。<br>三十四只狮子的形态各异，活泼可爱，毫无帝王之家的庄严，而龙也不是在兴风作浪，它在牡丹，菊花，荷花，慈姑，蜀葵这些植物中穿行，好像是一场水边的游戏。<br>专家推测：这些石雕的护栏，是故宫建设者，利用了元代建筑中的剩余材料，所以，龙才有了片刻脱离中轴威严的秩序，显示出毫无心机的自由自在。<br>一桥，一水，安静悠闲的对话，十八个桥上的听众，偶尔窃窃私语，它们也许比谁都来得还更早呢。</p>
<h5 id="53-澡身浴德"><a href="#53-澡身浴德" class="headerlink" title="53 澡身浴德"></a>53 澡身浴德</h5><p>这一幕，真的在故宫中发生过吗？<br>两百多年前，中国乾隆皇帝爱上了敌人的女儿，百般殷勤却不能得其心，而浴德堂正是这位阿拉伯女子在深宫中的浴室。<br>关于乾隆皇帝和香妃的爱情传说，有十几个版本，最重要的证据，都指向故宫武英殿后的奇特建筑——浴德堂。这个神秘的小房间，在最近一百年名声大噪，甚至与东西六宫齐名。<br>历史上，浴德堂只在1914年开放过一次，此后，再也未见其真容。<br>浴德堂，位于武英殿院内西北平台上，坐北朝南，面阔三间，黄琉璃瓦卷棚歇山顶，表面上并无显眼之处，奇妙的是从顶部看，它有一处少见的穹顶，穹顶下方是浴德堂中式建筑的后半身，也是传说中最神秘的地方。<br>难以想像，在以《周礼》为最高建筑原则的汉家宫殿中，竟然有这样古怪的房间。这是一座谁也无法否认的土耳其建筑，它的功能正是浴室。墙上贴的是素白琉璃面砖，后墙上有壁炉可以烧水。然而，水从哪里来呢？原来，沿着管道人们发现，高墙之外有一座井亭，石槽把水引进锅炉，然后蒸汽充满浴室。<br>最早把浴德堂和香妃联系在一起的人，正是最早进入故宫的文物研究者。<br>1914年，古物陈列所开办展览，他们找到了一幅疑似宫廷画家郎世宁的作品，挂在了浴德堂的门口，并配写了一篇《香妃事略》，从此，故宫中的小小土耳其浴室，声名大振。<br>但历史常常并非按我们想像的那样发生。<br>历史记载，乾隆皇帝的祖父康熙，在武英殿开办皇家印刷厂，浴德堂曾经被用来蒸晒纸张，乾隆的父亲和他本人，都延续了这项工作，并且成就显著。<br>我们很难想像，一位皇帝宠爱的妃子，会在宫人和百官的注目下，专门到这里来洗澡，可这里，分明就是一所浴室。<br>如此严守礼法的明清故宫，为什么会在皇家文化俱乐部的后院设立一间浴室呢？<br>研究者发现，与武英殿位置对称的文华殿后院有一眼井，名为大庖井。正所谓“左庖右浴”，这与《周礼》中的规定奇迹般地巧合了。<br>学者推测，故宫设计者在布局中留下浴室和井，是因为这两处暗合了儒家经典的记载，以此可以证明，宫殿的选址与建造，是受到上天暗示的。<br>所谓浴德，也是有出处的，典出《礼记•儒行篇》，澡身浴德。</p>
<h5 id="54-后宫前朝"><a href="#54-后宫前朝" class="headerlink" title="54 后宫前朝"></a>54 后宫前朝</h5><p>公元1722年12月20日，康熙皇帝病逝于畅春园，一个时代结束了。即将登基的雍正皇帝，从这天起，开始在养心殿居住。<br>在古代，为父母守丧时居住的棚屋，叫倚庐，养心殿，当时就是雍正皇帝的倚庐。<br>二十七天后，雍正皇帝脱下丧服，不过，他并没有按惯例入住乾清宫，而是正式搬入了养心殿。<br>雍正皇帝对自己这一行为，做出如下解释：本来，我是应该入住乾清宫的，但我想到，那里是父皇六十年统治天下的地方，住在那里，心有不忍。<br>对雍正皇帝一反常规的做法，除了他自己的解释，还有其他的说法。<br>康熙年间，养心殿是宫中造办处的作坊。雍正皇帝入住时，曾下旨说：把养心殿略微整理一下，务必朴素简单些。所以有人说，雍正皇帝住在这里，是想为天下人做一个节俭的表率。<br>雍正皇帝继位，虽然是遵康熙皇帝遗诏，但当时在众皇子当中，关于他密谋夺位的种种传言，早就沸沸扬扬，因此，雍正皇帝有不少潜在的政敌。<br>或是出于安全考虑，他没有住进乾清宫，而是选择了建筑格局更严谨的养心殿。<br>雍正皇帝的这一选择，使他偏离了紫禁城的中轴线，看起来似乎有些违背封建法统，但现代学者发现，实际上，雍正皇帝并没有离经叛道。<br>紫禁城中轴线两边的建筑，对称坐落。奉先殿，是明朝皇帝祭祀祖先的家庙，与奉先殿遥遥相望的正是养心殿。雍正皇帝居住在这里，符合周礼所讲的“左祖右社”，<br>社，是政权的象征，因此，在养心殿御宇天下，是合乎封建法统的。<br>在这座宫殿里，雍正皇帝度过了十三年的帝王生涯，后来又有七位皇帝在这里居住办公，一直到清王朝终结的那一天。<br>养心殿前面，有一座隐蔽墙，叫做“面壁思过”，皇帝坐在养心殿内，他不可能一眼就看得到墙面，所以，人们在墙面前方，摆放了一个远远的玉璧。<br>正对着养心殿明殿宝座的玉璧，寓意面壁，提醒皇帝时时反省自己。这块玉璧也有天圆地方之说，理政时一抬头，皇帝看到的正是社稷江山，天下万民。<br>玉璧的两层含义，雍正皇帝也许都明晓，所以他亲笔写下“中正仁和”，告诫自己不忘恪守儒家的为君之道。<br>1722年12月24日，雍正皇帝举行登基大典，清朝历史上最勤政的皇帝，即将出场，一个新的时代开始了。</p>
<h5 id="55-垂帘听政"><a href="#55-垂帘听政" class="headerlink" title="55 垂帘听政"></a>55 垂帘听政</h5><p>1912年2月12日清晨，养心殿东暖阁，紫禁城最后一次朝见仪式。隆裕太后携年幼的宣统帝溥仪，颁发了退位诏书。延续了268年的清王朝，正式谢幕。中国2132年的帝制，到此终结。<br>由于局面悲情而混乱，东暖阁那面黄色的布帘忘记放下，隆裕太后满脸的忧伤，深深的刻在了历史的记忆里。<br>时光倒退116年，嘉庆元年正月初一日，乾隆皇帝早早起了床。养心殿东暖阁的明窗匾下，镶满珠宝的金瓯永固杯，已经注满了用来解毒驱邪的屠苏酒。86岁的乾隆皇帝颤颤巍巍，写下几句吉祥话，这是乾隆作为皇帝，最后一次明窗开笔，几个时辰后，禅位大典即将开始。<br>养心殿东暖阁，作为举行明窗开笔仪式的地方，始于雍正皇帝，并一直延续下来。<br>但是1861年冬，这个不起眼的小房间，突然被历史的聚光灯照亮。一个女人，出现在东暖阁的黄色帘幕后，其后的48年，她将在这里统治天下。她就是慈禧太后。<br>有关太后垂帘听政的旧例，最早可以追溯到战国时代，在后来的帝制中国，也有不少类似的情况出现。所以，之前大臣们就悄悄搜集了历代皇太后垂帘听政的典章，作为历史依据。<br>第一次垂帘听政大典，在1861年一个冬日清晨。<br>据两朝帝师翁同龢日记中的记载：皇太后前设八扇黄色纱屏，皇帝的宝座设在纱屏前面，大臣们依次祝贺行礼。后来又不知何时，纱屏换了布帘。<br>其实，在逾越了旧制之后，这层隔膜也不重要了。<br>慈禧太后居住的储秀宫，为添建一座小房子，曾推到了一堵墙。黄色布幔展开，红色宫墙倒塌，像是不详的讯号，预示着大清国，正渐渐退化成一个空虚的外壳。<br> “人心瓦解，国势土崩。”隆裕太后的谕旨里，这样形容当时的形势。其实，瓦解土崩，又何止于数年数月数日。</p>
<h5 id="56-勤政亲贤"><a href="#56-勤政亲贤" class="headerlink" title="56 勤政亲贤"></a>56 勤政亲贤</h5><p>雍正元年春节，这一天，十一道谕旨从养心殿西暖阁发出，整顿吏治由此雷厉风行地展开了。<br>养心殿西暖阁曾经是嫔妃休息的地方。雍正皇帝入住养心殿后，这里从休息室变为办公室。政治上的重大决策，多在西暖阁酝酿拟定。<br>几乎每天，雍正皇帝都要在这里工作到深夜。他每晚的睡眠时间，甚至不足四个小时。他在位的4247天里，平均每天朱批十份奏折，现存的四万多份奏折上，他的批语就多达一千万字。<br>雍正皇帝在位13年，几乎没有出过北京城。去世头两天，尽管身体不适，他仍在处理政务。雍正皇帝用他的勤勉践行了他自己亲笔写下的承诺。在勤政亲贤匾下，他引用了战国时代思想家慎子的两句话：“唯以一人治天下，岂为天下奉一人。”<br>乾隆皇帝即位后，在匾额下写下屏文，自勉要做一个像父亲那样勤政的君主。<br>整顿吏治，只是雍正朝一系列改革的序幕；雍正皇帝是名副其实的改革家；他在位13年，比康熙皇帝在位61年做出的改革还要多。尽管当时改革遭遇不少质疑，然而后世学者认为，正是这些改革推动清朝出现了长达134年的康雍乾盛世。<br>乾隆年间，在两年税赋全免的情况下，国库存银连续七年保持在七千万两左右；人口增至三亿；疆土面积达到一千三百万平方公里。<br>雍正皇帝刚刚即位的时候，为防外人窥秘，在西暖阁外设置了红色的挡板。也许是光线因此变得昏暗，于是，将西暖阁的隔扇窗换成了玻璃窗，狭小的办公室遂明亮通透起来。这些微小的改变，连同这个小房间里的故事，如今都成了历史拓写的手记。</p>
<h5 id="57-权利中枢"><a href="#57-权利中枢" class="headerlink" title="57 权利中枢"></a>57 权利中枢</h5><p>凌晨三点，紫禁城还在沉睡，乾清门广场上的军机值房，照例灯火通明，军机大臣手执刚刚密封好的谕旨，焦急地等待兵部来人。这份谕旨将经由兵部直发驿站传送，以日行三百里的速度，寄送到地方官员手中。<br>雍正七年，朝廷对西北用兵，军报往返频繁，由于内阁距内廷过远，办事效率低下且容易泄密，雍正皇帝设立了军机处。<br>军机处与养心殿相距只有50米，在帝制中国，这一世离皇帝最近的管治核心。军机大臣在养心殿面聆皇帝口谕，之后回到这座简陋的房间里，将口谕草拟成文书，再返回养心殿让皇帝过目，一去一返不过一两个小时，而后谕旨密封交兵部递往。<br>雍正皇帝正是通过军机处的高效运转，实现了国事的速议速办，并完善了一套政务保密制度。<br>军机大臣在凌晨时分即开始工作，他们被皇帝严格要求，当日事当日毕。<br>军机处廊下，常常摆放着烧饼、油条等食物，以备加班的大臣们充饥。军机大臣必须随叫随到，“半夜三更听传叫，闹得家眷也心惊”，这两句流传于当时的话，形象地描画出了军机大臣的生活状态。<br>过快的工作节奏，让大臣们倍感紧张，军机处地面上隐约可见的凹痕，也许就是焦虑的踱步，留给青砖的记忆。<br>军机处的气质是务实精干，所以雍正皇帝写下“一堂和气”，在这个高效运转的机构中，人和远比天时地利更为重要。<br>做为中枢，军机处上演了这个王朝最重要的起承转合，当清廷打败太平军的消息传来，咸丰皇帝欣然题写“喜报红旌”，光绪皇帝筹备立宪的上谕，凝固了那段曾令他热血沸腾的短暂的时光。<br>时光似水，如镜，映见历史，你我。</p>
<h5 id="58-皇帝书斋"><a href="#58-皇帝书斋" class="headerlink" title="58 皇帝书斋"></a>58 皇帝书斋</h5><p>从1722年雍正入住养心殿后，养心殿西暖阁便成为皇帝的办公室，国家大事大多在这里做出决定下发全国。乾隆继位后对养心殿进行了改造，他在西暖阁里增添了一间不足八平米的小屋，这就是闻名于世的三希堂。<br>三希堂如此有名，是因为里面收藏了三幅书帖。那一年，乾隆终于获得王羲之的《快雪时晴帖》、王献之的《中秋帖》和王珣的《伯远帖》。<br>《快雪时晴帖》只是王羲之的手札便条而已，上面的意思说：王羲之拜上，刚才下了一阵雪，现在天又转晴了。想必你那里一切都好吧。那件事情没能帮上忙，心里纠结至今，世上很多事情就是这么无奈。王羲之拜上，山阴张侯亲启。就这短短数语的便条，让乾隆如醉如痴，一生竟对此帖做过七十三次题跋。而这些题跋，就是乾隆在三希堂里，一遍一遍临摹和玩味之后写下的。<br>在《三希堂记》中乾隆提到了：士希贤，贤希圣，圣希天，就是三希堂名字的由来。这也是乾隆对文化本质的感悟，在于不断提高修养，而去除贪欲与杂念，恢复人的自然本性，才是修养的最高境界。这和养心殿名字里的寓意“养心莫善于寡欲”的意思暗合<br>三希堂很小，小到只能容下皇帝一人，在此观贴习字。就连槅窗、壁瓶、囊匣、贴落等物件都是微缩版的。就在这狭小的空间里，乾隆皇帝沉浸在文化的修心养性中，并把自己的感触系统地归纳、整理出来。<br>1747年，乾隆主持刊印《三希堂法帖》，包括三幅稀世极品在内的300多幅书法珍品公诸于世。这成为之后一系列文化盛世的良好开端。小小的三希堂，就像一个小小的文化发射台，辐射出一个绚丽多彩的文化盛世。</p>
<h5 id="59-皇帝卧室"><a href="#59-皇帝卧室" class="headerlink" title="59 皇帝卧室"></a>59 皇帝卧室</h5><p>1723年6月，郎中保德接到谕旨，在养心殿后寝宫要开一个活动窗，并装上玻璃。就在这一年，养心殿取代了乾清宫，成为紫禁城里最重要的宫殿。<br>“养心”二字，取自孟子的一句话“养心莫善于寡欲”。<br>雍正之前，这里只是一座普通的宫殿；雍正皇帝即位后，没有按惯例住进乾清宫，而是移居到养心殿。他给外界的理由是：父亲康熙皇帝在乾清宫居住了六十多年，自己不忍心再住进去。但从他后来的生活规律来看，移居养心殿更重要的原因，是为了节约时间。从此，这个局促的空间，成为了紫禁城里最重要的地方。<br>在紫禁城里，采光好坏，是衡量宫殿地位的重要标志之一。为了改善养心殿的采光，雍正元年六月，郎中保德接到谕旨，在养心殿后寝宫西次间后窗下，一扇中心的位置开设一活窗；窗外做三面窗罩，面安玻璃。这是有记载，紫禁城的门窗第一次装玻璃。<br>这一年的初冬，养心殿后寝宫的窗纸变成了玻璃，房间变得通透；并不代表不私密，相反，雍正移居养心殿的这一举措，是高度集权的重要变革。<br>衡量宫殿地位的另一个标准，是室内的陈设，尤其是当时在宫廷里风靡一时的钟表。对于惜时勤政的雍正皇帝来说，钟表越多，就是说明这个地方越重要，停留得也就越久。时间对他很重要。<br>每天，皇帝在这里休息，若要处理政务，只要穿过堂子，不到一分钟，就可以来到前殿办公。这种类似现代商住两用式的环境，虽然有些局促，却大大提高了办事效率。在雍正13年的皇帝生涯中，基本保持了下床就上班的生活规律。<br>从雍正皇帝开始，清朝有八个皇帝，把养心殿作为生活起居和处理政务的地方，时间长达近200年。<br>如今，这里成为除故宫中轴线外，参观人数最多的地方，因为这里，可以看到唯一一处中国皇帝的寝宫。</p>
<h5 id="60-水晶之愿"><a href="#60-水晶之愿" class="headerlink" title="60 水晶之愿"></a>60 水晶之愿</h5><p>水晶，寓意纯洁无暇，光明磊落。放在后妃的居所，是一种美好祝愿。同时也告诫后妃，作为皇帝的女人，要冰清玉洁，母仪天下。<br>公元1889年正月二十七日子刻，在瑟瑟的寒风中，一位皇后的凤舆，从大清门进入皇宫。<br>隆裕皇后是慈禧的侄女，此时的她，心里一定充满了欣喜。但是，宫廷里很难有纯粹的婚姻，他与光绪皇帝的结合，从一开始就蒙上了阴霾。<br>隆裕皇后正式的寝宫在钟粹宫，但遵照慈禧的意思，她却经常住在与光绪皇帝寝宫养心殿相邻的地方。慈禧太后亲笔为这里提名，体顺堂。希望隆裕可以做一位体贴和顺的皇后。然而，慈禧的一番苦心却没有改善帝后之间的关系。每天皇帝进晚膳的时候，所有嫔妃齐聚养心殿后院静静等候，因为晚膳之后，皇帝将亲手揭开悬念。在这个游戏般的仪式中，隆裕很少收获惊喜。真正得到光绪宠爱的是居住在景仁宫的珍妃。<br>因为光绪的过度宠爱，燕喜堂西围房成了珍妃的第二座寝宫。细心的光绪命人在这间屋里多设一个帐幔，一幅板帘，一席大褥。甚至一度把这里当成用膳和议事的地方。<br>相比燕喜堂，体顺堂多少显得有些冷清。这就是皇宫，仅仅一墙之隔，有的是集合万千宠爱于一身，有的却独守枯灯寂寞一生。<br>当一个女人的婚姻成为政治砝码后，她的人生就变成了一场悲剧。这水晶赋予的美好祝愿，并没有给皇后带来幸福。它见证的，也许更多的是一个女人寂寞的泪珠。</p>
<h5 id="61-帝师之间"><a href="#61-帝师之间" class="headerlink" title="61 帝师之间"></a>61 帝师之间</h5><p>“1875年1月8日，晴。今天是祈雪的日子。我今天本不打算出门，想整理一下书籍。9点多，突然接到军机处的信。奉皇太后的懿旨，派我进毓庆宫教皇帝读书。”<br>帝师翁同龢日记中提到的毓庆宫，始建于康熙年间，是康熙皇帝专门为太子允礽所建。雍正即位后实行秘密建储制，毓庆宫丧失了皇太子宫的光耀地位，成为众多皇子读书的课堂。为了互不干扰，这里被分割成许多格子间。清代的皇子到了读书的年龄，就要由各自专门的从学师傅教授功课。清末的小皇帝也不例外。<br>“帝，德，帝，德……”<br>1876年3月16日，年仅5岁的光绪皇帝在毓庆宫开始了第一天的学习生活。<br>“今天是个好天气，我们是从帝，德二字开始教起的。皇帝朗诵了四遍。”<br>光绪皇帝的师傅很多，但他最喜欢的，就是这位爱写日记的翁师傅。在光绪皇帝的成长中，翁同龢扮演了非常重要的角色。幼年离开父母，在深宫大院之中，小光绪显得无依无靠。凡事都要听姨母，也就是慈禧太后的安排。每天的读书情况，都会有专人记录，再呈交慈禧过目。在翁同龢的日记里，光绪是个极为爱哭的孩子。<br>“今天皇帝一来，读书状况就不好。我想尽办法安慰他，温熟书的时候，突然哭了起来，不知道为什么。饭前读书的时候又哭了。”<br>每到这时候，翁师傅多是给予鼓励，小光绪在这里得到了身心的双方面照顾。对翁师傅也越来越依赖。<br>1877年8月，翁同龢请假回老家修墓，小光绪的在翁师傅离开的两个月里，读书的遍数日渐减少，而且不愿意出声音。三个月后，翁师傅终于回来上课了。<br>“我来到书房请安，皇帝见我第一句话就是，我想你很久了。”<br>那一天，皇帝读书读了20遍。每一遍都大声朗诵。在22年的帝师生涯中，除了因病和两次回籍修墓之外，翁同龢几乎没有离开过光绪。他们的关系，不似君臣，如同父子。<br>毓庆宫的格局像座迷宫，清末的小皇帝们在此学习，迷失，成长。</p>
<h5 id="62-顺天承乾"><a href="#62-顺天承乾" class="headerlink" title="62 顺天承乾"></a>62 顺天承乾</h5><p>1889年农历的正月二十七日，是光绪皇帝举行大婚的日子。21岁的叶赫那拉•静芬成为紫禁城内廷名义上的女主人，是为隆裕皇后。<br>以乾清门为界，紫禁城的外朝和内廷截然分开。乾清 交泰 坤宁三宫的两侧，东西六宫分布左右。这里就是皇帝的女人们居住的地方。<br>乾清、坤宁两宫有如天地，东西六宫就像十二星辰分立两侧，形成对乾清、坤宁两宫的拱卫和从属。从空中俯瞰，会发现这里正好是《周易》八卦中坤卦的卦相。“顺”是坤卦的核心思想，“坤”顺从于代表天的乾阳。明嘉靖十四年，东六宫的永宁宫改名为承乾宫，其用意就是为了点破东西六宫的寓意在于，“坤”，顺天承乾。<br>明代皇后居住在坤宁宫，清代雍正迁移养心殿后，皇后随之在东西六宫中择一而居，光绪帝的一后二妃都居住在东六宫，隆裕皇后住在钟粹宫。虽然隆裕是经乾清门进入后宫的帝国最尊贵的皇后，但她却几乎没有机会行使掌管东西六宫的权力。此时的西六宫中住着这个王朝真正的主人，慈禧太后。<br>隆裕来到之际，东西六宫在格局上已和明代肇建时有所不同。东六宫的格局基本未变，西六宫则有了较大的变化。咸丰时期，长春宫和启祥宫被打通，启祥宫被改称为太极殿。慈禧五十大寿，储秀宫和翊坤宫被打通。明代肇建紫禁城时，完美的风水格局愿景，在清代让位给了功能的需求。<br>1908年光绪帝和慈禧太后相继离世，3岁的溥仪继位。1912年2月12日，隆裕以太后身份签发了清王朝的最后一道上谕《退位诏书》，结束了大清王朝263年的统治。根据《清室优待条例》，逊帝仍可暂居宫禁。<br>此时居住在后宫中的隆裕，该是何等的心情。她尝谓，孤儿寡妇，千古伤心，每睹宫宇荒凉，不知魂归何所。第二年，西六宫中的太极殿，隆裕在忧郁中离世。顺天承乾的东西六宫，在历史中悄然隐退。</p>
<h5 id="63-六宫馀韵"><a href="#63-六宫馀韵" class="headerlink" title="63 六宫馀韵"></a>63 六宫馀韵</h5><p>1922年12月1日，夜。达斡尔族女子婉容，被舆轿抬进了紫禁城内廷，成为了逊帝溥仪的妻子。东西六宫迎来了最后的主人。<br>这里是皇帝的女人们居住的地方，明代鼎盛时期，嫔妃加上宫女人数达到九千。清朝繁盛之际，康熙后妃55人，乾隆后妃41人。那时紫禁城人丁兴旺。<br>在这12座院落中，女人们按照不同的等级被安排居住，每宫的正殿，配殿，后殿都有嫔妃居住。每个宫苑中都有这样一张龙椅，不论皇帝是否临幸于此，都被摆设在最显赫的位置，散发着紫禁城唯一男主人无处不在的气息。它是皇帝的化身，也是礼制的化身，时刻提醒着皇帝的女人们，顺乎礼制，恪守妇德，表率天下。<br>婉容来到后宫的时候，往日的规矩已成衰微之势。婉容住进了储秀宫，这里曾经是慈禧太后居住的宫院。豪华的宫殿里，昔日主人的气息似乎还未散去。婉容已经迫不及待的开始改变。西洋的刀叉替代了雅致的瓷器，满汉全席换成了牛奶面包。储秀宫的后殿丽景轩改为西餐厅。东西六宫失去了往日的热闹，偌大的宫区里只有两位女主人。17岁的皇后婉容，15岁的淑妃文绣。这两位女子，开始了在这空旷宫区中的生活。<br>内廷范围广大，四周宫墙周长1.6公里，苍震、启祥两门是进入东六宫和西六宫的唯一门户。分隔院落的院墙形成为数众多、分布有秩的夹道。紫禁城的后宫，就像高墙围合中的迷宫。<br>院墙、宫墙、城墙，道道高墙封锁了外面的窥视，也封闭了里面的视野。<br>1924年，溥仪被驱逐出紫禁城。在东西六宫中，生活了两年的婉容和文绣离开这里。随着她们的离去，这一大片无主之地沉寂下来，在时光中回味过往的岁月。</p>
<h5 id="64-后宫豪院"><a href="#64-后宫豪院" class="headerlink" title="64 后宫豪院"></a>64 后宫豪院</h5><p>兰花，中国古人认为它有王者之香，又有生育男孩的象征。它与寿石组合的图案，寓意宜男宜寿。<br>1852年，一个名叫兰儿的秀女，被赐号懿贵人，搬入了储秀宫，那时她刚刚16岁。四年后，已晋升为懿嫔的兰儿，在这里生下了第一个，也是后来唯一的皇子载淳。母以子贵，兰儿的身份开始不断地攀升。储秀宫的陈设也慢慢地奢华起来。<br>1861年8月22日，咸丰皇帝病死热河，载淳登基。26岁的兰儿变成了皇太后，从此她用回了她的本名慈禧，并开始了对大清朝政权近半个世纪的控制。<br>1884年，慈禧五十大寿，她花费六十三万两白银用于重修储秀宫，准备再次移居进去。按照礼制，太后本应住在太后宫区，慈禧本不该再住回储秀宫。然而慈禧却对当年做妃子时的地方情有独钟。这时的慈禧，在经历了青年丧夫，中年丧子和多次政治风云之后，早已经不是刚进宫时的柔弱女子。垂帘听政的统治已经非常稳固，对于装修装饰这样的小事，当然要完全按照自己的审美和爱好，规矩和礼制根本不用太忌讳。<br>在此100多年前，乾隆皇帝曾发布一道上谕，东西六宫的陈设器皿，布置停妥，永远不许移动。而慈禧不仅把屋内重新布置装修，还把前殿改成了寝宫，甚至拆除了储秀宫门，建起了体和殿，合并了翊坤、储秀二宫。<br>乾隆以后，五个皇帝都没有萌生过改建紫禁城的念头，慈禧却给东西六宫动了个大手术。<br>1884年，修葺一新的储秀宫再次迎接它曾经的主人，也是从这时开始，储秀宫成为了东西六宫中最舒适的豪宅。皇帝们没有做，女人们不能做，唯一能做到的就是这个比皇帝权力还要大的女人。</p>
<h5 id="65-红楼一梦"><a href="#65-红楼一梦" class="headerlink" title="65 红楼一梦"></a>65 红楼一梦</h5><p>“画笔的工细，已达到了异常的高度，于毫发不苟之中，透出了典雅娟秀之气。”三十年前，红学家周汝昌先生见到长春宫廊庑墙上的十八幅《红楼梦》题材的壁画时，发出了这样的感慨。<br>绘制的画匠已经无从考证，但借助清代《红楼梦》画师孙温的笔端，我们可以透过岁月的剥蚀，揣测长春宫壁画当年的容貌。这十八幅壁画其实在当年是不合礼法的。自嘉庆年间开始，《红楼梦》就被列为禁书。清律例规定，《红楼梦》属于淫词小说，必须销毁。究竟是谁，有勇气将《红楼梦》壁画带入本该垂范天下的皇室宫闱。<br>1861年，经历了政变的腥风血雨后，慈禧回到紫禁城。长春宫是东西六宫中唯一拥有咸丰御笔的一所，被新晋太后钦定为寝宫。半个世纪的垂帘听政，从国丧的一片肃穆中开始。<br>然而，后宫的凄凉气氛终究不会持续太久。长春宫前的体元殿，被改造成了慈禧的私人戏台。由《红楼梦》改编的选段，也成为太后热衷的曲目。据说，正是由于慈禧太后对于《红楼梦》的钟爱，太监李莲英命工匠将《红楼梦》经典选段绘制于长春宫廊庑，成为醒目的戏单。看戏时，慈禧偶尔也让皇帝和后妃相伴，并在众人面前自比贾母。此时的慈禧，已不是垂帘时的年轻寡妇，她有了更尊贵的称号，老佛爷。<br>宫墙内外，紫禁城和大观园里的故事，又是何其的相似。“回廊复道亘长春，幅幅红楼梦里人。徒倚雕栏凝睇想，真真幻幻两传神。”</p>
<h5 id="66-景仰仁德"><a href="#66-景仰仁德" class="headerlink" title="66 景仰仁德"></a>66 景仰仁德</h5><p>这是位于东六宫的一个院落。顺治11年，康熙就诞生在这里。<br>景仁宫，命名出自《论语》，取意“景仰仁德”。现在这里是故宫博物院的捐赠文物纪念专馆。花梨木制作的巨型屏风上，按捐赠年代，镌刻着700多位捐赠者姓名。三万多件珍贵文物，从这些上榜人士的手上，捐赠给了故宫。这些捐赠者，以他们的仁心义举，接续着中华文明的薪火。<br>作为皇帝的居所，紫禁城拥有天下最多的宝物，这里的收藏，是历代帝王搜集而来的最终累积，几乎囊括了中国未曾中断的文明。<br>1924年溥仪被驱逐出紫禁城，在这之前，宫中的大量文物，已经被他以各种名义转运出宫。这其中就包括素有天下第一画卷美称的《游春图》。《游春图》为隋代大画家展子虔所绘，距今1400多年，被认为是中国现存最早的一幅画作。1946年，《游春图》出现在背景琉璃厂，立刻吸引了国内外藏家的关注。最终，《游春图》被张伯驹所购得，为此，他卖掉了弓弦胡同占地15亩的宅院。张伯驹后来回忆说，不知情者，为我搜罗唐宋精品，不惜一抛千金，魄力过人。其实我是历尽辛苦，也不能尽如人意。因为黄金易得，国宝无二。<br>动荡的岁月，中国的文物大量流失海外，世界著名的博物馆中，几乎都收藏有中国文物，留存在私人手上的更是不计其数。<br>张伯驹是民国时期的大收藏家。此时的他除了《游春图》外，已经藏有李白的《上阳台帖》，杜牧的《张好好诗》，范仲淹的《道服赞》等珍贵文物，其中尤为珍贵的是西晋陆机的《平复帖》。这封距今已有近1700年的信札，是中国现存最古老的书法真迹，比《兰亭序》的书写时间还要早79年。在它常不足一尺，只有九行字的信笺上，盖满了历代名家的收藏章记，被尊为“中华第一帖”。<br>“予所收藏，不必终予身，为予有，但使永存吾土，世传有序。”新中国成立后，《平复帖》和《游春图》连同其他6件国宝，被张伯驹和夫人潘素捐赠给了故宫，这些文物成为了故宫的镇馆之宝。<br>新中国成立至今，故宫博物院共接受新入藏文物达23万余件，其中有3万多件来自民间捐赠。这一个个的名字是时光雕刻的印痕，它们折射出来的文化及人格力量足以穿越历史的尘烟，绽放出耀眼的光芒，温暖中国人的文化记忆。</p>
<h5 id="67-海棠依旧"><a href="#67-海棠依旧" class="headerlink" title="67 海棠依旧"></a>67 海棠依旧</h5><p>永寿宫内，后宫嫔妃生活展吸引游人的目光。院落内的海棠树枝叶繁茂，也许只有它们还会记得那些深宫往事。<br>明成化十一年，永寿宫迎来了它的新主人，这一年，低级女官纪氏被封为妃，踏进了永寿宫的大门。明朝内廷，一段惊心动魄的往事在这里进入了它的高潮段落。<br>5年前的一天，纪氏被宪宗皇帝偶然临幸，怀上了龙种。宪宗皇帝专宠比自己年长十年岁的万贵妃，宫中女子怀孕者都难逃万贵妃的残害。堕胎药喝下后，孩子却没有打下来，宫女谎称纪氏得了肚胀的痞病，她被安置到宫外的安乐堂。在这里，孩子生了下来。宪宗的废后吴氏及太监张敏把孩子藏在暗室中，偷偷喂养成活。此时的宪宗皇帝，正处在老而无子的烦忧中。<br>成化十一年，张敏找到机会对宪宗哭泣禀报，宪宗欣喜万分，五岁的孩子被接到宫中，很快被立为太子，起名朱祐樘。纪氏被封为淑妃，移居永寿宫。<br>永寿宫位于故宫西六宫，建于明永乐十八年，初名长乐宫，万历时更名为永寿宫。中轴线上后三宫两侧的东西六宫左右对称，连名字也是相互对应。永寿宫与景仁宫，命名出自《论语》，表示对仁、寿的祈愿。<br>在纪氏踏进永寿宫的那一刻，她该是怎样的心情。通往永寿宫之路，是由深宫弱者铺就，宫里宫外到处是万贵妃的眼线，知道这件事的还有其他的宫女和太监，可是他们都选择了沉默，保留心中的那份良心。<br>一个月后，纪淑妃在永寿宫暴病而亡，朝野震惊，人们一致猜测，纪淑妃是被万贵妃投毒致死。但宪宗皇帝并未追究，而太监张敏也在不久之后吞金自尽。<br>孝宗继位后，曾派人寻找母亲的近支亲属，却没能找到，只得作罢。童年的经历，一定成为了孝宗内心最深的伤痕。他一生只娶了一个皇后，不立妃嫔，过着平常百姓一样的夫妻生活。<br>长乐，永寿。寓意美好的宫名下，多是后宫中现实的人生。</p>
<h5 id="68-甄选后妃"><a href="#68-甄选后妃" class="headerlink" title="68 甄选后妃"></a>68 甄选后妃</h5><p>光绪十四年九月二十八日，体和殿台阶下的铜凤刚刚在晨曦中醒来，就感受到了宫中弥漫的别样气息。这一天光绪皇帝将在这里决定自己的婚姻大事。<br>之前的六月，已经年满18岁的光绪帝，终于等来了大婚及亲政的懿旨，这一懿旨昭示世人，慈禧将归政于光绪。懿旨颁发后，朝廷上下颇为震动，反应最强烈的莫过于光绪帝本人，十四年的控制和束缚一朝解脱，亲裁大政的夙愿即将实现。<br>经过层层筛选，五位入选的八旗女子最终确定下来。此次选后地点，设在翊坤宫的体和殿，地点的选择是一个颇有意味的安排。<br>翊坤宫，故宫内廷西六宫中的一座宫院，初名万安宫，因其在位置上紧靠中轴线上的坤宁宫，明嘉靖时改为翊坤宫，“翊”字的含义为护卫、辅佐。<br>光绪七年，随着慈安的离世，慈禧成为紫禁城唯一的掌权者。光绪十年，慈禧五十大寿，从长春宫移居年轻时居住的储秀宫，这座宫院与相邻的翊坤宫随之进行了改造，储秀门和分隔两座宫院的院墙被拆除，翊坤宫的后殿改成穿堂殿，曰体和殿，使翊坤宫和储秀宫相连，形成了一个四进的院落，这也是东西六宫中最豪华的庭院。<br>慈禧居住在储秀宫，在体和殿进膳、饮茶和休息，这里是太后的餐厅兼客厅。也许在光绪心中，改造后的体和殿，是一堵愈发矗立的高墙，他还需要等待多久才能够穿越它。从翊坤宫前的凤到储秀宫前的龙，此时的慈禧正处在权力的巅峰。<br>这是一次毫无悬念的选后，慈禧的侄女，叶赫那拉•静芬成为了他的皇后。光绪帝终其一生，无法走出太后的围墙，1908年，光绪皇帝崩逝于中南海瀛台涵元殿，第二天，慈禧太后在中南海仪鸾殿离世。4年之后，大清帝国覆亡。<br>逊帝溥仪的妻子婉容，在翊坤宫廊下曾设秋千嬉戏，廊下的秋千环尚存。这是这个王朝留在这里的最后记忆。</p>
<h5 id="69-前世今生"><a href="#69-前世今生" class="headerlink" title="69 前世今生"></a>69 前世今生</h5><p>建福宫花园，紫禁城曾经的记忆。<br>2005年，建福宫花园复建工程全面完工，在被大火焚烧了80多年后，乾隆皇帝修造的第一座花园又重新出现在紫禁城的外西路。当皇帝的御制诗和传说都已缄默的时候，建筑还在说话。<br>乾隆五年，登基不久的皇帝把自己当皇子时居住的乾西二所升格为重华宫，四所、五所被改造为花园。前宅后园是中国文人理想的生活模式，中国文人的后花园虽然是自然式庭园，但这自然的定义并不是乡野的自然，而是以自然的名义，表达了心灵自由的境界。<br>乾隆从小接受儒学名师的教育，汉文化素养很高，他曾写有四万余首御制诗，数量之多超过中国历史上任何一位诗人。在龙袍下面，乾隆还有一件文人的衣衫。<br>严格按照礼制规划的紫禁城，少有空间留给皇帝的心性，也许文人乾隆一直在寻找自己的后花园，渴望在一体两面中，实现内心的平衡。<br>这里集江南园林和宫廷园林特色为一体，以宏伟的延春阁和开敞的静怡轩为主，各色建筑错落有致。内心多样的乾隆，异常钟爱这个紫禁城中空间变化最丰富的院落，皇帝的珍宝也被大量存放其间。由表及里，建福宫花园鲜明地钤上了乾隆自己的印章。几十年后，乾隆把他对建福宫花园的钟爱延续到宁寿宫花园。宁寿宫区是乾隆为自己退休后当太上皇而准备的。宁寿宫花园的建造以建福宫花园为蓝本。<br>从此，在紫禁城内廷东西两路上，模样相似的两个花园遥遥相对，应和着皇帝的青春与迟暮。<br>2005年，建福宫花园复建工程完工。这时，距离最初兴建已经有263年。</p>
<h5 id="70-潜龙飞天"><a href="#70-潜龙飞天" class="headerlink" title="70 潜龙飞天"></a>70 潜龙飞天</h5><p>1727年，一位叫弘历的皇子，搬进了乾清宫西二所。这一区域自明代开始，就是地位低下的宫女居住的场所。但对于皇子弘历来说，能住进这里却意味着莫大的荣耀。此时，弘历刚刚成婚，按照惯例，成婚后的皇子应该搬到宫外的府邸居住，但父亲雍正却要弘历仍居宫内。在此之前，弘历和重兄弟合住毓庆宫，并没有享受过特殊的待遇。<br>雍正皇帝在位期间，为了避免储位争斗，变公开立储为秘密立储，谁是储君一直是个迷。而弘历享受的这一特殊待遇，引发了很多人的猜疑。然而，塞翁失马，焉知非福。1735年八月二十三，雍正驾崩，秘密建储的悬念被揭晓，继承皇位的正是弘历。雍正破例让弘历移居乾西二所的良苦用心大白于天下。<br>建立第二个太子宫，其实是为秘密建储制设立的一个配套措施，保护弘历不正东宫之名，免遭储位争斗。弘历成了乾隆皇帝，为了强化皇权，把继承皇位前居住的“所”升为“宫”。清代把皇帝做皇子时居住的府邸成为潜邸，意思是以前做皇子时就已经是一条尚未升腾而潜在的龙。<br>《尚书•虞书•舜典》中有，“此舜能继承尧，重其文德之光华”的句子。大臣建议取其中重、华二字，作为乾隆潜邸的名字。这正和乾隆的心意，因为大舜早已是他学习的榜样。<br>按照惯例，重华宫在竣工后就该写一篇记，但乾隆却迟迟不肯动笔，直到1783年，73岁高龄的他才在《重华宫记》中道出了其中玄机。<br>“大学士鄂尔泰、张廷玉给我的潜邸取名为重华，虽是称颂之意，但却给我制定了一个典范，让我只有进步，不能后退。经过四十多年的努力，虽没有达到熙世化民的程度，但感觉自己并没有去贪图享乐，而是像大舜那样永远坚守天道，把善施与天下。”<br>有了这些理由，乾隆才认为自己没有辜负重华之名。</p>
<h5 id="71-潜邸重华"><a href="#71-潜邸重华" class="headerlink" title="71 潜邸重华"></a>71 潜邸重华</h5><p>1735年九月初三清晨，乾隆登基成为清朝第六代皇帝。登基半年后，乾隆皇帝开始了改建皇宫的处女作。“重华宫不必俟秋，令拆造，现令预备料，即择日开工修造。”<br>重华宫是乾隆做皇子时的居所，按例要将潜邸由所升为宫。升格的不止是名字，长达八年的潜邸改造工程开始了。清朝前期，皇帝的活动空间并不大，少量的营缮工程，也只做一些功能性的补充，并没有较明朝增建什么成体系的新建筑。<br>乾隆的出现，改变了这种状态。像父亲雍正那样，整日在养心殿埋头批阅奏折的生活，乾隆是忍受不了的。移居养心殿后，他要扩展更大的私人空间。首先他将乾西头所与二所打通，在院内搭了座戏台。重华宫戏台又叫重檐台，看戏的除了太后和王公大臣之外，回部、番部的首领，偶尔也会受邀来此。1739年，乾西四所、五所被拆掉，建成建福宫及其花园等处所。因其远离太后和后妃住地，建福宫花园更像是皇帝的私人花园。<br>八年后，潜邸竣工。重华宫既是礼仪场所，又可娱乐休闲，是集多种功能于一体的建筑群，相对独立而又自成体系。它的出现，拓展了帝王的活动空间。然而乾隆改造重华宫的用意远不止于此。<br>1745年立春后的第二天，乾隆召集大学士，内廷翰林第一次到重华宫赐宴联句，之后每年新正都定期举办。<br>重华宫地处紫禁城的内廷深处，在乾隆之前，外臣绝无机会进入此地。所以，能得到皇帝的邀请，御笔赐福，茶宴联句，哪怕只是听上一场戏，都暗示了皇帝的信任和恩宠。那么，为皇帝尽忠效命，也是理所当然了。</p>
<h5 id="72-皇子宫区"><a href="#72-皇子宫区" class="headerlink" title="72 皇子宫区"></a>72 皇子宫区</h5><p>万历十三年五月，一个叫张差的男子，手持木棒从东华门闯入，一直冲到现在的南三所，险些危及太子朱常洛。张差被捕后，万历皇帝却一反常态，未加深究就将他草草处死，史称“梃击案”。但整个事件，却被很多人与万历的宠妃郑贵妃联系在一起，因为她始终相要万历废了朱常洛，立自己的儿子为太子。<br>南三所作为皇子在紫禁城的主要住所，虽然偶有波澜，但在多数时候是一片祥和的。<br>在阴阳五行中，东方属木，青色，主生长，所以皇子的居所在东方，覆绿瓦，寓意皇子可以茁壮成长。这样，南三所的建筑就显得与众不同。<br>在清朝，皇子们到了成婚年龄才会搬到南三所。在此之前年幼的时候，跟母亲一起住在后宫。十岁后就要搬到毓庆宫等宫区。受封亲王后，就要迁出紫禁城了。只有收到格外重视的皇子，才会允许一直住在紫禁城。在这些皇子中，最终只会有一个成为皇帝的接班人，搬到那些覆盖黄瓦，代表皇权的建筑中。<br>紫禁城建成后，一共经历了二十四位皇帝。二十四位皇帝中，兄弟最多的是雍正，长大成年的有二十三个之多，彼此间对皇位的竞争异常激烈。雍正皇帝即位后，将公开建储制改为秘密立储制，使皇位继承人的名字成为一个秘密，只有在老皇帝驾崩后才会昭告世人。这样不仅间接保护了皇位继承人，还给众多皇子提供了一个公平竞争的机会。<br>虽然他们中有的未享青春年华就早早逝去，有的默默无闻终其一生，很少有人去记录他们，但是也许只有他们才更能体会到平淡的幸福。因为主角只有一个，皇帝才是紫禁城唯一的主人。</p>
<h5 id="73-菩提树下"><a href="#73-菩提树下" class="headerlink" title="73 菩提树下"></a>73 菩提树下</h5><p>2011年，位于紫禁城外西路的英华殿开始大修。院内被铁架围护起来的菩提树在光影斑驳中抚摸着遥远的记忆。<br>大明王朝某年的盛夏，英华殿内的菩提树又到了枝叶繁茂的时节。神宗皇帝来到这里，深切地缅怀生母李太后。神宗自幼丧父，十岁即位登基，改元万历。李太后对小万历的要求十分严格，为了培养他，李太后延请内阁首辅张居正作为帝师，母亲和师傅的督导伴随着一个孩子的成长。<br>李太后崇佛，英华殿内的这两株菩提树是她亲手所植。我们不知道许多个月圆的夜晚，在菩提树下，李太后许下的都是什么样的愿望。但其中，应该有对儿子的期许，对帝国江山永固的保佑。<br>可是长大后的万历皇帝，在其漫长的执政生涯中竟然罢朝二十四年，留下了一段扑朔迷离的历史，供后人去猜想和解读。在万历皇帝没有上朝的那些年日，李太后在菩提树下该是怎样的心情。晚年的李太后，她的时光在英华殿供佛念佛中度过。<br>清代，皇室信奉藏传佛教，佛堂遍布内廷。在这一大片袅袅佛香中，这座明代遗存的佛殿，偏居于西北角落，在草木摇落中，安享繁华中的宁静。朝代的更迭，生命的延续，一如菩提树下的花开花落。而这树像是带有神奇的密码，连通的是人世间通往佛国世界的祈愿。<br>李太后种植在丹陛桥两旁的菩提树，至清时已繁衍成为七株。入秋之际，树籽随叶落地，宫里人拾起作念珠，奉为珍品。<br>一沙一世界，一树一菩提。从皇宫到民间，这里护育的是寄托，是物是人非中点滴的祈愿。</p>
<h5 id="74-月满西楼"><a href="#74-月满西楼" class="headerlink" title="74 月满西楼"></a>74 月满西楼</h5><p>乾隆十六年十一月，为了庆祝母亲崇庆皇太后六十岁的生日，慈宁宫内正在举行隆重的祝寿典礼。<br>早晨五鼓，銮仪卫在慈宁宫门前陈设太后仪驾。皇帝的拜位设在慈宁门正中。天亮十分，皇帝皇后分率王宫大臣妃嫔命妇等在此行礼朝贺。满清继承了明王朝以孝、仁治国的儒家思想，高举孝道作为政治表率。<br>前朝皇帝驾崩，子嗣皇位，先帝的后妃无论暮年还是青春，随之成为太后，太妃，由紫禁城内廷中心地带的东西六宫迁移到这里。<br>慈宁宫为皇太后正宫，是举行大典，礼庆的场所。太后是慈宁宫的焦点，而一些地位低下的太妃、太嫔，先帝在世时尚且遭受冷落，住到慈宁宫后就更无地位了，通常她们只能靠微薄的例银为生。《慈宁燕喜图》所描绘的热闹场景，在这片宫区中只是片刻的点缀，大多数时候，这里是静谧的。<br>当清晨在慈宁宫投下第一缕光影，这里飘起袅袅佛香。慈宁宫花园是紫禁城内大小佛堂集中的区域。将精神抚慰的佛堂得体的安置在自然抚慰的园林之中，不甘寂寞又不得不寂寞的先帝的女人们，在拜佛诵经，草木摇落中获得内心深处的宁静。<br>从东西六宫来到这里，实际距离并不遥远，可是对于前朝后妃来说，这段距离抵得上千山万水。<br>此后，属于她们的时代一去不返。</p>
<h5 id="75-宫墙内外"><a href="#75-宫墙内外" class="headerlink" title="75 宫墙内外"></a>75 宫墙内外</h5><p>入夜后，故宫保卫处的工作人员每天都要登上城墙进行巡逻，这个行为或许已经延续了六百年。<br>紫禁城建成后，城墙上就驻扎着护军。清朝时，每面城墙上都有十几个哨所，配备有大炮。这样城墙连着城门、角楼与护城河，形成了一个完整的防御体系。<br>紫禁城的城墙，下方宽八点六米，上方宽六点六米，容得下六匹马并排行走，高十米，南北长九百六十一米，东西长七百五十三米，周长三千四百二十米，被它围住的面积为七十二万平方米。<br>自古以来，中国的建城方式，是挑选一块珍贵的风水宝地，先将它围起，之后在里面构建最好的建筑和风景，形成一座城。而整个紫禁城，恰恰反应汉字“国”的含义。紫禁城作为中国最有名的城，六百年来，它的城墙始终矗立在那里。<br>据说，当年砌筑宫墙共用城砖多达一千万块，每块砖长四十四厘米，若将所有砖连在一起，长度是赤道长度的十分之一，有四千四百公里。每块砖都用人工砍磨平整，横竖合缝对齐，再用煮好的江米汁和白灰浆掺合在一起，将内部缝隙全部灌满，使墙垣凝固成一个整体，固若金汤。用如此时间，人力，物力，堆积出精巧和规模。这时，建造的已不是对象本身，而是让人肃然，敬畏的宏伟。它要围住的不仅是九千多间华丽的殿宇，更是那些被我们称为规矩的内容。<br>城墙的四个方向各开一座城门，唯有经过它们，才可以让墙内与墙外产生些许的沟通。<br>春夏秋冬，数百年，也许只有这城墙，这城门，可以看见，墙外，为生命而活的平凡百姓们的悲欢离合；墙内，为皇帝而活的宫女太监们的喜怒哀乐。外边的人遥不可及，里边的人难以冲破。</p>
<h5 id="76-道法自然"><a href="#76-道法自然" class="headerlink" title="76 道法自然"></a>76 道法自然</h5><p>冬尽有期，雪霁。这座城即将复苏。<br>风从紫禁城东南方吹来。隔着九千多间屋顶，紫禁城西北角的延庆殿等待春的到来。<br>旧时每年的这一天，人们欢天喜地的涌进来。皇帝亲临延庆殿，仰天三叩九拜，祈祷风调雨顺，并发愿谨守规范，顺天之气。<br>中国以农立国，依赖土地，靠天吃饭。敬仰天地，敬畏自然，在神圣的祭祀中，寄托了凡间百姓最为质朴的生存愿望。<br>与天地相合，顺应自然，就是这片土地历经数千年岁月轮回造化出的生命观。<br>春秋流转，搭起这片城的不仅是土木砖瓦，还有四季的霜华。<br>经历过多少千娇百媚的生和回归寂灭的死。城中的一切，到底是有是无。<br>听，这座城中，生命，一死，一生。天地，一呼，一吸。<br>春雨惊春清谷天，夏满芒夏暑相连，秋处露秋寒霜降，冬雪雪冬小大寒。</p>
<h5 id="77-紫禁寒暑"><a href="#77-紫禁寒暑" class="headerlink" title="77 紫禁寒暑"></a>77 紫禁寒暑</h5><p>数九隆冬，大雪笼罩下的紫禁城，和宫墙外的世界一样寒冷。<br>但皇帝所在的宫殿，却像春天一样温暖。赤红的炭火正在地洞里熊熊燃烧，热量顺着火道传递到地面，整间屋子也因此变得暖和，形成暖炕或者暖阁。乾隆皇帝就曾为此题诗，“人苦冬日短，我爱冬夜长”。此外，屋内还放置了各式造型精致的薰笼，手炉和脚炉，以便皇帝和嫔妃随时取暖。<br>就在皇帝享受冬天里的温暖时，工部都水司的差役们却要冒着严寒，在护城河的冰面上忙碌。他们已经在位皇帝的夏天生活做准备了。每年立冬后，清理过的护城河蓄入干净河水，待深冬结成厚冰，选取明净坚厚冰面，切割成一尺五寸见方的冰块运进宫中，以备皇帝来年夏天使用。采冰只要人多即可，但要在偌大的紫禁城里长期存冰，谈何容易。<br>在隆宗门外西南处，有四座形制南北走向的半地下建筑，这里就是藏冰的地窖。冰窖地下部分深约一点五米，墙厚达两米，至今进入窖内，仍感寒气袭人。窖内宽六点三六米，长十一点零三米，地面铺大块条石，四壁自下而上，先砌条石，再砌条砖，然后起条砖形成券顶。采得的冰块由里向外由下到上，一直码放到窖顶，每座冰窖竟可藏冰五千多块。<br>藏冰的问题解决了，至于夏天如何用冰，自然还有更高明的法子。清代出现了以天然冰制冷的木质冰箱，称为冰桶。箱内材质采用导热性较弱的铅或锡，既能较好隔热，又可避免冰水侵蚀箱体。在箱底一角有圆形小孔，用来排放冰水。夏天，可将瓜果饮料镇于箱内冰上，供以消暑。冰箱的盖板一块固定在箱口，一块是活版。盖板上的通气孔在保鲜食物的同时，释放箱内排出的冷气，降低室内温度，进而起到空调的作用。<br>皇帝对冬暖夏凉的享受不仅奢华，更是至高皇权在日常生活中的又一种折射。</p>
<h5 id="78-皇家炊烟"><a href="#78-皇家炊烟" class="headerlink" title="78 皇家炊烟"></a>78 皇家炊烟</h5><p>中国有句古语：民以食为天。饭食对于老百姓来说，就像天一样重要。在古代中国，吃饭更是被天子每天都当做重要的事情来做。<br>“传膳！”<br>乾隆十二年十月初一，和往常一样，随着养心殿传出的一声口令，一队穿戴整齐的太监抬着各式膳桌，手捧几十个金龙朱漆膳盒，从内御膳房浩荡而出。这天皇帝决定在重华宫用膳。<br>御膳房是紫禁城里专门伺候皇帝吃饭的机构，里面主要管理事务的大臣都由皇帝钦点。但紫禁城里的御膳房并非只有一处。最大的在景运门外，称为外御膳房，不过这里很少为皇帝制作膳食，一般只负责宴请群臣。另一处设在养心殿旁，称为内御膳房。这里才是专为皇帝做饭的地方。<br>皇帝吃饭的第一道程序是传膳，由专人详细记录下当天用膳的时间、地点和菜名。传膳之后就是进膳，进膳之前还有一个不被记载的程序：尝膳。每道菜上来后，先有太监用银牌测试是否有毒，再亲口尝试，确定没有问题皇帝方可使用。<br>不论是日常用膳还是宴请，皇帝膳桌上总是冷热、甜咸、荤素、干鲜一应俱全，以此达到营养合理搭配，膳食平衡。在所有膳品中，像燕窝、鹿脯丝这样的山珍海味自然不可缺少。即使像白菜这样最普通的食材也要用珍贵辅料精心烹制，以此彰显天子的尊贵。<br>例如这道皇家菜谱中，以鸭子为主料制作的寿形鸭方，首先要将鸭子煮熟，接着烧成酱鸭，再拍成肉泥，然后涂上虾肉，再在虾肉上铺满核桃，最后放入油锅煎炸而成。有时，皇帝会将吃不完甚至丝毫未动的膳品赐予大臣，这对大臣来说将是无上的光荣。<br>御膳除了菜品的极致讲究，餐具更是人间最奢华的搭配。除了金、银、官窑瓷器、珐琅器之外，还有玉石、玛瑙、玳瑁、象牙等各种名贵材料做成的碗碟。皇帝用膳完毕后，随着太监的一声传令，来时的队伍又浩浩荡荡的返回内御膳房。<br>如今，内御膳房的院子冷清而荒凉。只有这些被历史雕刻过的石头散落在角落，用身上的印记永远记录下这里曾经的神秘和繁忙。</p>
<h5 id="79-龙袍袈裟"><a href="#79-龙袍袈裟" class="headerlink" title="79 龙袍袈裟"></a>79 龙袍袈裟</h5><p>故宫西六宫墙外有一座别致的精构楼阁，是故宫西路建筑群中最高的一座。四条金光闪闪的飞龙腾跃于脊上。形制奇特，宫中少见。<br>这座名为雨花阁的藏传佛教密宗佛堂，是仿照十一世纪初西藏古格王朝托林寺内的金殿建立的。<br>雨花阁是由来自青海的三世章嘉•若白多杰根据藏传佛教的教义主持修建的。这位三世章嘉年仅八岁就被迎入北京，从二世土观上师学习显密教法，并与当时比他大六岁的皇子弘历结下了同窗之谊，从此开始了他与这位乾隆皇帝作为朋友、君臣和师徒的一生。清朝藏传佛教信仰成为团结蒙藏民族、维系皇权的政治需要。<br>雨花阁兴建的源起有这样一种说法，有一天乾隆皇帝问章嘉国师，在西藏为佛教建有广大功业的杰出人物有哪些，他们的主要功绩如何。章嘉国师一一详细列举，其中讲到了西藏佛教后弘期的著名大译师仁钦桑波创建托林寺。寺内正殿有四层，内设四续部佛众的情况。乾隆皇帝说，在朕的京城中也要建一座那样的佛殿。于是由章嘉国师负责，在内城右方建起了一座四层金顶佛殿。但在政治家与普通人的双重角色里，一个皇帝的真实信仰常常不被人们知晓。<br>雨花阁，汉式单檐攒尖顶，上覆鎏金铜瓦，顶立鎏金喇嘛塔，顶脊装饰藏式鎏金蹲龙，是清宫建筑群中唯一的汉藏合璧式建筑。它是皇宫的专用佛堂。除了作佛事的僧侣，外人是不能踏入一步的。这里既不供高僧大德居住，也不供蒙藏领袖朝拜，它只是乾隆皇帝个人的礼佛场所。所不同的是，他将藏传佛教修行层次通过佛像与唐卡的陈设，做了具象化的表现。<br>在雨花阁一层正间众多佛像之中，有一尊具有喀什米尔风格的铜像，他是古格王朝一位出家为僧的国王，名为那嘎拉咱。这尊铜像出现在雨花阁中，这其中的深意如同是两个王者穿越时空的一次对话。乾隆皇帝对这位十一世纪皈依佛法的国王的敬仰，已经表露了他希望作为转轮圣王光大佛法的祈愿与心声。</p>
<h5 id="80-宫中坛城"><a href="#80-宫中坛城" class="headerlink" title="80 宫中坛城"></a>80 宫中坛城</h5><p>雨花阁是一座外观三层实际上内置四层的藏传佛教密宗神殿。<br>它每层的佛龛供奉都代表密宗四部修行的不同层次。分别供奉着功行品、行德品、瑜伽品、无上瑜伽品四部密宗佛像。雨花阁及其陈设实际上是西藏格鲁派密教系统观念和神系结构的直接表现。雨花阁一层悬挂着乾隆皇帝御题智珠心印匾额，正间天花装饰观音六字大明咒，整个殿堂前布满佛塔、佛像、供物，佛龛之后有掐丝珐琅立体坛城三座。<br>坛城即曼荼罗，作为象征宇宙世界结构的本源，是变化多样的本尊神及眷属众神的观想缩影，反映出佛教的宇宙观，而这三座精美华贵的珐琅立体坛城是西藏众多寺庙中所没有的。这三座坛城坐落在汉白玉须弥座上，外部是紫檀木重檐亭式罩，是世界范围内最名贵的立体坛城。<br>雨花阁是藏传佛教密乘神系趋向系统化的标志，安置在坛城后一层称智行层，供奉以无量寿佛为中心的事部九尊佛，这些神像就是密宗事部的主尊及护法神。<br>暗层仙楼称德行层，供行部佛像九尊，以宏光显耀菩提佛为中心，佛母和金刚各四尊分列左右；三层普明圆觉称瑜伽层，供奉以大日如来佛为中心的瑜伽部五尊佛，即金刚界毗卢佛，成就佛，最上功德佛，普慧毗卢佛和度生佛；顶层雨花阁称无上层，也是最为神秘的无上瑜伽部三位主尊佛所在，位置与底层坛城的主尊保持一致。<br>密宗修行人要严格遵循修行层次和阶段，最后达到生起圆满，才能解脱成佛。雨花阁立体而形象的再现了藏传佛教格鲁派密宗四部的修行理论，使雨花阁成为清宫佛堂的标志。</p>
<h5 id="81-珍妃之死"><a href="#81-珍妃之死" class="headerlink" title="81 珍妃之死"></a>81 珍妃之死</h5><p>1900年8月14日，八国联军攻破北京，光绪皇帝逃离了紫禁城，而他最喜欢的妃子在这一天死去了。<br>珍妃曾经是光绪皇帝最宠爱的妃子。因为出身家庭比较开化，从小就见识广阔、性格开朗。时常穿着男装博皇帝一笑，还经常拉着光绪在皇宫里到处跑，让太监给他们拍照。她天资聪慧，能双手写字，喜欢绘画、唱歌。这与年轻时候的慈禧很像。不知是否是这个原因，珍妃刚入宫时也深得慈禧太后的喜爱。慈禧知道她喜欢书画，还一度为她延请名师。<br>但是后来，慈禧对珍妃的态度却慢慢发生了变化。甲午战争后的一天，慈禧太后突然宣布将珍妃降为贵人。事情的起因是河南巡抚裕宽为谋福州将军一职，走珍妃的门路，也就是珍妃在卖官。慈禧审查此事，珍妃供认不讳，并顶撞道：上行下效，不是老佛爷开端，谁敢如此。慈禧不能忍受有人挑战自己的权威，更重要的是珍妃此时已卷入更深的政治漩涡。<br>当时的光绪急切的希望摆脱慈禧的训政，在全国推行维新变法，珍妃在这件事上经常给他鼓励和支持，甚至替他出谋划策。<br>1989年9月，维新变法半路夭折，光绪被囚禁瀛台，珍妃被施以杖刑，撤去簪珥，打入冷宫，直到那场悲剧发生。关于珍妃的死因，宫廷的记载是，慌乱出宫时来不及将她带走，后殉难宫中。而另一种说法来自一个名叫崔玉贵的太监。8月14下午，几年来一直幽禁在冷宫的珍妃被带到颐和轩，简短而激烈的对质后，慈禧太后下令，太监崔玉贵和王德环连揪带推把珍妃推下井里。<br>清廷的记载漏洞百出，太监之言也不能尽信。但也许正因为这扑朔迷离，让珍妃成为清朝后宫中最具传奇色彩的妃子。曾经集万千宠爱于一身的妃子，转眼间就死于非命，五六百年，这样的故事又有多少呢。这就是紫禁城，一座带有巨大魔力的城，任何在里面发生过的事情都是你读懂它的一处神秘注解。</p>
<h5 id="82-长寿天下"><a href="#82-长寿天下" class="headerlink" title="82 长寿天下"></a>82 长寿天下</h5><p>1796年正月初四，一辆来自安徽的马车来到北京，一百零六岁的老人熊国沛要去紫禁城宁寿宫吃一顿饭。<br>宁寿宫始建于清康熙二十八年，1772年乾隆皇帝对宁寿宫区域进行了重新规划，打算作为他日后归政的太上皇宫。<br>太上皇宫也分前朝和内廷，前朝的主体建筑是皇极殿，九间重檐的宫殿前有露台和御路，皇极殿的造型与乾清宫相仿，也取帝尊九五之制，殿内装饰品级仅次于太和殿。内廷部分分为东、中、西三路，殿、阁、楼、台、亭、斋、轩、馆，无不具备，每栋建筑的命名都与长寿有关。仿坤宁宫规制的宁寿宫，仿养心殿规制的养性殿，仿乾清门式样的养性门，太上皇宫俨然一个微缩的紫禁城。<br>嘉庆元年正月初四，宁寿宫皇极殿被油饰一新，禅位刚三天的太上皇乾隆要在这里宴请天下的长寿者，这个宴席叫做千叟宴。在当时，参加千叟宴就意味着被皇帝接见，是很高的荣誉，家人和朋友也会倍感荣耀。所以远在安徽的熊国沛老人已经一百零六岁高龄，但还是在家人的搀扶下坐上了去往北京的马车。一路上如何行程，怎样集中，途中食宿，预防疾病等注意事项，宫廷里全部派专人负责安排照料。<br>随着中和韶乐的奏响，千叟宴开始了。<br>在嘉庆皇帝的侍奉下，太上皇乾隆升上皇极殿宝座，嘉庆皇帝亲率三千零五十六名银须白发的老人山呼万岁为太上皇祝寿。席间九十岁以上的老人被请到御座前，一百零六岁的熊国沛喝到了太上皇亲赐的御酒。这位号称升平人瑞的老人，被授赐了六品顶戴，其他九十岁以上的老人也都得到了七品顶戴。这是朝廷的敬老之意，也是乾隆对于寿的理解。<br>古语说，大德曰生。帝王的成就不在开拓疆土，不在积累财富，而在于使他的子民健康长寿。万民长寿，才是治理天下的最高境界。宁寿宫，乾隆的长寿理想。</p>
<h5 id="83-翠玉江山"><a href="#83-翠玉江山" class="headerlink" title="83 翠玉江山"></a>83 翠玉江山</h5><p>昆仑山脉的密勒塔山，海拔将近五千米，山顶终年积雪，空气稀薄。这里因盛产大块玉料和水中的籽玉而闻名天下。<br>1759年，乾隆皇帝平定了回部大小和卓的叛乱，从此这里到北京就开辟了一条玉石之路。所有的玉料都变成了皇家独享，如果民间有百姓私自开采将触犯法律。<br>十年后的一个夏日，随着一声响彻山谷的声音一块硕大的石料从山体脱离下来。这块石料有五千多公斤重，采石工人用了三年的时间才把它运到山下，它被装上一辆轴长三丈五尺的特大号专车，前面用一百多匹马拉车，后面还有一千个工人扶把推运，一场长途跋涉的旅程开始了。<br>一路上工人们逢山开路，遇水架桥，冬天则泼水成路，在冰上拽运，每天最多走四五里路，三年后他们终于到达了目的地紫禁城。<br>当时皇宫里有玉作和如意馆，专门为皇家做玉，但如果有大型玉件要雕刻的话，则会把玉料送到苏州或扬州制作，因为那里聚集了全国最好的制玉工匠。几个月后，这块玉料又奔向了千里之外的扬州，这一走又是三个月。<br>在扬州历经七年零八个月，这块玉料的身上被雕琢上一个大禹治水的故事，这是赞美乾隆是个像大禹一样的好皇帝。<br>1787年9月，在二次进宫后，这座玉山被安顿在紫禁城里的乐寿堂。这时，距离它离开昆仑山已过去十多年。曾经有多少工匠在它身上同时工作我们不得而知，但有人计算过，仅在扬州的雕琢工时若由一人完成，需四百多年。如果把运送的工时算上时间将更为惊人。<br>打造这座玉山，无论是花费的时间还是付出的人力，足以堪比大禹治水，如此劳民伤财，乾隆皇帝后来也觉得过意不去，在给这座玉山的亲笔题诗中，他告诫子孙，如果仅仅为了追求珍玩，今后决不允许再做这样的事。后来更多的人称它为国宝，因为在它之后，玉山的制作就此绝迹。</p>
<h5 id="84-一诺千钧"><a href="#84-一诺千钧" class="headerlink" title="84 一诺千钧"></a>84 一诺千钧</h5><p>1794年的秋天似乎来的特别早。这一天，八十五岁高龄的乾隆皇帝在梵华楼诵经打坐，袅袅佛音未能驱散他心头的烦闷，满怀心事的乾隆信步走进了景福宫。<br>景福宫坐落在紫禁城的东北角，隶属于宁寿宫区，修建于乾隆三十七年，是乾隆皇帝专门为自己营造的一处颐养天年的居所。站在院墙内，乾隆环顾四周，曾几何时，当年种植的松柏如今已经枝繁叶茂，而自己执掌皇位也已经将近六十个念头，十六年前的往事再次涌上乾隆心头。<br>那一年一个叫金从善的秀才冒然上书，指责乾隆迟迟不立太子，乾隆据理力争，并正式公开了自己登基时的对天盟誓，只当六十年皇帝，绝不超越祖父康熙的执政年限。当年的誓言声犹在耳畔，事到如今，退还是不退，乾隆的心里难以决断。透过垂花景福门，乾隆看到了他最爱的文峰石，这块高约四点五米的巨石耸立在绿荫下，上面镌刻着乾隆在十八年前写的一首《文峰诗》。在这首诗里，乾隆介绍了文峰石的来龙去脉。这块奇石采自北京西山，竖立在景福宫起到重要的点景作用。在诗的后半部分，乾隆明确表述了将来归政退位的决心，看着自己归政退位的誓言深深刻在石头里，乾隆的心情更加沉重。根据钦天监推算，乾隆六十年正月初一将会发生日食，正月十五又将发生月食，难道是上天要向自己警示么。<br>1795年正月初二，因为日食而推迟了一天的皇帝家宴上，乾隆依次给子孙们发送红包，唯独绕过了十五字顒琰，乾隆对顒琰说，你要银子何用。话一出口，乾隆感受到如释重负的轻松。<br>1796年新春，乾隆宣布退位，皇十五子顒琰成为帝国第七位皇帝嘉庆。历史上禅位的皇帝寥寥无几，乾隆列居十三。<br>是处拟为归政居，老谢远游老厮守。退位以后，乾隆并没有像诗里所说的那样搬进景福宫，他依旧在养心殿居住。但是这些都已不再重要，毕竟乾隆已经郑重地履行了自己的诺言。</p>
<h5 id="85-魏晋风流"><a href="#85-魏晋风流" class="headerlink" title="85 魏晋风流"></a>85 魏晋风流</h5><p>中国书法长卷中，最传神的点睛之笔往往在不太起眼的角落。一如乾隆花园里这座小小的凉亭。<br>禊赏亭，位于乾隆花园的入口处，亭内有迂回婉转的流杯渠，引水入渠，酒杯可以浮在水面顺水流动，这很容易让人想起千年前发生的一幕。<br>公元353年三月三日，王羲之和他的朋友们在一个叫兰亭的地方举行聚会，众人依次坐于河边，顺水流动的酒杯在谁的跟前停留谁就要作诗一首。会后王羲之写下《兰亭序》，描述了众人悠然自得的场景，《兰亭序》被誉为天下第一行书，序中流露出仕途不顺的王羲之对人生的感叹，唯美的文字无意中营造了一个类似陶渊明世外桃源的地方，以至于这场在当时并不特殊的聚会也让后来的人念念不忘。<br>相传到了唐代，《兰亭序》的真迹被唐太宗得到后命书法名家冯承素、褚遂良等人临摹数个副本，分赐亲贵近臣，之后民间也广为临摹，但无一胜过王羲之的原作。唐太宗临死前，命《兰亭序》真迹随他一起埋葬，留给后人的则是无数个摹本。<br>迟到的乾隆皇帝只好在这些摹本上下功夫，他将历代最著名的七个摹本全部收入囊中，并和自己的摹本一起刻成石柱，制成拓本，统称为《兰亭八柱帖》，以便宣称最好的《兰亭序》都在他那里。<br>这是一幅很有意思的画，画中人原是王羲之，乾隆皇帝得到后要求画家以他为模特，重新绘制了这幅画，画中人变成了乾隆本人。<br>乾隆不是书法家，也不是艺术家，可以称他为收藏家。作为一名狂热的收藏发烧友，仅仅是装扮成王羲之的样子，或许乾隆还觉得不够，于是王羲之的兰亭变成了乾隆花园的禊赏亭，会稽山阴的清流激湍，微缩成眼前的曲水流觞。<br>作为帝国的主人，紫禁城就像一个巨大的收藏室，王羲之，《兰亭序》，禊赏亭，一切有生命的，无生命的，都被隐藏在这里。现在收藏室的大门已经打开，到访的人们可以一睹此中的收藏。通过这些现存的线索揣测皇帝的精神幽谷。</p>
<h5 id="86-倦勤归政"><a href="#86-倦勤归政" class="headerlink" title="86 倦勤归政"></a>86 倦勤归政</h5><p>如果把乾隆花园比作一个写实长卷，长卷末处是乾隆为自己修建的退休之后的居所：倦勤斋。<br>两百多年前，午后的阳光慵懒的洒在这里，花甲之年的乾隆偷闲小坐于此。这是他的得意之作，在紫禁城九千多座房子里被公认为奢中最美，美中最精。也有人认为它是一面镜子，从中得以窥视乾隆皇帝的内心。<br>南方的竹制装修在干燥的北方常常离缝走样，脱落开裂，这里却大量使用了竹子的元素，它经年累月的牢固里藏着一个秘密。<br>在四川、贵州等地，海拔千米以上的山谷、河床旁有一种珍稀树木，它生长缓慢，成材至少需要百年，木质坚硬耐腐，自古有水不能浸，蚁不能穴之说。它就是传说中的金丝楠木，历代是皇家专用木材，专用于皇宫、陵寝、寺庙等大型建筑，乾隆皇帝则大材小用，将它雕刻成斑竹髹漆纹格。小戏台上的勾栏同是金丝楠木质地却更为精工细作，巧夺天工。它既有竹子的优雅形态，又有金丝楠木的恒久坚固，最是低调的奢华。<br>竹子宁折不弯，中通外直，在中国古代被认为是君子的象征，历来受到文人的特殊喜爱。能征善战，骁勇彪悍的女真族坐稳江山之后风雅起来，不输给任何一个汉族文人，乾隆皇帝更是将不可居无竹贯彻到了极致。<br>精选的冬竹加工成细如发丝的竹丝，竹丝根据不同的光泽，组成这些图案，这是古代南方手艺人最为繁难精细的手工艺。将毛竹去节去青，留下一层竹簧，多道工艺后镶嵌在木胎、竹片上，在上面雕刻出栩栩如生的纹样。今天南方艺人中，幸运的保留着这项手艺，倦勤斋才能够在两百多年后得以修缮。<br>在不同的场合，乾隆表现出对竹子的偏爱，在这里，他把这种偏爱发挥到了极致。然而，他再爱竹子，终究只爱竹子的形态，内里却是皇家专用的金丝楠木。同样，他再渴望倦勤归田，却没有在倦勤斋真正居住过哪怕一天。<br>退休之后，他仍居养心殿把持朝政，倦勤归田意味着放弃权位，这是高居庙堂之上的乾隆皇帝一生无法抵达的彼岸。</p>
<h5 id="87-手工艺再现"><a href="#87-手工艺再现" class="headerlink" title="87 手工艺再现"></a>87 手工艺再现</h5><p>乾隆皇帝的归田之所，曾经美轮美奂的倦勤斋，在两百多年无人问津的时光里已然面目全非。<br>2002年，倦勤斋修复工程启动，寻找两百多年前的精致手工艺是这次修复的一大难题。<br>倦勤斋修复组首先来到了江南，寻找可以复制苏绣铺垫的传统手艺。<br>明清两代，这里设立有江南织造局，专办宫廷御用的各类纺织品。苏绣发源于苏州古运河，最初只是当地捕鱼人身上的刺青，苏州姑娘的心灵手巧让苏绣闻名天下。苏州刺绣以其工艺高超，设色雅致，成为宫廷礼仪和生活中不可或缺的装饰。两百多年前，乾隆钟爱的倦勤斋也大量使用苏绣。今天，这个家族工作室经过世代传承，依然保留着这门传统的手艺。不过这一次，他们遇到了最大的挑战。<br>（顾文霞大师工作室 办公室主任 张平）“这第一部分的难度就在于，它这个是几百年前的文物，现在是已经是保存在故宫里面，它不让带出宫的，就增加了一个难度。”<br>工作人员只能参照故宫博物院提供的文物照片，先用铅笔把图案白描于纸上。这个寓意富贵福寿的图案，大概花掉一个设计师两个月的时间。完成的白描稿要送交故宫博物院专家审核，通过之后方能进入下一步。<br>将白描稿勾勒于特别订制的明黄、鹅黄的贡缎上，这一步叫勾绷，处置起来不能失之毫厘。接下来的刺绣由最有经验的工匠合力完成，凭借高超的技艺，工作室三十五位绣娘历时一年的精心绣制才复原完成了倦勤斋铺垫，共七套，二十三件。<br>在安徽潜山，找到和两百多年前一样的造纸技术。在江苏南京，找到几近失传的云锦技术。在浙江东阳，寻觅到了世代相传的竹编工艺。<br>一个个以为失传的技艺重生了，古老的倦勤斋，古老的倦勤斋，重新变得光彩照人。</p>
<h5 id="88-通景画修复"><a href="#88-通景画修复" class="headerlink" title="88 通景画修复"></a>88 通景画修复</h5><p>这是现存最大的一幅通景画，传说是宫廷画师郎世宁的学生王幼学所做。<br>漫天的藤萝绘在精美的丝织品上，透过藤萝，你可以看到蓝天。由于年代久远，它变得脆弱残破，对于它的修复，是整个倦勤斋修复工程中最重要的环节。TK，来自美国世界文化遗产基金会，参加过很多亚洲国家古老绘画的修复，他将加入通景画修复的团队。<br>将巨大的通景画毫发无伤的揭下来没有成例可循，找到巨幅通景画的接缝处这是工作的第一步。把绘画的接缝处打湿、分离，想用这种方法揭取壁画。然而，这样似乎不够安全，通过嵌入把壁画揭下来似乎也行不通。最后专家组决定，像这样把整个夹层都取下来可以最大限度保护壁画。<br>这是用来修复通景画的新发明，和好的面团是用来除尘的，既可以粘掉画面表层的尘土，有不损伤颜料。这种海藻胶是用来固定颜色的，当它的比例为百分之二，温度在五十度时，可以达到最好的固色效果。画面失色严重的地方，需要第二遍补上海藻胶。纤维纸覆盖在通景画表面上，用排刷赶走里面的气泡，使纸张和壁画更紧密的贴合。已经支撑了通景画两百多年的底衬，现在要被小心的去掉，重新装裱新的命纸。<br>因为具有极高的文化和艺术价值，通景画的修复完全按照传统工艺流程进行。整个修复过程，需要大大小小近百道工序。七名专家历时一年多的努力，通景画的修复工作全部完成。最后的挑战是把通景画安全的安放回天花板。<br>为了精准完美的回帖，修复组制作了倦勤斋模型，按照原大小缩小了九倍。反复试验确定无误之后，终于进入了真正的回帖过程。在天花板上每隔三十公分划线，划线处涂上浆糊和乳胶勾兑好的粘合剂。待粘合剂达到最佳状态时，把通景画卷起来，举至天花板，将壁画上的划线和天花板上的线精确吻合。整个操作过程严谨细致，这些措施让粘合更加牢固。<br>终于，通景画完美的呈现在倦勤斋，如同两百多年前乾隆抬头仰望的一模一样。</p>
<h5 id="89-画壁九龙"><a href="#89-画壁九龙" class="headerlink" title="89 画壁九龙"></a>89 画壁九龙</h5><p>这里曾是五百多年来中国皇帝的安家之所，是最高权力的象征，每一处细节都传递了当时主流的建筑哲学。<br>它切割了空间，阻挡了视线，它看似多余却又不可或缺。八面来风在它面前汇聚、沉淀，所有的污秽、愁怨，在它面前消散于无形。<br>影壁又称照壁，中国庭院里一道神秘的墙，古代用来挡风聚气，保有隐私。故宫里的影壁样式很多，但这样背倚宫墙而建的单面琉璃影壁仅有一例，这就是皇极殿广场前的九龙壁。<br>九龙壁建于乾隆三十七年，公元1772年。正面由二百七十块烧制的琉璃塑块拼接而成，九条高浮雕的巨龙各戏一颗宝珠。在中国古代文明中，九是极数，九五之制为天子至尊的体现。檐下用九五四十五块龙纹垫栱板暗合了九五之制。<br>据说，九条龙中，中间的黄龙代表皇帝自己，两边的八条龙分别是八旗子弟。整座建筑以不同方式蕴含多重九五之数，体现九五至尊。九龙壁，一面华丽的影壁。后人看到九条龙，也可以看到几百年的故事在这影壁上演。<br>据说，乾隆帝十分喜爱九龙壁的造型，便在自己准备颐养天年的皇极殿前建造了一座。皇极殿是太和殿的微缩摹本，它像一面镜子，折射着太和殿曾经上演的兴衰往事，而九龙壁或许是紫禁城里的另一面镜子。</p>
<h5 id="90-移天缩地"><a href="#90-移天缩地" class="headerlink" title="90 移天缩地"></a>90 移天缩地</h5><p>石令人古，水令人远。中国文化中，石头与水常作为自然的象征，成为园林中重要的构景元素。很多具有观赏价值的石头被用来营造园林，供人赏玩。它们或单独成峰，或叠石成山，犹如凝固的烟云，停留在消散的瞬间。<br>皇家园林，由于有皇帝的支持，可以动用国家的力量，其中的峰石更是此中的精华，也正是那些热衷于营造园林的帝王们将中国园林艺术推向了极致。<br>（清华大学建筑学院 副教授 胡洁）“中国皇家园林里面，造大型的石头假山，有记录的最有规模的是宋徽宗，他造的假山叫艮岳，在汴梁。”<br>在之后的时间里，艮岳中这些毫无生命的太湖石，充满了传奇的色彩。金军攻破汴京，将残存的南太湖石运到当时金朝的中都，也就是现在的北京，点缀在琼华岛上，乾隆皇帝修建乾隆花园时，它们又被运进紫禁城。<br>“太湖石它的特点皱、透、漏、瘦。皱，就是它有纹理，就像画国画那个皴法一样，它有很多的纹，所以叫皱；透，它就是里面有很多的孔洞；瘦是它纤细，它成型，它有曲线美。所以它的这个造型非常的丰富，是大自然的一个造化。跟诗、画、哲学、文化是一个整体。就是代表东方文化的一个造园特色。”<br>石头运进紫禁城后，在乾隆皇帝的摆弄下，万里江山仿佛就在这一山一石间。只有当这些石头到了叠石匠人的手里，它们才真正被赋予了生命。<br>何者可为丘，何者可为壑，何者可为峰，何者可为峦，叠石匠人了然于胸。<br>“故宫用石头的规律，就是基本上这山全是拿石头叠出来的。因为故宫能建园林的面积太小，很小的空间里的这种巍峨，高远的感觉，这个技术要求的含量是很高的。”<br>叠山之石，有着一套独立完整的传统工艺，比如石头与石头间的粘合剂是用糯米汁和石灰，还有我们未知的物质调试而成，坚固程度甚至超过了现在的水泥。石头作为能够穿越时光的材料，渗透着园林主人的情怀。正是通过它们，那些遥远的园林营造者与当下的我们，进行着无声的对话。</p>
<h5 id="91-尘封佛国"><a href="#91-尘封佛国" class="headerlink" title="91 尘封佛国"></a>91 尘封佛国</h5><p>“开门啦，打搅诸位啦！”<br>上世纪八十年代后期，故宫博物院开始系统整理研究数量庞大的故宫藏藏传佛教文物。这次整理也打开了梵华楼那扇尘封近百年的门。阳光似乎太久没有穿透那些门扉。尘埃落定，炉里香灰尚满，似乎那缕烟刚刚散去。<br>1887年光绪十三年，《内务府陈设档》记载，查的梵华楼上前檐现查勾滴不齐，栏杆缺欠，甬路地面破碎，这是梵华楼最后一次出现在大清的故史档案中。之后，关于梵华楼的记载便是1926年，清室善后委员会点差梵华楼文物，点差结果与《陈设档》记录大体一致，点差后，梵华楼作为库房维持原貌，封条一贴近半个世纪。<br>1933年大批故宫文物南迁，梵华楼文物也原地未动，直到半个多世纪后那些蒙尘的金碧唐卡，六品佛像，在光线中渐渐现出它们的庄严本相，一座保存完整的藏传佛楼重现昔日凝固的时间。<br>1772年乾隆三十七年，乾隆皇帝六十一岁，为了自己位居太上皇时有片清净之地可以颐养天年，授命在紫禁城东北角兴土木，改建宁寿宫，工程历时五年。宁寿宫东路最后一座建筑就是梵华楼。<br>梵华楼是一座六品佛楼，又称为妙吉祥大宝楼。六品佛楼是依照藏传佛教格鲁派的修行思想而建，楼内共有七个开间，正中为明间，明间以外六室，代表六品。一楼六室，供奉掐丝珐琅大佛塔六座，明间以外六室塔顶上部开天井，上下通连。楼下供奉护法，楼上供奉主尊，上下二室合为一品佛楼。<br>乾隆二十二年至四十七年，清宫先后修建了八座六品佛楼，其中多数已面目全非。紫禁城内有四座，慧曜楼，1923年毁于建福宫大火；淡远楼，现如今已不复存在；宝相楼，文物已不完整。唯有梵华楼百年尘封，成为迄今为止存世最完整的六品佛楼。</p>
<h5 id="92-寂静的花"><a href="#92-寂静的花" class="headerlink" title="92 寂静的花"></a>92 寂静的花</h5><p>六品佛楼是一种佛楼规制，体现了藏传佛教格鲁派的修行思想。<br>紫禁城的梵华楼是迄今为止存世最完整的六品佛楼，也是佛教学者们探寻格鲁派宗教思想最神秘的宗教场所。<br>格鲁派主张显密兼修，针对修行者不同的根机，将密宗修习由浅入深分为四个阶段：功行根本品，德行根本品，瑜伽根本品，无上根本品，其中无上根本品又分为无上阴体根本品和无上阳体根本品共五品，加上代表大乘佛教显宗的般若品，共称为六品。<br>梵华楼一楼明间，供奉明代铜鎏金优填王旃檀佛像。佛像在梵华楼动工第三年由北京南城圣安寺迁入。环旃檀佛北、西、东三面墙挂供释迦牟尼传记和本生故事唐卡九幅。二楼明间供奉木雕金漆宗喀巴大师坐像，他是格鲁派的创始祖师。环绕塑像的三面墙壁，挂供宗喀巴生平事迹的唐卡三幅。梵华楼楼下明间之外六室，室内正中各供奉掐丝珐琅大佛塔，建成于乾隆三十九年。塔周围北、西、东三面沿墙放长供桌，桌上供设珐琅供器。三面墙壁上部，都挂供与墙壁等宽的唐卡各一幅，每幅绘有三位护法神，六室共五十四位护法神，守护着代表佛陀身、语、意的佛像、佛经、佛塔，也守护着这个修行空间。<br>楼上明间之外六室，是六品佛供坛，室内正中有天井围栏，连通上下楼，楼上楼下的陈设互相呼应，形成整体，楼上六室每一品靠北的墙壁供奉着九尊六品佛铜像，他们代表了所对应的这一品密法次第修行中最重要的九种密法经典。<br>每室东西两面墙上的小龛内，各供奉六十一尊小型铜佛造像，每间共一百二十二尊，供龛下方的柜门中还供奉了每品主要的佛教经典和法器。这样，每个品间象征佛陀身、语、意的三种法物悉已俱足。佛塔、佛经、佛像和护法构成的有机空间，配以纷繁复杂的藏传佛教神系，格鲁派的修行思想在梵华楼中被系统、立体地呈现。<br>梵华，梵有清净，寂静的意思，华字通花，如佛说法，天降梵花，梵华便是那朵清净的花。</p>
<h5 id="93-芸芸众神"><a href="#93-芸芸众神" class="headerlink" title="93 芸芸众神"></a>93 芸芸众神</h5><p>独立的小院安静宽敞，前后三进，归紫禁城的城隍一人独享，很难想象在紫禁城这个皇家禁地，城隍会有一席之地。<br>城隍最早出现在周朝，城是城墙，隍是护城河，他监管一方的阴阳和神祇，是中国神话中守护城池的神。紫禁城内的城隍庙坐落在西北角楼下，远离喧嚣，一片祥和。<br>在雍正四年，才在紫禁城内建这座城隍庙，为什么他要建这个城隍庙呢？他在成为皇帝之前的经历让他更接近普通百姓的生活吗，还是他需要借助城隍来保护紫禁城的安宁？<br>城隍作为神，他的形象一直在不断改变，到了宋代，各地百姓会尊奉已死功臣或英雄豪杰为城隍。比如北京的城隍是杨继盛，柳州城隍柳宗元，杭州城隍文天祥等等。这种可以将凡人奉为神的宗教观，体现了中国文化里的人性化，也将高高在上的神世俗化，可能老百姓们认为从他们身边产生的神更能尽心尽力的帮他们办事吧。同时，城隍庙的分别也极其广泛，盛行于大中华地区，越南，朝鲜半岛等。<br>在皇宫里，皇宫要忙着祭拜天地，三教教主外加自家祖先，皇宫们的女眷们相信观音，灶王和狐仙，城隍很容易被忽视。据《大清会典》规定，每年祭紫禁城城隍两次，万寿圣节及秋季选择吉日由皇帝钦点内务府大臣致祭。光绪十年议定，每年十月初十，慈禧皇太后万寿节时，会派遣官员进行拜祭，祭神期间，还要请大光明殿道士举办道场三日，以示对城隍之尊崇。<br>1925年，故宫博物院成立，城隍终于卸下肩上的担子，从雍正四年建立城隍庙算起，他在岗九十八年，从此，城隍庙里就安静了下来，再也没有人来上香祈福了。</p>
<h5 id="94-内廷恭造"><a href="#94-内廷恭造" class="headerlink" title="94 内廷恭造"></a>94 内廷恭造</h5><p>“胎骨要淳厚，款式要文雅，器皿花样粗俗，材料亦不好。做素静文雅即好，何必眼上刻花，若不如意，朕不依，再做时不要失其内廷恭造之式。”<br>雍正皇帝提出的内廷恭造便出自造办处。康熙十九年，为方便康熙皇帝研究科学，制作美工，内务府于养心殿设立造办处，康熙三十年后移志慈宁宫区，下设各类作、处、厂、馆，提供皇家生活用度。造办处虽编制于内务府，实际却由皇帝直管。雍正皇帝品味极高又挑剔苛刻，似乎只有他最亲密的兄弟，能文能武，懂艺术，会设计的怡亲王允祥统领造办处才能合他的心意。<br>造办处有严格的制作流程，命作的活计要经过皇帝下旨，制作样品，交皇帝御览，提意见，再修改，再呈览，有时反复多次直到皇帝满意才可制作。“奉旨，甚好，准造，钦此。”<br>雍正的形象，最不同于其他皇帝的是那副圆眼镜，造办处为雍正做了至少三十五副眼镜，便与他随时随地以勤天下先。作为清朝最勤政的皇帝，雍正的闲暇时光所剩无几，他娱乐的主要方式就是制作和赏玩这些艺术品。见到能让他称赞的物件，他会问起，烧造是何人？画此珐琅是何人？<br>雍正时期的珐琅彩瓷器，胎体采用景德镇优质细白瓷，为珐琅彩的烧造铺设了坚实的基础。但珐琅彩的釉料一直依赖西洋进口，供不应求。<br>雍正六年二月二十二日，造办处奉怡亲王谕，试烧炼珐琅料，五个月后实验成功，并炼出了西洋珐琅料不曾有的十二种颜色。画家、书法家将诗、书、画、印融入瓷器，呈现出纸绢绘画所不及的洁润晶莹。<br>艺术家们介入工匠的造办，把雍正时期的器物送向审美的巅峰。它们一改康熙时浑厚古拙之风，代之以轻巧俊秀，工丽妩媚之貌。器形之美，比例协调，恰到好处，确有增一分则拙，减一分则陋之感。<br>造办处实现了清代艺术与科技的极高成就，它留下雍正皇帝的文雅精细，一个朝代的审美，气息犹在。</p>
<h5 id="95-水火之间"><a href="#95-水火之间" class="headerlink" title="95 水火之间"></a>95 水火之间</h5><p>2011年，故宫博物院每年一次的防火演习正在进行。而在紫禁城西南角，武英殿南方的这所房子没有被防火演习的热闹影响，安安静静。但是这里却是紫禁城最早的消防队驻扎的地方，激桶处。<br>五行中，水克火，色黑，所以激桶处的屋顶铺黑瓦。今天，只有这不同寻常的乌黑琉璃仙人，淡淡透出这座建筑昔日的责任，以及它与水火的渊源。紫禁城有着九千多间木质殿宇，木，象征生命的力量，温润自然，这样一个人造森林，火灾也成为极大的隐患。<br>1421年，紫禁城建成的第二年，崭新的三大殿全部烧毁，一直到末代皇帝溥仪退位，明清四百九十一年里，有记载的重大火灾就有四五十次之多。<br>《大清会典》记载，宫中共有铁、铜和鎏金铜大缸三百零八口，这些正是明清时代为了防火而设置的储水缸。每口缸大概可贮水三千多升，必须时刻保证缸水满盈，人们称这些大缸为门海，寓意门前有大海，能震慑住火灾，因此他们又被称为吉祥缸、太平缸。<br>隆冬时节，熟火处便会派出太监专门负责在缸底烧火防冻，直到第二年惊蛰。面对为了彰显威仪而设计的高大建筑，光靠人力取水扑火效果甚微，所以到了清代，发明了专门用于救活的工具，称为激桶。激桶附带水箱，木杆上下活动带动活塞，吸水储水，最后水柱从铜管喷出，高达数米。它的原理就像一个大号喷水枪，所以又称为水龙。<br>清朝康熙皇帝对防火非常在意，设立了火班，又称激桶处，这是紫禁城内最早的专职防火机构。回看整个清朝，火灾次数比明朝明显减少，康熙皇帝在位时间最长，宫中失火次数却最少。<br>如今，故宫每栋木质建筑周边都配备灭火箱，里面装有四个灭火器。今天的故宫保卫处防火科和驻故宫消防队已接替昔日激桶处，日日夜夜承担下这传承了数百年的守卫责任。<br>“搭闩，下钱粮，灯火小心。”</p>
<h5 id="96-洗心防患"><a href="#96-洗心防患" class="headerlink" title="96 洗心防患"></a>96 洗心防患</h5><p>雍正八年，1730年冬天，整个京城没有雨雪，这是来年大旱的征兆。雍正九年，紫禁城内一座打破明代和清初后宫建筑格局的殿宇开始修建。这就是位于中轴线东侧东六宫南端用于斋戒的宫殿：斋宫。<br>斋戒，洗心曰斋，防患曰戒。自古以来，凡为帝王，祭祀前都当斋戒自省，以表示对天地神灵的敬畏。斋宫一般都设置在庙坛，按照礼制规定，冬至、祈谷、雩祭等重大祭祀前，皇帝要斋戒三天。雍正自即位开始，每年冬至祭天他都亲力亲为直到第八年。<br>雍正七年的冬天，皇帝得了一场病，病后体虚力乏，削减了正常政务活动，包括来年的冬至大祭也改为派遣官员代祭。而就在这一年的冬天，京师未得雨雪。雍正认为这是对于自己敬天不周的惩罚，苛责自身，认为应当虔诚修省斋戒。传说因为皇位之争而树敌的雍正不敢在天坛斋宫中一人独宿三昼夜，为了确保起驾平安，雍正九年，他下令在紫禁城内另建了一座斋宫，叫内斋；将天坛内的斋宫叫外斋。从祭日的前三天开始，他在内斋独宿三昼两夜，在祭天前一日的夜间十一点钟，他才从内斋移往外斋，算起来，他在天坛内的斋宫只停留四小时左右。<br>戒者，禁止其外；斋者，整齐其内。皇帝斋戒期间，不但要沐浴更衣，独居，还要戒其嗜欲，有不理刑名，不宴会，不听音乐，不入内寝，不问疾弗丧，不饮酒，不吃荤，不祭神，不扫墓等诸多禁令。明清两朝，皇帝斋戒期间，各宫殿要悬挂斋戒木牌，皇帝和陪祀大臣胸前都佩戴戒牌。<br>太常寺会在斋宫丹陛左侧恭设斋戒牌和斋戒铜人一尊。相传，斋戒铜人是仿照唐朝大臣魏征的形象铸造，他以直谏敢言而富有盛名，时刻警示皇帝来此斋戒的用意。<br>除了对行为的约束，斋戒更主要是为了德行的反省，要求皇帝在一年中仅有的几日可以放下杂念，可以正心诚意，整洁身心，反省为人之本和为君之道。</p>
<h5 id="97-奉天承运"><a href="#97-奉天承运" class="headerlink" title="97 奉天承运"></a>97 奉天承运</h5><p>（故宫博物院 研究馆员 王子林）“大概记得十多年前，从这个夹道进来过后，周围墙皮已经掉下来了。故宫里面还有这么小的一个夹道，给我的感觉就是非常神秘。顺着这个夹道走进来，打开这个大门，因为这个院子不对外开放，长了很多草，给人的感觉是非常的荒芜，但是这种感觉非常好，觉得这个地方有一块净地。打开大门进来一看呢，云台上面有仙鹤，有铜龟，还有很大的一个香炉，感觉这个地方太有那个道教、道场的一个感觉。<br>“这个宫殿吧，它一直以来呢，被时间和历史尘封起来了，从来没有打扰过。我当时特别的兴奋，也去找资料，找档案，慢慢慢慢地，这个宫殿的它的一些建筑年代才清晰起来。这个地方是一个道教的宫殿，叫玄穹宝殿，又称天穹宝殿，供的是玉皇大帝。<br>“道教那个神系里面，最高地位的是三清，元始天尊，道德天尊和灵宝天尊，他下面有四御，四御就是三清的四位辅佐神，第一就是玉皇大帝。所以玉皇大帝是三清化出来的第一位尊神，他是代表三清来行化宇宙，行天之德，布天之道，掌握着无限的权威，是这么一位天帝。<br>“根据《清宫述闻》的记载，说这个宫殿呢，顺治时候改建的，因为顺治他是进入紫禁城的第一个皇帝，那么他在宫里建了这么一个供奉天帝的宫殿。他是不是也是为了证明自己是承天之位呢，是一个正统呢？<br>“天穹宝殿要举办三个道场，第一个道场是天腊道场，就是正月初一，就是新年这一天要在这个地方举办一个非常大的道场。那么到了正月初九的时候，就是玉皇大地的诞生之日，这天要举办一个天诞道场，还一个道场是万寿平安道场，就是皇帝的生辰，他的生辰也要在这个地方举办一个道场。比如说我天子，我皇帝，承天之位的，是从天传下来的，是正统的。”</p>
<h5 id="98-戏乐升平"><a href="#98-戏乐升平" class="headerlink" title="98 戏乐升平"></a>98 戏乐升平</h5><p>这里是位于养性殿东侧宁寿宫内的一处戏亭，它的名字叫畅音阁。今天，很多人来这里参观，当年的人穿什么样的衣服，用什么样的道具，演什么样的剧本均一一陈列。但是，关于畅音阁更详细的信息，却很少有人知道。<br>畅音阁，始建于乾隆三十七年，高达二十米，与一般戏台最大的差异是它有三层戏台，即所谓三重崇楼。三层戏台分别被命名为福台、禄台、寿台，均与天井相通，并设有轱辘，能将幕景和演员吊上吊下。这是一个剖面模型，模仿的是当年畅音阁演出时的盛况。<br>“清宫演戏在中国戏曲史上占有重要地位，帝后对戏曲的热衷，使得诸多剧种流派竞相入宫献艺。”<br>据说，慈禧太后十分喜爱听戏，曾在十三年的时间里听了两百多部，还经常担当策划，监制和导演的工作。对于人物扮相，唱词念白，板式锣经，武打套数，都会提出自己的具体要求。而对于演员的表演更是严厉，一丝一毫的差错，慈禧都不会放过。作为一个有见地并且拥有至高无上皇权的女人，修改剧本唱腔不仅仅止于此。对于慈禧来说，一出戏剧的排练通常也是一次政治活动的演习。<br>每出戏都有两个舞台，戏里，生、旦、净、丑，唱、念、做、打，演绎的是台上故事；戏外，权力与欲望，希望与失望，上演的是人生故事。在紫禁城这个大舞台上，每个人都释放着自己的灿烂，它与古老的紫禁城共存，共生。一直到今天，也会延续至未来。</p>
<h5 id="99-瑰丽庄严"><a href="#99-瑰丽庄严" class="headerlink" title="99 瑰丽庄严"></a>99 瑰丽庄严</h5><p>手指起落之间，仿若木上开花。笔墨铺满之际，尽使满木生香。这一起笔，能追溯到春秋时代的古意，这一转腕，承袭了祖师爷吴道子的风骨，这一收臂，似看到三千年春夏秋冬。<br>今天，故宫大修进行中，许多古老的工艺依然延续着，显示着生生不息的力量。上漆、添瓦、雕梁、画栋，一双双普通的手，勾勒出泱泱大国最至高无上的帝王之城。北京紫禁城，便是由瓦、土、石、木、彩画、油漆、搭材、裱糊这八大作细碎的工程打造出来的。<br>故宫的色彩分配非常慎重，受光面用朱、丹及金、黄等炫目的色彩，呈现富丽、豪华之感，檐下的阴影部分则施以青绿为主的冷色基调彩画，既增加檐的深厚感，又与受光面的色彩对比，立面效果更加端庄威严。登高远眺，紫禁城纯正的红黄色调，在清澈的蓝天映衬下，与四周谦卑柔和的青砖灰瓦民居构成了强烈的视觉反差。大手笔的红黄原色组合，仿佛一幅浓墨重彩的油画，彰显了皇家独有的尊贵气度。置身其中，仰望环视，出现在藻井、斗栱、门楣、梁柱以及外檐处的彩画，则凝聚了细节之美。<br>彩画的第一重特性并非装饰，而是木建筑防腐的第一道防线，先用桐油等材料调制的灰、麻纤维和布制作地仗，然后在光洁的地仗上油漆，彩绘，颜料也有避湿的功用，有些更含有剧毒，令虫蚁退避三舍。<br>在实用功能之外又有很强的装饰性，花草、云朵、西番莲等无生命的自然物与龙、凤等寓意吉祥的图腾的巧妙组合，向后人传递着比木构更细致，也更明确的历史信息。<br>大匠无名而紫禁城永存。</p>
<h5 id="100-看见看不见"><a href="#100-看见看不见" class="headerlink" title="100 看见看不见"></a>100 看见看不见</h5><p>距午门东南104.7米，1980年以后这里成为故宫留影中最常见的景点。<br>距午门东南105.3米，红旗轿车成为故宫背景里的背景。<br>1900年，距午门东南304.1米。<br>1900年，八国联军的士兵走过午门，距午门东南329.2米。<br>距午门东南364.7米。。历史就在这里，只要你愿意去丈量。<br>1900年 太和殿广场<br>2012年 太和殿广场<br>1900年 太和殿<br>2005年 太和殿<br>1900年 保和殿<br>2005年 保和殿<br>1900年 乾清宫<br>2012年 乾清宫<br>1900年 交泰殿<br>2005年 交泰殿<br>1900年 钦安殿<br>2005年 钦安殿</p>
<p>《故宫三字经》<br>六百年，人和事，这故宫，看得见。昔紫禁，帝王殿，今故宫，博物院。天安门，本皇城。端门前，衣冠整。古天子，立五门。天阙开，瑞祥来。皇宫内，七宝顶，映苍穹，北斗星，午门藏，凹凸字，明三门，暗五道。外面方，内里圆。民从地，君居天。曾廷杖，打屁股，几吆喝，释战俘。金水河，五桥渡，兼仁义，礼智信。水火济，吉祥鼎，太和门，拉满弓。燃火把，插栏杆，后石制，仍生辉。须弥座，最尊贵，大土字，够气势，帝皇座，九五尊。前三殿，拱青天，屋檐弯，向上翻，像巨鸟，下凡间。七八九，防瓦走。太和殿，添一兽，大正吻，咬得紧。加一剑，十三件。最高级，四坡面。故宫博物院，紫禁城宫殿。看见看不见，皇家的背面。</p>
]]></content>
      <categories>
        <category>Attration</category>
      </categories>
      <tags>
        <tag>Attration</tag>
      </tags>
  </entry>
  <entry>
    <title>Free Image Hosting</title>
    <url>/2020/01/08/Free-Image-Hosting/</url>
    <content><![CDATA[<img src="https://twitgoo.com/wp-content/uploads/2019/11/choose-best-blog-hosting.png" width="100%"/>

<a id="more"></a>

<blockquote>
<p><a href="https://hao.su/pic.html" target="_blank" rel="noopener">免费图床- 不死鸟- 分享为王</a></p>
<p><a href="https://www.chaidu.com/" target="_blank" rel="noopener">https://www.chaidu.com/</a></p>
<p><img src="https://wx1.sinaimg.cn/mw690/0060lm7Tly1ftl505nwt1j30xf06rjry.jpg" alt=""></p>
</blockquote>
<h2 id="SM·MS"><a href="#SM·MS" class="headerlink" title="SM·MS"></a>SM·MS</h2><blockquote>
<p><a href="https://sm.ms/" target="_blank" rel="noopener">https://sm.ms/</a></p>
</blockquote>
<p><img src="" alt="挂了"></p>
<h2 id="imgur"><a href="#imgur" class="headerlink" title="imgur"></a>imgur</h2><blockquote>
<p><a href="https://imgur.com/" target="_blank" rel="noopener">imgur</a></p>
</blockquote>
]]></content>
      <categories>
        <category>Image</category>
      </categories>
      <tags>
        <tag>Image</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring Tour 2020</title>
    <url>/2020/01/03/Spring-Tour-2020/</url>
    <content><![CDATA[<img src="https://image.freepik.com/free-vector/2020_147586-36.jpg" width="100%"/>

<a id="more"></a>

<blockquote>
<p><a href="http://www.visitbeijing.com.cn/" target="_blank" rel="noopener">北京旅游网</a></p>
</blockquote>
<h2 id="总揽"><a href="#总揽" class="headerlink" title="总揽"></a>总揽</h2><iframe  width='100%' height='700' frameBorder='0' src='https://libo9527.github.io/static/map/amap/2020-0124-0131/all/index.html'>
</iframe>

<h2 id="往返线路"><a href="#往返线路" class="headerlink" title="往返线路"></a>往返线路</h2><iframe  width='100%' height='700' frameBorder='0' src='https://libo9527.github.io/static/map/amap/2020-0124-0131/round-trip-route-map/index.html'>
</iframe>

<h3 id="深圳-北京"><a href="#深圳-北京" class="headerlink" title="深圳 - 北京"></a>深圳 - 北京</h3><table>
<thead>
<tr>
<th>车次/航班</th>
<th>起始站</th>
<th>终点站</th>
<th>起始时间</th>
<th>到达时间</th>
<th>票价</th>
<th>状态</th>
<th>乘客</th>
<th>渠道</th>
<th>账号</th>
</tr>
</thead>
<tbody><tr>
<td><a href="http://www.huochepiao.com/search/chaxun/resultc.asp?txtCheCi=K1348" target="_blank" rel="noopener">K1348</a></td>
<td>深圳</td>
<td>长沙</td>
<td>2020-01-24 08:10</td>
<td>2020-01-24 18:13</td>
<td>硬座：112</td>
<td><sapn style="color: green; font-weight: bolder;">已出票</span></td>
<td>李博</td>
<td>12306</td>
<td>twhssz</td>
</tr>
<tr>
<td>海航HU7136</td>
<td>长沙黄花机场T2</td>
<td>北京首都机场T1</td>
<td>2020-01-24 21:45</td>
<td>2020-01-24 23:55</td>
<td>机票：¥238<br />燃油：¥50</td>
<td><sapn style="color: green; font-weight: bolder;">已出票</span></td>
<td>李博</td>
<td></td>
<td></td>
</tr>
<tr>
<td>K6618</td>
<td>深圳</td>
<td>长沙</td>
<td>2020-01-17 01:05</td>
<td>2020-01-18 11:50</td>
<td>候补：113</td>
<td><sapn style="color: #E99B47; font-weight: bolder;">候补中</span></td>
<td>李博</td>
<td>12306</td>
<td><a href="mailto:871759358@qq.com">871759358@qq.com</a></td>
</tr>
<tr>
<td></td>
<td>长沙</td>
<td>北京西</td>
<td></td>
<td></td>
<td></td>
<td><sapn style="color: red; font-weight: bolder;">未定</span></td>
<td>李博</td>
<td></td>
<td></td>
</tr>
<tr>
<td>中国联合航空KN5806</td>
<td>岳阳</td>
<td>北京</td>
<td>2020-01-20 15:40</td>
<td>2020-01-20 18:00</td>
<td>机票：200<br />机建燃油：50</td>
<td><sapn style="color: green; font-weight: bolder;">已出票</span></td>
<td>李博</td>
<td>飞猪</td>
<td>18598046892</td>
</tr>
<tr>
<td>K6608</td>
<td>广州</td>
<td>长沙</td>
<td>2020-01-18 23:39</td>
<td>2020-01-19 07:57</td>
<td>候补硬座：98</td>
<td><sapn style="color: #E99B47; font-weight: bolder;">候补中</span></td>
<td>李博</td>
<td>12306</td>
<td>twhssz</td>
</tr>
<tr>
<td>Z168</td>
<td>广州东</td>
<td>长沙</td>
<td>2020-01-18 22:56</td>
<td>2020-01-19 07:01</td>
<td>候补硬座：98</td>
<td><sapn style="color: #E99B47; font-weight: bolder;">候补中</span></td>
<td>李博</td>
<td>12306</td>
<td>twhssz</td>
</tr>
<tr>
<td>Z122</td>
<td>广州</td>
<td>长沙</td>
<td>2020-01-18 22:18</td>
<td>2020-01-19 05:28</td>
<td>候补硬座：98</td>
<td><sapn style="color: #E99B47; font-weight: bolder;">候补中</span></td>
<td>李博</td>
<td>12306</td>
<td>18829718001</td>
</tr>
<tr>
<td>K436</td>
<td>广州</td>
<td>长沙</td>
<td>2020-01-18 22:31</td>
<td>2020-01-19 06:28</td>
<td>候补硬座：98</td>
<td><sapn style="color: #E99B47; font-weight: bolder;">候补中</span></td>
<td>李博</td>
<td>12306</td>
<td>18829718001</td>
</tr>
<tr>
<td>K9013</td>
<td>东莞东</td>
<td>长沙</td>
<td>2020-01-18 19:52</td>
<td>2020-01-19 05:50</td>
<td>候补硬座：129</td>
<td><sapn style="color: #E99B47; font-weight: bolder;">候补中</span></td>
<td>李博</td>
<td>12306</td>
<td><a href="mailto:752797707@qq.com">752797707@qq.com</a></td>
</tr>
<tr>
<td>K437</td>
<td>东莞东</td>
<td>长沙</td>
<td>2020-01-18 20:49</td>
<td>2020-01-19 06:28</td>
<td>候补硬座：129</td>
<td><sapn style="color: #E99B47; font-weight: bolder;">候补中</span></td>
<td>李博</td>
<td>12306</td>
<td><a href="mailto:752797707@qq.com">752797707@qq.com</a></td>
</tr>
<tr>
<td></td>
<td>深圳</td>
<td>东莞东</td>
<td></td>
<td></td>
<td></td>
<td><sapn style="color: red; font-weight: bolder;">未定</span></td>
<td>李博</td>
<td>12306</td>
<td></td>
</tr>
<tr>
<td></td>
<td>深圳</td>
<td>长沙</td>
<td></td>
<td></td>
<td></td>
<td><sapn style="color: red; font-weight: bolder;">未定</span></td>
<td>李博</td>
<td>12306</td>
<td></td>
</tr>
<tr>
<td></td>
<td>深圳</td>
<td>广州</td>
<td></td>
<td></td>
<td></td>
<td><sapn style="color: red; font-weight: bolder;">未定</span></td>
<td>李博</td>
<td>12306</td>
<td></td>
</tr>
</tbody></table>
<h3 id="大荔-北京"><a href="#大荔-北京" class="headerlink" title="大荔 - 北京"></a>大荔 - 北京</h3><table>
<thead>
<tr>
<th>车次/航班</th>
<th>起始站</th>
<th>终点站</th>
<th>起始时间</th>
<th>到达时间</th>
<th>票价</th>
<th>状态</th>
<th>乘客</th>
<th>渠道</th>
<th>账号</th>
</tr>
</thead>
<tbody><tr>
<td>D2518</td>
<td>大荔</td>
<td>太原南</td>
<td>2020-01-15 13:38</td>
<td>2020-01-15 16:45</td>
<td>二等座：¥143/人</td>
<td><sapn style="color: green; font-weight: bolder;">已出票</span><br/><sapn style="color: #31E69D; font-weight: bolder;">1 车 6D、6F号</span></td>
<td>阿爸、阿妈</td>
<td>12306</td>
<td>阿姐</td>
</tr>
<tr>
<td>G624</td>
<td>太原南</td>
<td>北京西</td>
<td>2020-01-15 18:07</td>
<td>2020-01-15 20:57</td>
<td>二等座：¥197/人</td>
<td><sapn style="color: green; font-weight: bolder;">已出票</span><br/><sapn style="color: #31E69D; font-weight: bolder;">11 车 10D、10F号</span></td>
<td>阿爸、阿妈</td>
<td>12306</td>
<td>阿姐</td>
</tr>
</tbody></table>
<h2 id="行程规划"><a href="#行程规划" class="headerlink" title="行程规划"></a>行程规划</h2><h2 id="景点手册"><a href="#景点手册" class="headerlink" title="景点手册"></a>景点手册</h2><blockquote>
<p><a href="http://www.horiba.com/fileadmin/uploads/Scientific/Documents/Events/2016/Beijing_travel.pdf" target="_blank" rel="noopener">北京 | 携程 </a></p>
<p><a href="http://www.backpackers.com.tw/forum/attachment.php?attachmentid=190843&d=1271301962" target="_blank" rel="noopener">游多多官方系列攻略—北京</a></p>
<p><a href="http://m.tuniucdn.com/filebroker/cdn/olb/01/99/0199c00a574af76ec137aed7cb2bc8e3.pdf?alias=" target="_blank" rel="noopener">皇城脚下• 锦绣都城 | 途牛</a></p>
<p><a href="https://bigfile.mafengwo.net/s9/M00/F2/29/wKgBs1awezyAaaNsAGMMhOS7IMs700.pdf" target="_blank" rel="noopener">北京 | 蚂蜂窝</a></p>
</blockquote>
<h3 id="关于北京"><a href="#关于北京" class="headerlink" title="关于北京"></a>关于北京</h3><h4 id="区域分化"><a href="#区域分化" class="headerlink" title="区域分化"></a>区域分化</h4><p>北京一共 16 个区，大约由四环路以内的中心城区和十个边缘集团组成。二环路以内的东城、西城两个区是传统上的中心城区。随着城市的扩张，朝阳区、海淀区、丰台区和石景山区也被认为是城内地区，形成了“城六区”的概念。</p>
<ul>
<li><p>城六区之中心城区(2)<br>  东城区、西城区</p>
</li>
<li><p>城六区之近郊区(4)</p>
<p>朝阳区、丰台区、石景山区、海淀区</p>
</li>
<li><p>远郊区(10)<br>门头沟区、房山区、通州区、顺义区、昌平区、大兴区、怀柔区、平谷区、密云区、延庆区、</p>
</li>
</ul>
<p><img src="https://img.vim-cn.com/b6/931274eab4b8efc975a15eba0ac286c5c88f64.jpg" alt="image.png"></p>
<h4 id="环路"><a href="#环路" class="headerlink" title="环路"></a>环路</h4><p>北京的二环三环指的是环城快速路。自2018年8月20日大七环全线通车以来，北京一共有二环、三环、四环、五环、六环、七环六条环城高速路。</p>
<p><img src="http://5b0988e595225.cdn.sohucs.com/images/20180831/21272b8b9d7a45e7b7505be76a6f7b81.jpeg" alt=""></p>
<h5 id="一环"><a href="#一环" class="headerlink" title="一环"></a>一环</h5><p><img src="http://5b0988e595225.cdn.sohucs.com/images/20180831/281e55bd73ab452fba0dfd140df4fa87.jpeg" alt=""></p>
<p>上个世纪50年代初，北京内外城城墙还都在。在内城有条环路，走有轨电车,这条有轨电车线路围绕紫禁城环绕一圈。从天安门前开始，往西到西单；折向北，过西四，到平安里（现改为平安大道）；折向东，到地安门；折向北，到鼓楼；折向东，过交道口到北新桥；折向南，过东四到东单；折向西，回到天安门前。这就是北京的一环，现已不再认为是环路。</p>
<h5 id="二环"><a href="#二环" class="headerlink" title="二环"></a>二环</h5><p>二环路全长32.7公里。是在原来的<strong>北京城墙</strong>的位置上修建的城市快速环路。在地上工程进行的同时，地下修建了环线地铁。于20世纪60年代起建，<strong>晚于三环</strong>的20世纪50年代末。其中，在内城墙基础上的北半环1980年底全线通车；在外城基础上的南半环在1991年底通车。1992年，北京也是中国第一条全封闭、全立交、没有交通信号灯的城市快速路——二环路全线竣工通车。</p>
<h5 id="三环"><a href="#三环" class="headerlink" title="三环"></a>三环</h5><p>三环路全长48.3公里，始建于20世纪50年代，<strong>比二环还要早</strong>。东、南、北三环早于1958年建成通车，那时人们<strong>将东、南、北三段俗称为“三环路”</strong>，西三环1981年底建成通车。三环路是北京第一条建成通车的环路。经80年代多处改扩建，逐渐成为快速环路。唯独玉泉营环岛一处，直到1999年国庆前，才改造成立交桥，从此三环路作为全立交的城市快速路全线建成。</p>
<h5 id="四环"><a href="#四环" class="headerlink" title="四环"></a>四环</h5><p>四环路平均距离北京市中心点约8公里，全长65.3公里。主路双向八车道，全封闭、全立交，被认为是<strong>国内有史以来市区道路建设标准最高、规模最大</strong>的城市快速环路。整个四环路的建设持续了十余年。1999年中华人民共和国成立五十周年之际，东四环路建成并通车。到2001年6月，整个四环路全部连成一体。</p>
<h5 id="五环"><a href="#五环" class="headerlink" title="五环"></a>五环</h5><p>五环路全程98.58公里，2003年以前因为被认为是北京市区最外围的一圈高速公路，名称曾为“公路一环”，于2003年11月1日全线建成并通车，通车后属于收费高速公路，后为缓解交通，于2004年1月1日停止收费。</p>
<h5 id="六环"><a href="#六环" class="headerlink" title="六环"></a>六环</h5><p>六环路全程187.6公里，是连接北京第一圈卫星城的一条环形高速公路，以前的名称曾为“公路二环”。2001年年底，六环路第一期工程-通马黄段（连接通州、马驹桥、黄村）建成并通车。2009年9月12号随着六环路最后一段西六环的建成通车，全长187.6公里的北京六环路全线贯通。</p>
<h5 id="七环"><a href="#七环" class="headerlink" title="七环"></a>七环</h5><p><img src="http://5b0988e595225.cdn.sohucs.com/images/20180831/7da54aa1645741e5af98c184e8cc1cdf.jpeg" alt=""></p>
<p>北京七环路全名北京大外环高速公路，又称京津冀环线高速公路。总里程约940公里，其中北京市境内约90公里，河北省境内约850公里。于2018年8月20日全线通车。至此，河北省按顺时针方向已有京承、密涿、承平、京秦、京哈、京台、大广、京港澳、京昆、京新、京藏11条高速公路呈聚合状直达北京。</p>
<h3 id="交通"><a href="#交通" class="headerlink" title="交通"></a>交通</h3><h4 id="一卡通"><a href="#一卡通" class="headerlink" title="一卡通"></a>一卡通</h4><ul>
<li>地铁不打折，公交 4 折。</li>
<li>地铁站，公交总站基本上都有售卖点。</li>
<li>地铁公交都是上车刷卡下车刷卡，不然就扣全程钱。</li>
<li>卡押金20，余额超一百不给退，卡损坏不退押金。</li>
<li>一人一卡，不可一卡多人。</li>
</ul>
<h3 id="故宫"><a href="#故宫" class="headerlink" title="故宫"></a><a href="https://libo9527.github.io/2020/01/10/Forbidden-City/" target="_blank" rel="noopener">故宫</a></h3><blockquote>
<p><a href="https://www.dpm.org.cn/Home.html" target="_blank" rel="noopener">故宫博物院</a></p>
<p><a href="http://webapp.vizen.cn/gugong_app_pc/index.html" target="_blank" rel="noopener">全景故宫</a></p>
<p><a href="http://tv.cntv.cn/videoset/C15339" target="_blank" rel="noopener">《故宫》_纪录片_视频_央视网</a></p>
</blockquote>
<h4 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h4><ul>
<li>中国明清两代皇朝的宫殿</li>
<li>世界上保留最大最完整的宫殿建筑群</li>
<li>故宫的整座城池建造暗合五行阴阳学说，是中国传统风水理念的完美实践作品。</li>
<li>北京故宫（旧称紫禁城）——明、清两代皇宫的遗址。</li>
<li>1987年，被联合国教科文组织列入“世界文化遗产”名录。</li>
</ul>
<h4 id="购票说明"><a href="#购票说明" class="headerlink" title="购票说明"></a>购票说明</h4><ul>
<li>门票提前10天预售，售完为止。</li>
<li>故宫购票实行实名制，所有观众需录入身份证或护照信息方可预定。</li>
<li>下单时填写了二代身份证号的观众可在入院日当日持身份证或户口本原件在任意检票口直接入院，无须兑换纸质门票。</li>
</ul>
<h4 id="时间"><a href="#时间" class="headerlink" title="时间"></a>时间</h4><p>除法定节假日，故宫博物院全年实行周一闭馆。</p>
<p><img src="https://gugong.ktmtech.cn/Content/images/canguantime.png" alt=""></p>
<h4 id="路线"><a href="#路线" class="headerlink" title="路线"></a>路线</h4><ul>
<li>午门（南门）：只作为参观入口，观众一律从午门进入故宫；</li>
<li>神武门（北门）：只作为参观出口；</li>
<li>东华门（东门）：只作为参观出口；</li>
</ul>
<h4 id="票务政策"><a href="#票务政策" class="headerlink" title="票务政策"></a>票务政策</h4><h5 id="门票价格："><a href="#门票价格：" class="headerlink" title="门票价格："></a>门票价格：</h5><p>（1）每年4月1日至10月31日为旺季，大门票60元/人；<br>（2）每年11月1日至次年3月31日为淡季，大门票40元/人。<br>（3）珍宝馆（即进入宁寿宫区，还包括戏曲馆、石鼓馆）参观门票：10元/人。<br>（4）钟表馆（即进入奉先殿区）参观门票：10元/人。</p>
<h5 id="主开放区优惠政策（不含珍宝馆、钟表馆）："><a href="#主开放区优惠政策（不含珍宝馆、钟表馆）：" class="headerlink" title="主开放区优惠政策（不含珍宝馆、钟表馆）："></a>主开放区优惠政策（不含珍宝馆、钟表馆）：</h5><p>（2）6周岁（不含6周岁）至18周岁（含18周岁）未成年人，可凭身份证、户口本或护照购买学生票，20元/人。<br>（3）60岁以上（含60岁）老年人凭身份证原件，门票半价优惠。<br>（6）6周岁（含6周岁）以下或身高1.2米（含1.2米）以下儿童免票参观。<br>（7）残疾人凭残疾人证件，免票参观。</p>
<h5 id="内馆优惠政策（珍宝馆、钟表馆）："><a href="#内馆优惠政策（珍宝馆、钟表馆）：" class="headerlink" title="内馆优惠政策（珍宝馆、钟表馆）："></a>内馆优惠政策（珍宝馆、钟表馆）：</h5><p>（2）6周岁（不含6周岁）至18周岁（含18周岁）未成年人，可凭身份证、户口本或护照购买学生票，5元/人。<br>（3）60岁以上（含60岁）老年人凭身份证原件，门票半价优惠，5元/人。<br>（6）6周岁（含6周岁）以下或身高1.2米（含1.2米）以下儿童免票参观。<br>（7）残疾人凭残疾人证件，免票参观。</p>
<h4 id="客服服务时间"><a href="#客服服务时间" class="headerlink" title="客服服务时间"></a>客服服务时间</h4><p>旺季（每年4月1日至10月31日）8:30-16:15<br>淡季（每年11月1日至次年3月31日）8:30-15:45<br>注：除法定节假日，故宫博物院全年实行周一闭馆，闭馆期间不提供服务。</p>
<h4 id="观众守则"><a href="#观众守则" class="headerlink" title="观众守则"></a>观众守则</h4><ul>
<li>禁止吸烟。</li>
<li>禁止刻画涂写。</li>
<li>在展厅请勿使用闪光灯和三脚架拍照。</li>
<li>请勿随地吐痰。</li>
<li>请勿乱丢垃圾废物。</li>
</ul>
<h3 id="长城"><a href="#长城" class="headerlink" title="长城"></a>长城</h3><h4 id="八达岭长城"><a href="#八达岭长城" class="headerlink" title="八达岭长城"></a>八达岭长城</h4><blockquote>
<p>八达岭长城是万里长城的精华，也是最具代表性的明长城之一。这里海拔高达1015米，地势险要，城关坚固，历来是兵家必争之地。如今登上八达岭长城，极目长天，只见群山逶迤，峰峦叠嶂，万里长城如一条巨龙腾跃在万古苍茫之中，十分壮观。</p>
</blockquote>
<h5 id="门票"><a href="#门票" class="headerlink" title="门票"></a>门票</h5><p>旺季45元（4月1日至10月31日），淡季40元（11月1日至次年3月31日）。</p>
<h5 id="开放时间"><a href="#开放时间" class="headerlink" title="开放时间"></a>开放时间</h5><p>夏季6:30-19:00；冬季7:00-18:00</p>
<h5 id="交通-1"><a href="#交通-1" class="headerlink" title="交通"></a>交通</h5><ol>
<li>旅游专线车每天早晨在市区的前门楼东侧、天安门广场历史博物馆门前、崇文门路口东南角等地发车，票价：往返36元/人，一小时可以到达。</li>
<li>乘地铁等车辆到德胜门下车，乘919路公交车直达八达岭长城脚下，普通车每人7元，空调车每人12元，5分钟发一辆车。</li>
<li>到八达岭的城际列车现已开通，从北京北站出发，一等票价17元，二等票价14元，首班车6:08分发车，到达八达岭时间是7:07。</li>
</ol>
<h4 id="慕田峪长城"><a href="#慕田峪长城" class="headerlink" title="慕田峪长城"></a>慕田峪长城</h4><h4 id="黄花城水长城"><a href="#黄花城水长城" class="headerlink" title="黄花城水长城"></a>黄花城水长城</h4><h4 id="司马台长城"><a href="#司马台长城" class="headerlink" title="司马台长城"></a>司马台长城</h4><h4 id="金山岭长城"><a href="#金山岭长城" class="headerlink" title="金山岭长城"></a>金山岭长城</h4><h4 id="古北口长城"><a href="#古北口长城" class="headerlink" title="古北口长城"></a>古北口长城</h4><h3 id="天安门广场"><a href="#天安门广场" class="headerlink" title="天安门广场"></a>天安门广场</h3><ul>
<li>世界上最大的广场</li>
</ul>
<h3 id="天坛"><a href="#天坛" class="headerlink" title="天坛"></a>天坛</h3><blockquote>
<p><a href="http://www.tiantanpark.com" target="_blank" rel="noopener">天坛公园</a></p>
</blockquote>
<h4 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h4><ul>
<li>帝王祭天的场所，是古人和上天沟通的圣地</li>
<li>中国现存最大的古代祭祀性建筑群，北京的地标建筑之一。</li>
<li>公园面积273公顷，是紫禁城的4倍。</li>
<li>春节期间，丹陛桥有百人祭天乐舞表演，不容错过。</li>
<li>门票：旺季15元，淡季10元。开放时间：A、四大门：6:00-21:00（20:00停止售票）B、景点：3－6月：8:00-17:30（16:00停止售票）；7－10月：8:00-18:00（16:30停止售票）；11－2月：8:00-17:00（15:30停止售票）。地址：东城区天坛路交通：5号线天坛东门站下，步行3分钟即达；公交车乘6、34、106路天坛北门站下</li>
</ul>
<iframe  width='100%' height='900' frameBorder='0' src='http://www.tiantanpark.com/centre.html'>
</iframe>

<h4 id="公园大门"><a href="#公园大门" class="headerlink" title="公园大门"></a>公园大门</h4><p>1、开放时间：旺季6:00-21:00，淡季6:30-21:00</p>
<p>2、大门售票时间：旺季6:00-20:00 淡季 6:30-20:00</p>
<p>3、联票售票时间：旺季8:00-16:00 淡季8:00-15:30</p>
<p>4、静园时间：22:00</p>
<h4 id="景点-（含祈年殿、回音壁圜丘、神乐署）"><a href="#景点-（含祈年殿、回音壁圜丘、神乐署）" class="headerlink" title="景点:（含祈年殿、回音壁圜丘、神乐署）"></a>景点:（含祈年殿、回音壁圜丘、神乐署）</h4><p>1、售票时间：旺季8:00-16:30 淡季8:00-16:00</p>
<p>2、开放时间：旺季8:00-17:30 淡季 8:00-17:00</p>
<p>3、 北神厨、北宰牲亭、斋宫：每周二至周日上午9:00-12:00 下午13:00-16:00<br>门票：凭本人身份证在相应门票兑换处换票进入。</p>
<h4 id="天坛公园游览票种及价格"><a href="#天坛公园游览票种及价格" class="headerlink" title="天坛公园游览票种及价格"></a>天坛公园游览票种及价格</h4><table>
<thead>
<tr>
<th>票种</th>
<th>价格</th>
<th>优惠票</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>旺季门票</td>
<td>15元(￥)</td>
<td>7.5元(￥)</td>
<td>1、旺季：每年4月1日至当年10月31日。 <br /> 2、淡季：每年11月1日至次年3月31日。  <br />3、依据北京市物价局 “京价（收）字【2001】008号”，执行时间：2001年2月1日。</td>
</tr>
<tr>
<td>旺季联票(含门票、祈年殿、回音壁圜丘)</td>
<td>34元(￥)</td>
<td>17元(￥)</td>
<td></td>
</tr>
<tr>
<td>淡季门票</td>
<td>10元(￥)</td>
<td>5元(￥)</td>
<td></td>
</tr>
<tr>
<td>淡季联票</td>
<td>28元(￥)</td>
<td>14元(￥)</td>
<td></td>
</tr>
<tr>
<td>景点票联票(含祈年殿、回音壁圜丘)</td>
<td>20元(￥)</td>
<td>10元(￥)</td>
<td></td>
</tr>
<tr>
<td>神乐署门票</td>
<td>10元(￥)</td>
<td>5元(￥)</td>
<td>依据北京市发改委“京发改【2004】1822号”</td>
</tr>
<tr>
<td>月票</td>
<td>15元(￥)</td>
<td>15元(￥)</td>
<td>1、依据北京市物价局“京价（收）字【2001】008号”，执行时间：2001年2月1日。<br /> 2、本市居民凭身份证、常住本市的外地人员凭相关部门开具的证明，每月月末四天内购买月票。</td>
</tr>
</tbody></table>
<h3 id="颐和园"><a href="#颐和园" class="headerlink" title="颐和园"></a>颐和园</h3><blockquote>
<p><a href="http://www.summerpalace-china.com/" target="_blank" rel="noopener">颐和园</a><br><a href="http://s.visitbeijing.com.cn/html/j-101407_gl.shtml" target="_blank" rel="noopener">颐和园 | 北京旅游网</a></p>
</blockquote>
<h4 id="描述-1"><a href="#描述-1" class="headerlink" title="描述"></a>描述</h4><ul>
<li>世界上现存规模最大的皇家园林，被誉为皇家园林博物馆。</li>
<li>中国四大名园（另三座为承德避暑山庄、苏州拙政园、苏州留园）之一。</li>
<li>园内一大特色是长廊，以精美的绘画著称，有546幅西湖胜景和8000多幅人物故事、山水花鸟。</li>
</ul>
<h4 id="游园路线"><a href="#游园路线" class="headerlink" title="游园路线"></a>游园路线</h4><h5 id="东宫门入园"><a href="#东宫门入园" class="headerlink" title="东宫门入园"></a>东宫门入园</h5><p>东宫门&gt;&gt;仁寿殿&gt;&gt;文昌院&gt;&gt;玉澜堂、宜芸馆&gt;&gt;乐寿堂&gt;&gt;长廊&gt;&gt;排云殿&gt;&gt;佛香阁&gt;&gt;石舫&gt;&gt;耕织图景区&gt;&gt;如意门。 （约3小时行程）</p>
<p>东宫门&gt;&gt;仁寿殿&gt;&gt;文昌院&gt;&gt;玉澜堂、宜芸馆&gt;&gt;乐寿堂&gt;&gt;长廊&gt;&gt;排云殿&gt;&gt;佛香阁&gt;&gt;石舫&gt;&gt;乘船至南湖岛&gt;&gt;十七孔桥&gt;&gt;铜牛&gt;&gt;新建宫门。 （约2.5小时行程）</p>
<p>东宫门&gt;&gt;仁寿殿&gt;&gt;文昌院&gt;&gt;玉澜堂、宜芸馆&gt;&gt;乐寿堂&gt;&gt;长廊&gt;&gt;排云殿&gt;&gt;佛香阁&gt;&gt;苏州街&gt;&gt;北宫门。（约2小时行程）</p>
<p>东宫门&gt;&gt;仁寿殿&gt;&gt;文昌院&gt;&gt;玉澜堂、宜芸馆&gt;&gt;乐寿堂&gt;&gt;长廊&gt;&gt;排云殿&gt;&gt;佛香阁&gt;&gt;苏州街&gt;&gt;澹宁堂&gt;&gt;谐趣园&gt;&gt;东宫门。 （约2.5小时行程）</p>
<h5 id="北宫门入园"><a href="#北宫门入园" class="headerlink" title="北宫门入园"></a>北宫门入园</h5><p>北宫门&gt;&gt;苏州街&gt;&gt;四大部洲&gt;&gt;佛香阁&gt;&gt;排云殿&gt;&gt;长廊&gt;&gt;石舫&gt;&gt;乘船至南湖岛&gt;&gt;十七孔桥&gt;&gt;铜牛&gt;&gt;昆明湖东堤&gt;&gt;文昌院&gt;&gt;玉澜堂、宜芸馆&gt;&gt;乐寿堂 &gt;&gt;仁寿殿&gt;&gt;东宫门。 （约3小时行程）</p>
<p>北宫门&gt;&gt;苏州街&gt;&gt;澹宁堂&gt;&gt;谐趣园&gt;&gt;仁寿殿&gt;&gt;玉澜堂、宜芸馆&gt;&gt;文昌院&gt;&gt;乐寿堂&gt;&gt;长廊&gt;&gt;排云殿&gt;&gt;佛香阁&gt;&gt;石舫&gt;&gt;耕织图景区&gt;&gt;如意门。 （约2.5小时行程）</p>
<p>北宫门&gt;&gt;苏州街&gt;&gt;石舫&gt;&gt;长廊&gt;&gt;排云殿&gt;&gt;佛香阁&gt;&gt;乐寿堂&gt;&gt;文昌院&gt;&gt;仁寿殿&gt;&gt;东宫门。 （约2小时行程）</p>
<h5 id="新建宫门入园"><a href="#新建宫门入园" class="headerlink" title="新建宫门入园"></a>新建宫门入园</h5><p>新建宫门&gt;&gt;昆明湖东堤&gt;&gt;文昌院&gt;&gt;仁寿殿&gt;&gt;玉澜堂、宜芸馆&gt;&gt;乐寿堂&gt;&gt;长廊&gt;&gt;排云殿&gt;&gt;佛香阁&gt;&gt;苏州街&gt;&gt;北宫门。（约2.5小时行程）</p>
<p>新建宫门&gt;&gt;南湖岛&gt;&gt;十七孔桥&gt;&gt;铜牛&gt;&gt;乘船至石舫&gt;&gt;耕织图景区&gt;&gt;苏州街&gt;&gt;佛香阁&gt;&gt;排云殿&gt;&gt;长廊&gt;&gt;乐寿堂&gt;&gt;玉澜堂、宜芸馆&gt;&gt;文昌院&gt;&gt;仁寿殿&gt;&gt;东宫门。 （约3小时行程）</p>
<p><img src="http://s.visitbeijing.com.cn/uploadfile/2015/0727/20150727094829536.jpg" alt=""></p>
<h3 id="圆明园"><a href="#圆明园" class="headerlink" title="圆明园"></a>圆明园</h3><blockquote>
<p><a href="http://www.yuanmingyuanpark.cn/" target="_blank" rel="noopener">圆明园遗址公园</a></p>
</blockquote>
<h4 id="描述-2"><a href="#描述-2" class="headerlink" title="描述"></a>描述</h4><ul>
<li>被誉为“一切造园艺术的典范”和“万园之园”</li>
</ul>
<h4 id="门票价格"><a href="#门票价格" class="headerlink" title="门票价格"></a>门票价格</h4><h5 id="售票处"><a href="#售票处" class="headerlink" title="售票处"></a>售票处</h5><ul>
<li>绮春园宫门(售票窗口5个，节假日期间售票窗口8个)</li>
<li>长春园东门（售票窗口2个）</li>
<li>二宫门（售票窗口1个）</li>
<li>藻园门（售票窗口1个）</li>
</ul>
<h5 id="①大门门票："><a href="#①大门门票：" class="headerlink" title="①大门门票："></a>①大门门票：</h5><ul>
<li>成人门票：10元/人次；</li>
<li>半价门票：5元/人次；</li>
</ul>
<h5 id="②西洋楼遗址景区（含大水法、展览馆、迷宫）"><a href="#②西洋楼遗址景区（含大水法、展览馆、迷宫）" class="headerlink" title="②西洋楼遗址景区（含大水法、展览馆、迷宫）"></a>②西洋楼遗址景区（含大水法、展览馆、迷宫）</h5><ul>
<li>成人门票：15元/人次；</li>
<li>半价门票：5元/人次；</li>
</ul>
<h5 id="③圆明园盛时全景模型展"><a href="#③圆明园盛时全景模型展" class="headerlink" title="③圆明园盛时全景模型展"></a>③圆明园盛时全景模型展</h5><ul>
<li>成人门票：10元/人次；</li>
<li>半价门票：5元/人次；</li>
</ul>
<h5 id="首道门门票优惠减免规定"><a href="#首道门门票优惠减免规定" class="headerlink" title="首道门门票优惠减免规定"></a>首道门门票优惠减免规定</h5><p>1、6周岁（含6周岁）或1.2 米(含1.2米 )以下儿童免票；<br>2、60周岁（含60周岁）以上老年人凭老年证或身份证免票；<br>6、残疾人持残疾证件免票；<br>14、门票当日有效，售出后概不退换。</p>
<h5 id="园中园门票优惠减免规定"><a href="#园中园门票优惠减免规定" class="headerlink" title="园中园门票优惠减免规定"></a>园中园门票优惠减免规定</h5><p>1、6周岁（含6周岁）或1.2 米(含1.2米)以下儿童免票；<br>2、60周岁（含60周岁）以上老年人凭老年证或身份证免票；<br>6、残疾人持残疾证件免票；<br>13、门票当日有效，售出后概不退换。</p>
<h4 id="景区卫生间位置分布"><a href="#景区卫生间位置分布" class="headerlink" title="景区卫生间位置分布"></a>景区卫生间位置分布</h4><p><img src="http://www.yuanmingyuanpark.cn/lyfw/llxx/201012/W020181225383396550738.jpg" alt=""></p>
<h4 id="公园开放时间："><a href="#公园开放时间：" class="headerlink" title="公园开放时间："></a>公园开放时间：</h4><p>1月—3月15日、10月16日—12月  售票时间：7:00—17:30  开闭园时间：7:00—19:30</p>
<p>3月16日—4月、9月—10月15日   售票时间：7:00—18:00  开闭园时间：7:00—20:00</p>
<p>5月—8月  售票时间：7:00—19:00  开闭园时间：7:00—21:00</p>
<h3 id="什刹海"><a href="#什刹海" class="headerlink" title="什刹海"></a>什刹海</h3><blockquote>
<p><a href="http://www.wanderbee.com/zh-CN/articles/explore-old-beijing/" target="_blank" rel="noopener">漫步什刹海，寻味老北京</a></p>
</blockquote>
<p><img src="http://www.wanderbee.com/assets/article-images/explore-old-beijing-01.jpg" alt=""></p>
<h4 id="描述-3"><a href="#描述-3" class="headerlink" title="描述"></a>描述</h4><ul>
<li>什刹海盛产贵族，王府大院、名人故居扎堆于此。</li>
</ul>
<h4 id="门票-1"><a href="#门票-1" class="headerlink" title="门票"></a>门票</h4><p>什刹海是免费的，但是进入某些景点需要门票</p>
<ul>
<li>宋庆龄故居：20元</li>
</ul>
<h4 id="开放时间-1"><a href="#开放时间-1" class="headerlink" title="开放时间"></a>开放时间</h4><p>全天</p>
<ul>
<li>宋庆龄故居：09:00~17:30</li>
</ul>
<h3 id="恭王府"><a href="#恭王府" class="headerlink" title="恭王府"></a>恭王府</h3><h4 id="描述-4"><a href="#描述-4" class="headerlink" title="描述"></a>描述</h4><ul>
<li>“一座恭王府，半部清朝史”是历史地理学家侯仁之对恭王府的评价。</li>
<li>恭王府前身为乾隆时大学士和珅的邸宅。和珅在当时可列入世界级富翁行列，他的野史和传说被人津津乐道。之后咸丰帝将府邸转赐其弟奕忻，成为恭王府。</li>
</ul>
<h4 id="门票-2"><a href="#门票-2" class="headerlink" title="门票"></a>门票</h4><p>套票：70元（含门票、专业讲解员、参观开放的景厅及展厅、观看王府大戏楼、并在戏楼内欣赏北京传统节目演出、品尝王府盖碗茶和小吃）。<br>如果只是参观恭王府，门票为40元。</p>
<h4 id="开放时间-2"><a href="#开放时间-2" class="headerlink" title="开放时间"></a>开放时间</h4><p>旺季7:30-16:30；淡季8:30-16:00</p>
<h3 id="雍和宫"><a href="#雍和宫" class="headerlink" title="雍和宫"></a>雍和宫</h3><blockquote>
<p>雍和宫原来是雍正皇帝的府邸，雍正登基后将其升为行宫，赐名“雍和宫”。乾隆登基后将雍和宫辟为藏传佛教格鲁派寺院。这里也就成为清廷联系藏、蒙等上层政治、宗教人士的地方。雍和宫还是藏传佛教艺术品的宝库，其中紫檀木雕刻的五百罗汉山，金丝楠木雕龙的大佛龛和十八米高的白檀木大佛成为雍和宫木雕工艺的三绝，以大、奇、精著称。</p>
</blockquote>
<h4 id="门票-3"><a href="#门票-3" class="headerlink" title="门票"></a>门票</h4><p>25元</p>
<h4 id="开放时间-3"><a href="#开放时间-3" class="headerlink" title="开放时间"></a>开放时间</h4><p>9:00-16:30</p>
<h3 id="明十三陵明"><a href="#明十三陵明" class="headerlink" title="明十三陵明"></a>明十三陵明</h3><blockquote>
<p>十三陵是中国明朝皇帝的墓葬群，13座皇陵均依山而筑，形成了体系完整、规模宏大、气势磅礴的陵寝建筑群。十三陵严格按照中国传统风水学说，从选址到规划设计都十分注重建筑与自然山川、水流和植被的和谐统一，追求”天造地设”的完美境界，用以体现”天人合一”的哲学观点，充分展示了中国传统文化的丰富内涵。</p>
</blockquote>
<h4 id="门票-4"><a href="#门票-4" class="headerlink" title="门票"></a>门票</h4><blockquote>
<p>注：旺季4月至10月，淡季11月至次年3月。 </p>
</blockquote>
<ul>
<li>定陵</li>
</ul>
<p>旺季65元、淡季45元；</p>
<ul>
<li>长陵</li>
</ul>
<p>旺季45元、淡季35元；</p>
<ul>
<li>昭陵</li>
</ul>
<p>旺季35元、淡季25元；</p>
<ul>
<li>总神道</li>
</ul>
<p>旺季35元、淡季25元。</p>
<ul>
<li>四点联票135元，携程优惠价115元。</li>
</ul>
<h4 id="开放时间-4"><a href="#开放时间-4" class="headerlink" title="开放时间"></a>开放时间</h4><ul>
<li>定陵</li>
</ul>
<p>旺季8:00-17:30，淡季8:30-17:00；</p>
<ul>
<li>长陵</li>
</ul>
<p>旺季8:00-17:00；淡季8:30-16:30；</p>
<ul>
<li>昭陵</li>
</ul>
<p>旺季8:30-17:00，淡季8:30-16:30；</p>
<ul>
<li>总神道</li>
</ul>
<p>旺季8:10-17:50，淡季8:30-17:00。</p>
]]></content>
      <categories>
        <category>Tour</category>
      </categories>
      <tags>
        <tag>Tour</tag>
      </tags>
  </entry>
  <entry>
    <title>Week-based-year</title>
    <url>/2020/01/02/Week-based-Year/</url>
    <content><![CDATA[<div style="width: 100%; height: 796px; background-image: url(https://i.v2ex.co/785QLPbb.jpeg); background-repeat: no-repeat; background-position: 0 -180px"></div>
<a id="more"></a>

<blockquote>
<p><a href="https://v2ex.com/t/633650" target="_blank" rel="noopener">你今天因为 YYYY-MM-dd 被提 BUG 了吗</a></p>
<p><a href="https://nakedsecurity.sophos.com/2019/12/23/serious-security-the-decade-ending-y2k-bug-that-wasnt/" target="_blank" rel="noopener">Serious Security: The decade-ending “Y2K bug” that wasn’t</a></p>
</blockquote>
<h2 id="BUG-🐛"><a href="#BUG-🐛" class="headerlink" title="BUG 🐛"></a>BUG 🐛</h2><p>正确时间应为 <code>2019/12/29 02:33</code>，却错误的显示为 <code>2020/12/29 02:33</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gzhennaxia.admin.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.LocalDate;</span><br><span class="line"><span class="keyword">import</span> java.time.format.DateTimeFormatter;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> bo li</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2020-01-02 17:42</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CarefulWithThatDateEugene</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">tryit</span><span class="params">(<span class="keyword">int</span> Y, <span class="keyword">int</span> M, <span class="keyword">int</span> D, String pat)</span> </span>&#123;</span><br><span class="line">        DateTimeFormatter fmt = DateTimeFormatter.ofPattern(pat);</span><br><span class="line">        LocalDate         dat = LocalDate.of(Y,M,D);</span><br><span class="line">        String            str = fmt.format(dat);</span><br><span class="line">        System.out.printf(<span class="string">"Y=%04d M=%02d D=%02d "</span> +</span><br><span class="line">                <span class="string">"formatted with "</span> +</span><br><span class="line">                <span class="string">"\"%s\" -&gt; %s\n"</span>,Y,M,D,pat,str);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        tryit(<span class="number">2019</span>,<span class="number">12</span>,<span class="number">28</span>,<span class="string">"YYYY-MM-dd"</span>);</span><br><span class="line">        tryit(<span class="number">2019</span>,<span class="number">12</span>,<span class="number">29</span>,<span class="string">"YYYY-MM-dd"</span>);</span><br><span class="line">        tryit(<span class="number">2019</span>,<span class="number">12</span>,<span class="number">30</span>,<span class="string">"YYYY-MM-dd"</span>);</span><br><span class="line">        tryit(<span class="number">2019</span>,<span class="number">12</span>,<span class="number">31</span>,<span class="string">"YYYY-MM-dd"</span>);</span><br><span class="line">        tryit(<span class="number">2020</span>,<span class="number">01</span>,<span class="number">1</span>,<span class="string">"DD/MM/YYYY"</span>);</span><br><span class="line">        tryit(<span class="number">2020</span>,<span class="number">01</span>,<span class="number">2</span>,<span class="string">"YYYY-MM-DD"</span>);</span><br><span class="line">        tryit(<span class="number">2020</span>,<span class="number">01</span>,<span class="number">3</span>,<span class="string">"YYYY-MM-DD"</span>);</span><br><span class="line">        tryit(<span class="number">2020</span>,<span class="number">01</span>,<span class="number">4</span>,<span class="string">"YYYY-MM-DD"</span>);</span><br><span class="line">        tryit(<span class="number">2020</span>,<span class="number">01</span>,<span class="number">5</span>,<span class="string">"YYYY-MM-DD"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Y&#x3D;2019 M&#x3D;12 D&#x3D;28 formatted with &quot;YYYY-MM-dd&quot; -&gt; 2019-12-28</span><br><span class="line">Y&#x3D;2019 M&#x3D;12 D&#x3D;29 formatted with &quot;YYYY-MM-dd&quot; -&gt; 2020-12-29</span><br><span class="line">Y&#x3D;2019 M&#x3D;12 D&#x3D;30 formatted with &quot;YYYY-MM-dd&quot; -&gt; 2020-12-30</span><br><span class="line">Y&#x3D;2019 M&#x3D;12 D&#x3D;31 formatted with &quot;YYYY-MM-dd&quot; -&gt; 2020-12-31</span><br><span class="line">Y&#x3D;2020 M&#x3D;01 D&#x3D;01 formatted with &quot;DD&#x2F;MM&#x2F;YYYY&quot; -&gt; 01&#x2F;01&#x2F;2020</span><br><span class="line">Y&#x3D;2020 M&#x3D;01 D&#x3D;02 formatted with &quot;YYYY-MM-DD&quot; -&gt; 2020-01-02</span><br><span class="line">Y&#x3D;2020 M&#x3D;01 D&#x3D;03 formatted with &quot;YYYY-MM-DD&quot; -&gt; 2020-01-03</span><br><span class="line">Y&#x3D;2020 M&#x3D;01 D&#x3D;04 formatted with &quot;YYYY-MM-DD&quot; -&gt; 2020-01-04</span><br><span class="line">Y&#x3D;2020 M&#x3D;01 D&#x3D;05 formatted with &quot;YYYY-MM-DD&quot; -&gt; 2020-01-05</span><br></pre></td></tr></table></figure>

<h3 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h3><p>Java 日期格式化时使用的<a href="https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#patterns" target="_blank" rel="noopener"><strong>模式字符串</strong></a>为 <code>YYYY/MM/dd HH:ss</code>！！！应该改为  <code>yyyy/MM/dd HH:ss</code>！！！</p>
<p>Java 1.8 中 <code>YYYY</code> 表示 <code>week-based-year</code>，意思是年份是基于周进行计算的，一年有 52 个周余 1/2 天，<code>week-based-year</code> 就是决定这多出来的一天或者两天所在的周应该属于哪一年的。</p>
<p>ISO-8601 规定：</p>
<ol>
<li>一周从周一到周日，即周一为每周的第一天</li>
<li>年末被拆分的周分配给天数占多数的年份，即哪个年份的天在这一周里居多，那么这一周就算是哪一年。</li>
</ol>
<p>回归问题，19 年年末 20 年年初的日期与周对应关系为：</p>
<p>|2019/12/29| 2019/12/30 | 2019/12/31 | 2020/01/01 | 2020/01/02 | 2020/01/03 | 2020/01/04 | 2020/01/05 |<br>| ———- | ———- | ———- | ———- | ———- | ———- | ———- |<br>|周天       | 周一       | 周二       | 周三       | 周四       | 周五       | 周六       | 周天       |</p>
<p>由于在这一周里 19 年有 2 天，20 年有 5 天，所以根据 ISO-8601 的规定，这一周是 2020 年的第一周，所以如果使用 <code>YYYY</code> 作为年份的模式字符串，那么转换后得到的年份结果将会是 2020。</p>
<p>但为什么 29 号是周日，不属于 2019 年的最后一周啊，为什么还是被转换成 2020 了呢，难道因为一周是从周日开始算的？</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">System.out.println(Locale.getDefault());</span><br><span class="line">System.out.println(WeekFields.of(Locale.getDefault()).getFirstDayOfWeek());</span><br><span class="line"></span><br><span class="line"><span class="comment">// zh_CN</span></span><br><span class="line"><span class="comment">// SUNDAY</span></span><br></pre></td></tr></table></figure>

<p>结果真的是从周日开始算的！！！这是为什么呢？查了一下，Java 8中引入了新的日期 API。新的日期 API 是 JSR-310 规范的实现。但还没有找到具体哪里说了一周是从周日开始算的，但结果就是这样！！！</p>
<h3 id="YYYY-的意义"><a href="#YYYY-的意义" class="headerlink" title="YYYY 的意义"></a>YYYY 的意义</h3><blockquote>
<p><a href="https://nakedsecurity.sophos.com/2019/12/23/serious-security-the-decade-ending-y2k-bug-that-wasnt/" target="_blank" rel="noopener">Serious Security: The decade-ending “Y2K bug” that wasn’t</a></p>
<p>For accounting convenience, therefore, it s conventional to treat some years as having 52 full weeks, and others as having 53 weeks, which keeps things like weekly revenue plans and weekly payroll evened out in the long run.</p>
<p>因此，为了方便核算，通常将某些年份视为有52个完整的星期，而其他年份则视为有53个星期，这样从长远来看，就可以保持诸如每周收入计划和每周工资的平衡。</p>
</blockquote>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>平常日期格式化时使用的标准模式字符串为 <span style="background-color: rgba(27,31,35,.05);border-radius: 3px;font-size: 85%;margin: 0;padding: .2em 0 .2em .4em;">yyyy/MM/dd HH:</span><span style="background-color:rgba(27,31,35,.05);border-radius: 3px;font-size: 85%;margin: 0;padding: .2em .4em .2em 0;">mm:ss</span> (<strong>小大小大小小</strong>)</p>
]]></content>
      <categories>
        <category>JDK</category>
      </categories>
      <tags>
        <tag>JDK</tag>
      </tags>
  </entry>
  <entry>
    <title>Zhuhai Tour in the weekend of January 2020</title>
    <url>/2019/12/31/Zhuhai-Tour-in-the-weekend-of-January-2020/</url>
    <content><![CDATA[<img src="cover" width="100%"/>

<a id="more"></a>

<h2 id="路线"><a href="#路线" class="headerlink" title="路线"></a>路线</h2><h3 id="蛇口-珠海-ship"><a href="#蛇口-珠海-ship" class="headerlink" title="蛇口 - 珠海 :ship:"></a>蛇口 - 珠海 :ship:</h3><table>
<thead>
<tr>
<th>起始港口</th>
<th>到达港口</th>
<th>开船时间</th>
<th>到达时间</th>
<th>价格</th>
<th>渠道</th>
</tr>
</thead>
<tbody><tr>
<td>蛇口港</td>
<td>九洲港</td>
<td>2019-12-28 07:30</td>
<td>2019-12-28 08:40</td>
<td>¥125 起</td>
<td>携程</td>
</tr>
<tr>
<td>蛇口港</td>
<td>九洲港</td>
<td>2019-12-28 08:00</td>
<td>2019-12-28 09:10</td>
<td>¥125 起</td>
<td>携程</td>
</tr>
<tr>
<td>蛇口港</td>
<td>九洲港</td>
<td>2019-12-28 08:30</td>
<td>2019-12-28 09:40</td>
<td>¥125 起</td>
<td>携程</td>
</tr>
<tr>
<td>蛇口港</td>
<td>九洲港</td>
<td>2019-12-28 20:00</td>
<td>2019-12-28 21:00</td>
<td>¥125 起</td>
<td>携程</td>
</tr>
<tr>
<td>蛇口港</td>
<td>九洲港</td>
<td>2019-12-28 20:45</td>
<td>2019-12-28 21:55</td>
<td>¥125 起</td>
<td>携程</td>
</tr>
<tr>
<td>蛇口港</td>
<td>九洲港</td>
<td>2019-12-28 21:30</td>
<td>2019-12-28 22:40</td>
<td>¥125 起</td>
<td>携程</td>
</tr>
</tbody></table>
<h3 id="珠海-蛇口-ship"><a href="#珠海-蛇口-ship" class="headerlink" title="珠海 - 蛇口 :ship:"></a>珠海 - 蛇口 :ship:</h3><table>
<thead>
<tr>
<th>起始港口</th>
<th>到达港口</th>
<th>开船时间</th>
<th>到达时间</th>
<th>价格</th>
<th>渠道</th>
</tr>
</thead>
<tbody><tr>
<td>九洲港</td>
<td>蛇口港</td>
<td>2019-12-29 20:00</td>
<td>2019-12-29 21:00</td>
<td>¥125 起</td>
<td>携程</td>
</tr>
<tr>
<td>九洲港</td>
<td>蛇口港</td>
<td>2019-12-29 20:45</td>
<td>2019-12-29 21:45</td>
<td>¥125 起</td>
<td>携程</td>
</tr>
<tr>
<td>九洲港</td>
<td>蛇口港</td>
<td>2019-12-29 21:30</td>
<td>2019-12-29 22:30</td>
<td>¥125 起</td>
<td>携程</td>
</tr>
</tbody></table>
<h3 id="深圳-珠海公路口岸-bus"><a href="#深圳-珠海公路口岸-bus" class="headerlink" title="深圳 - 珠海公路口岸 :bus:"></a>深圳 - 珠海公路口岸 :bus:</h3><blockquote>
<p><a href="http://www.mafengwo.cn/sales/5811177.html" target="_blank" rel="noopener">深圳到珠海公路口岸澳门自由行拼车</a></p>
<p>上车集合点：<br>1、6：30 或 7：00 大剧院B出口；<br>2、7：00 或 7：30 深大北门天桥:深大北门公交站1/2，腾讯大厦同侧。</p>
<p>票价：¥ 99</p>
</blockquote>
<p><img src="https://b1-q.mafengwo.net/s13/M00/17/6E/wKgEaVxtL1iAauPpAADQXT-OV-Q43.jpeg" alt=""></p>
<p><img src="https://n1-q.mafengwo.net/s13/M00/13/C6/wKgEaVxtLO2ATuG4AADxsEuMe0o57.jpeg" alt=""></p>
]]></content>
      <categories>
        <category>Tour</category>
      </categories>
      <tags>
        <tag>Tour</tag>
      </tags>
  </entry>
  <entry>
    <title>Macau Tour at New Year&#39;s Day in 2020</title>
    <url>/2019/12/26/Macau-Tour-at-New-Year-s-Day-in-2020/</url>
    <content><![CDATA[<img src="https://imgcdn.yicai.com/vms-storage/df7a694bdc74ee4f44f8ab9ccd4d913560ceb568.jpeg" width="100%"/>

<a id="more"></a>

<iframe width="100%" height="600" frameborder="no"  src="https://libo9527.github.io/static/map/amap/20200101/all/index.html"></iframe>

<h2 id="往返路线"><a href="#往返路线" class="headerlink" title="往返路线"></a>往返路线</h2><h3 id="深圳-往返-港珠澳大桥公路口岸-bus"><a href="#深圳-往返-港珠澳大桥公路口岸-bus" class="headerlink" title="深圳 -往返- 港珠澳大桥公路口岸 :bus:"></a>深圳 -往返- 港珠澳大桥公路口岸 :bus:</h3><blockquote>
<p><a href="http://www.mafengwo.cn/sales/5811177.html" target="_blank" rel="noopener">深圳到珠海公路口岸澳门自由行拼车</a></p>
<p>上车集合点：</p>
<ol>
<li>7：00 福田口岸/皇岗口岸集合</li>
<li>16:30-17:00 公路口岸</li>
</ol>
<p>票价：¥ 289</p>
</blockquote>
<p><img src="https://b1-q.mafengwo.net/s13/M00/17/6E/wKgEaVxtL1iAauPpAADQXT-OV-Q43.jpeg" alt=""></p>
<p><img src="https://n1-q.mafengwo.net/s13/M00/13/C6/wKgEaVxtLO2ATuG4AADxsEuMe0o57.jpeg" alt=""></p>
<h2 id="游玩路线"><a href="#游玩路线" class="headerlink" title="游玩路线"></a>游玩路线</h2><blockquote>
<p><a href="[chrome-extension://cdonnmffkdaoajfknoeeecmchibpmkmg/assets/pdf/web/viewer.html?file=https%3A%2F%2Fwww.dsat.gov.mo%2Fhzmb%2Fpdf%2FHZMB_userguide.pdf](chrome-extension://cdonnmffkdaoajfknoeeecmchibpmkmg/assets/pdf/web/viewer.html?file=https%3A%2F%2Fwww.dsat.gov.mo%2Fhzmb%2Fpdf%2FHZMB_userguide.pdf)">港珠澳大桥通行使用指南</a></p>
<p><a href="http://www.dsat.gov.mo/bus/site/index.aspx" target="_blank" rel="noopener">澳门交通事务局官网</a></p>
</blockquote>
<h3 id="由远及近"><a href="#由远及近" class="headerlink" title="由远及近"></a>由远及近</h3><h4 id="10-30-12-00"><a href="#10-30-12-00" class="headerlink" title="10:30 - 12:00"></a>10:30 - 12:00</h4><iframe width="100%" height="600" frameborder="no"  src="https://libo9527.github.io/static/map/amap/20200101/bus/gzodqambjdl-wnsr.html"></iframe>

<table>
<thead>
<tr>
<th>公交线路</th>
<th>上车站</th>
<th>下车站</th>
<th>时长</th>
<th>票价</th>
</tr>
</thead>
<tbody><tr>
<td>102X</td>
<td>港珠澳大桥澳门边检大楼</td>
<td>奥林匹克大马路</td>
<td>1小时17分钟</td>
<td>6</td>
</tr>
</tbody></table>
<h4 id="港珠澳大桥珠海公路口岸-官也街"><a href="#港珠澳大桥珠海公路口岸-官也街" class="headerlink" title="港珠澳大桥珠海公路口岸 - 官也街"></a>港珠澳大桥珠海公路口岸 - 官也街</h4><table>
<thead>
<tr>
<th>公交线路</th>
<th>上车站</th>
<th>下车站</th>
<th>时长</th>
<th>票价</th>
</tr>
</thead>
<tbody><tr>
<td>102X</td>
<td>港珠澳大桥澳门边检大楼</td>
<td>凼仔官也街(公交站)</td>
<td>1小时2分钟</td>
<td>6</td>
</tr>
</tbody></table>
<h4 id="官也街-威尼斯人"><a href="#官也街-威尼斯人" class="headerlink" title="官也街 - 威尼斯人"></a>官也街 - 威尼斯人</h4><p>步行，18分钟</p>
<p>购物：威尼斯人购物中心</p>
<h4 id="威尼斯人"><a href="#威尼斯人" class="headerlink" title="威尼斯人 -"></a>威尼斯人 -</h4><p>购物：DFS(T广场新濠天地店)</p>
<h4 id="澳门威尼斯人-妈祖阁"><a href="#澳门威尼斯人-妈祖阁" class="headerlink" title="澳门威尼斯人 - 妈祖阁"></a>澳门威尼斯人 - 妈祖阁</h4><table>
<thead>
<tr>
<th>公交线路</th>
<th>上车站</th>
<th>下车站</th>
<th>时长</th>
<th>票价</th>
</tr>
</thead>
<tbody><tr>
<td>MT4</td>
<td>新城大马路/银河</td>
<td>妈阁总站</td>
<td>43分钟</td>
<td>6</td>
</tr>
</tbody></table>
<h3 id="由近及远"><a href="#由近及远" class="headerlink" title="由近及远"></a>由近及远</h3><h4 id="10-30-11-30"><a href="#10-30-11-30" class="headerlink" title="10:30 - 11:30"></a>10:30 - 11:30</h4><iframe width="100%" height="600" frameborder="no"  src="https://libo9527.github.io/static/map/amap/20200101/bus/gzodqambjdl-dsbpf.html"></iframe>


<p><img src="https://i.loli.net/2019/12/31/eyijDN4bkvBX8xl.png" alt=""></p>
<table>
<thead>
<tr>
<th>公交线路</th>
<th>上车站</th>
<th>下车站</th>
<th>时长</th>
<th>票价</th>
</tr>
</thead>
<tbody><tr>
<td>101X</td>
<td>港珠澳大桥澳门边检大楼</td>
<td>新马路/大丰</td>
<td>52 分钟</td>
<td>6</td>
</tr>
</tbody></table>
<p>旅客可在珠海公路口岸直接步行通关澳门，无须乘车。（珠海公路口岸与澳门口岸相接，均位于珠澳人工岛之上）。——【港珠澳大桥珠海口岸微信公众号】</p>
<h2 id="准备事项"><a href="#准备事项" class="headerlink" title="准备事项"></a>准备事项</h2><h3 id="流量包"><a href="#流量包" class="headerlink" title="流量包"></a>流量包</h3><p>支付宝 - 境外流量包</p>
<h3 id="兑换澳币"><a href="#兑换澳币" class="headerlink" title="兑换澳币"></a>兑换澳币</h3><h3 id="相机"><a href="#相机" class="headerlink" title="相机"></a>相机</h3><ul>
<li>充电</li>
<li>备份</li>
</ul>
<h2 id="购物清单"><a href="#购物清单" class="headerlink" title="购物清单"></a>购物清单</h2><h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2>]]></content>
      <categories>
        <category>Tour</category>
      </categories>
      <tags>
        <tag>Tour</tag>
      </tags>
  </entry>
  <entry>
    <title>Ticketing Arrangement</title>
    <url>/2019/12/24/Ticketing-Arrangement/</url>
    <content><![CDATA[<img src="http://cdn.feeyo.com/news/091126/09112611172657.jpg" width="100%"/>

<a id="more"></a>

<h2 id="深圳-西安"><a href="#深圳-西安" class="headerlink" title="深圳 - 西安"></a>深圳 - 西安</h2><table>
<thead>
<tr>
<th>车次</th>
<th>起始站</th>
<th>终点站</th>
<th>发车时间</th>
<th>到达时间</th>
<th>坐席</th>
<th>票价</th>
<th>状态</th>
<th>账号</th>
</tr>
</thead>
<tbody><tr>
<td>Z230</td>
<td>深圳</td>
<td>西安</td>
<td>2020-01-21 09:30</td>
<td>2020-1-21 09:22</td>
<td>硬卧</td>
<td>428</td>
<td>候补</td>
<td>杜方超</td>
</tr>
</tbody></table>
<h3 id="武昌-西安"><a href="#武昌-西安" class="headerlink" title="武昌 - 西安"></a>武昌 - 西安</h3><table>
<thead>
<tr>
<th>车次</th>
<th>起始站</th>
<th>终点站</th>
<th>发车时间</th>
<th>到达时间</th>
<th>坐席</th>
<th>票价</th>
<th>状态</th>
<th>账号</th>
</tr>
</thead>
<tbody><tr>
<td>Z230</td>
<td>武昌</td>
<td>西安</td>
<td>2020-01-19 09:30</td>
<td>2020-1-19 09:22</td>
<td>硬卧</td>
<td>247.5</td>
<td>候补</td>
<td>李静</td>
</tr>
</tbody></table>
<h3 id="广州-西安"><a href="#广州-西安" class="headerlink" title="广州 - 西安"></a>广州 - 西安</h3><table>
<thead>
<tr>
<th>车次</th>
<th>起始站</th>
<th>终点站</th>
<th>发车时间</th>
<th>到达时间</th>
<th>坐席</th>
<th>票价</th>
<th>状态</th>
<th>账号</th>
</tr>
</thead>
<tbody><tr>
<td>Z230</td>
<td>广州</td>
<td>西安</td>
<td>2020-01-19 11:17</td>
<td>2020-1-19 09:22</td>
<td>硬卧</td>
<td>428.0</td>
<td>候补</td>
<td>李佳雯</td>
</tr>
<tr>
<td>Z138</td>
<td>广州</td>
<td>西安</td>
<td>2020-01-19 08:32</td>
<td>2020-1-19 07:24</td>
<td>硬卧</td>
<td>428.0</td>
<td>候补</td>
<td>李佳雯</td>
</tr>
</tbody></table>
<h2 id="深圳-北京"><a href="#深圳-北京" class="headerlink" title="深圳 - 北京"></a>深圳 - 北京</h2><h3 id="深圳-长沙-train"><a href="#深圳-长沙-train" class="headerlink" title="深圳 - 长沙:train:"></a>深圳 - 长沙:train:</h3><table>
<thead>
<tr>
<th>车次</th>
<th>起始站</th>
<th>终点站</th>
<th>发车时间</th>
<th>到达时间</th>
<th>票价</th>
<th>起售时间</th>
<th>状态</th>
<th>账号</th>
</tr>
</thead>
<tbody><tr>
<td>K502</td>
<td>深圳</td>
<td>长沙</td>
<td>2020-01-24 05:26</td>
<td>2020-01-24 16:08</td>
<td>硬座： 112</td>
<td>9:30</td>
<td>停运</td>
<td></td>
</tr>
<tr>
<td>K1348</td>
<td>深圳</td>
<td>长沙</td>
<td>2020-01-24 08:10</td>
<td>2020-01-24 18:13</td>
<td>硬座：112</td>
<td></td>
<td><sapn style="color: green; font-weight: bolder;">已出票</span></td>
<td>谭文晗</td>
</tr>
</tbody></table>
<h3 id="长沙-北京-airplane"><a href="#长沙-北京-airplane" class="headerlink" title="长沙 - 北京:airplane:"></a>长沙 - 北京:airplane:</h3><table>
<thead>
<tr>
<th>航班</th>
<th>起飞时间</th>
<th>到达时间</th>
<th>票价</th>
<th>状态</th>
</tr>
</thead>
<tbody><tr>
<td><strong>海南航空</strong>HU7136</td>
<td><strong>2020-01-24 21:45</strong></td>
<td><strong>2020-01-24 23:55</strong></td>
<td>238 + 50</td>
<td><sapn style="color: green; font-weight: bolder;">已出票</span></td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>Life</category>
      </categories>
      <tags>
        <tag>Life</tag>
      </tags>
  </entry>
  <entry>
    <title>What System I Wanted</title>
    <url>/2019/12/21/What-System-I-Wanted/</url>
    <content><![CDATA[<img src="https://www.churchofjesuschrist.org/youth/bc/youth/article/powerful-ways-to-control-your-thoughts/images/control-my-thoughts-700x363-2115883.jpg" width="100%"/>

<a id="more"></a>

<h2 id="记账系统"><a href="#记账系统" class="headerlink" title="记账系统"></a><a href="https://gitee.com/libo9527/ledger/blob/master/README.md" target="_blank" rel="noopener">记账系统</a></h2><h2 id="火车中转攻略"><a href="#火车中转攻略" class="headerlink" title="火车中转攻略"></a>火车中转攻略</h2><ol>
<li>查看城市 A 到城市 B 的火车中转方案</li>
<li>用户可自定义中转城市</li>
<li>用户可自定义中转次数</li>
<li>多种线路进行打分</li>
<li>打分依据有价格、转乘次数等</li>
</ol>
<h2 id="习惯养成"><a href="#习惯养成" class="headerlink" title="习惯养成"></a>习惯养成</h2><ol>
<li>制定一个习惯的养成计划</li>
<li>缴纳一笔金钱进系统，没有按计划进行实施则不可提取。</li>
<li>想要违规提取只有一个办法，就是注销账号。但注销后将被记入黑名单，不可再次注册。</li>
<li>缴纳的金额会被存入银行，按一定利息存放。</li>
<li>阶段性返还金额，达到某个里程碑就返还一定金额</li>
<li>未能按计划达到标准，则按一定比例推迟金额返还时间。</li>
</ol>
]]></content>
      <categories>
        <category>Thoughts</category>
      </categories>
      <tags>
        <tag>Thoughts</tag>
      </tags>
  </entry>
  <entry>
    <title>JSON Web Token</title>
    <url>/2019/12/17/JSON-Web-Token/</url>
    <content><![CDATA[<img src="https://images-1254006831.cos.ap-chengdu.myqcloud.com/jwt.jpg" width="100%"/>

<a id="more"></a>

<h2 id="WHAT-IS-JWT"><a href="#WHAT-IS-JWT" class="headerlink" title="WHAT IS JWT"></a>WHAT IS JWT</h2><h2 id="JWT-缺点"><a href="#JWT-缺点" class="headerlink" title="JWT 缺点"></a>JWT 缺点</h2><blockquote>
<p><a href="http://cryto.net/~joepie91/blog/2016/06/13/stop-using-jwt-for-sessions/" target="_blank" rel="noopener">Stop using JWT for sessions</a></p>
<p><a href="https://learnku.com/articles/22616#6536ec" target="_blank" rel="noopener">（译）别再使用 JWT 作为 Session 系统！问题重重且很危险。</a></p>
<p><a href="https://stackoverflow.com/questions/37959945/how-to-destroy-jwt-tokens-on-logout" target="_blank" rel="noopener">How to destroy JWT Tokens on logout?</a></p>
</blockquote>
<p>由于是无状态的，所以服务器无法主动销毁未过期的 JWT-Token。补救措施：将无效但未过期的 token 存在黑名单中，每次验证 token 前先检查其是否在黑名单中，在就直接抛相应异常即可。</p>
]]></content>
      <categories>
        <category>JWT</category>
      </categories>
      <tags>
        <tag>JWT</tag>
      </tags>
  </entry>
  <entry>
    <title>AccessDeniedHandler of Spring Security not Working While GlobalExceptionHandler existing</title>
    <url>/2019/12/10/AccessDeniedHandler-of-Spring-Security-not-Working-While-GlobalExceptionHandler-existing/</url>
    <content><![CDATA[<img src="https://previews.123rf.com/images/asiln/asiln1408/asiln140800037/30823194-access-denied-stamp.jpg" width="100%"/>

<a id="more"></a>

<blockquote>
<p><a href="https://github.com/spring-projects/spring-security/issues/6908" target="_blank" rel="noopener">AccessDeniedHandler and AuthenticationEntryPoint does not work Because of the global exception handler</a></p>
</blockquote>
<h2 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h2><p>在学习 Spring Security 的过程中，配置了权限异常处理器，但没有起作用，查找后发现是因为全局异常处理器已经处理了该异常，导致异常并没有传递到该处理器。</p>
<h3 id="全局异常处理器"><a href="#全局异常处理器" class="headerlink" title="全局异常处理器"></a>全局异常处理器</h3><figure class="highlight java"><figcaption><span>GlobalExceptionHandler.java</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GlobalExceptionHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler</span>(Exception<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">    <span class="title">public</span> <span class="title">ReturnVo</span> <span class="title">unknownExceptionHandler</span>(<span class="title">HttpServletRequest</span> <span class="title">request</span>, <span class="title">Exception</span> <span class="title">e</span>) </span>&#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        <span class="keyword">return</span> ReturnVo.error(CodeEnum.UNKNOWN_ERROR);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="权限异常处理器"><a href="#权限异常处理器" class="headerlink" title="权限异常处理器"></a>权限异常处理器</h3><figure class="highlight java"><figcaption><span>SecurityConfig.java</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableGlobalMethodSecurity</span>(securedEnabled = <span class="keyword">true</span>, prePostEnabled = <span class="keyword">true</span>, jsr250Enabled = <span class="keyword">true</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityConfig</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        ......</span><br><span class="line">          </span><br><span class="line">        http.exceptionHandling().accessDeniedHandler(<span class="keyword">new</span> AccessDeniedHandler() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handle</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, AccessDeniedException e)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">                httpServletResponse.setContentType(MediaType.APPLICATION_JSON_UTF8_VALUE);</span><br><span class="line">                httpServletResponse.getWriter().write(<span class="string">"&#123;\"code\": \"402\", \"msg\": \"权限不足\"&#125;"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><h3 id="方法一：全局异常处理器中将该异常继续抛出"><a href="#方法一：全局异常处理器中将该异常继续抛出" class="headerlink" title="方法一：全局异常处理器中将该异常继续抛出"></a>方法一：全局异常处理器中将该异常继续抛出</h3><figure class="highlight java"><figcaption><span>GlobalExceptionHandler.java</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GlobalExceptionHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler</span>(Exception<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">    <span class="title">public</span> <span class="title">ReturnVo</span> <span class="title">unknownExceptionHandler</span>(<span class="title">HttpServletRequest</span> <span class="title">request</span>, <span class="title">Exception</span> <span class="title">e</span>) <span class="title">throws</span> <span class="title">Exception</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (e <span class="keyword">instanceof</span> AccessDeniedException)&#123;</span><br><span class="line">            <span class="keyword">throw</span> e;</span><br><span class="line">        &#125;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        <span class="keyword">return</span> ReturnVo.error(CodeEnum.UNKNOWN_ERROR);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="方法二：将该异常处理器定义到全局异常处理器对应的类中"><a href="#方法二：将该异常处理器定义到全局异常处理器对应的类中" class="headerlink" title="方法二：将该异常处理器定义到全局异常处理器对应的类中"></a>方法二：将该异常处理器定义到全局异常处理器对应的类中</h3><figure class="highlight java"><figcaption><span>GlobalExceptionHandler.java</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GlobalExceptionHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler</span>(AccessDeniedException<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">    <span class="title">public</span> <span class="title">void</span> <span class="title">loginExceptionHandler</span>(<span class="title">HttpServletRequest</span> <span class="title">request</span>, <span class="title">HttpServletResponse</span> <span class="title">response</span>, <span class="title">AccessDeniedException</span> <span class="title">e</span>) <span class="title">throws</span> <span class="title">IOException</span>, <span class="title">ServletException</span> </span>&#123;</span><br><span class="line">        response.setContentType(MediaType.APPLICATION_JSON_UTF8_VALUE);</span><br><span class="line">        response.getWriter().write(<span class="string">"&#123;\"code\": \"402\", \"msg\": \"权限不足\"&#125;"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ExceptionHandler</span>(Exception<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">    <span class="title">public</span> <span class="title">ReturnVo</span> <span class="title">unknownExceptionHandler</span>(<span class="title">HttpServletRequest</span> <span class="title">request</span>, <span class="title">Exception</span> <span class="title">e</span>) </span>&#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        <span class="keyword">return</span> ReturnVo.error(CodeEnum.UNKNOWN_ERROR);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Sprint-Security</category>
      </categories>
      <tags>
        <tag>Sprint-Security</tag>
      </tags>
  </entry>
  <entry>
    <title>What is CORS</title>
    <url>/2019/12/10/What-is-CORS/</url>
    <content><![CDATA[<img src="https://geekflare.com/wp-content/uploads/2019/11/cors-1200x385.jpg" width="100%"/>

<a id="more"></a>

<blockquote>
<p><strong>跨域资源共享</strong>（Cross-origin resource sharing，简称CORS），用于让网页的受限资源能够被其他<a href="https://zh.wikipedia.org/wiki/域名" target="_blank" rel="noopener">域名</a>的页面访问的一种机制。通过该机制，页面能够自由地使用不同域名（cross-origin）的图片、样式、脚本、iframes以及视频。 ——<a href="https://zh.wikipedia.org/zh-hans/跨來源資源共享" target="_blank" rel="noopener">维基百科</a></p>
<p><a href="https://developer.mozilla.org/zh/docs/Web/HTTP/Access_control_CORS" target="_blank" rel="noopener">HTTP访问控制（CORS） - HTTP | MDN</a></p>
<p><a href="https://www.ruanyifeng.com/blog/2016/04/cors.html" target="_blank" rel="noopener">跨域资源共享CORS 详解- 阮一峰的网络日志</a></p>
<p><a href="http://blog.jiayuanzhang.com/post/cors-tutorial/" target="_blank" rel="noopener">跨域资源共享（CORS）详解</a></p>
</blockquote>
<h2 id="CORS"><a href="#CORS" class="headerlink" title="CORS"></a>CORS</h2><h3 id="简单请求和非简单请求"><a href="#简单请求和非简单请求" class="headerlink" title="简单请求和非简单请求"></a>简单请求和非简单请求</h3><p>只要同时满足以下两大条件，就属于简单请求：</p>
<p>（1）请求方法是以下三种方法之一：</p>
<ul>
<li>HEAD</li>
<li>GET</li>
<li>POST</li>
</ul>
<p>（2）HTTP的头信息不超出以下几种字段：</p>
<ul>
<li>Accept</li>
<li>Accept-Language</li>
<li>Content-Language</li>
<li>Last-Event-ID</li>
<li>Content-Type：只限于三个值<code>application/x-www-form-urlencoded</code>、<code>multipart/form-data</code>、<code>text/plain</code></li>
</ul>
<h2 id="Spring-项目中配置-CORS"><a href="#Spring-项目中配置-CORS" class="headerlink" title="Spring 项目中配置 CORS"></a>Spring 项目中配置 CORS</h2><blockquote>
<p><a href="https://link.jianshu.com/?t=http://spring.io/guides/gs/rest-service-cors/" target="_blank" rel="noopener">Enabling Cross Origin Requests for a RESTful Web Service | Spring</a></p>
<p><a href="https://spring.io/blog/2015/06/08/cors-support-in-spring-framework" target="_blank" rel="noopener">CORS support in Spring Framework | Spring</a></p>
</blockquote>
<h3 id="自定义过滤器"><a href="#自定义过滤器" class="headerlink" title="自定义过滤器"></a>自定义过滤器</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//1. 使用过滤器注册器注册</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FilterRegisterConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> FilterRegistrationBean <span class="title">filterRegisterBean</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        FilterRegistrationBean&lt;CorsFilter&gt; registrationBean = <span class="keyword">new</span> FilterRegistrationBean&lt;&gt;();</span><br><span class="line">        registrationBean.setFilter(<span class="keyword">new</span> CorsFilter());</span><br><span class="line">        registrationBean.setUrlPatterns(<span class="keyword">new</span> ArrayList&lt;String&gt;() &#123;&#123; add(<span class="string">"*"</span>); &#125;&#125;);</span><br><span class="line">        <span class="keyword">return</span> registrationBean;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//2. 使用 @WebFilter 注解</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@WebFilter</span>(urlPatterns = <span class="string">"*"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CorsFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        HttpServletResponse response = (HttpServletResponse) servletResponse;</span><br><span class="line">        response.setHeader(<span class="string">"Access-Control-Allow-Origin"</span>, <span class="string">"http://localhost:9528"</span>);</span><br><span class="line">        response.setHeader(<span class="string">"Access-Control-Max-Age"</span>, <span class="string">"10"</span>);</span><br><span class="line">        response.setHeader(<span class="string">"Access-Control-Allow-Methods"</span>, <span class="string">"*"</span>);</span><br><span class="line">        response.setHeader(<span class="string">"Access-Control-Allow-Headers"</span>, <span class="string">"*"</span>);</span><br><span class="line">        filterChain.doFilter(servletRequest, servletResponse);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>Access-Control-Allow-Methods</strong></p>
<p>该字段必需，它的值是逗号分隔的一个字符串，表明服务器支持的所有跨域请求的请求类型。</p>
</li>
<li><p><strong>Access-Control-Allow-Headers</strong></p>
<p>如果浏览器请求包括<code>Access-Control-Request-Headers</code>字段，则<code>Access-Control-Allow-Headers</code>字段是必需的。它也是一个逗号分隔的字符串，表明服务器支持的所有头信息字段，不限于浏览器在”预检”中请求的字段。</p>
</li>
<li><p><strong>Access-Control-Max-Age</strong></p>
<p>该字段可选，用来指定本次预检请求的有效期，单位为秒。上面结果中，有效期是 10秒，即允许缓存该条回应 10 秒，在此期间，不用发出另一条预检请求。</p>
<p>注意：如果设置缓存后，发现每次还是会发送 OPTIONS 请求，请检查是不是勾选了“禁止缓存”。</p>
<p><img src="https://www.technipages.com/wp-content/uploads/2016/05/Chrome-Disable-Cache.png" alt=""></p>
</li>
</ul>
<h3 id="注解-CrossOrigin"><a href="#注解-CrossOrigin" class="headerlink" title="注解 @CrossOrigin"></a>注解 <code>@CrossOrigin</code></h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 当前 Controller 中所有的方法接受跨域访问</span></span><br><span class="line">@CrossOrigin(origins = <span class="string">"http://localhost:9528"</span>, maxAge = <span class="number">10</span>)</span><br><span class="line">@RestController</span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">CorsController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    @PostMapping(<span class="string">"cors"</span>)</span><br><span class="line">    public <span class="built_in">String</span> cors() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"success"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 仅 /cors 可以接受跨域访问</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CorsController</span> </span>&#123;</span><br><span class="line">		<span class="meta">@CrossOrigin</span>(origins = <span class="string">"http://localhost:9528"</span>, maxAge = <span class="number">10</span>)</span><br><span class="line">    <span class="meta">@PostMapping</span>(<span class="string">"cors"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">cors</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"cors"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping</span>(<span class="string">"cors2"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">cors2</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"cors2"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="实现-WebMvcConfigurer-接口"><a href="#实现-WebMvcConfigurer-接口" class="headerlink" title="实现 WebMvcConfigurer 接口"></a>实现 WebMvcConfigurer 接口</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebMvcConfigurerImpl</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCorsMappings</span><span class="params">(CorsRegistry registry)</span> </span>&#123;</span><br><span class="line">      	<span class="comment">// Error: registry.addMapping("*")</span></span><br><span class="line">        registry.addMapping(<span class="string">"/**"</span>)</span><br><span class="line">                .allowedOrigins(<span class="string">"http://localhost:9528"</span>)</span><br><span class="line">                .allowedMethods(<span class="string">"*"</span>)</span><br><span class="line">                .allowedHeaders(<span class="string">"*"</span>)</span><br><span class="line">                .maxAge(<span class="number">10L</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Spring-Actuator-项目可使用-application-properties-来配置"><a href="#Spring-Actuator-项目可使用-application-properties-来配置" class="headerlink" title="Spring Actuator 项目可使用 application.properties 来配置"></a>Spring Actuator 项目可使用 application.properties 来配置</h3><blockquote>
<p><a href="https://stackoverflow.com/questions/42874351/spring-boot-enabling-cors-by-application-properties" target="_blank" rel="noopener">Spring Boot enabling CORS by application.properties</a></p>
</blockquote>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">endpoints.cors.allowed-origins</span>=<span class="string">http://localhost:9528</span></span><br><span class="line"><span class="meta">endpoints.cors.allowed-methods</span>=<span class="string">*</span></span><br><span class="line"><span class="meta">endpoints.cors.allowed-headers</span>=<span class="string">*</span></span><br><span class="line"><span class="meta">endpoints.cors.max-age</span>=<span class="string">10</span></span><br></pre></td></tr></table></figure>

<h2 id="Spring-Security-项目中配置-CORS"><a href="#Spring-Security-项目中配置-CORS" class="headerlink" title="Spring Security 项目中配置 CORS"></a>Spring Security 项目中配置 CORS</h2><blockquote>
<p><a href="https://docs.spring.io/spring-security/site/docs/4.2.x/reference/html/cors.html" target="_blank" rel="noopener">CORS | Spring Security</a></p>
<p><a href="https://stackoverflow.com/questions/40418441/spring-security-cors-filter" target="_blank" rel="noopener">Spring security CORS Filter | Stack Overflow</a></p>
<p><a href="http://www.jetchen.cn/spring-security-cors/" target="_blank" rel="noopener">Spring Security 环境下 CORS 跨域失效问题</a></p>
<p><a href="http://www.saily.top/2016/12/29/spring-security-cors/" target="_blank" rel="noopener">Spring Security配置cors跨域访问</a></p>
<p><a href="https://www.jianshu.com/p/87e1ef68794c" target="_blank" rel="noopener">CORS with Spring Boot and Spring Security</a></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@EnableWebSecurity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityConfig</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">// by default uses a Bean by the name of corsConfigurationSource</span></span><br><span class="line">        http.cors();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function">CorsConfigurationSource <span class="title">corsConfigurationSource</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        CorsConfiguration configuration = <span class="keyword">new</span> CorsConfiguration();</span><br><span class="line">        configuration.setAllowedOrigins(Arrays.asList(<span class="string">"http://localhost:9528"</span>));</span><br><span class="line">        configuration.setAllowedMethods(Arrays.asList(<span class="string">"*"</span>));</span><br><span class="line">        configuration.setAllowedHeaders(Arrays.asList(<span class="string">"*"</span>));</span><br><span class="line">        configuration.setMaxAge(<span class="number">10L</span>);</span><br><span class="line">        UrlBasedCorsConfigurationSource source = <span class="keyword">new</span> UrlBasedCorsConfigurationSource();</span><br><span class="line">        source.registerCorsConfiguration(<span class="string">"/**"</span>, configuration);</span><br><span class="line">        <span class="keyword">return</span> source;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



]]></content>
  </entry>
  <entry>
    <title>What is CSRF</title>
    <url>/2019/12/10/What-is-CSRF/</url>
    <content><![CDATA[<img src="https://dpsvdv74uwwos.cloudfront.net/statics/img/ogimage/csrf-cross-site-request-forgery.jpg" width="100%"/>

<a id="more"></a>

<blockquote>
<p><strong>跨站请求伪造</strong>（英语：Cross-site request forgery），也被称为 <strong>one-click attack</strong> 或者 <strong>session riding</strong>，通常缩写为 <strong>CSRF</strong> 或者 <strong>XSRF</strong>， 是一种挟制用户在当前已登录的Web应用程序上执行非本意的操作的攻击方法。<a href="https://zh.wikipedia.org/wiki/跨站请求伪造#cite_note-Ristic-1" target="_blank" rel="noopener">[1]</a> 跟<a href="https://zh.wikipedia.org/wiki/跨網站指令碼" target="_blank" rel="noopener">跨网站脚本</a>（XSS）相比，<strong>XSS</strong> 利用的是用户对指定网站的信任，CSRF 利用的是网站对用户网页浏览器的信任。 ——<a href="https://zh.wikipedia.org/zh/跨站请求伪造" target="_blank" rel="noopener">维基百科</a></p>
<p><a href="https://blog.techbridge.cc/2017/02/25/csrf-introduction/" target="_blank" rel="noopener">讓我們來談談CSRF - TechBridge 技術共筆部落格</a></p>
</blockquote>
]]></content>
      <categories>
        <category>Attack</category>
      </categories>
      <tags>
        <tag>Attack</tag>
      </tags>
  </entry>
  <entry>
    <title>Study Notes of Spring Security</title>
    <url>/2019/12/05/Study-Notes-of-Spring-Security/</url>
    <content><![CDATA[<img src="https://miro.medium.com/max/2560/1*bQV578ujCEPGvy9ZVemdUg.jpeg" width="100%"/>

<a id="more"></a>

<blockquote>
<p>版本说明：</p>
<p>Spring Boot：2.2.1.RELEASE</p>
<p>Spring Security：</p>
</blockquote>
<h2 id="Spring-Security-简介"><a href="#Spring-Security-简介" class="headerlink" title="Spring Security 简介"></a>Spring Security 简介</h2><blockquote>
<p><a href="https://www.springcloud.cc/spring-security.html" target="_blank" rel="noopener">Spring Security参考 | Spring Cloud 中文网</a></p>
</blockquote>
<h2 id="初级使用：默认用户认证"><a href="#初级使用：默认用户认证" class="headerlink" title="初级使用：默认用户认证"></a>初级使用：默认用户认证</h2><ol>
<li><p>添加依赖</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>只要加入依赖，项目中所有接口都会被自动保护起来。默认用户名为：user，密码在项目启动后自动生成。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Using generated security password: 6c920ced-f1c1-4604-96f7-f0ce4e46f5d4</span><br></pre></td></tr></table></figure>

<p>也可以通过配置文件<code>application.properties</code>指定用户名密码</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="meta">spring.security.user.username</span>=<span class="string">admin</span></span><br><span class="line"><span class="meta">spring.security.user.username</span>=<span class="string">123456</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>测试接口</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"/hello"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"hello"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>访问接口，将重定向到默认登陆页面，登陆成功之后，就会自动跳转到原来都接口。</p>
<p><img src="http://www.javaboy.org/images/boot/25-2.png" alt=""></p>
<p>另外：也可以使用 postman 来发送登陆请求（需要将登陆信息放在请求头中，避免重定向到登陆页面）</p>
<p><img src="http://www.javaboy.org/images/boot/25-3.png" alt=""></p>
<p>通过以上两种不同的登录方式，可以看出，Spring Security 支持 form 表单和 HttpBasic 两种不同的认证方式，对应到源码是<code>.formLogin()</code>和<code>.httpBasic()</code>：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">WebSecurityConfigurerAdapter</span> <span class="keyword">implements</span> <span class="title">WebSecurityConfigurer</span>&lt;<span class="title">WebSecurity</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.logger.debug(<span class="string">"Using default configure(HttpSecurity). If subclassed this will potentially override subclass configure(HttpSecurity)."</span>);</span><br><span class="line">        ((HttpSecurity) ((HttpSecurity) ((AuthorizedUrl) http.authorizeRequests()</span><br><span class="line">                .anyRequest())</span><br><span class="line">                .authenticated()</span><br><span class="line">                .and())</span><br><span class="line">                .formLogin()</span><br><span class="line">                .and())</span><br><span class="line">                .httpBasic();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
</ol>
<h2 id="中级使用：内存用户认证"><a href="#中级使用：内存用户认证" class="headerlink" title="中级使用：内存用户认证"></a>中级使用：内存用户认证</h2><p>创建 Security 配置类</p>
<figure class="highlight java"><figcaption><span>SecurityConfig</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityConfig</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(AuthenticationManagerBuilder auth)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        PasswordEncoder encoder = PasswordEncoderFactories.createDelegatingPasswordEncoder();</span><br><span class="line">        <span class="comment">// 在内存中认证</span></span><br><span class="line">        auth.inMemoryAuthentication()</span><br><span class="line">                .withUser(<span class="string">"admin"</span>).password(encoder.encode(<span class="string">"admin"</span>)).roles(<span class="string">"admin"</span>)</span><br><span class="line">                .and()</span><br><span class="line">                .withUser(<span class="string">"user"</span>).password(encoder.encode(<span class="string">"user"</span>)).roles(<span class="string">"user"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="高级使用：数据库用户认证"><a href="#高级使用：数据库用户认证" class="headerlink" title="高级使用：数据库用户认证"></a>高级使用：数据库用户认证</h2><p>实现 UserDetailsService 接口</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDetailsServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserDetailsService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> UserDetails <span class="title">loadUserByUsername</span><span class="params">(String username)</span> <span class="keyword">throws</span> UsernameNotFoundException </span>&#123;</span><br><span class="line">        User user = userService.selectUserByUsername(username);</span><br><span class="line">        <span class="keyword">if</span> (user == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> UsernameNotFoundException(<span class="string">"Username not exist!"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;GrantedAuthority&gt; authorities = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        authorities.add(<span class="keyword">new</span> SimpleGrantedAuthority(<span class="string">"user"</span>));</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> org.springframework.security.core.userdetails.User(username, user.getPassword(), authorities);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><figcaption><span>SecurityConfig.java</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityConfig</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDetailService userDetailService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(AuthenticationManagerBuilder auth)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        auth.userDetailsService(userDetailService);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="前后端分离后的认证"><a href="#前后端分离后的认证" class="headerlink" title="前后端分离后的认证"></a>前后端分离后的认证</h2><blockquote>
<p><a href="https://aijishu.com/a/1060000000015544" target="_blank" rel="noopener">SpringBootSecurity学习（12）前后端分离版之简单登录</a></p>
</blockquote>
<p>前后端分离后，后端不再需要提供登陆页面，只需要配置登陆地址即可。</p>
<h3 id="开启授权认证"><a href="#开启授权认证" class="headerlink" title="开启授权认证"></a>开启授权认证</h3><figure class="highlight java"><figcaption><span>SecurityConfigurerImpl.java</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityConfigurerImpl</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * 开启授权认证</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        http.authorizeRequests().anyRequest().authenticated();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="配置处理登陆请求的-API-地址"><a href="#配置处理登陆请求的-API-地址" class="headerlink" title="配置处理登陆请求的 API 地址"></a>配置处理登陆请求的 API 地址</h3><figure class="highlight java"><figcaption><span>SecurityConfigurerImpl.java</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityConfigurerImpl</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * 处理登陆请求的接口：/user/login</span></span><br><span class="line"><span class="comment">         * 登陆接口用户名参数名：username</span></span><br><span class="line"><span class="comment">         * 登陆接口密码参数名：password</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        http.formLogin().loginProcessingUrl(<span class="string">"/user/login"</span>).usernameParameter(<span class="string">"username"</span>).passwordParameter(<span class="string">"password"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="配置登陆成功处理器"><a href="#配置登陆成功处理器" class="headerlink" title="配置登陆成功处理器"></a>配置登陆成功处理器</h3><figure class="highlight java"><figcaption><span>SecurityConfigurerImpl.java</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityConfigurerImpl</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * 登陆成功处理器：登陆成功后直接返回 JSON 数据</span></span><br><span class="line"><span class="comment">         * 默认的成功处理器（SimpleUrlAuthenticationSuccessHandler）是进行页面跳转。</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        http.formLogin().successHandler(<span class="keyword">new</span> AuthenticationSuccessHandler() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAuthenticationSuccess</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Authentication authentication)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">                httpServletResponse.setContentType(MediaType.APPLICATION_JSON_UTF8_VALUE);</span><br><span class="line">                httpServletResponse.getWriter().write(<span class="string">"&#123;\"code\": \"200\", \"msg\": \"登录成功\"&#125;"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>默认登陆成功处理器源码截取</strong></p>
<figure class="highlight java"><figcaption><span>SimpleUrlAuthenticationSuccessHandler.java</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleUrlAuthenticationSuccessHandler</span> <span class="keyword">extends</span> <span class="title">AbstractAuthenticationTargetUrlRequestHandler</span> <span class="keyword">implements</span> <span class="title">AuthenticationSuccessHandler</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SimpleUrlAuthenticationSuccessHandler</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SimpleUrlAuthenticationSuccessHandler</span><span class="params">(String defaultTargetUrl)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.setDefaultTargetUrl(defaultTargetUrl);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAuthenticationSuccess</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Authentication authentication)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.handle(request, response, authentication);</span><br><span class="line">        <span class="keyword">this</span>.clearAuthenticationAttributes(request);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">clearAuthenticationAttributes</span><span class="params">(HttpServletRequest request)</span> </span>&#123;</span><br><span class="line">        HttpSession session = request.getSession(<span class="keyword">false</span>);</span><br><span class="line">        <span class="keyword">if</span> (session != <span class="keyword">null</span>) &#123;</span><br><span class="line">            session.removeAttribute(<span class="string">"SPRING_SECURITY_LAST_EXCEPTION"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><figcaption><span>AbstractAuthenticationTargetUrlRequestHandler.java</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractAuthenticationTargetUrlRequestHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">handle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Authentication authentication)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        String targetUrl = <span class="keyword">this</span>.determineTargetUrl(request, response, authentication);</span><br><span class="line">        <span class="keyword">if</span> (response.isCommitted()) &#123;</span><br><span class="line">            <span class="keyword">this</span>.logger.debug(<span class="string">"Response has already been committed. Unable to redirect to "</span> + targetUrl);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>.redirectStrategy.sendRedirect(request, response, targetUrl);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="配置登陆失败处理器"><a href="#配置登陆失败处理器" class="headerlink" title="配置登陆失败处理器"></a>配置登陆失败处理器</h3><figure class="highlight java"><figcaption><span>SecurityConfigurerImpl.java</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityConfigurerImpl</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * 登陆失败处理器</span></span><br><span class="line"><span class="comment">         * 默认处理器（SimpleUrlAuthenticationFailureHandler）将重定向到登陆页面</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        http.formLogin().failureHandler(<span class="keyword">new</span> AuthenticationFailureHandler() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAuthenticationFailure</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, AuthenticationException e)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">                httpServletResponse.setContentType(MediaType.APPLICATION_JSON_UTF8_VALUE);</span><br><span class="line">                httpServletResponse.getWriter().write(<span class="string">"&#123;\"code\": \"500\", \"msg\": \"登录失败\"&#125;"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>默认登陆失败处理器源码截取</strong></p>
<figure class="highlight java"><figcaption><span>SimpleUrlAuthenticationFailureHandler.java</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleUrlAuthenticationFailureHandler</span> <span class="keyword">implements</span> <span class="title">AuthenticationFailureHandler</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAuthenticationFailure</span><span class="params">(HttpServletRequest request, HttpServletResponse response, AuthenticationException exception)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.defaultFailureUrl == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.logger.debug(<span class="string">"No failure URL set, sending 401 Unauthorized error"</span>);</span><br><span class="line">            response.sendError(HttpStatus.UNAUTHORIZED.value(), HttpStatus.UNAUTHORIZED.getReasonPhrase());</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>.saveException(request, exception);</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.forwardToDestination) &#123;</span><br><span class="line">                <span class="keyword">this</span>.logger.debug(<span class="string">"Forwarding to "</span> + <span class="keyword">this</span>.defaultFailureUrl);</span><br><span class="line">                request.getRequestDispatcher(<span class="keyword">this</span>.defaultFailureUrl).forward(request, response);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">this</span>.logger.debug(<span class="string">"Redirecting to "</span> + <span class="keyword">this</span>.defaultFailureUrl);</span><br><span class="line">                <span class="keyword">this</span>.redirectStrategy.sendRedirect(request, response, <span class="keyword">this</span>.defaultFailureUrl);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://i.loli.net/2019/12/10/mDavjnKlXk5CQO8.png" alt=""></p>
<h3 id="配置认证异常处理器"><a href="#配置认证异常处理器" class="headerlink" title="配置认证异常处理器"></a>配置认证异常处理器</h3><figure class="highlight java"><figcaption><span>SecurityConfigurerImpl.java</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityConfigurerImpl</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * 认证异常（未登陆/登陆过期等）处理器</span></span><br><span class="line"><span class="comment">         * 默认处理器（LoginUrlAuthenticationEntryPoint）将重定向到登陆页面</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        http.exceptionHandling().authenticationEntryPoint(<span class="keyword">new</span> AuthenticationEntryPoint() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">commence</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, AuthenticationException e)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">                httpServletResponse.setContentType(MediaType.APPLICATION_JSON_UTF8_VALUE);</span><br><span class="line">                httpServletResponse.getWriter().write(<span class="string">"&#123;\"code\": \"401\", \"msg\": \"登陆已过期或未登陆\"&#125;"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>默认认证异常处理器源码截取</strong></p>
<figure class="highlight java"><figcaption><span>LoginUrlAuthenticationEntryPoint.java</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginUrlAuthenticationEntryPoint</span> <span class="keyword">implements</span> <span class="title">AuthenticationEntryPoint</span>, <span class="title">InitializingBean</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">commence</span><span class="params">(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        String redirectUrl = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.useForward) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.forceHttps &amp;&amp; <span class="string">"http"</span>.equals(request.getScheme())) &#123;</span><br><span class="line">                redirectUrl = <span class="keyword">this</span>.buildHttpsRedirectUrlForRequest(request);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (redirectUrl == <span class="keyword">null</span>) &#123;</span><br><span class="line">                String loginForm = <span class="keyword">this</span>.determineUrlToUseForThisRequest(request, response, authException);</span><br><span class="line">                <span class="keyword">if</span> (logger.isDebugEnabled()) &#123;</span><br><span class="line">                    logger.debug(<span class="string">"Server side forward to: "</span> + loginForm);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                RequestDispatcher dispatcher = request.getRequestDispatcher(loginForm);</span><br><span class="line">                dispatcher.forward(request, response);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            redirectUrl = <span class="keyword">this</span>.buildRedirectUrlToLoginPage(request, response, authException);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.redirectStrategy.sendRedirect(request, response, redirectUrl);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://i.loli.net/2019/12/10/unCSeMidlUhOj8s.png" alt=""></p>
<h3 id="配置权限异常处理器"><a href="#配置权限异常处理器" class="headerlink" title="配置权限异常处理器"></a>配置权限异常处理器</h3><figure class="highlight java"><figcaption><span>SecurityConfigurerImpl.java</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">// 开启方法级别的权限注解</span></span><br><span class="line"><span class="meta">@EnableGlobalMethodSecurity</span>(securedEnabled = <span class="keyword">true</span>, prePostEnabled = <span class="keyword">true</span>, jsr250Enabled = <span class="keyword">true</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityConfigurerImpl</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * 权限异常处理器</span></span><br><span class="line"><span class="comment">         * 默认处理器（AccessDeniedHandlerImpl）将返回状态码为 403 的响应</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        http.exceptionHandling().accessDeniedHandler(<span class="keyword">new</span> AccessDeniedHandler() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handle</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, AccessDeniedException e)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">                httpServletResponse.setContentType(MediaType.APPLICATION_JSON_UTF8_VALUE);</span><br><span class="line">                httpServletResponse.getWriter().write(<span class="string">"&#123;\"code\": \"402\", \"msg\": \"权限不足\"&#125;"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>接口方法上使用注解<code>@PreAuthorize</code>配置权限</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"hello"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;spring.profiles.active&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String environment;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"env"</span>)</span><br><span class="line">    <span class="meta">@PreAuthorize</span>(<span class="string">"hasRole('user')"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getEnvironment</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"The Environment is "</span> + environment;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意：如果配置了全局异常处理器，权限异常处理器就会失效，权限异常会先被全局异常处理器处理而到不了权限异常处理器。解决办法参考<a href="https://libo9527.github.io/2019/12/10/AccessDeniedHandler-of-Spring-Security-not-Working-While-GlobalExceptionHandler-existing/" target="_blank" rel="noopener">这里</a></p>
<p><strong>默认权限异常处理器源码截取</strong></p>
<figure class="highlight java"><figcaption><span>AccessDeniedHandlerImpl.java</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AccessDeniedHandlerImpl</span> <span class="keyword">implements</span> <span class="title">AccessDeniedHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, AccessDeniedException accessDeniedException)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!response.isCommitted()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.errorPage != <span class="keyword">null</span>) &#123;</span><br><span class="line">                request.setAttribute(<span class="string">"SPRING_SECURITY_403_EXCEPTION"</span>, accessDeniedException);</span><br><span class="line">                response.setStatus(HttpStatus.FORBIDDEN.value());</span><br><span class="line">                RequestDispatcher dispatcher = request.getRequestDispatcher(<span class="keyword">this</span>.errorPage);</span><br><span class="line">                dispatcher.forward(request, response);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                response.sendError(HttpStatus.FORBIDDEN.value(), HttpStatus.FORBIDDEN.getReasonPhrase());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://i.loli.net/2019/12/10/4eroj3GJS51gMP8.png" alt=""></p>
<h2 id="整合-JWT"><a href="#整合-JWT" class="headerlink" title="整合 JWT"></a>整合 JWT</h2><blockquote>
<p><a href="https://aijishu.com/a/1060000000015716" target="_blank" rel="noopener">SpringBootSecurity学习（13）前后端分离版之JWT</a></p>
<p><a href="https://github.com/jwtk/jjwt#table-of-contents" target="_blank" rel="noopener">jjwt | GitHub</a></p>
</blockquote>
<p>使用 session 和 cookie 来维护登录状态的扩展性不好，使用 JWT 的 token 验证方式则可以很好的适应分布式场景的需求。</p>
<h3 id="导入-jjwt-包"><a href="#导入-jjwt-包" class="headerlink" title="导入 jjwt 包"></a>导入 jjwt 包</h3><figure class="highlight xml"><figcaption><span>pom.xml</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.jsonwebtoken<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jjwt-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.10.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.jsonwebtoken<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jjwt-impl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.10.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.jsonwebtoken<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jjwt-jackson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.10.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Uncomment this next dependency if you want to use RSASSA-PSS (PS256, PS384, PS512) algorithms:</span></span><br><span class="line"><span class="comment">&lt;dependency&gt;</span></span><br><span class="line"><span class="comment">    &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;</span></span><br><span class="line"><span class="comment">    &lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;</span></span><br><span class="line"><span class="comment">    &lt;version&gt;1.60&lt;/version&gt;</span></span><br><span class="line"><span class="comment">    &lt;scope&gt;runtime&lt;/scope&gt;</span></span><br><span class="line"><span class="comment">&lt;/dependency&gt;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="关闭-Session"><a href="#关闭-Session" class="headerlink" title="关闭 Session"></a>关闭 Session</h3><figure class="highlight java"><figcaption><span>SecurityConfigurerImpl.java</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableGlobalMethodSecurity</span>(securedEnabled = <span class="keyword">true</span>, prePostEnabled = <span class="keyword">true</span>, jsr250Enabled = <span class="keyword">true</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityConfigurerImpl</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        http.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>源码截取</strong></p>
<figure class="highlight java"><figcaption><span>SessionCreationPolicy.java</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> SessionCreationPolicy &#123;</span><br><span class="line">	<span class="comment">/** Always create an &#123;<span class="doctag">@link</span> HttpSession&#125; */</span></span><br><span class="line">	ALWAYS,</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Spring Security will never create an &#123;<span class="doctag">@link</span> HttpSession&#125;, but will use the</span></span><br><span class="line"><span class="comment">	 * &#123;<span class="doctag">@link</span> HttpSession&#125; if it already exists</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	NEVER,</span><br><span class="line">	<span class="comment">/** Spring Security will only create an &#123;<span class="doctag">@link</span> HttpSession&#125; if required */</span></span><br><span class="line">	IF_REQUIRED,</span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Spring Security will never create an &#123;<span class="doctag">@link</span> HttpSession&#125; and it will never use it</span></span><br><span class="line"><span class="comment">	 * to obtain the &#123;<span class="doctag">@link</span> SecurityContext&#125;</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	STATELESS</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="JWT-工具类"><a href="#JWT-工具类" class="headerlink" title="JWT 工具类"></a>JWT 工具类</h3><figure class="highlight java"><figcaption><span>JWTUtil.java</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JWTUtil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Key KEY = Keys.secretKeyFor(SignatureAlgorithm.HS256);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> String HEADER_TOKEN_NAME = <span class="string">"Authentication-Token"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">genericToken</span><span class="params">(SysUser user)</span> </span>&#123;</span><br><span class="line">        user.setPassword(<span class="keyword">null</span>);</span><br><span class="line">        <span class="keyword">return</span> Jwts.builder()</span><br><span class="line">                .setIssuer(<span class="string">"gzhennaxia"</span>)</span><br><span class="line">                .setIssuedAt(<span class="keyword">new</span> Date())</span><br><span class="line">                .claim(<span class="string">"user"</span>, JSON.toJSONString(user))</span><br><span class="line">                .signWith(KEY)</span><br><span class="line">                .compact();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SysUser <span class="title">parseToken2User</span><span class="params">(String token)</span> </span>&#123;</span><br><span class="line">        Jws&lt;Claims&gt; jws = Jwts.parser()</span><br><span class="line">                .requireIssuer(<span class="string">"gzhennaxia"</span>)</span><br><span class="line">                .setSigningKey(KEY)</span><br><span class="line">                .parseClaimsJws(token);</span><br><span class="line">        <span class="keyword">return</span> JSON.parseObject(jws.getBody().get(<span class="string">"user"</span>).toString(), SysUser<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="修改登录成功处理器"><a href="#修改登录成功处理器" class="headerlink" title="修改登录成功处理器"></a>修改登录成功处理器</h3><figure class="highlight java"><figcaption><span>AuthenticationSuccessHandlerImpl.java</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AuthenticationSuccessHandlerImpl</span> <span class="keyword">implements</span> <span class="title">AuthenticationSuccessHandler</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAuthenticationSuccess</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Authentication authentication)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        User user = (User) authentication.getPrincipal();</span><br><span class="line">        httpServletResponse.setHeader(JWTUtil.HEADER_TOKEN_NAME, JWTUtil.genericToken(SysUser.builder().username(user.getUsername()).build()));</span><br><span class="line">        httpServletResponse.setContentType(MediaType.APPLICATION_JSON_UTF8_VALUE);</span><br><span class="line">        httpServletResponse.getWriter().write(ReturnVo.errorInJson(CodeEnum.SUCCESS));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="配置-JWT-过滤器"><a href="#配置-JWT-过滤器" class="headerlink" title="配置 JWT 过滤器"></a>配置 JWT 过滤器</h3><figure class="highlight java"><figcaption><span>JWTAuthenticationFilter.java</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JWTAuthenticationFilter</span> <span class="keyword">extends</span> <span class="title">GenericFilterBean</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        HttpServletRequest request = (HttpServletRequest) servletRequest;</span><br><span class="line">        String token = request.getHeader(JWTUtil.HEADER_TOKEN_NAME);</span><br><span class="line">        <span class="keyword">if</span> (!StringUtils.isEmpty(token)) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                SysUser sysUser = JWTUtil.parseToken2User(token);</span><br><span class="line">                SecurityContextHolder.getContext().setAuthentication(<span class="keyword">new</span> UsernamePasswordAuthenticationToken(sysUser, <span class="keyword">null</span>, sysUser.getAuthorities()));</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">                servletResponse.setContentType(MediaType.APPLICATION_JSON_UTF8_VALUE);</span><br><span class="line">                <span class="keyword">if</span> (e <span class="keyword">instanceof</span> MissingClaimException) &#123;</span><br><span class="line">                    servletResponse.getWriter().write(ReturnVo.errorInJson(CodeEnum.MISSING_CLAIM));</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (e <span class="keyword">instanceof</span> IncorrectClaimException) &#123;</span><br><span class="line">                    servletResponse.getWriter().write(ReturnVo.errorInJson(CodeEnum.INCORRECT_CLAIM));</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    servletResponse.getWriter().write(ReturnVo.errorInJson(CodeEnum.UNKNOWN_PARSE_ERROR));</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        filterChain.doFilter(servletRequest, servletResponse);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityConfigurerImpl</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JWTAuthenticationFilter jwtAuthenticationFilter;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        http.addFilterBefore(jwtAuthenticationFilter, UsernamePasswordAuthenticationFilter<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="使用-JSON-格式数据登陆"><a href="#使用-JSON-格式数据登陆" class="headerlink" title="使用 JSON 格式数据登陆"></a>使用 JSON 格式数据登陆</h2><blockquote>
<p><a href="http://www.javaboy.org/2019/0613/springsecurity-json.html" target="_blank" rel="noopener">Spring Security 登录使用 JSON 格式数据</a></p>
<p><a href="https://www.jianshu.com/p/693914564406" target="_blank" rel="noopener">Spring Security配置JSON登录</a></p>
</blockquote>
<p>Spring Security 默认支持的登陆方式为 formLogin，即 Content-Type 为<code>application/x-www-form-urlencoded</code>，如果想要使用 JSON 数据登陆，则需要自定义提取用户名密码的过滤器来替换默认的<code>UsernamePasswordAuthenticationFilter</code>。</p>
<figure class="highlight java"><figcaption><span>CustomerAuthenticationFilter.java</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomerAuthenticationFilter</span> <span class="keyword">extends</span> <span class="title">UsernamePasswordAuthenticationFilter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Authentication <span class="title">attemptAuthentication</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> AuthenticationException </span>&#123;</span><br><span class="line">        String contentType = request.getContentType();</span><br><span class="line">        <span class="keyword">if</span> (contentType.equals(MediaType.APPLICATION_JSON_VALUE) || contentType.equals(MediaType.APPLICATION_JSON_UTF8_VALUE)) &#123;</span><br><span class="line">            UsernamePasswordAuthenticationToken authRequest;</span><br><span class="line">            <span class="keyword">try</span> (InputStream in = request.getInputStream()) &#123;</span><br><span class="line">                SysUser user = JSON.parseObject(in, SysUser<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">                authRequest = <span class="keyword">new</span> UsernamePasswordAuthenticationToken(user.getUsername(), user.getPassword());</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">                authRequest = <span class="keyword">new</span> UsernamePasswordAuthenticationToken(<span class="string">""</span>, <span class="string">""</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.getAuthenticationManager().authenticate(authRequest);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.attemptAuthentication(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><figcaption><span>SecurityConfig.java</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableGlobalMethodSecurity</span>(securedEnabled = <span class="keyword">true</span>, prePostEnabled = <span class="keyword">true</span>, jsr250Enabled = <span class="keyword">true</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityConfig</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AuthenticationSuccessHandler authenticationSuccessHandler;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AuthenticationFailureHandler authenticationFailureHandler;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        http.addFilterAt(<span class="keyword">this</span>.customerAuthenticationFilter(), UsernamePasswordAuthenticationFilter<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function">CustomerAuthenticationFilter <span class="title">customerAuthenticationFilter</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        CustomerAuthenticationFilter filter = <span class="keyword">new</span> CustomerAuthenticationFilter();</span><br><span class="line">        filter.setRequiresAuthenticationRequestMatcher(<span class="keyword">new</span> AntPathRequestMatcher(<span class="string">"/user/login"</span>, <span class="string">"POST"</span>));</span><br><span class="line">        filter.setAuthenticationSuccessHandler(authenticationSuccessHandler);</span><br><span class="line">        filter.setAuthenticationFailureHandler(authenticationFailureHandler);</span><br><span class="line">        filter.setAuthenticationManager(<span class="keyword">this</span>.authenticationManagerBean());</span><br><span class="line">        <span class="keyword">return</span> filter;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意：</p>
<ol>
<li>处理登陆请求的 URL 地址不能通过之前的方式（<code>.formLogin().loginProcessingUrl(&quot;/user/login&quot;)</code>）来配置，需要在自定义过滤器里配置，因为以前的方式配置的是默认的过滤器的，自定义过滤器会替换掉默认的，所以用以前的方式配置的 loginProcessingUrl 就失效了。</li>
<li>自定义的过滤器之所以要在 security 配置类中初始化（使用<code>@Bean</code>的方式而不是直接在类上使用<code>@Component</code>），是因为需要使用<code>WebSecurityConfigurerAdapter</code>的<code>authenticationManagerBean()</code>方法来调用默认的认证管理器，否则需要自定义自己的认证管理器。</li>
</ol>
<h2 id="自定义认证管理器"><a href="#自定义认证管理器" class="headerlink" title="自定义认证管理器"></a>自定义认证管理器</h2><p>为了把提取用户名密码的过滤器从配置类中抽离出来，就需要使用自定义的认证管理器来替换默认的认证管理器（<code>WebSecurityConfigurerAdapter.AuthenticationManagerDelegator</code>）。由于默认的认证管理器是不可继承的（由<code>final</code>修饰），所以通过实现<code>AuthenticationManager</code>接口来自定义，而认证管理器又是通过认证处理器<code>AuthenticationManager</code>提供的认证方法<code>authenticate()</code>最终对用户进行认证的，所以在自定义认证管理器的时候还需要提供认证处理器，可以在认证管理器的构造方法中直接初始化认证处理器，这里使用默认的持久层认证处理器为<code>DaoAuthenticationProvider</code>。</p>
<figure class="highlight java"><figcaption><span>CustomerAuthenticationManagerImpl.java</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomerAuthenticationManagerImpl</span> <span class="keyword">implements</span> <span class="title">AuthenticationManager</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> AuthenticationProvider provider;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CustomerAuthenticationManagerImpl</span><span class="params">(SecurityUserDetailService userDetailsService)</span> </span>&#123;</span><br><span class="line">        DaoAuthenticationProvider provider = <span class="keyword">new</span> DaoAuthenticationProvider();</span><br><span class="line">        provider.setUserDetailsService(userDetailsService);</span><br><span class="line">        provider.setPasswordEncoder(<span class="keyword">new</span> BCryptPasswordEncoder());</span><br><span class="line">        <span class="keyword">this</span>.provider = provider;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Authentication <span class="title">authenticate</span><span class="params">(Authentication authentication)</span> <span class="keyword">throws</span> AuthenticationException </span>&#123;</span><br><span class="line">        Authentication authenticate = <span class="keyword">this</span>.provider.authenticate(authentication);</span><br><span class="line">        <span class="keyword">if</span> (Objects.nonNull(authenticate)) &#123;</span><br><span class="line">            <span class="keyword">return</span> authenticate;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> ProviderNotFoundException(<span class="string">"Authentication failed!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><figcaption><span>SecurityConfig.java</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableGlobalMethodSecurity</span>(securedEnabled = <span class="keyword">true</span>, prePostEnabled = <span class="keyword">true</span>, jsr250Enabled = <span class="keyword">true</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityConfig</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CustomerAuthenticationFilter authenticationFilter;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        http.addFilterAt(authenticationFilter, UsernamePasswordAuthenticationFilter<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意：和自定义用于提取用户名密码的过滤器道理一样，因为是替换默认的认证处理器，所以 UserDetailsService、PasswordEncoder 等配置需要在初始化认证处理器的地方进行配置，而不能用以前配置默认认证处理器的方式。</p>
<ul>
<li><p>配置默认处理器所需的 UserDetailsService：</p>
<figure class="highlight java"><figcaption><span>SecurityConfig.java</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityConfig</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SecurityUserDetailService userDetailService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(AuthenticationManagerBuilder auth)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        auth.userDetailsService(userDetailService);</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置默认处理器所需的 PasswordEncoder：</p>
<ol>
<li><p>@Bean</p>
<figure class="highlight java"><figcaption><span>SecurityConfig.java</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecurityConfig</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Bean</span></span><br><span class="line">    <span class="function">PasswordEncoder <span class="title">passwordEncoder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> BCryptPasswordEncoder();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>在密码前加上加密算法前缀，如<code>{bcrypt}$2a$10$ffHsT7aCssLbKn7zACwOYupOQtxpzRVvIXD8Pveo9rHU4DrSUUyve</code></p>
</li>
</ol>
</li>
</ul>
<h2 id="自定义认证处理器"><a href="#自定义认证处理器" class="headerlink" title="自定义认证处理器"></a>自定义认证处理器</h2><p>如果不想在自定义的认证管理器中使用默认的认证处理器，也可以自定义认证处理器。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomerAuthenticationProviderImpl</span> <span class="keyword">extends</span> <span class="title">DaoAuthenticationProvider</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> PasswordEncoder PASSWORD_ENCODER = <span class="keyword">new</span> BCryptPasswordEncoder();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Authentication <span class="title">authenticate</span><span class="params">(Authentication authentication)</span> <span class="keyword">throws</span> AuthenticationException </span>&#123;</span><br><span class="line">        String username = (String) authentication.getPrincipal();</span><br><span class="line">        String password = (String) authentication.getCredentials();</span><br><span class="line">        SysUser user = userService.selectUserByUsername(username);</span><br><span class="line">        user.setRoleList(Collections.singletonList(<span class="keyword">new</span> SysRole(<span class="string">"user"</span>)));</span><br><span class="line">        <span class="keyword">if</span> (PASSWORD_ENCODER.matches(password, user.getPassword())) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> UsernamePasswordAuthenticationToken(username, password, user.getRoleList());</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> BadCredentialsException(<span class="keyword">this</span>.messages.getMessage(</span><br><span class="line">                    <span class="string">"AbstractUserDetailsAuthenticationProvider.badCredentials"</span>,</span><br><span class="line">                    <span class="string">"Bad credentials"</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doAfterPropertiesSet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><figcaption><span>CustomerAuthenticationManagerImpl.java</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomerAuthenticationManagerImpl</span> <span class="keyword">implements</span> <span class="title">AuthenticationManager</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> AuthenticationProvider provider;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CustomerAuthenticationManagerImpl</span><span class="params">(AuthenticationProvider provider)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.provider = provider;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Authentication <span class="title">authenticate</span><span class="params">(Authentication authentication)</span> <span class="keyword">throws</span> AuthenticationException </span>&#123;</span><br><span class="line">        Authentication authenticate = <span class="keyword">this</span>.provider.authenticate(authentication);</span><br><span class="line">        <span class="keyword">if</span> (Objects.nonNull(authenticate)) &#123;</span><br><span class="line">            <span class="keyword">return</span> authenticate;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> ProviderNotFoundException(<span class="string">"Authentication failed!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Spring-Security</category>
      </categories>
      <tags>
        <tag>Spring-Security</tag>
      </tags>
  </entry>
  <entry>
    <title>Exception Handling in Spring Boot</title>
    <url>/2019/12/05/Exception-Handling-in-Spring-Boot/</url>
    <content><![CDATA[<img src="https://techblogstation.com/wp-content/uploads/2019/11/Spring-Boot-Exception-Handling.jpg" width="100%"/>

<a id="more"></a>

<h2 id="统一异常处理"><a href="#统一异常处理" class="headerlink" title="统一异常处理"></a>统一异常处理</h2><blockquote>
<p><a href="http://www.programmersought.com/article/4190609518/" target="_blank" rel="noopener">Unified exception handling of Controller in Spring Boot …</a></p>
<p><a href="https://techblogstation.com/spring-boot/spring-boot-exception-handling/" target="_blank" rel="noopener">Spring Boot Exception Handling – Complete Tutorial</a></p>
</blockquote>
<h3 id="统一异常处理类"><a href="#统一异常处理类" class="headerlink" title="统一异常处理类"></a>统一异常处理类</h3><p>使用 Spring Boot 中的注解 @ControllerAdvice 和 @ExceptionHandler 即可</p>
<figure class="highlight java"><figcaption><span>GlobalExceptionHandler.java</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment">// RestControllerAdvice 用于全局返回 json，如需返回 ModelAndView 请使用 ControllerAdvice</span></span><br><span class="line"><span class="meta">@RestControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GlobalExceptionHandler</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  	<span class="comment">// 处理自定义异常</span></span><br><span class="line">    <span class="meta">@ExceptionHandler</span>(LoginException<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">    <span class="title">public</span> <span class="title">ReturnVo</span> <span class="title">loginExceptionHandler</span>(<span class="title">HttpServletRequest</span> <span class="title">request</span>, <span class="title">LoginException</span> <span class="title">e</span>) </span>&#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        <span class="keyword">return</span> ReturnVo.error(CodeEnum.LOGIN_ERROR);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  	<span class="comment">// 处理未知异常</span></span><br><span class="line">    <span class="meta">@ExceptionHandler</span>(Exception<span class="class">.<span class="keyword">class</span>)</span></span><br><span class="line"><span class="class">    <span class="title">public</span> <span class="title">ReturnVo</span> <span class="title">unknownExceptionHandler</span>(<span class="title">HttpServletRequest</span> <span class="title">request</span>, <span class="title">Exception</span> <span class="title">e</span>) </span>&#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">        <span class="keyword">return</span> ReturnVo.error(CodeEnum.UNKNOWN_ERROR);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="自定义异常"><a href="#自定义异常" class="headerlink" title="自定义异常"></a>自定义异常</h3><blockquote>
<p><a href="https://www.liaoxuefeng.com/wiki/1252599548343744/1264737765214592" target="_blank" rel="noopener">自定义异常 | 廖雪峰</a></p>
</blockquote>
<figure class="highlight java"><figcaption><span>LoginException.java</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginException</span> <span class="keyword">extends</span> <span class="title">BaseException</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Spring-Boot</category>
      </categories>
      <tags>
        <tag>Exception</tag>
      </tags>
  </entry>
  <entry>
    <title>Enum in Java</title>
    <url>/2019/12/05/Enum-in-Java/</url>
    <content><![CDATA[<img src="https://www.edureka.co/blog/wp-content/uploads/2019/06/Enumeration-in-Java.jpg" width="100%"/>

<a id="more"></a>

<h2 id="枚举"><a href="#枚举" class="headerlink" title="枚举"></a>枚举</h2><blockquote>
<p><a href="https://www.liaoxuefeng.com/wiki/1252599548343744/1260473188087424" target="_blank" rel="noopener">枚举类- 廖雪峰的官方网站</a></p>
</blockquote>
<h3 id="枚举常量与普通常量的比较"><a href="#枚举常量与普通常量的比较" class="headerlink" title="枚举常量与普通常量的比较"></a>枚举常量与普通常量的比较</h3><p>Java 中通过<code>static final</code>来定义普通常量，与普通常量相比，用枚举类定义的常量拥有以下特点。</p>
<ul>
<li><code>enum</code> 常量本身带有类型信息，即<code>Weekday.SUN</code>类型是<code>Weekday</code>，编译器会自动检查出类型错误。<ul>
<li>因为枚举常量拥有类型信息，所以不同类型的枚举常量不能相互比较合赋值</li>
</ul>
</li>
</ul>
<h3 id="枚举类型与其他引用类型的区别"><a href="#枚举类型与其他引用类型的区别" class="headerlink" title="枚举类型与其他引用类型的区别"></a>枚举类型与其他引用类型的区别</h3><p>定义一个枚举类 Color：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> Color &#123;</span><br><span class="line">    RED, GREEN, BLUE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>反编译后的结果：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Color</span> <span class="keyword">extends</span> <span class="title">Enum</span> </span>&#123; <span class="comment">// 继承自Enum；标记为final class，不能被继承</span></span><br><span class="line">  	<span class="comment">// 每个实例均为全局唯一</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Color RED = <span class="keyword">new</span> Color();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Color GREEN = <span class="keyword">new</span> Color();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Color BLUE = <span class="keyword">new</span> Color();</span><br><span class="line">	  <span class="comment">// 私有构造方法，确保外部无法使用 new 操作符来创建实例</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Color</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>由反编译结果可以看出枚举类型有如下特点：</p>
<ul>
<li>枚举类型也是引用类型；</li>
<li>定义的<code>enum</code>类型总是继承自<code>java.lang.Enum</code>，且无法被继承；</li>
<li>只能定义出<code>enum</code>的实例，而无法通过<code>new</code>操作符创建<code>enum</code>的实例；</li>
<li>定义的每个实例都是引用类型的唯一实例。</li>
</ul>
<p>其次 Java 中的枚举类型还有以下特点：</p>
<ul>
<li>可以将<code>enum</code>类型用于<code>switch</code>语句；</li>
<li>与普通的引用类型相比，枚举常量不必使用 equals 方法进行比较，直接使用 <code>==</code> 比较即可。这是因为 <code>enum</code> 类型的每个常量在JVM中只有一个唯一实例。</li>
</ul>
<h3 id="使用枚举时的注意事项"><a href="#使用枚举时的注意事项" class="headerlink" title="使用枚举时的注意事项"></a>使用枚举时的注意事项</h3><ul>
<li>不要使用 <code>toString()</code>，通过 <code>name()</code> 来获取常量定义的字符串；</li>
<li>enum 的构造方法必须声明为 private，否则编译报错；</li>
<li>枚举类的字段可以是非final类型，即可以在运行期修改，但是不推荐这样做！</li>
</ul>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Enum</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring Boot Hot Swap with Intellij IDEA</title>
    <url>/2019/12/04/Spring-Boot-Hot-Swap-with-Intellij-IDEA/</url>
    <content><![CDATA[<img src="https://i.ytimg.com/vi/VWF7vCJSqrA/maxresdefault.jpg" width="100%"/>

<a id="more"></a>

<h2 id="Spring-Boot-热部署"><a href="#Spring-Boot-热部署" class="headerlink" title="Spring Boot 热部署"></a>Spring Boot 热部署</h2><blockquote>
<p><a href="https://dzone.com/articles/spring-boot-application-live-reload-hot-swap-with" target="_blank" rel="noopener">Spring Boot Application Live Reload (Hot Swap) With Intellij IDEA</a></p>
<p><a href="https://www.youtube.com/watch?v=VWF7vCJSqrA" target="_blank" rel="noopener">Spring Boot 101 (Part 8) - Live Reload / Hot Swap | YouTube</a></p>
<p><a href="https://blog.csdn.net/sdaujsj1/article/details/101992877" target="_blank" rel="noopener">springboot idea 热部署配置</a></p>
</blockquote>
<ol>
<li><p>添加 devtool 依赖</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>注意：还需要添加 maven 插件，否则无效</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">fork</span>&gt;</span>true<span class="tag">&lt;/<span class="name">fork</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>IDEA 开启自动编译</p>
<p>Settings –&gt; Build, Execution, Deployment –&gt; Compiler –&gt; Build project automatically</p>
</li>
<li><p>IDEA 开启 automake 功能</p>
<p><code>CTRL + SHIFT + ALT + /</code> –&gt; Registry –&gt; compiler.automake.allow.when.app.running</p>
<p>注意：调整触发热部署的延迟时间</p>
<p>compiler.automake.trigger.delay</p>
<p>compiler.document.save.trigger.delay</p>
</li>
<li><p>IDEA 配置更新时触发事件</p>
<p>Edit Configuration –&gt; On ‘Update’ action –&gt; Update classes and resources</p>
<p>注意：官方不推荐设置在失焦(On frame deactivation)的时候更新</p>
</li>
</ol>
]]></content>
      <categories>
        <category>Spring-Boot</category>
      </categories>
      <tags>
        <tag>Hot-Swap</tag>
      </tags>
  </entry>
  <entry>
    <title>The Bast Practice of JWT</title>
    <url>/2019/12/02/The-Bast-Practice-of-JWT/</url>
    <content><![CDATA[<img src="https://www.wangbase.com/blogimg/asset/201807/bg2018072301.jpg" width="100%"/>

<a id="more"></a>

<blockquote>
<p><a href="https://jwt.io/" target="_blank" rel="noopener">官网</a></p>
<p><a href="http://www.ruanyifeng.com/blog/2018/07/json_web_token-tutorial.html" target="_blank" rel="noopener">JSON Web Token 入门教程 | 阮一峰</a></p>
<p><a href="https://www.baeldung.com/java-json-web-tokens-jjwt" target="_blank" rel="noopener">Supercharge Java Authentication with JSON Web Tokens (JWTs)</a></p>
<p><a href="https://juejin.im/post/5ca162b36fb9a05e181de126#heading-4" target="_blank" rel="noopener">Spring Boot Security 整合 JWT 实现 无状态的分布式API接口</a></p>
</blockquote>
<h2 id="Java-中-JWT-的实现"><a href="#Java-中-JWT-的实现" class="headerlink" title="Java 中 JWT 的实现"></a>Java 中 JWT 的实现</h2><ul>
<li><a href="https://github.com/auth0/java-jwt" target="_blank" rel="noopener">java-jwt</a></li>
<li><a href="https://github.com/jwtk/jjwt" target="_blank" rel="noopener">jjwt</a></li>
</ul>
<h2 id="java-jwt"><a href="#java-jwt" class="headerlink" title="java-jwt"></a>java-jwt</h2><blockquote>
<p><a href="https://github.com/auth0/java-jwt" target="_blank" rel="noopener">java-jwt | GitHub</a></p>
<p><a href="http://www.hyhblog.cn/2017/10/21/json-web-token-intro-and-best-practices/" target="_blank" rel="noopener">Json Web Token的介绍和最佳实践</a></p>
<p><a href="https://juejin.im/post/5c8f50e35188252d9209588d#heading-10" target="_blank" rel="noopener">如何在SpringBoot中集成JWT(JSON Web Token)鉴权</a></p>
</blockquote>
<ol>
<li><p>导入依赖</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.auth0<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>java-jwt<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>生成 token</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String KEY = <span class="string">"secret"</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Algorithm ALGORITHM = Algorithm.HMAC256(KEY);</span><br><span class="line">String token = JWT.create()</span><br><span class="line">  .withIssuer(<span class="string">"gzhennaxia"</span>) <span class="comment">// 签发人</span></span><br><span class="line">  .withSubject(userId) <span class="comment">// 主题，需要全局唯一</span></span><br><span class="line">  .sign(ALGORITHM);</span><br></pre></td></tr></table></figure>
</li>
<li><p>验证 token</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">JWTVerifier verifier = JWT.require(ALGORITHM).build();</span><br><span class="line">DecodedJWT decodedJWT = verifier.verify(token);</span><br></pre></td></tr></table></figure>

<p>DecodedJWT：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"algorithm"</span>:<span class="string">"HS256"</span>,</span><br><span class="line">    <span class="attr">"claims"</span>:&#123;</span><br><span class="line">        <span class="attr">"iss"</span>:&#123;</span><br><span class="line">            <span class="attr">"null"</span>:<span class="literal">false</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"sub"</span>:&#123;</span><br><span class="line">            <span class="attr">"null"</span>:<span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"header"</span>:<span class="string">"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9"</span>,</span><br><span class="line">    <span class="attr">"issuer"</span>:<span class="string">"gzhennaxia"</span>,</span><br><span class="line">    <span class="attr">"payload"</span>:<span class="string">"eyJzdWIiOiIxIiwiaXNzIjoiZ3poZW5uYXhpYSJ9"</span>,</span><br><span class="line">    <span class="attr">"signature"</span>:<span class="string">"ItL7KsvAp4Zezk5N5uu1ayAh2HlHU2EgIW3NiSZw1f8"</span>,</span><br><span class="line">    <span class="attr">"subject"</span>:<span class="string">"1"</span>,</span><br><span class="line">    <span class="attr">"token"</span>:<span class="string">"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiIxIiwiaXNzIjoiZ3poZW5uYXhpYSJ9.ItL7KsvAp4Zezk5N5uu1ayAh2HlHU2EgIW3NiSZw1f8"</span>,</span><br><span class="line">    <span class="attr">"type"</span>:<span class="string">"JWT"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="jjwt"><a href="#jjwt" class="headerlink" title="jjwt"></a>jjwt</h2><blockquote>
<p><a href="https://github.com/jwtk/jjwt" target="_blank" rel="noopener">jjwt | GitHub</a></p>
</blockquote>
<ol>
<li><p>导入依赖</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.jsonwebtoken<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jjwt-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.10.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.jsonwebtoken<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jjwt-impl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.10.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.jsonwebtoken<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jjwt-jackson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.10.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Uncomment this next dependency if you want to use RSASSA-PSS (PS256, PS384, PS512) algorithms:</span></span><br><span class="line"><span class="comment">&lt;dependency&gt;</span></span><br><span class="line"><span class="comment">    &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;</span></span><br><span class="line"><span class="comment">    &lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;</span></span><br><span class="line"><span class="comment">    &lt;version&gt;1.60&lt;/version&gt;</span></span><br><span class="line"><span class="comment">    &lt;scope&gt;runtime&lt;/scope&gt;</span></span><br><span class="line"><span class="comment">&lt;/dependency&gt;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>生成 token</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Key KEY = Keys.secretKeyFor(SignatureAlgorithm.HS256);</span><br><span class="line">Jwts.builder()</span><br><span class="line">  .setIssuer(<span class="string">"gzhennaxia"</span>)</span><br><span class="line">  .setSubject(userId.toString())</span><br><span class="line">  .signWith(KEY)</span><br><span class="line">  .compact();</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">token: eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJnemhlbm5heGlhIiwic3ViIjoiMSJ9._Q0XHRhoS0a-ZA4pMzEmY2hShds86IrE5i4-XSj6sGI</span><br></pre></td></tr></table></figure>
</li>
<li><p>验证 token</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Jwt jwt = Jwts.parser().setSigningKey(KEY).parse(token);</span><br></pre></td></tr></table></figure>

<p>Jwt：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"header"</span>:&#123;</span><br><span class="line">        <span class="attr">"alg"</span>:<span class="string">"HS256"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"body"</span>:&#123;</span><br><span class="line">        <span class="attr">"iss"</span>:<span class="string">"gzhennaxia"</span>,</span><br><span class="line">        <span class="attr">"sub"</span>:<span class="string">"1"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"signature"</span>:<span class="string">"_Q0XHRhoS0a-ZA4pMzEmY2hShds86IrE5i4-XSj6sGI"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
]]></content>
      <categories>
        <category>JWT</category>
      </categories>
      <tags>
        <tag>JWT</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring-Boot Mutiple Environment Configuration</title>
    <url>/2019/11/28/Spring-Boot-Mutiple-Environment-Configuration/</url>
    <content><![CDATA[<img src="https://miamioh.edu/_files/images/it-services/news-articles/2017/08/dev-graphic.png" width="100%"/>

<a id="more"></a>

<blockquote>
<p><a href="http://www.jerome.xin/articles/spring-boot-multi-environment-configuration" target="_blank" rel="noopener">Spring Boot 多环境配置</a></p>
</blockquote>
<h2 id="application-yml"><a href="#application-yml" class="headerlink" title="application.yml"></a>application.yml</h2><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># common properties</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">@profiles.active@</span></span><br></pre></td></tr></table></figure>



<h2 id="application-dev-yml"><a href="#application-dev-yml" class="headerlink" title="application-dev.yml"></a>application-dev.yml</h2><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># dev properties</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span> <span class="string">dev</span></span><br></pre></td></tr></table></figure>



<h2 id="application-test-yml"><a href="#application-test-yml" class="headerlink" title="application-test.yml"></a>application-test.yml</h2><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># test properties</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span> <span class="string">test</span></span><br></pre></td></tr></table></figure>



<h2 id="application-prod-yml"><a href="#application-prod-yml" class="headerlink" title="application-prod.yml"></a>application-prod.yml</h2><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># prod properties</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span> <span class="string">prod</span></span><br></pre></td></tr></table></figure>



<h2 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">profiles</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Development environment --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>dev<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">profiles.active</span>&gt;</span>dev<span class="tag">&lt;/<span class="name">profiles.active</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">activation</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">activeByDefault</span>&gt;</span>true<span class="tag">&lt;/<span class="name">activeByDefault</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">activation</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Test environment --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>test<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">profiles.active</span>&gt;</span>test<span class="tag">&lt;/<span class="name">profiles.active</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Production environment --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>prod<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">profiles.active</span>&gt;</span>prod<span class="tag">&lt;/<span class="name">profiles.active</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">profiles</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="HelloController-java"><a href="#HelloController-java" class="headerlink" title="HelloController.java"></a>HelloController.java</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.gzhennaxia.admin.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> bo li</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019-11-28 14:28</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"hello"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;spring.profiles.active&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String environment;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">"env"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getEnvironment</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"The Environment is "</span> + environment;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://i.loli.net/2019/11/28/zqRYIDZbMgh7JLs.png" alt=""></p>
<h2 id="环境切换"><a href="#环境切换" class="headerlink" title="环境切换"></a>环境切换</h2><h3 id="默认环境"><a href="#默认环境" class="headerlink" title="默认环境"></a>默认环境</h3><p>在项目的<code>pom.xml</code>中，使用<code>&lt;activeByDefault&gt;true&lt;/activeByDefault&gt;</code>这段配置，定义了<code>dev</code>为项目的默认环境。所以当开发中启动项目会默认使用<code>application-dev.yml</code>的配置。在控制台的日志的第二行会有这么一段日志<code>The following profiles are active: dev</code>，表示已经加载了开发环境相关的配置。</p>
<h3 id="通过Maven打包时指定环境"><a href="#通过Maven打包时指定环境" class="headerlink" title="通过Maven打包时指定环境"></a>通过<code>Maven</code>打包时指定环境</h3><p>使用<code>Maven</code>命令<code>mvn clean package -Pprod</code>对项目的进行打包，然后直接使用<code>java -jar xxx.jar</code>命令启动项目。会发现日志输出了<code>The following profiles are active: prod</code>，说明使用的是生产环境。</p>
<h3 id="使用命令启动时指定环境"><a href="#使用命令启动时指定环境" class="headerlink" title="使用命令启动时指定环境"></a>使用命令启动时指定环境</h3><p>首先使用<code>Maven</code>命令<code>mvn clean package</code>对项目进行打包，然后先使用<code>java -jar xxx.jar</code>命令启动项目。会发现日志输出了<code>The following profiles are active: dev</code>，说明启动的是开发环境。接下来使用<code>java -jar xxx.jar --spring.profiles.active=test</code>命令启动项目，会发现日志输出了<code>The following profiles are active: test</code>。</p>
]]></content>
      <categories>
        <category>Spring-Boot</category>
      </categories>
      <tags>
        <tag>Spring-Boot</tag>
      </tags>
  </entry>
  <entry>
    <title>Adapting height in Mini-Program of WeChat</title>
    <url>/2019/11/19/Adapting-height-in-Mini-Program-of-WeChat/</url>
    <content><![CDATA[<img src="cover" width="100%"/>

<a id="more"></a>

<blockquote>
<p>小程序中设置图片的 width：100%，但高度并没有自适应</p>
</blockquote>
<h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h2><blockquote>
<p><a href="https://developers.weixin.qq.com/miniprogram/dev/component/image.html" target="_blank" rel="noopener">image | 微信开放文档 - 微信开放社区 - 腾讯</a></p>
</blockquote>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">&lt;image class="img" src="/image/xxx.png" mode="widthFix"&gt;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>WeChat-Mini-Program</category>
      </categories>
      <tags>
        <tag>WeChat-Mini-Program</tag>
      </tags>
  </entry>
  <entry>
    <title>Can not specify local image directly in Mini-Program of WeChat</title>
    <url>/2019/11/19/Can-not-specify-local-image-directly-in-Mini-Program-of-WeChat/</url>
    <content><![CDATA[<img src="http://static.chiefmore.com/u/cms/www/201806/15094709cpct.png" width="100%"/>

<a id="more"></a>

<blockquote>
<p>微信小程序使用本地图片作为 background-image 时报错</p>
<p>background-image: url(“/images/bg.jpg”);</p>
<p><img src="http://code.py40.com/wp-content/uploads/2017/05/QQ_20170511110600.png" alt=""></p>
</blockquote>
<h2 id="设计理念"><a href="#设计理念" class="headerlink" title="设计理念"></a>设计理念</h2><p>小程序倡导的是“轻应用”，本身只允许 2M 大小的程序，图片又比较占空间，所以小程序不推荐使用本地图片。</p>
<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><h3 id="外链"><a href="#外链" class="headerlink" title="外链"></a>外链</h3><p>将图片放在服务器上，用远程图片链接地址代替。</p>
<h3 id="BASE64-编码"><a href="#BASE64-编码" class="headerlink" title="BASE64 编码"></a>BASE64 编码</h3><p>将图片进行 BASE64 编码，然后再使用。</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">background-image: url("data:image/jpg;base64,iVBORw0KGgo=...");</span><br></pre></td></tr></table></figure>

<h3 id="image-标签"><a href="#image-标签" class="headerlink" title="image 标签"></a>image 标签</h3><blockquote>
<p><a href="https://www.zhangxinxu.com/wordpress/2017/08/css-percent-padding-image-layout/" target="_blank" rel="noopener">CSS百分比padding实现比例固定图片自适应布局« 张鑫旭-鑫 …</a></p>
</blockquote>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"wapper"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">"/images/bg.jpg"</span> <span class="attr">mode</span>=<span class="string">"widthFix"</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.wapper</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">  	<span class="comment">/* 图片高宽比 */</span></span><br><span class="line">    <span class="attribute">padding-bottom</span>: <span class="number">56%</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.wapper</span> &gt; <span class="selector-tag">image</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>WeChat-Mini-Program</category>
      </categories>
      <tags>
        <tag>WeChat-Mini-Program</tag>
      </tags>
  </entry>
  <entry>
    <title>Permission Control in Git Repository</title>
    <url>/2019/11/15/Permission-Control-in-Git-Repository/</url>
    <content><![CDATA[<img src="https://backlog.com/app/themes/backlog-child/assets/img/guides/git/basics/rewriting_history_005.png" width="100%"/>

<a id="more"></a>

<blockquote>
<p>原有的 Git 并不支持权限控制，权限控制都是各大远程仓库托管平台所提供的功能。</p>
</blockquote>
<h2 id="合并流程"><a href="#合并流程" class="headerlink" title="合并流程"></a>合并流程</h2><blockquote>
<p>我们公司 API 项目组的 master 分支的合并权限是测试人员才有的，也就是说只有测试人员才能把其他开发分支合并到 master 分支。</p>
</blockquote>
<p>因为合并的时候如果有冲突，就需要到测试人员那里去解决冲突，但是测试那里并没有开发环境，解决冲突后无法确定项目是否能正常运行（如果合并时出现合并后存在问题的代码），而部署的权限也在测试手里，合完后他们就直接部署了。</p>
<p>这就存在合并后有冲突，冲突解决后如果代码存在运行时异常，直接部署后导致部署失败，又需要回退再重新合并。</p>
<p>为了解决这种麻烦且易错的问题，我的方案如下。</p>
<h3 id="主要角色"><a href="#主要角色" class="headerlink" title="主要角色"></a>主要角色</h3><ol>
<li>QA：测试人员</li>
<li>DP：开发人员</li>
</ol>
<h3 id="涉及分支"><a href="#涉及分支" class="headerlink" title="涉及分支"></a>涉及分支</h3><ol>
<li>master</li>
<li>API-1921（根据 jira 分配的任务编号建对应分支）</li>
</ol>
<h3 id="流程图"><a href="#流程图" class="headerlink" title="流程图"></a>流程图</h3><p><img src="https://i.loli.net/2019/11/15/xvD9GbWqJ6rBAMk.png" alt=""></p>
]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>Huizhou Tour in the weekend of November 2019</title>
    <url>/2019/11/06/Huizhou-Tour-in-the-weekend-of-November-2019/</url>
    <content><![CDATA[<img src="https://i.loli.net/2019/11/06/klqyjxgNZ9UIhG2.png" width="100%"/>

<a id="more"></a>

<h2 id="地图"><a href="#地图" class="headerlink" title="地图"></a>地图</h2><iframe width="100%" height="1000" frameborder="no"  src="https://libo9527.github.io/static/map/amap/20191109/all/index.html"></iframe>
## 交通

<table>
<thead>
<tr>
<th>线路名称</th>
<th>发车站</th>
<th>终点站</th>
<th>发车时间</th>
<th>票价</th>
<th>来源</th>
</tr>
</thead>
<tbody><tr>
<td>惠东港口专线</td>
<td>惠东汽车总站</td>
<td>港口</td>
<td>06:00 - 18:00 每 6 分钟一班车</td>
<td></td>
<td></td>
</tr>
<tr>
<td>惠东港口专线</td>
<td>港口</td>
<td>惠东汽车总站</td>
<td>06:00 - 18:00 每 6 分钟一班车</td>
<td></td>
<td></td>
</tr>
<tr>
<td>惠州稔山巽寮专线</td>
<td>厦深铁路惠东站</td>
<td>巽寮市场站</td>
<td>08:43 - 22:26 每 30 分钟一班车</td>
<td>全程票价(元):15.00</td>
<td><a href="https://bus.mapbar.com/huizhou/xianlu/renshanxunliaozhuanxian/1" target="_blank" rel="noopener">稔山巽寮专线 - 公交查询 - 图吧</a></td>
</tr>
<tr>
<td></td>
<td>惠东站</td>
<td>双月湾</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h3 id="惠东站-双月湾"><a href="#惠东站-双月湾" class="headerlink" title="惠东站 - 双月湾"></a>惠东站 - 双月湾</h3><ul>
<li>惠东站出站后左转找去双月湾的车 - 双月湾</li>
<li>惠东站 - 走和谐路到国道路口 - 搭乘惠东到港口专线 - 港口 - 走路去双月湾</li>
<li>惠东站 - 坐 H1/H2/H3 到稔山镇政府 - 搭乘惠东到港口专线 - 港口 - 走路去双月湾</li>
<li>惠东站 - 坐摩的到</li>
</ul>
<h3 id="惠东站-巽寮湾"><a href="#惠东站-巽寮湾" class="headerlink" title="惠东站 - 巽寮湾"></a>惠东站 - 巽寮湾</h3><ul>
<li>从<strong>厦深铁路惠东站</strong>坐<strong>惠州稔山巽寮专线</strong>到<strong>巽寮市场站</strong>下车</li>
</ul>
<h3 id="双月湾-巽寮湾"><a href="#双月湾-巽寮湾" class="headerlink" title="双月湾 - 巽寮湾"></a>双月湾 - 巽寮湾</h3><ul>
<li>走路/骑行/摩的/打车到平海古城 - 平海古城骑行/摩的/打车到油麻园小学公交站 - 坐 708路 公交到华家班站下 - 走路到酒店</li>
<li>港口坐惠东到港口专线到大埔屯 - 大埔屯坐惠州稔山巽寮专线到巽寮市场站</li>
</ul>
]]></content>
      <categories>
        <category>Tour</category>
      </categories>
      <tags>
        <tag>Tour</tag>
      </tags>
  </entry>
  <entry>
    <title>Git Error MERGE_MSG</title>
    <url>/2019/11/01/Git-Error-MERGE-MSG/</url>
    <content><![CDATA[<img src="https://raw.githubusercontent.com/DRPrincess/BlogImages/master/qiniu/95e1e0d779e7824420350bfbc96019a1.png" width="100%"/>

<a id="more"></a>

<blockquote>
<p><a href="https://blog.csdn.net/qq_32452623/article/details/78395832" target="_blank" rel="noopener">Git-解释“Swap file .MERGE_MSG.swp already exists”的问题- 段浅浅的 …</a></p>
</blockquote>
<p>合并后，执行 git pull 或者 push 或者 merge 命令时，报以上错误</p>
<h2 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h2><p>merge 后未正确关闭 MERGE_MSG 编辑文件。合并后会进入 commit msg 编辑页面（MERGE_MSG文件），若未正确退出，下次再合并时就会报这个错误。</p>
<p><img src="https://raw.githubusercontent.com/DRPrincess/BlogImages/master/qiniu/9a65e381933b29e2d6dd12bcaa50dccf.png" alt=""></p>
<p>这是因为 linux 中使用 vim 编辑某文件时，会生成一个 .sw* 的隐藏文件，当正确退出后会自动删除该文件。</p>
<h2 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h2><ol>
<li><p>回到合并前状态</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git merge -abort</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除 vim 非正常关闭产生的文件</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rm .git/.MERGE_MSG.sw*</span><br></pre></td></tr></table></figure>
</li>
<li><p>重新合并</p>
</li>
</ol>
]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>Study Notes of Git</title>
    <url>/2019/11/01/Study-Notes-of-Git/</url>
    <content><![CDATA[<img src="https://www.linkedin.com/media-proxy/ext?w=1200&h=675&hash=EnUu%2BT9OJGbHiVWYjgwyvE0dids%3D&ora=1%2CaFBCTXdkRmpGL2lvQUFBPQ%2CxAVta5g-0R6plxVUzgUv5K_PrkC9q0RIUJDPBy-kWyaq89KIf3LpesfWfrq8pVgTcCkFkgw1fOuuSC3gFNu1NdCvKg" width="100%"/>

<a id="more"></a>

<h2 id="Command"><a href="#Command" class="headerlink" title="Command"></a>Command</h2><h3 id="remote"><a href="#remote" class="headerlink" title="remote"></a>remote</h3><ul>
<li><p>添加远程主机</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> git remote add &lt;主机名&gt; &lt;网址&gt;</span></span><br><span class="line">git remote add origin http://bitbucket.sstparts.com/scm/web/sst-cloud.git</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="branch"><a href="#branch" class="headerlink" title="branch"></a>branch</h3><ul>
<li><p>查看本地分支与远程分支的追踪关系</p>
<blockquote>
<p>-v, -vv, –verbose<br>When in list mode, show sha1 and commit subject line for each head, along with relationship to upstream branch (if any). If given twice, print the name of the upstream branch, as well (see also git remote show <code>&lt;remote&gt;</code>).</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git branch -vv</span><br></pre></td></tr></table></figure>
</li>
<li><p>关联远程分支</p>
<blockquote>
<p> -u <code>&lt;upstream&gt;</code>, –set-upstream-to=<code>&lt;upstream&gt;</code><br>Set up <code>&lt;branchname&gt;</code>‘s tracking information so <code>&lt;upstream&gt;</code> is considered <code>&lt;branchname&gt;</code>‘s upstream branch. If no <code>&lt;branchname&gt;</code> is specified, then it defaults to the current branch.</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git branch --set-upstream-to=master</span><br><span class="line"><span class="meta">#</span><span class="bash"> or</span></span><br><span class="line">git bracch -u master</span><br></pre></td></tr></table></figure>
</li>
<li><p>分支重命名</p>
<blockquote>
<p> -m, –move</p>
<p>Move/rename a branch and the corresponding reflog.</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git branch -m oldBranchName newBranchName</span><br></pre></td></tr></table></figure>

<p>注意：远程分支的重命名需要通过先删除后新建的方式实现。</p>
</li>
</ul>
<h3 id="checkout"><a href="#checkout" class="headerlink" title="checkout"></a>checkout</h3><ul>
<li><p>拉取远程新分支到本地</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git checkout -b 本地分支名 origin/远程分支名</span><br></pre></td></tr></table></figure>
<p>另一种方式（这种方式不会切换到新分支，需要手动切换）：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git fetch origin 远程分支名:本地分支名</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="stash"><a href="#stash" class="headerlink" title="stash"></a>stash</h3><ul>
<li><p>查看 stash 列表</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git stash list</span><br></pre></td></tr></table></figure>
</li>
<li><p>清空 stash 列表</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git stash clear</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除队列中的第一个</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git stash drop stash@&#123;0&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="config"><a href="#config" class="headerlink" title="config"></a>config</h3><p>git 配置有 system 级别、global 和 local 三个，优先级依次递增，也就是配置冲突时优先使用 local 级别的。</p>
<ul>
<li><p>查看当前仓库配置信息</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git config --local --list</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="DIFFRENCE"><a href="#DIFFRENCE" class="headerlink" title="DIFFRENCE"></a>DIFFRENCE</h2><ol>
<li><p>pull VS fetch</p>
<p>pull = fetch + merge</p>
</li>
</ol>
]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>EXCEL Function Instance</title>
    <url>/2019/11/01/EXCEL-Function-Instance/</url>
    <content><![CDATA[<img src="https://bitcoinist.com/wp-content/uploads/2019/05/shutterstock_1067559386.png" width="100%"/>

<a id="more"></a>

<h2 id="SUMIF"><a href="#SUMIF" class="headerlink" title="SUMIF"></a>SUMIF</h2><blockquote>
<p><a href="https://support.office.com/zh-cn/article/sumif-函數-169b8c99-c05c-4483-a712-1697a653039b" target="_blank" rel="noopener">SUMIF 函数- Office 支持 - Office Support - Office 365</a></p>
<p><strong>单条件求和</strong>函数，可对范围中符合指定条件的值求和。</p>
</blockquote>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SUMIF(range, criteria, [sum_range])</span><br></pre></td></tr></table></figure>

<ul>
<li>range：要按条件筛选的单元格区域</li>
<li>criteria：筛选条件</li>
<li>sum_range：要求和的实际单元格区域</li>
</ul>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><h4 id="Sheet1"><a href="#Sheet1" class="headerlink" title="Sheet1"></a>Sheet1</h4><table>
<thead>
<tr>
<th>日期</th>
<th>时间</th>
<th>名称</th>
<th>金额(¥)</th>
</tr>
</thead>
<tbody><tr>
<td>2019/10/21</td>
<td>8:15</td>
<td>地铁</td>
<td>3</td>
</tr>
<tr>
<td>2019/10/21</td>
<td>12:42</td>
<td>卤肉面+油条</td>
<td>16</td>
</tr>
<tr>
<td>2019/10/21</td>
<td>18:46</td>
<td>哈密瓜</td>
<td>26.8</td>
</tr>
<tr>
<td>2019/10/21</td>
<td>18:59</td>
<td>桂圆</td>
<td>13.8</td>
</tr>
<tr>
<td>2019/10/21</td>
<td>20:17</td>
<td>地铁</td>
<td>3</td>
</tr>
<tr>
<td>2019/10/21</td>
<td>22:26</td>
<td>谷歌助手</td>
<td>15.99</td>
</tr>
<tr>
<td>2019/10/22</td>
<td>9:06</td>
<td>地铁</td>
<td>3</td>
</tr>
<tr>
<td>2019/10/22</td>
<td>12:55</td>
<td>西红柿鸡蛋拌面</td>
<td>16</td>
</tr>
<tr>
<td>2019/10/22</td>
<td>17:10</td>
<td>地铁</td>
<td>3</td>
</tr>
<tr>
<td>2019/10/23</td>
<td>8:27</td>
<td>借给吕江</td>
<td>1000</td>
</tr>
<tr>
<td>2019/10/23</td>
<td>8:48</td>
<td>地铁</td>
<td>3</td>
</tr>
<tr>
<td>2019/10/23</td>
<td>12:42</td>
<td>肉酱拌面+加面</td>
<td>18.5</td>
</tr>
<tr>
<td>2019/10/23</td>
<td>17:56</td>
<td>地铁</td>
<td>3</td>
</tr>
</tbody></table>
<h4 id="Sheet2"><a href="#Sheet2" class="headerlink" title="Sheet2"></a>Sheet2</h4><table>
<thead>
<tr>
<th>日期</th>
<th>总计</th>
</tr>
</thead>
<tbody><tr>
<td>2019/10/21</td>
<td>78.59</td>
</tr>
<tr>
<td>2019/10/22</td>
<td>22</td>
</tr>
<tr>
<td>2019/10/23</td>
<td>1024.5</td>
</tr>
</tbody></table>
<h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><table>
<thead>
<tr>
<th>位置</th>
<th>公式</th>
<th>说明</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>Sheet2 B2</td>
<td>=SUMIF(Sheet1!A2:A14,<br />Sheet2!A2,Sheet1!D2:D14)</td>
<td>Sheet1  A2 ～ A14 中日期等于Sheet2中 A2 日期的金额总和</td>
<td>Sheet1 中 2019/10/21 的金额总和</td>
</tr>
<tr>
<td>Sheet2 B3</td>
<td>=SUMIF(Sheet1!A2:A14,<br />Sheet2!A3,Sheet1!D2:D14)</td>
<td>Sheet1  A2 ～ A14 中日期等于Sheet2中 A3 日期的金额总和</td>
<td>Sheet1 中 2019/10/22 的金额总和</td>
</tr>
<tr>
<td>Sheet2 B4</td>
<td>=SUMIF(Sheet1!A2:A14,<br />Sheet2!A4,Sheet1!D2:D14)</td>
<td>Sheet1  A2 ～ A14 中日期等于Sheet2中 A4 日期的金额总和</td>
<td>Sheet1 中 2019/10/23 的金额总和</td>
</tr>
</tbody></table>
<h2 id="SUMIFS"><a href="#SUMIFS" class="headerlink" title="SUMIFS"></a>SUMIFS</h2><blockquote>
<p><a href="https://support.office.com/zh-cn/article/sumifs-函数-c9e748f5-7ea7-455d-9406-611cebce642b" target="_blank" rel="noopener">SUMIFS 函数- Office 支持 - Office Support - Office 365</a></p>
<p><strong>多条件求和</strong>函数，可对范围中符合指定条件的值求和。</p>
</blockquote>
<h3 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">SUMIFS(sum_range, criteria_range1, criteria1, [criteria_range2, criteria2], ...)</span><br></pre></td></tr></table></figure>

<ul>
<li>sum_range：要求和的单元格区域</li>
<li>criteria_range1：条件 1 的筛选区域</li>
<li>criteria：条件 1 的筛选条件</li>
</ul>
<h3 id="实例-1"><a href="#实例-1" class="headerlink" title="实例"></a>实例</h3><h4 id="Sheet1-1"><a href="#Sheet1-1" class="headerlink" title="Sheet1"></a>Sheet1</h4><blockquote>
<p>同 SUMIF Sheet1</p>
</blockquote>
<h4 id="Sheet2-1"><a href="#Sheet2-1" class="headerlink" title="Sheet2"></a>Sheet2</h4><table>
<thead>
<tr>
<th>日期</th>
<th>12:00</th>
<th>13:00</th>
</tr>
</thead>
<tbody><tr>
<td>2019/10/21</td>
<td>16</td>
<td>0</td>
</tr>
<tr>
<td>2019/10/22</td>
<td>16</td>
<td>0</td>
</tr>
<tr>
<td>2019/10/23</td>
<td>18.5</td>
<td>0</td>
</tr>
</tbody></table>
<h4 id="使用-1"><a href="#使用-1" class="headerlink" title="使用"></a>使用</h4><style>
table th:first-of-type {  #first表示表格第一列
    width: 100px; # 可使用%比例
}
</style>

<table>
<thead>
<tr>
<th>位置</th>
<th>公式</th>
<th>说明</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>Sheet2 B1</td>
<td>=SUMIFS(Sheet1!E2:E54,<br />Sheet1!A2:A54, Sheet2!A2,<br />Sheet1!B2:B54,”&gt;=”&amp;Sheet2!B1, <br />Sheet1!B2:B54,”&lt;”&amp;Sheet2!C1)</td>
<td>Sheet1 A2~A54 中日期等于 Sheet2 B1 的日期，<br />并且 Sheet1 B2 ~ B54 中时间大于等于 Sheet2 B1 <br />的时间小于 C1 的时间的金额总和</td>
<td>Sheet1 中 2019/10/22 12:00 ~ 13:00 的金额总和</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>Excel</category>
      </categories>
      <tags>
        <tag>Excel</tag>
      </tags>
  </entry>
  <entry>
    <title>YunNan Tour at National Day 2019</title>
    <url>/2019/09/19/YunNan-Tour-at-National-Day-2019/</url>
    <content><![CDATA[<iframe width="100%" height="400" frameborder="no"  src="https://libo9527.github.io/static/map/amap/20191001/01/index.html"></iframe>

<a id="more"></a>

<h2 id="2019年国庆云南游"><a href="#2019年国庆云南游" class="headerlink" title="2019年国庆云南游"></a>2019年国庆云南游</h2><h3 id="总体安排"><a href="#总体安排" class="headerlink" title="总体安排"></a>总体安排</h3><h4 id="时间"><a href="#时间" class="headerlink" title="时间"></a>时间</h4><p>02/10 晚上 - 07/10 早上</p>
<p>由于 2 号晚上才到，7 号早上要走，故游玩时间为中间的 4 天时间。</p>
<h4 id="地点"><a href="#地点" class="headerlink" title="地点"></a>地点</h4><p>昆明（1天）、大理（两天）、丽江（1天）</p>
<p>由于大理相对景点比较多，所以多给一天时间。</p>
<h4 id="路线"><a href="#路线" class="headerlink" title="路线"></a>路线</h4><p>有两种路线：</p>
<ul>
<li>昆明 → 大理 → 丽江 → 昆明</li>
<li>昆明 → 丽江 → 大理 → 昆明</li>
</ul>
<p>由于第一条路线丽江到昆明在 6 号的票太多紧张，加上丽江酒店消费偏高，所以建议使用第二条路线。</p>
<h3 id="路线-1"><a href="#路线-1" class="headerlink" title="路线"></a>路线</h3><h4 id="路线一"><a href="#路线一" class="headerlink" title="路线一"></a>路线一</h4><ul>
<li><p>2 号晚上到了住昆明</p>
</li>
<li><p>3 号白天逛昆明到景点</p>
</li>
<li><p>3 号晚上从昆明坐车到大理</p>
<p><img src="https://i.loli.net/2019/09/19/uFXLgV5P6esSHBa.png" alt=""></p>
</li>
<li><p>3 号晚上住大理</p>
</li>
<li><p>4 号白天逛大理景点</p>
</li>
<li><p>4 号晚上住大理</p>
</li>
<li><p>5 号白天逛大理景点</p>
</li>
<li><p>5 号晚上从大理坐车到丽江</p>
<p><img src="https://i.loli.net/2019/09/19/Rz8ypmZlXKxUud7.png" alt=""></p>
</li>
<li><p>5 号晚上住丽江</p>
</li>
<li><p>6 号白天逛丽江的景点</p>
</li>
<li><p>6 号晚上从丽江坐车到昆明</p>
<p><img src="https://i.loli.net/2019/09/19/kVzFGocCRZagmTL.png" alt=""></p>
<p><img src="https://i.loli.net/2019/09/19/lrkIpWoZOstzf91.png" alt=""></p>
<p><img src="https://i.loli.net/2019/09/19/vpUMFiEzWBRCAqY.png" alt=""></p>
<p><img src="https://i.loli.net/2019/09/19/Xy8xU3Wnj1rzOqP.png" alt=""></p>
<p><img src="https://i.loli.net/2019/09/19/sVgykCFrOcJhQoW.png" alt=""></p>
<p><img src="http://ww1.sinaimg.cn/large/005M2pcYgy1g747csa62kj30u00yyjt1.jpg" alt="WechatIMG8.jpeg"></p>
</li>
</ul>
<h4 id="路线二"><a href="#路线二" class="headerlink" title="路线二"></a>路线二</h4><ul>
<li><p>2 号晚上到了住昆明</p>
</li>
<li><p>3 号早上从昆明坐车到丽江</p>
<p><img src="https://i.loli.net/2019/09/19/qYbAGXDla6Etmu9.png" alt=""></p>
</li>
<li><p>3 号白天逛丽江的景点</p>
</li>
<li><p>3 号晚上从丽江坐车到大理</p>
<p><img src="http://ww1.sinaimg.cn/large/005M2pcYgy1g746p2czg4j31ki0qaah2.jpg" alt="WechatIMG6.png"></p>
</li>
<li><p>3 号晚上住大理</p>
</li>
<li><p>4 号白天逛大理的景点</p>
</li>
<li><p>4 号晚上住大理</p>
</li>
<li><p>5 号白天逛大理的景点</p>
</li>
<li><p>5 号晚上从大理坐车到昆明</p>
<p><img src="http://ww1.sinaimg.cn/large/005M2pcYgy1g746s5bm7bj31lq0z6gup.jpg" alt="WechatIMG7.png"></p>
</li>
<li><p>5 号晚上住昆明</p>
</li>
<li><p>6 号白天逛昆明的景点</p>
</li>
<li><p>6 号晚上住昆明</p>
</li>
<li><p>7 号早上从昆明坐车返程</p>
</li>
</ul>
<h3 id="天气"><a href="#天气" class="headerlink" title="天气"></a>天气</h3><iframe width="100%" height="400" frameborder="no"  src="https://libo9527.github.io/static/map/amap/20191001/weather/index.html">
</iframe>

<h3 id="时间轴"><a href="#时间轴" class="headerlink" title="时间轴"></a><a href="https://libo9527.github.io/static/map/amap/20191001/timeline/index.html" target="_blank" rel="noopener">时间轴</a></h3><h3 id="全览图"><a href="#全览图" class="headerlink" title="全览图"></a><a href="http://libo9527.github.io/static/map/amap/20191001/all/index.html" target="_blank" rel="noopener">全览图</a></h3><h3 id="景点"><a href="#景点" class="headerlink" title="景点"></a>景点</h3><h4 id="昆明"><a href="#昆明" class="headerlink" title="昆明"></a>昆明</h4><blockquote>
<p><a href="http://www.mafengwo.cn/mdd/map/10807.html" target="_blank" rel="noopener">昆明全部景点 | 马蜂窝</a></p>
</blockquote>
<iframe width="100%" height="400" frameborder="no"  src="https://libo9527.github.io/static/map/amap/20191001/02/index.html">
</iframe>

<h4 id="大理"><a href="#大理" class="headerlink" title="大理"></a>大理</h4><blockquote>
<p><a href="http://www.mafengwo.cn/mdd/map/10487.html" target="_blank" rel="noopener">大理全部景点 | 马蜂窝</a></p>
<p><a href="https://m.youxiake.com/gonglue/view?id=3073" target="_blank" rel="noopener">关于那些风花雪月的事</a></p>
<p>关于下关风的传说：传说一：有一个白面书生与一位美丽的姑娘相爱，引起了南诏国王的不满。南诏王就命罗荃法师把书生打入洱海。姑娘为救情人，向观音菩萨要了六瓶风，想让大风把海水吹干，救出书生。谁知风瓶才背到天生桥，姑娘一不小心跌了一跤，以至打碎了五个风瓶。刹时间、狂风怒吼，一年四季风吹不断，冬季尤为猛烈，后来人们就把下关叫作“风城”。传说二：很久以前，观音化作一个老妪，背着一个风瓶，经过天生桥时，守桥土卒按照贯例要检查过往行人的货物。老妪好言劝说不要检查、士卒不听。还没等老妪说明利害关系，就硬将瓶盖打开、顿时风从瓶中冲了出来，一发而不可收。等士卒明白过来，老妪早已不见了。从此，大风日夜不停地由天生桥吹向下关，故名“风城”。</p>
<p>关于上关花的传说：相传上关有棵“十里奇香树”，花大如莲，香味胜过桂花，颜色呈粉白色，结的果实黑而坚硬，用作朝珠，故又称为“朝珠花”。据《大理府志》载：“……花树高六丈，其质似桂，其花白，每朵十二瓣，应十二月，遇润月则多一瓣，俗以仙人遗种，在大理府和山之麓，土人因以其地名之。”此花种于何时，已不可考。只知道在元朝至正年间，花开得很好，年年开、月月开，浓郁的香味散溢百步之外。后已绝种，传说是由于鲜花怒放时，观者云集，一些贪官污吏借观花而敲诈勒索当地百姓，百姓叫苦连天，只好暗中把花弄死。但直到今日，白族人民爱花、养花已成习惯，而且花卉繁多，四季飘香。</p>
<p>关于苍山雪的传说：相传，古时候有一瘟神来到大理坝子想残害百姓。这时，有兄妹俩为使人们免遭瘟疫，到观音那里去学法，归来后，就用法术把瘟神赶到苍山顶上，用大雪把瘟神冻死。兄妹俩亦在苍山雪人峰上变成雪神，永远镇住了瘟神。从此，苍山就有了千年不化之雪。</p>
<p>关于洱海月的传说：天上有一位仙女羡慕人间生活，下凡来到洱海边与一渔民青年成婚。她看到渔民打鱼困难，就把自己带来的一面宝镜放入海底，把鱼照得一清二楚，好让渔民打到更多的鱼。 后来，那面宝镜在海底变成了金月亮，这就是洱海月。每当月出，行近洱海之滨，仰望天空，玉镜高悬，俯视洱海，地溺银涛，水光接天，万顷芒然，一个明晃晃的月亮在海中随浪飘摇，令人惊叹不已。</p>
</blockquote>
<iframe width="100%" height="400" frameborder="no"  src="https://libo9527.github.io/static/map/amap/20191001/03/index.html">
</iframe>

<h5 id="大理古城"><a href="#大理古城" class="headerlink" title="大理古城"></a>大理古城</h5><p>大理古城有4座主要的城门，除了南门北门外，东门名叫洱海门，西门则叫做苍山门，因为苍山位于古城西侧，开门即见山。</p>
<p><img src="https://i.loli.net/2019/09/21/Fil3ypWnz18rbVa.png" alt="image.png"></p>
<h6 id="门票"><a href="#门票" class="headerlink" title="门票"></a>门票</h6><p>免费</p>
<h6 id="开放时间"><a href="#开放时间" class="headerlink" title="开放时间"></a>开放时间</h6><p>全天</p>
<h6 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h6><blockquote>
<p><a href="https://baike.baidu.com/item/%E5%A4%A7%E7%90%86%E5%8F%A4%E5%9F%8E" target="_blank" rel="noopener">百科</a></p>
</blockquote>
<p>大理古城位于云南省西部，又名叶榆城、紫城。古城其历史可追溯至唐天宝年间，南诏王阁逻凤筑的羊苴咩城，为其新都。古城始建于明洪武十五年（1382年），占地面积3平方公里。</p>
<h6 id="内部景点"><a href="#内部景点" class="headerlink" title="内部景点"></a>内部景点</h6><blockquote>
<p><a href="http://www.mafengwo.cn/poi/17043.html" target="_blank" rel="noopener">大理古城 | 马蜂窝</a></p>
</blockquote>
<p><img src="https://i.loli.net/2019/09/21/Hhvr1LiFQ4ESuKP.png" alt="image.png"></p>
<p><img src="https://i.loli.net/2019/09/21/PMKdcE5Bih3rLgD.png" alt="image.png"></p>
<h5 id="洱海"><a href="#洱海" class="headerlink" title="洱海"></a>洱海</h5><blockquote>
<p><a href="http://www.mafengwo.cn/poi/956.html" target="_blank" rel="noopener">洱海 | 马蜂窝</a></p>
<p>大理“风花雪月”四大名景（下关风、上关花、苍山雪、洱海月）之一，外形如同耳朵，是由西洱河塌陷形成的高原湖泊。<br>共有三岛、四洲、五湖、九曲。</p>
<p>三岛：金梭岛，玉几岛、赤文岛；</p>
<p>四洲：青莎鼻洲、大鹳淜洲、鸳鸯洲、马濂洲；</p>
<p>五湖：太湖、莲花湖、星湖、神湖、渚湖；</p>
<p>九曲：莲花曲、大鹳曲、潘矶曲、凤翼曲、罗莳曲、牛角曲、波曲，高莒曲，鹤翥曲。</p>
<p><a href="https://zhuanlan.zhihu.com/p/25973306" target="_blank" rel="noopener">大理洱海最美拍摄地点最全攻略，附赠洱海摄影地图</a></p>
<p><a href="https://you.ctrip.com/travels/dali31/3610068.html" target="_blank" rel="noopener">大理环洱海拍照自由行最新版攻略</a></p>
</blockquote>
<h6 id="门票-1"><a href="#门票-1" class="headerlink" title="门票"></a>门票</h6><p>免费</p>
<ul>
<li>包车环游洱海，建议顺序游玩的景点：喜洲镇-蝴蝶泉-双廊-南诏风情岛-挖色镇-小普陀，时间允许的话记得在洱海东岸等待大理最美的日落。包车一天的价格在300元左右。</li>
</ul>
<h6 id="开放时间-1"><a href="#开放时间-1" class="headerlink" title="开放时间"></a>开放时间</h6><p>全天</p>
<h6 id="简介-1"><a href="#简介-1" class="headerlink" title="简介"></a>简介</h6><blockquote>
<p><a href="https://baike.baidu.com/item/洱海/19448368?fromtitle=大理洱海&fromid=4488915" target="_blank" rel="noopener">洱海 | 百科</a></p>
</blockquote>
<ul>
<li>洱海，古称昆明池、洱河、叶榆泽等。</li>
<li>因其状似人耳，故名洱海。</li>
<li>一般湖水面积约246平方千米，是仅次于滇池的云南第二大湖，中国淡水湖中居第7位。</li>
<li>洱海形成于冰河时代末期，其成因主要是沉降侵蚀，属高原构造断陷湖泊，海拔1972米。</li>
<li>洱海之所以最终以“洱”为名，要么说它“形若人耳”，要么说它“如月抱珥”，因而得名。而“海”的叫法，则源于云南的习俗。在云南十八怪中就有一怪为“湖泊称作海”。这就是说，湖泊在云南多被叫做“海”。</li>
</ul>
<h6 id="内部景点-1"><a href="#内部景点-1" class="headerlink" title="内部景点"></a>内部景点</h6><p><img src="https://p1-q.mafengwo.net/s10/M00/68/4D/wKgBZ1nga8-AK3X9AAO9cNuAiuA91.jpeg?imageView2%2F2%2Fw%2F680%2Fq%2F90%7CimageMogr2%2Fstrip%2Fquality%2F90" alt=""></p>
<h5 id="崇圣寺三塔"><a href="#崇圣寺三塔" class="headerlink" title="崇圣寺三塔"></a>崇圣寺三塔</h5><h6 id="门票-2"><a href="#门票-2" class="headerlink" title="门票"></a>门票</h6><ul>
<li>门票： ¥75/人</li>
</ul>
<h6 id="简介-2"><a href="#简介-2" class="headerlink" title="简介"></a>简介</h6><blockquote>
<p><a href="https://baike.baidu.com/item/%E5%B4%87%E5%9C%A3%E5%AF%BA%E4%B8%89%E5%A1%94/413481?fromtitle=%E4%B8%89%E5%A1%94&fromid=7724282" target="_blank" rel="noopener">百科</a><br>崇圣寺三塔位于大理古城西北部1.5公里处，西对苍山应乐峰，东对洱海，距山脚约为1500米。南336米处有桃溪向东流过。北76米处有梅溪，东靠滇藏公路。三塔由一大二小三阁组成。大塔又名千寻塔，当地群众称它为“文笔塔”，通高69.13米，底方9.9米，凡16级，为大理地区典型的密檐式空心四方形砖塔。南北小塔均为十级，高42.17米，为八角形密檐式空心砖塔。三座塔鼎足而立，千寻塔居中，二小塔南北拱卫。1961年3月4日，被国务院公布为第一批全国重点文物保护单位。</p>
</blockquote>
<h6 id="内部景点-2"><a href="#内部景点-2" class="headerlink" title="内部景点"></a>内部景点</h6><h6 id="开放时间-2"><a href="#开放时间-2" class="headerlink" title="开放时间"></a>开放时间</h6><p>9:00 - 18:00</p>
<h5 id="苍山"><a href="#苍山" class="headerlink" title="苍山"></a>苍山</h5><blockquote>
<p><a href="http://www.mafengwo.cn/poi/18067.html" target="_blank" rel="noopener">苍山 | 马蜂窝</a></p>
<p><a href="http://www.mafengwo.cn/gonglve/ziyouxing/1802.html" target="_blank" rel="noopener">无苍山，不大理——最全苍山玩法，做一日清闲山里人</a></p>
</blockquote>
<h6 id="门票-3"><a href="#门票-3" class="headerlink" title="门票"></a>门票</h6><ul>
<li>普通票（进山费）：¥40/人</li>
<li>缆车(往返)：¥35/人</li>
<li>感通索道(往返)：¥80/人</li>
<li>苍山大索道：¥300/人(旺季往返) ¥240/人(淡季往返)</li>
</ul>
<h6 id="开放时间-3"><a href="#开放时间-3" class="headerlink" title="开放时间"></a>开放时间</h6><p>苍山：08:30-16:10(旺季) (4月1日-10月31日 周一-周日)</p>
<p>感通索道/苍山大索道：08:30-17:00 (1月1日-12月31日 周一-周日)</p>
<p>影视城开放时间：8:00-17:00 取票时间9:00以后</p>
<h6 id="简介-3"><a href="#简介-3" class="headerlink" title="简介"></a>简介</h6><blockquote>
<p><a href="https://baike.baidu.com/item/苍山/15371" target="_blank" rel="noopener">百科</a></p>
<p>苍山是云岭山脉南端的主峰，由十九座山峰由北而南组成，北起洱源邓川，南至下关天生桥。其峰自北而南依次为：云弄、沧浪、五台、莲花、白云、鹤云、三阳、兰峰、雪人、应乐、观音、中和、龙泉、玉局、马龙、圣应、佛顶、马耳、斜阳。</p>
</blockquote>
<ul>
<li>苍山十九峰十八溪</li>
</ul>
<h6 id="内部景点-3"><a href="#内部景点-3" class="headerlink" title="内部景点"></a>内部景点</h6><h5 id="天龙八部影视城"><a href="#天龙八部影视城" class="headerlink" title="天龙八部影视城"></a>天龙八部影视城</h5><blockquote>
<p><a href="http://www.mafengwo.cn/poi/5426333.html" target="_blank" rel="noopener">天龙八部影视城 | 马蜂窝</a></p>
</blockquote>
<h6 id="门票-4"><a href="#门票-4" class="headerlink" title="门票"></a>门票</h6><p>¥52/人</p>
<h6 id="开放时间-4"><a href="#开放时间-4" class="headerlink" title="开放时间"></a>开放时间</h6><p>08：00-17：00</p>
<h6 id="简介-4"><a href="#简介-4" class="headerlink" title="简介"></a>简介</h6><blockquote>
<p><a href="https://baike.baidu.com/item/大理天龙八部影视城?fromtitle=天龙八部影视城&fromid=9356333" target="_blank" rel="noopener">百科</a></p>
<p>大理天龙八部影视城，始建于2002年。主要景点由西夏王宫、珍珑棋局、镇南王府等多余处影视拍摄景观组成，占地面积770亩，总建筑面积2.5万平方米，共由146个单体建筑构成，是以金庸长篇小说《天龙八部》为建筑蓝本和宋代、大理文化三结合为背景的仿古建筑群。</p>
</blockquote>
<h6 id="内部景点-4"><a href="#内部景点-4" class="headerlink" title="内部景点"></a>内部景点</h6><ul>
<li><p>西夏王宫<br>俗称皇宫，位于大理天龙八部影视城南端，建筑仿大宋皇宫风格，并融入大理和佛教文化特色，前院为正殿，后院是书房、寝殿等 。</p>
</li>
<li><p>珍珑棋局</p>
<p>位于大理天龙八部影视城中部，是根据金庸《天龙八部》原著中对“珍珑棋局”的描写建造而成；珍珑棋秤为青石，重700吨，表面积近100平方米，上面可以同时站300多人；黑白棋子分别用汉白玉、墨金玉两种材质雕琢加工而成，每个围棋子重25千克。</p>
</li>
<li><p>镇南王府<br>位于大理天龙八部影视城中部，是根据金庸《天龙八部》原著中镇南王段正淳的“镇南王府”的描写建造而成，主要建有府门、前庭、寝宫、住房、后花园、花厅、藏经阁等。</p>
</li>
<li><p>四僧塔</p>
<p>位于大理天龙八部影视城东北部，是一座石砌佛塔，安葬着明洪武年间圆寂于大理的逯光古、斗南、机先、天祥4位日本国僧人 。</p>
</li>
</ul>
<h4 id="丽江"><a href="#丽江" class="headerlink" title="丽江"></a>丽江</h4><blockquote>
<p><a href="http://www.mafengwo.cn/mdd/map/10186.html" target="_blank" rel="noopener">丽江全部景点 | 马蜂窝</a></p>
<p>丽江地处滇西北高原，金沙江中游。以“二山、一城、一湖、一江、一文化、一风情”为主要代表。二山指的是玉龙雪山和老君山；一城为丽江古城，即大研古城；一江为金沙江；一文化指纳西东巴文化；一风情则为摩梭风情。</p>
</blockquote>
<iframe width="100%" height="400" frameborder="no"  src="https://libo9527.github.io/static/map/amap/20191001/04/index.html">
</iframe>


<h5 id="玉龙雪山"><a href="#玉龙雪山" class="headerlink" title="玉龙雪山"></a>玉龙雪山</h5><blockquote>
<p><a href="http://sw.lijiangtour.com/" target="_blank" rel="noopener">官网</a></p>
<p><a href="http://www.sohu.com/a/307812017_106508" target="_blank" rel="noopener">丽江玉龙雪山一日游攻略，超详细攻略！</a></p>
<p><a href="http://www.lvmama.com/lvyou/guide/mini-209.html" target="_blank" rel="noopener">【微攻略】丽江玉龙雪山是跟团还是自由行？看完就懂了</a></p>
</blockquote>
<h6 id="门票-5"><a href="#门票-5" class="headerlink" title="门票"></a>门票</h6><blockquote>
<p>由于徒步上山具有危险性，出于安全考虑，玉龙雪山景区不允许游客自己爬上去，必须乘坐索道或环保车。</p>
</blockquote>
<ul>
<li>玉龙雪山门票（进山费）（甘海子、冰川公园、蓝月谷、云杉坪、牦牛坪）：¥130/人</li>
<li>东巴谷：¥30/人</li>
<li>东巴万神园：¥15/人</li>
<li>东巴王国：¥35/人</li>
<li>玉水寨：¥50/人</li>
<li>玉柱擎天：¥40/人</li>
<li>玉峰寺：¥25/人</li>
<li>白沙壁画：¥30/人</li>
<li>古城维护费：¥50/人</li>
<li>景区内环保车：¥20元/人</li>
<li>玉龙雪山景区旅游索道（简称“冰川公园大索道”）全程票：¥120～180/人（含往返）</li>
<li>云杉坪旅游索道全程票：¥45/人</li>
<li>牦牛坪旅游索道全程票：¥50/人</li>
<li>乘坐索道自愿购买索道保险：¥2/人</li>
<li>印象丽江大型室外演出：演出票 ¥248/张，VIP票 ¥290/张</li>
<li>丽江千古情大型室内演出：门票 ¥310/张，VIP票 ¥38/张</li>
<li>氧气：丽江古城 ¥20～40/罐 山上服务站 ¥60～100/罐</li>
<li>租羽绒服：¥50/件</li>
</ul>
<h6 id="营业时间"><a href="#营业时间" class="headerlink" title="营业时间"></a>营业时间</h6><ul>
<li>景区营业时间：9:00—18:00</li>
<li>大索道：07:00-18:00(16:00停止售票)</li>
<li>蓝月谷：09:00 - 16:00</li>
</ul>
<h6 id="简介-5"><a href="#简介-5" class="headerlink" title="简介"></a>简介</h6><blockquote>
<p><a href="https://baike.baidu.com/item/%E7%8E%89%E9%BE%99%E9%9B%AA%E5%B1%B1/454679" target="_blank" rel="noopener">百科</a></p>
</blockquote>
<ul>
<li>玉龙雪山为云南省丽江市境内雪山群</li>
<li>在丽江北面约15千米处，<strong>全长75千米</strong>，全山的<strong>13座山峰</strong>由南向北纵向排列</li>
<li><strong>北半球最近赤道</strong>终年积雪的山脉</li>
<li>主峰扇子陡<strong>最高处海拔5596米</strong>，终年积雪</li>
<li>发育有<strong>亚欧大陆距离赤道最近</strong>的<strong>温带海洋性冰川</strong></li>
<li>玉龙雪山在纳西语中被称为“欧鲁”，意为白沙的银色山岩、“<strong>天山</strong>”。</li>
<li>其十三座雪峰连绵不绝，宛若一条“巨龙”腾越飞舞，故称为“<strong>玉龙</strong>”。</li>
<li>因其岩性主要为石灰岩与玄武岩，黑白分明，所以又称为“<strong>黑白雪山</strong>”。</li>
<li>是<strong>纳西人的神山</strong>，传说是纳西族保护神“三多”的化身。</li>
<li>1984年，云南玉龙雪山省级自然保护区建立。2001年，玉龙雪山被评为<strong>4A</strong>级旅游景区，2007年5月成为全国首批<strong>5A</strong>级旅游景区。</li>
<li><strong>中国最南的雪山</strong>、也是整个<strong>北半球最南</strong>的雪山</li>
<li>世界上北半球<strong>纬度最低</strong>、<strong>海拔最高</strong>的山峰。</li>
<li>国内<strong>唯一</strong>一个可以攀爬的雪山</li>
</ul>
<h6 id="内部景点-5"><a href="#内部景点-5" class="headerlink" title="内部景点"></a>内部景点</h6><p><img src="http://s1.lvjs.com.cn//uploads/pc/place2/2017-04-27/b9ea4acd-9e15-4f71-a361-40871788f6aa_720_.jpg" alt=""></p>
<p><img src="https://pic3.zhimg.com/v2-cf5a2295dff7d5286f844120f561311a_b.jpg" alt=""></p>
<p>黑白水河、甘海子、云杉坪、牦牛坪、扇子陡等。其中，云杉坪，又名“情死之地”，海拔3,240米，是纳西族人心中的圣洁之地。</p>
<p><strong>玉龙雪山景区的核心看点</strong></p>
<ol>
<li><p>冰川公园</p>
<p>缆车会将你送到4506米的高处，剩下的路程就是要自己一步步地登上去，直到4680米的最高处。站在观景台瞭望，屹立在天际的雪山冰峰尤为壮观。</p>
<p>上山过程中没有提供餐饮的地方，所以建议自备一些干粮以备不时之需。</p>
</li>
<li><p>蓝月谷&amp;白水河</p>
<p>蓝月谷是著名的爱情圣地，包含了四个湖：玉液湖、镜潭湖、蓝月湖和听涛湖。</p>
<p>从玉龙雪山下来，就可以乘坐环保车前往蓝月谷景区了。环保车会先经过云杉坪，如果想去云杉坪游览可以先计划好游览时间，云杉坪的游览时间约1—2小时，如果时间不够建议直接前往蓝月谷景区。</p>
<p>蓝月谷景区内每个景点之间都有电瓶车可以乘坐，但须另加收50元，一般不需要乘坐电瓶车（类似于观光车），走路一般约40分钟。</p>
</li>
<li><p>甘海子</p>
<p>“甘海子”又名“干海子”，本来是高山上的冰蚀湖泊，后来因为雪线上升，湖水慢慢减少直到干涸，就成了现在的甘海子</p>
<p>甘海子景区地势平缓起伏，是一个天然的大牧场。这里也是仰视玉龙雪山全貌最近的、也是最佳的地方，在这里不仅能够看到玉龙雪山十三个峰依次排开，还能与漫山放牧的野山羊、耗牛合影。</p>
<p>从蓝月谷可坐环保车前往甘海子大草甸。</p>
<p>玉龙雪山的游客中心就设在甘海子</p>
</li>
<li><p>印象丽江大型室外演出</p>
<p>《印象·丽江》是张艺谋导演的一个原生态实景演出作品，演出以雪山为背景，全长1个小时，上篇为“雪山印象”，下篇为“古城印象”。共分为《古道马帮》、《对酒雪山》、《天上人间》、《打跳组歌》、《鼓舞祭天》和《祈福仪式》六大部分。原生态的表演，气势恢弘，与自然同声，带给人心灵上的无比震撼。</p>
<p>《印象丽江》表演场地位于玉龙雪山甘海子蓝月谷剧场，演出票248元，VIP票290元。</p>
<p>演出时间：每天11:10、13:30两场（旺季会加演一场）</p>
</li>
<li><p>丽江千古情大型室内演出</p>
<p>丽江千古情是大型的室内专业表演，它用各种高科技手段和舞台表现诠释了纳西创世纪的生命礼赞、 泸沽湖女儿国的浪漫情怀、木府辉煌的兴盛和睦，马帮传奇的惊现震撼，玉龙第三国的生命绝唱。</p>
<p>《丽江千古情》的演出场地位于丽江宋城旅游区内，门票310元/张，VIP票380/张，包含宋城旅游区景区入园票以及《丽江千古情》演出票。演出时长60分钟。</p>
</li>
</ol>
<h6 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h6><ul>
<li><p>大玉龙景区 VS 玉龙雪山景区</p>
<p>丽江政府把玉龙雪山附近的著名旅游景点整合后称为大玉龙旅游景区。大玉龙景区包含玉龙雪山5A级旅游景区、玉水寨4A级景区、东巴谷生态文化园3A级景区，以及东巴万神园、东巴王国、玉峰寺、白沙壁画这四个景区。</p>
</li>
</ul>
<h6 id="疑惑点"><a href="#疑惑点" class="headerlink" title="疑惑点"></a>疑惑点</h6><ol>
<li><p>景点内环保车</p>
<p>不知道是不是每个点都有去另一个点的车，是不是只有一个方向？也不知道那个票是一次乘车的钱还是全程的。</p>
</li>
<li><p>大索道</p>
<p>官网订票的地方只给出了时间段，但不知道是上山和下山必须在买的这个时间段，还是只有上山是这个时间段，如果是上山是这个时间段，那下山不管多晚都能下来吗？比如坐最后一趟索道上的山，那最晚几点下山？</p>
<p>还有就是如果提前到了能检票上山吗？比如买的是 17:30 ～ 18:00 的，但是 17:00 就排到了检票口，可以进吗？</p>
</li>
</ol>
<h5 id="丽江古城"><a href="#丽江古城" class="headerlink" title="丽江古城"></a>丽江古城</h5><blockquote>
<p><a href="http://www.ljgc517.com/" target="_blank" rel="noopener">官网</a></p>
</blockquote>
<h6 id="门票-6"><a href="#门票-6" class="headerlink" title="门票"></a>门票</h6><ul>
<li>古城维护费（也称“古维费”）：¥50/人</li>
<li>万古楼：¥50/人</li>
</ul>
<h6 id="营业时间-1"><a href="#营业时间-1" class="headerlink" title="营业时间"></a>营业时间</h6><ul>
<li>古城：全天</li>
<li>万古楼：09:00-17:00</li>
</ul>
<h6 id="简介-6"><a href="#简介-6" class="headerlink" title="简介"></a>简介</h6><blockquote>
<p><a href="[https://baike.baidu.com/item/%E4%B8%BD%E6%B1%9F%E5%8F%A4%E5%9F%8E/304665](https://baike.baidu.com/item/丽江古城/304665)">百科</a></p>
</blockquote>
<ul>
<li>又名大研古镇</li>
<li>丽江为第二批被批准的中国历史文化名城之一，是中国以<strong>整座古城</strong>申报世界文化遗产获得成功的两座古城之一（平遥古城、丽江古城）</li>
<li>2019年1月1日起，世界文化遗产丽江古城保护管理局根据云南省发展和改革委员会、云南省财政厅《关于降低丽江古城维护费收费标准的通知》，面向游客收取的丽江古城维护费收费标准从每人次80元调整为每人次50元，征收对象、范围、方式及免征范围保持不变。</li>
</ul>
<h6 id="内部景点-6"><a href="#内部景点-6" class="headerlink" title="内部景点"></a>内部景点</h6><blockquote>
<p><a href="http://www.ljgc517.com/gcjd2v2/index.htm" target="_blank" rel="noopener">古城景点 | 官网</a></p>
</blockquote>
<p><img src="http://www.17u1u.com/file/image/2015/0111/1420963071.jpg" alt=""></p>
<ul>
<li><p>大水车</p>
</li>
<li><p>四方街</p>
</li>
<li><p>木府</p>
<p>北有故宫，南有木府</p>
<p>不到木府，等于不到丽江</p>
</li>
<li><p>万古楼</p>
<p>狮子山山顶有中国一柱通顶不连接的全木结构建筑第一楼——万古楼。</p>
</li>
<li><p>黑龙潭公园</p>
</li>
</ul>
<h6 id="避坑指南"><a href="#避坑指南" class="headerlink" title="避坑指南"></a>避坑指南</h6><ul>
<li><p>花马街千万不要去</p>
</li>
<li><p>cosplay 拍照时要花钱的，别随便拍</p>
</li>
</ul>
<h5 id="束河古镇"><a href="#束河古镇" class="headerlink" title="束河古镇"></a>束河古镇</h5><blockquote>
<p><a href="http://www.ljshuhe.com/" target="_blank" rel="noopener">官网</a></p>
</blockquote>
<h3 id="酒店"><a href="#酒店" class="headerlink" title="酒店"></a>酒店</h3><h4 id="昆明-1"><a href="#昆明-1" class="headerlink" title="昆明"></a>昆明</h4><iframe width="100%" height="400" frameborder="no"  src="https://libo9527.github.io/static/map/amap/20191001/hotel/kunming/index.html">
</iframe>

<h4 id="大理-1"><a href="#大理-1" class="headerlink" title="大理"></a>大理</h4><iframe width="100%" height="400" frameborder="no"  src="https://libo9527.github.io/static/map/amap/20191001/hotel/dali/index.html">
</iframe>

<h4 id="丽江-1"><a href="#丽江-1" class="headerlink" title="丽江"></a>丽江</h4><iframe width="100%" height="400" frameborder="no"  src="https://libo9527.github.io/static/map/amap/20191001/hotel/lijiang/index.html">
</iframe>

<h3 id="美食"><a href="#美食" class="headerlink" title="美食"></a>美食</h3><blockquote>
<p>杜杜推荐：桥香园过桥米线、豆花米线、饵丝、嘉华鲜花饼、云腿月饼、火腿腊肉、牛撒撇、柠檬撒撇</p>
</blockquote>
<h4 id="昆明-2"><a href="#昆明-2" class="headerlink" title="昆明"></a>昆明</h4><h4 id="大理-2"><a href="#大理-2" class="headerlink" title="大理"></a>大理</h4><p>白族三道茶、凉鸡米线、喜洲破酥粑粑、大理生皮、砂锅鱼、烧饵块、粑肉饵丝，永平黄焖鸡、烤乳扇</p>
<h4 id="丽江-2"><a href="#丽江-2" class="headerlink" title="丽江"></a>丽江</h4><p>鸡豆凉粉、丽江粑粑、纳西烤鱼、土鸡米线、过桥米线、腊排骨、黑山羊火锅、各种野生菌（松茸、鸡枞、羊肚菌、牛肝菌等）</p>
<p>丽江古城内的大石桥附近、忠义市场、四方街都是小吃集中地。新城的美食主要聚集在七星街的华都商贸城里，以及新城的象山市场这几个地方。</p>
<p><strong>水果可以在古城里的忠义市场去买。</strong>非常大的一个市场，在古城里面生活的人也在这里买东西。市场主要卖水果、蔬菜、肉之类的。价格很便宜。</p>
<p><strong>有两条酒吧比较集中的街道</strong>，丽江酒吧一般都没有最低消费。</p>
<ul>
<li>四方街酒吧一条街。</li>
<li>饮玉巷。</li>
</ul>
<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><h4 id="必带物品"><a href="#必带物品" class="headerlink" title="必带物品"></a>必带物品</h4><ul>
<li><p>身份证</p>
</li>
<li><p>少量现金</p>
</li>
<li><p>药品</p>
<p>晕车药、感冒药、消炎药、外伤药、葡萄糖…以及个人常用药品。</p>
</li>
<li><p>雨伞</p>
<p>云南天气变化不定，出门前一定要备好雨伞。</p>
</li>
<li><p>防晒</p>
<p>高海拔地区日照强烈，出门前一定要注意防晒工作</p>
</li>
<li><p>高能食品</p>
<p>准备一些士力架、巧克力、牛肉干、糖果、香蕉之类的高热量食物补充能量。</p>
</li>
</ul>
<h3 id="费用明细"><a href="#费用明细" class="headerlink" title="费用明细"></a>费用明细</h3><table>
<thead>
<tr>
<th>项目</th>
<th>日期</th>
<th>类别</th>
<th>单价</th>
<th>数量</th>
<th>总价</th>
<th>人均</th>
<th>涉及人员</th>
<th>票据截图</th>
</tr>
</thead>
<tbody><tr>
<td>深圳 - 广州东</td>
<td>2019-10-01</td>
<td>火车票</td>
<td>¥79.5</td>
<td>1</td>
<td>¥79.5</td>
<td>¥79.5</td>
<td>李</td>
<td><a href="https://libo9527.github.io/static/map/amap/20191001/images/sz-gz.png" target="_blank"><i><img width="30px" src="https://cdn1.iconfinder.com/data/icons/social-17/48/photos2-512.png" alt="icon"></i></a></td>
</tr>
<tr>
<td>广州南 - 昆明南</td>
<td>2019-10-02</td>
<td>高铁票</td>
<td>¥434.5</td>
<td>2</td>
<td>¥869</td>
<td>¥434.5</td>
<td>李、浮</td>
<td><a href="https://libo9527.github.io/static/map/amap/20191001/images/gzn-kmn.png" target="_blank"><i><img width="30px" src="https://cdn1.iconfinder.com/data/icons/social-17/48/photos2-512.png" alt="icon"></i></a></td>
</tr>
<tr>
<td>昆明 - 丽江</td>
<td>2019-10-03</td>
<td>火车票</td>
<td>¥220</td>
<td>4</td>
<td>¥880</td>
<td>¥220</td>
<td>李、浮、谭、党</td>
<td><a href="https://libo9527.github.io/static/map/amap/20191001/images/km-lj.png" target="_blank"><i><img width="30px" src="https://cdn1.iconfinder.com/data/icons/social-17/48/photos2-512.png" alt="icon"></i></a></td>
</tr>
<tr>
<td>丽江 - 大理</td>
<td>2019-10-04</td>
<td>火车票</td>
<td>¥34</td>
<td>4</td>
<td>¥136</td>
<td>¥34</td>
<td>李、浮、谭、党</td>
<td><a href="https://libo9527.github.io/static/map/amap/20191001/images/lj-dl.png" target="_blank"><i><img width="30px" src="https://cdn1.iconfinder.com/data/icons/social-17/48/photos2-512.png" alt="icon"></i></a></td>
</tr>
<tr>
<td>大理 - 昆明</td>
<td>2019-10-05</td>
<td>火车票</td>
<td>¥145</td>
<td>4</td>
<td>¥580</td>
<td>¥145</td>
<td>李、浮、谭、党</td>
<td><a href="https://libo9527.github.io/static/map/amap/20191001/images/dl-km.png" target="_blank"><i><img width="30px" src="https://cdn1.iconfinder.com/data/icons/social-17/48/photos2-512.png" alt="icon"></i></a></td>
</tr>
<tr>
<td>昆明南 - 广州南</td>
<td>2019-10-07</td>
<td>高铁票</td>
<td>¥434.5</td>
<td>2</td>
<td>¥869</td>
<td>¥434.5</td>
<td>李、浮</td>
<td><a href="https://libo9527.github.io/static/map/amap/20191001/images/kmn-gzn.png" target="_blank"><i><img width="30px" src="https://cdn1.iconfinder.com/data/icons/social-17/48/photos2-512.png" alt="icon"></i></a></td>
</tr>
<tr>
<td>汉庭优佳昆明东华酒店</td>
<td>2019-10-02</td>
<td>酒店</td>
<td>¥205</td>
<td>2</td>
<td>¥410</td>
<td>¥102.5</td>
<td>李、浮、谭、党</td>
<td><a href="https://libo9527.github.io/static/map/amap/20191001/images/km-hotel-01.png" target="_blank"><i><img width="30px" src="https://cdn1.iconfinder.com/data/icons/social-17/48/photos2-512.png" alt="icon"></i></a><a href="https://libo9527.github.io/static/map/amap/20191001/images/kn-hotel-02.png" target="_blank"><i><img width="30px" src="https://cdn1.iconfinder.com/data/icons/social-17/48/photos2-512.png" alt="icon"></i></a></td>
</tr>
<tr>
<td>汉庭丽江古城福星路酒店</td>
<td>2019-10-03</td>
<td>酒店</td>
<td>¥283</td>
<td>2</td>
<td>¥566</td>
<td>¥141.5</td>
<td>李、浮、谭、党</td>
<td><a href="https://libo9527.github.io/static/map/amap/20191001/images/lj-hotel.png" target="_blank"><i><img width="30px" src="https://cdn1.iconfinder.com/data/icons/social-17/48/photos2-512.png" alt="icon"></i></a></td>
</tr>
<tr>
<td>大理古城米畔·轻宿客栈</td>
<td>2019-10-04</td>
<td>民宿</td>
<td>¥319.20</td>
<td>2</td>
<td>¥638.4</td>
<td>¥159.6</td>
<td>李、浮、谭、党</td>
<td><a href="https://libo9527.github.io/static/map/amap/20191001/images/dl-hotel.png" target="_blank"><i><img width="30px" src="https://cdn1.iconfinder.com/data/icons/social-17/48/photos2-512.png" alt="icon"></i></a></td>
</tr>
<tr>
<td>汉庭昆明北京路酒店</td>
<td>2019-10-05</td>
<td>酒店</td>
<td>¥175</td>
<td>2</td>
<td>¥350</td>
<td>¥87.5</td>
<td>李、浮、谭、党</td>
<td><a href="https://libo9527.github.io/static/map/amap/20191001/images/km-hotel-03.png" target="_blank"><i><img width="30px" src="https://cdn1.iconfinder.com/data/icons/social-17/48/photos2-512.png" alt="icon"></i></a></td>
</tr>
<tr>
<td>汉庭昆明呈贡酒店</td>
<td>2019-10-06</td>
<td>酒店</td>
<td>¥126</td>
<td>2</td>
<td>¥252</td>
<td>¥63</td>
<td>李、浮、谭、党</td>
<td><a href="https://libo9527.github.io/static/map/amap/20191001/images/km-hotel-04.png" target="_blank"><i><img width="30px" src="https://cdn1.iconfinder.com/data/icons/social-17/48/photos2-512.png" alt="icon"></i></a></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>总计：¥5629.9</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>李：¥1901.6</td>
<td>浮：¥1822.1</td>
<td>谭：¥953.1</td>
<td>党：¥953.1</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>Tour</category>
      </categories>
      <tags>
        <tag>Tour</tag>
      </tags>
  </entry>
  <entry>
    <title>Using Triggers in ORACLE</title>
    <url>/2019/09/17/Using-Triggers-in-ORACLE/</url>
    <content><![CDATA[<img src="https://i.ytimg.com/vi/R3fvX_xf5P4/maxresdefault.jpg" width="100%"/>

<a id="more"></a>

<h2 id="触发器"><a href="#触发器" class="headerlink" title="触发器"></a>触发器</h2><blockquote>
<p><a href="https://docs.oracle.com/database/121/TDDDG/tdddg_triggers.htm#TDDDG50000" target="_blank" rel="noopener">Using Triggers | ORACLE</a></p>
<p>A <strong>trigger</strong> is a PL/SQL unit that is stored in the database and (if it is in the enabled state) automatically executes (“fires”) in response to a specified event.</p>
<p><a href="https://www.cnblogs.com/huyong/archive/2011/04/27/2030466.html" target="_blank" rel="noopener">ORACLE PL/SQL编程之八：把触发器说透</a></p>
</blockquote>
<p>触发器在数据库里以独立的对象存储，它与存储过程和函数不同的是，存储过程与函数需要用户显示调用才执行，而触发器是由一个事件来启动运行。即触发器是当某个事件发生时自动地隐式运行。并且，触发器不能接收参数。所以运行触发器就叫触发或点火（firing）。</p>
<p>ORACLE 事件指的是对数据库的表或视图进行的 INSERT、UPDATE 及 DELETE 操作。ORACLE将触发器的功能扩展到了触发 ORACLE，如数据库的启动与关闭等。</p>
<p>所以触发器常用来完成由数据库的完整性约束难以完成的复杂业务规则的约束，或用来监视对数据库的各种操作，实现审计的功能。 </p>
<h3 id="组成"><a href="#组成" class="headerlink" title="组成"></a>组成</h3><ul>
<li><p>触发事件</p>
<p>引起触发器被触发的事件。 例如：DML语句(INSERT, UPDATE, DELETE语句对表或视图执行数据处理操作)、DDL语句（如CREATE、ALTER、DROP语句在数据库中创建、修改、删除模式对象）、数据库系统事件（如系统启动或退出、异常错误）、用户事件（如登录或退出数据库）。</p>
</li>
<li><p>触发时间</p>
<p>即该 TRIGGER 是在触发事件发生之前（BEFORE）还是之后（AFTER）触发，也就是触发事件和该 TRIGGER 的操作顺序。</p>
</li>
<li><p>触发操作</p>
<p>即该 TRIGGER 被触发之后的目的和意图，正是触发器本身要做的事情。 例如：PL/SQL 块。</p>
</li>
<li><p>触发对象</p>
<p>包括表、视图、模式、数据库。只有在这些对象上发生了符合触发条件的触发事件，才会执行触发操作。</p>
</li>
<li><p>触发条件</p>
<p>由 WHEN 子句指定一个逻辑表达式。只有当该表达式的值为 TRUE 时，遇到触发事件才会自动执行触发器，使其执行触发操作。</p>
</li>
<li><p>触发频率</p>
<p>说明触发器内定义的动作被执行的次数。即语句级(STATEMENT)触发器和行级(ROW)触发器。</p>
</li>
</ul>
<h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><p>根据<strong>触发频率</strong>分类：</p>
<ul>
<li><p>语句级(STATEMENT)触发器：</p>
<p>指当触发事件发生时，该触发器只执行一次；</p>
</li>
<li><p>行级(ROW)触发器：</p>
<p>指当触发事件发生时，对受到该操作影响的每一行数据，触发器都单独执行一次。</p>
</li>
</ul>
<p>根据<strong>触发事件类型</strong>分类：</p>
<ul>
<li><p>DML 触发器</p>
<p>ORACLE可以在DML语句进行触发，可以在DML操作前或操作后进行触发，并且可以对每个行或语句操作上进行触发。</p>
</li>
<li><p>替代触发器</p>
<p>由于在ORACLE里，不能直接对由两个以上的表建立的视图进行操作。所以给出了替代触发器。它就是ORACLE 8专门为进行视图操作的一种处理方法。 </p>
</li>
<li><p>系统触发器</p>
<p>ORACLE 8i 提供了第三种类型的触发器叫系统触发器。它可以在ORACLE数据库系统的事件中进行触发，如ORACLE系统的启动与关闭等。 </p>
</li>
</ul>
<h3 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h3><blockquote>
<p><a href="https://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_7004.htm" target="_blank" rel="noopener">CREATE TRIGGER | ORACLE</a></p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> [ <span class="keyword">OR</span> <span class="keyword">REPLACE</span> ] <span class="keyword">TRIGGER</span> [ schema. ]<span class="keyword">trigger</span></span><br><span class="line">   &#123; <span class="keyword">BEFORE</span> | <span class="keyword">AFTER</span> | INSTEAD <span class="keyword">OF</span> &#125;</span><br><span class="line">   &#123; dml_event_clause</span><br><span class="line">   | &#123; ddl_event [ <span class="keyword">OR</span> ddl_event ]...</span><br><span class="line">     | database_event [ <span class="keyword">OR</span> database_event ]...</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">ON</span> &#123; [ schema. ]<span class="keyword">SCHEMA</span></span><br><span class="line">        | <span class="keyword">DATABASE</span></span><br><span class="line">        &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   [ <span class="keyword">WHEN</span> (condition) ]</span><br><span class="line">   &#123; pl/sql_block | call_procedure_statement &#125; ;</span><br></pre></td></tr></table></figure>

<p>eg：</p>
<p>在给 CUSTOMER_RAW_TEST 表插入数据时自动执行 <code>UPDATE GLOBAL_LOCATION_TEST SET COLLECTED_QTY = COLLECTED_QTY + 1 ;</code></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> <span class="keyword">REPLACE</span> <span class="keyword">TRIGGER</span> Count_Collected_Qty </span><br><span class="line"><span class="keyword">AFTER</span> <span class="keyword">INSERT</span>  </span><br><span class="line"><span class="keyword">ON</span> CUSTOMER_RAW_TEST</span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">each</span> <span class="keyword">ROW</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">		<span class="keyword">UPDATE</span> GLOBAL_LOCATION_TEST <span class="keyword">SET</span> COLLECTED_QTY = COLLECTED_QTY + <span class="number">1</span> ;</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>

<h4 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h4><ul>
<li><p>触发器不接受参数</p>
</li>
<li><p>一个表上最多可有12个触发器，但同一时间、同一事件、同一类型的触发器只能有一个。并各触发器之间不能有矛盾。</p>
</li>
<li><p>在一个表上的触发器越多，对在该表上的DML操作的性能影响就越大。</p>
</li>
<li><p>触发器最大为32KB。若确实需要，可以先建立过程，然后在触发器中用CALL语句进行调用。</p>
</li>
<li><p><strong>在触发器的执行部分只能用DML语句（SELECT、INSERT、UPDATE、DELETE），不能使用DDL语句（CREATE、ALTER、DROP）</strong></p>
</li>
<li><p>触发器中不能包含事务控制语句(COMMIT，ROLLBACK，SAVEPOINT)。因为触发器是触发语句的一部分，触发语句被提交、回退时，触发器也被提交、回退了。</p>
</li>
<li><p>在触发器主体中调用的任何过程、函数，都不能使用事务控制语句。</p>
</li>
<li><p>在触发器主体中不能申明任何 Long 和 blob 变量。新值 new 和旧值 old 也不能向表中的任何long和blob列。</p>
</li>
<li><p>不同类型的触发器(如DML触发器、INSTEAD OF触发器、系统触发器)的语法格式和作用有较大区别。 </p>
</li>
</ul>
<h3 id="查找"><a href="#查找" class="headerlink" title="查找"></a>查找</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> user_triggers;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> object_name <span class="keyword">FROM</span> user_objects <span class="keyword">WHERE</span> object_type = <span class="string">'TRIGGER'</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> all_triggers <span class="keyword">WHERE</span> table_name = <span class="string">'CUSTOMER_RAW_TEST'</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> user_source <span class="keyword">WHERE</span> <span class="keyword">name</span> = <span class="string">'COUNT_COLLECTED_QTY'</span>;</span><br></pre></td></tr></table></figure>

<h3 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TRIGGER</span> COUNT_COLLECTED_QTY;</span><br></pre></td></tr></table></figure>

<p>注：当删除表或视图时，建立在这些对象上的触发器也随之删除。 </p>
<h3 id="禁用-启用"><a href="#禁用-启用" class="headerlink" title="禁用/启用"></a>禁用/启用</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> TIGGER trigger_name [<span class="keyword">DISABLE</span> | <span class="keyword">ENABLE</span> ];</span><br></pre></td></tr></table></figure>

<p>ALTER TRIGGER 语句只能改变单个触发器的状态，而 ALTER TABLE 语句则能够改变与指定表相关的所有触发器的使用状态。格式为： </p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> [schema.]table_name &#123;<span class="keyword">ENABLE</span>|<span class="keyword">DISABLE</span>&#125; <span class="keyword">ALL</span> <span class="keyword">TRIGGERS</span>;</span><br></pre></td></tr></table></figure>

<h3 id="查看权限"><a href="#查看权限" class="headerlink" title="查看权限"></a>查看权限</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> owner, object_name, object_type, <span class="keyword">status</span> <span class="keyword">FROM</span> dba_objects <span class="keyword">WHERE</span> object_name = <span class="string">'COUNT_COLLECTED_QTY'</span>;</span><br></pre></td></tr></table></figure>

<h3 id="使用-Navicat-管理触发器"><a href="#使用-Navicat-管理触发器" class="headerlink" title="使用 Navicat 管理触发器"></a>使用 Navicat 管理触发器</h3><blockquote>
<p><a href="http://www.formysql.com/wenti/oracle-chufaqi.html" target="_blank" rel="noopener">浅谈 Navicat for Oracle 表触发器</a></p>
</blockquote>
]]></content>
      <categories>
        <category>Oracle</category>
        <category>Trigger</category>
      </categories>
      <tags>
        <tag>Trigger</tag>
      </tags>
  </entry>
  <entry>
    <title>Study Notes of NPM</title>
    <url>/2019/08/30/Study-Notes-of-NPM/</url>
    <content><![CDATA[<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/db/Npm-logo.svg/1200px-Npm-logo.svg.png" width="100%"/>

<a id="more"></a>

<h2 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h2><h3 id="init"><a href="#init" class="headerlink" title="init"></a>init</h3><p>快速生成<code>package.json</code>文件</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> --yes 参数能够帮助我们快速生成默认的package.json</span></span><br><span class="line">npm init --yes</span><br></pre></td></tr></table></figure>

<h2 id="npm-运行模块命令"><a href="#npm-运行模块命令" class="headerlink" title="npm 运行模块命令"></a>npm 运行模块命令</h2><blockquote>
<p><a href="https://blog.csdn.net/qq_21998595/article/details/80460673" target="_blank" rel="noopener">关于局部安装npm模块找不到命令的问题分析及解决方案</a></p>
</blockquote>
<p>命令行运行 npm 局部安装的包：</p>
<ol>
<li><p>在相应命令前加上路径 <code>node_modules/.bin/</code></p>
<p>例如：<code>node_modules/.bin/lessc 1-nest.less test.css</code></p>
</li>
<li><p>package.json 中配置 scripts</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">  "lessc": "less index.js"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
]]></content>
      <categories>
        <category>npm</category>
      </categories>
      <tags>
        <tag>npm</tag>
      </tags>
  </entry>
  <entry>
    <title>Study Notes of Apache Commons</title>
    <url>/2019/08/30/Study-Notes-of-Apache-Commons/</url>
    <content><![CDATA[<img src="https://commons.apache.org/images/commons-logo.png" width="100%"/>

<a id="more"></a>

<h2 id="Commons-Lang"><a href="#Commons-Lang" class="headerlink" title="Commons Lang"></a>Commons Lang</h2><blockquote>
<h2 id="Commons-Lang-1"><a href="#Commons-Lang-1" class="headerlink" title="Commons Lang"></a>Commons Lang</h2><p>The standard Java libraries fail to provide enough methods for manipulation of its core classes. Apache Commons Lang provides these extra methods.</p>
<p>Lang provides a host of helper utilities for the java.lang API, notably String manipulation methods, basic numerical methods, object reflection, concurrency, creation and serialization and System properties. Additionally it contains basic enhancements to java.util.Date and a series of utilities dedicated to help with building methods, such as hashCode, toString and equals.</p>
</blockquote>
<h3 id="StringEscapeUtils"><a href="#StringEscapeUtils" class="headerlink" title="StringEscapeUtils"></a>StringEscapeUtils</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  System.out.println(<span class="string">"&amp;apos;s-Hertogenbosch"</span>);</span><br><span class="line">  System.out.println(StringEscapeUtils.unescapeXml(<span class="string">"&amp;apos;s-Hertogenbosch"</span>));</span><br><span class="line">  <span class="comment">//&amp;apos;s-Hertogenbosch</span></span><br><span class="line">	<span class="comment">//'s-Hertogenbosch</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Apache</category>
        <category>Commons</category>
      </categories>
      <tags>
        <tag>Apache Commons</tag>
      </tags>
  </entry>
  <entry>
    <title>Study Notes of Apache POI</title>
    <url>/2019/08/30/Study-Notes-of-Apache-POI/</url>
    <content><![CDATA[<img src="http://poi.apache.org/images/project-header.png" width="100%"/>

<a id="more"></a>

<blockquote>
<p><a href="https://poi.apache.org/index.html" target="_blank" rel="noopener">Apache POI</a></p>
</blockquote>
<h2 id="HSSF，XSSF，SXSSF的区别"><a href="#HSSF，XSSF，SXSSF的区别" class="headerlink" title="HSSF，XSSF，SXSSF的区别"></a>HSSF，XSSF，SXSSF的区别</h2><blockquote>
<p><a href="https://blog.csdn.net/SudaDays/article/details/90669237" target="_blank" rel="noopener">POI快速入门教程 | HSSF，XSSF，SXSSF的区别</a></p>
</blockquote>
<p>简单的说，HSSF 对应旧的 xls 格式，XSSF 对应新的 xlsx 格式，SXSSF 是在 XSSF 的基础上，支持导出大批量的 excel 数据。</p>
]]></content>
      <categories>
        <category>Apache</category>
        <category>POI</category>
      </categories>
      <tags>
        <tag>POI</tag>
      </tags>
  </entry>
  <entry>
    <title>Study Notes of Android</title>
    <url>/2019/08/30/Study-Notes-of-Android/</url>
    <content><![CDATA[<img src="cover" width="100%"/>

<a id="more"></a>

<h2 id="Android屏幕区域划分"><a href="#Android屏幕区域划分" class="headerlink" title="Android屏幕区域划分"></a>Android屏幕区域划分</h2><blockquote>
<p><a href="https://blog.csdn.net/zengruiyue/article/details/100116418" target="_blank" rel="noopener">Android 自定义View之坐标系</a></p>
</blockquote>
<p><img src="https://p1htmlkernalweb.mybluemix.net/image/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvemVuZ3J1aXl1ZS9hcnRpY2xlL2RldGFpbHMvMTAwMTE2NDE4_aHR0cHM6Ly9pbWctYmxvZy5jc2RuaW1nLmNuLzIwMTkwODI4MTYzNzU5MzIyLnBuZz94LW9zcy1wcm9jZXNzPWltYWdlL3dhdGVybWFyayx0eXBlX1ptRnVaM3BvWlc1bmFHVnBkR2ssc2hhZG93XzEwLHRleHRfYUhSMGNITTZMeTlpYkc5bkxtTnpaRzR1Ym1WMEwzcGxibWR5ZFdsNWRXVT0sc2l6ZV8xNixjb2xvcl9GRkZGRkYsdF83MA==" alt=""></p>
]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title>Study Notes of HTML</title>
    <url>/2019/08/30/Study-Notes-of-HTML/</url>
    <content><![CDATA[<img src="https://engineering.eckovation.com/wp-content/uploads/2017/09/wallhaven-439017.png" width="100%"/>

<a id="more"></a>

<h2 id="支持跨域请求的标签"><a href="#支持跨域请求的标签" class="headerlink" title="支持跨域请求的标签"></a>支持跨域请求的标签</h2><ul>
<li><code>&lt;img src=XXX&gt;</code></li>
<li><code>&lt;link href=XXX&gt;</code></li>
<li><code>&lt;script src=XXX&gt;</code></li>
</ul>
<h2 id="Content-Type"><a href="#Content-Type" class="headerlink" title="Content Type"></a>Content Type</h2><blockquote>
<p> <a href="https://blog.csdn.net/xiaoyu19910321/article/details/79279364" target="_blank" rel="noopener">常见 content-type对应表</a></p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">文件扩展名</th>
<th align="center">Content-Type(Mime-Type)</th>
</tr>
</thead>
<tbody><tr>
<td align="center">.xlsx</td>
<td align="center">application/vnd.openxmlformats-officedocument.spreadsheetml.sheet</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>Front-end</category>
        <category>HTML</category>
      </categories>
      <tags>
        <tag>HTML</tag>
      </tags>
  </entry>
  <entry>
    <title>Study Notes of Illustrator</title>
    <url>/2019/08/23/Study-Notes-of-Illustrator/</url>
    <content><![CDATA[<img src="https://www.adobe.com/content/dam/acom/en/products/illustrator/max2018/ai-video_1000x494.jpg" width="100%"/>

<a id="more"></a>

<h2 id="以几何中心点为起始点绘制图形"><a href="#以几何中心点为起始点绘制图形" class="headerlink" title="以几何中心点为起始点绘制图形"></a>以几何中心点为起始点绘制图形</h2><p>Alt + 鼠标左键</p>
<h2 id="绘制多边形"><a href="#绘制多边形" class="headerlink" title="绘制多边形"></a>绘制多边形</h2><p>鼠标左键 + ↑ / ↓（增加/减少边数）</p>
<h2 id="绘制星形"><a href="#绘制星形" class="headerlink" title="绘制星形"></a>绘制星形</h2><ul>
<li>鼠标左键 + ↑ / ↓（增加/减少角数）</li>
<li>鼠标左键 + Command（拉伸角）</li>
</ul>
<h2 id="图形旋转"><a href="#图形旋转" class="headerlink" title="图形旋转"></a>图形旋转</h2><p>鼠标左键 + Shift 以 45º 为梯度旋转</p>
<h2 id="再次变换"><a href="#再次变换" class="headerlink" title="再次变换"></a>再次变换</h2><h2 id="在线工具"><a href="#在线工具" class="headerlink" title="在线工具"></a>在线工具</h2><blockquote>
<p><a href="https://www.baidu.com/link?url=yzts6uPF8dwqNWIhicc3LHao1gVTzv9HImeHQt-9zVCQxgTuUAHInTXG8jCuXrdt&wd=&eqid=99d6ef4900009c97000000065d635878" target="_blank" rel="noopener"><em>Color</em> <em>Scheme</em> Designer 3_高级在线配色器_配色网</a></p>
</blockquote>
]]></content>
      <categories>
        <category>Ai</category>
      </categories>
      <tags>
        <tag>Ai</tag>
      </tags>
  </entry>
  <entry>
    <title>Circule Reference in Fastjson</title>
    <url>/2019/08/17/Circule-Reference-in-Fastjson/</url>
    <content><![CDATA[<img src="https://i.loli.net/2019/08/17/YvAZiPnxFgtGj6X.png" width="100%"/>

<a id="more"></a>

<blockquote>
<p><a href="https://github.com/alibaba/fastjson/wiki/SerializerFeature_DisableCircularReferenceDetect_cn" target="_blank" rel="noopener">SerializerFeature_DisableCircularReferenceDetect_cn | fastjson-GitHub</a></p>
<p>在 fastjson 中，会自动检测循环引用，并且输出为 fastjson 专有的引用表示格式。但这个不能被其他 JSON 库识别，也不能被浏览器识别，所以 fastjson 提供了关闭循环引用检测的功能。</p>
</blockquote>
<h2 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h2><p>项目中的一个接口返回的 json 数据出现引用格式：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">"lastDoneCollectTask":&#123;</span><br><span class="line">  "$ref":"$.data.lastCreateCollectTask"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="问题原因"><a href="#问题原因" class="headerlink" title="问题原因"></a>问题原因</h2><p>项目中将 Spring Boot 内置的 JSON 改成了 fastjson，而 fastjson 会自动进行重复引用/循环引用检测，并将循环应用改为自己定义的引用格式。</p>
<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><p>关闭 fastjson 循环引用检测的功能</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">JSON.toJSONString(obj, SerializerFeature.DisableCircularReferenceDetect);</span><br></pre></td></tr></table></figure>

<h2 id="疑问🤔️"><a href="#疑问🤔️" class="headerlink" title="疑问🤔️"></a><del>疑问🤔️</del></h2><blockquote>
<p>引用分为两种，重复引用和循环引用</p>
<p>重复引用指一个对象重复出现多次，循环引用指相互引用，，这个问题比较严重，如果处理不好就会出现StackOverflowError异常</p>
</blockquote>
<p>举个例子，有两个类分别如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> B b1;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> B b2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">B</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>执行如下代码返回的结果中依然存在引用，难道这也属于循环引用吗</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  A a = <span class="keyword">new</span> A();</span><br><span class="line">  B b = <span class="keyword">new</span> B();</span><br><span class="line">  b.setId(<span class="number">123</span>);</span><br><span class="line">  a.setB1(b);</span><br><span class="line">  a.setB2(a.getB1());</span><br><span class="line"></span><br><span class="line">  System.out.println(JSON.toJSONString(a));</span><br><span class="line">  <span class="comment">// &#123;"b1":&#123;"id":123&#125;,"b2":&#123;"$ref":"$.b1"&#125;,"id":0&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Fastjson</category>
      </categories>
      <tags>
        <tag>Fastjson</tag>
      </tags>
  </entry>
  <entry>
    <title>Study Notes of Axure</title>
    <url>/2019/08/16/Study-Notes-of-Axure/</url>
    <content><![CDATA[<img src="http://humbleux.com/wp-content/uploads/edd/2017/03/Axure-responsive-Store-template-1-Cover.png" width="100%"/>

<a id="more"></a>

<h2 id="界面详解"><a href="#界面详解" class="headerlink" title="界面详解"></a>界面详解</h2><blockquote>
<p><a href="https://www.axure.com.cn/78577/" target="_blank" rel="noopener">Axure RP 9 教程—基本功能介绍1-界面介绍</a></p>
</blockquote>
<h2 id="移动画布"><a href="#移动画布" class="headerlink" title="移动画布"></a>移动画布</h2><ul>
<li>Axure RP 9支持负坐标，可以通过按住空格键不放，拖动画布来调整编辑区域的位置。</li>
<li>按住空格键不放，通过鼠标滚轮垂直方向移动画布，按住 Shift 键不放，通过鼠标滚轮水平方向移动画布</li>
<li>点击画布坐标尺左上角的十字交叉（Command + 9）可以回到原点。</li>
</ul>
<h2 id="钢笔"><a href="#钢笔" class="headerlink" title="钢笔"></a>钢笔</h2><h3 id="绘制路径"><a href="#绘制路径" class="headerlink" title="绘制路径"></a>绘制路径</h3><ul>
<li>封闭路径：开始锚点与结束锚点重合</li>
<li>开放路径：双击或ESC</li>
<li>直转曲：按住左键拖动，根据曲线杆调整弯曲方向</li>
</ul>
<h3 id="编辑路径"><a href="#编辑路径" class="headerlink" title="编辑路径"></a>编辑路径</h3><ul>
<li>编辑路径：点击控点激活，拖动锚点编辑</li>
<li>多选：按住 Shift 选</li>
<li>直曲切换：双击锚点/右键选择直或曲</li>
<li>拖动曲线杆调整弯曲程度</li>
<li>按住 Command 可以仅调整一边的弧度</li>
</ul>
<h3 id="锚点增删"><a href="#锚点增删" class="headerlink" title="锚点增删"></a>锚点增删</h3><ul>
<li>点击路径，新建锚点</li>
<li>删除锚点：选择锚点，Del删除/右键删除</li>
</ul>
<h2 id="母版"><a href="#母版" class="headerlink" title="母版"></a>母版</h2><p>母版是为了让页面中某一模块内容可以重复使用，并且在修改内容时能够同步更新。例如网站主导航、页脚等。</p>
<ul>
<li>可以利用动态面板的【固定到浏览器】功能实现网站悬浮小窗口</li>
</ul>
<h2 id="单位"><a href="#单位" class="headerlink" title="单位"></a>单位</h2><h3 id="屏幕尺寸"><a href="#屏幕尺寸" class="headerlink" title="屏幕尺寸"></a>屏幕尺寸</h3><p>屏幕大小，屏幕对角线的长度，单位是英寸，1英寸 = 2.54 厘米</p>
<h3 id="分辨率"><a href="#分辨率" class="headerlink" title="分辨率"></a>分辨率</h3><p>屏幕拥有的像素总数以及屏幕水平（宽）和垂直（高）方向的像素数量，单位为像素。</p>
<h3 id="像素密度"><a href="#像素密度" class="headerlink" title="像素密度"></a>像素密度</h3><p>ppi（pixels per inch）指每英寸所拥有的像素数。</p>
<p>计算公式：<br>$$<br>\sqrt(X^2 + Y^2) / Z<br>$$</p>
<ul>
<li>X：垂直像素数</li>
<li>Y：水平像素数</li>
<li>Z：屏幕尺寸</li>
<li>即：对角线上的像素数除以屏幕对角线长度</li>
</ul>
<h4 id="ppi-与-dpi"><a href="#ppi-与-dpi" class="headerlink" title="ppi 与 dpi"></a>ppi 与 dpi</h4><p>dpi（dot per inch）指每英寸所能印刷出来的网点数，是衡量打印机打印精度的主要参数之一。</p>
<h3 id="视网膜屏幕"><a href="#视网膜屏幕" class="headerlink" title="视网膜屏幕"></a>视网膜屏幕</h3><p>当你拿的手机距离你约 25-30 厘米，如果手机 ppi 达到 300 以上，你的眼睛将无法分辨出像素点。这就是苹果提出的视网膜屏幕。</p>
<h3 id="Android-开发单位"><a href="#Android-开发单位" class="headerlink" title="Android 开发单位"></a>Android 开发单位</h3><p>Android 程序开发统一使用虚拟尺寸单位：dp/dip（Density-independent pixels）、sp（Scale-independent Pixels）</p>
<ul>
<li>dp/dip：用于 Android 元素尺寸，如按钮、导航尺寸</li>
<li>sp：用于 Android 字体尺寸大小</li>
</ul>
<h2 id="插入-SVG"><a href="#插入-SVG" class="headerlink" title="插入 SVG"></a>插入 SVG</h2><ol>
<li>将 SVG 文件拖入画布或者双击图片元件导入 SVG 文件</li>
<li>选中图片右键选择【转换 SVG 图片为形状】</li>
</ol>
]]></content>
      <categories>
        <category>Axure</category>
      </categories>
      <tags>
        <tag>Axure</tag>
      </tags>
  </entry>
  <entry>
    <title>SQL Functions in ORACLE</title>
    <url>/2019/08/14/SQL-Functions-in-ORACLE/</url>
    <content><![CDATA[<img src="https://regmedia.co.uk/2017/05/03/oracle_balloons2_photo_via_shutterstock.jpg" width="100%"/>

<a id="more"></a>

<blockquote>
<p><a href="https://docs.oracle.com/cd/B19306_01/server.102/b14200/functions001.htm" target="_blank" rel="noopener">SQL Functions - Oracle Help Center</a></p>
</blockquote>
<h2 id="NVL"><a href="#NVL" class="headerlink" title="NVL"></a>NVL</h2><p>格式：<strong>NVL(expr1,expr2)</strong></p>
<p>功能：如果第一个参数为空那么显示第二个参数的值，如果第一个参数的值不为空，则显示第一个参数本来的值。</p>
<p>实例：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> ename,NVL(comm, <span class="number">-1</span>) <span class="keyword">from</span> emp;</span><br><span class="line"><span class="comment">------------------------------------</span></span><br><span class="line"></span><br><span class="line">ENAME NVL(COMM,-1)</span><br><span class="line"><span class="comment">------- ----</span></span><br><span class="line">SMITH -1</span><br><span class="line">ALLEN 300</span><br><span class="line">WARD 500</span><br><span class="line">JONES -1</span><br><span class="line">MARTIN 1400</span><br><span class="line">BLAKE -1</span><br><span class="line">FORD -1</span><br><span class="line">MILLER -1</span><br></pre></td></tr></table></figure>

<h3 id="空值-NULL-和数字相加"><a href="#空值-NULL-和数字相加" class="headerlink" title="空值 NULL 和数字相加"></a>空值 NULL 和数字相加</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> GLOBAL_LOCATION <span class="keyword">SET</span> POPULATION = NVL(POPULATION, <span class="number">0</span>) + <span class="number">1000</span> <span class="keyword">WHERE</span> <span class="keyword">ID</span> = <span class="number">5022</span></span><br></pre></td></tr></table></figure>

<h2 id="SUBSTR"><a href="#SUBSTR" class="headerlink" title="SUBSTR"></a>SUBSTR</h2><p>substr(字符串,截取开始位置,截取长度) //返回截取的字符串</p>
<p>substr(‘Hello World’,2,4) //返回结果为 ‘ello’</p>
<p>substr(‘Hello World’,-3,3)//返回结果为 ‘rld’ 负数(-i)表示截取的开始位置为字符串右端向左数第i个字符</p>
<h2 id="LENGTH"><a href="#LENGTH" class="headerlink" title="LENGTH"></a>LENGTH</h2><p>length(字符串) //返回字符串长度</p>
<h2 id="REGEXP-SUBSTR"><a href="#REGEXP-SUBSTR" class="headerlink" title="REGEXP_SUBSTR"></a>REGEXP_SUBSTR</h2><blockquote>
<p><a href="https://blog.csdn.net/sofeien/article/details/80534557" target="_blank" rel="noopener">oracle如何拆分以逗号分隔的字符串为多行</a></p>
<p><a href="https://blog.csdn.net/wang_yunj/article/details/51040029" target="_blank" rel="noopener">oracle connect by用法篇</a></p>
</blockquote>
<p>REGEXP_SUBSTR(srcstr, pattern, position, occurrence, modifier)</p>
<ul>
<li>srcstr：需要进行正则处理的字符串</li>
<li>pattern：进行匹配的正则表达式</li>
<li>position：起始位置，从第几个字符开始正则表达式匹配（默认为1）</li>
<li>occurrence：标识提取第几个匹配值，默认为1</li>
<li>modifier：模式（’i’不区分大小写进行检索；’c’区分大小写进行检索。默认为’c’。）</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> regexp_substr(<span class="string">'1,7,250'</span>,<span class="string">'[^,]+'</span>,<span class="number">1</span>,<span class="number">1</span>) <span class="keyword">result</span> <span class="keyword">from</span> dual;</span><br><span class="line"><span class="comment">--- rsult: 1</span></span><br><span class="line"><span class="keyword">select</span> regexp_substr(<span class="string">'1,7,250'</span>,<span class="string">'[^,]+'</span>,<span class="number">1</span>,<span class="number">2</span>) <span class="keyword">result</span> <span class="keyword">from</span> dual;</span><br><span class="line"><span class="comment">--- rsult: 7</span></span><br><span class="line"><span class="keyword">select</span> regexp_substr(<span class="string">'1,7,250'</span>,<span class="string">'[^,]+'</span>,<span class="number">1</span>,<span class="number">3</span>) <span class="keyword">result</span> <span class="keyword">from</span> dual;</span><br><span class="line"><span class="comment">--- rsult: 250</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> regexp_substr(<span class="string">'1,7,250'</span>,<span class="string">'[^,]+'</span>,<span class="number">1</span>,<span class="keyword">rownum</span>) <span class="keyword">result</span> <span class="keyword">from</span> dual <span class="keyword">connect</span> <span class="keyword">by</span> <span class="keyword">rownum</span> &lt;= regexp_count(<span class="string">'1,7,250'</span>, <span class="string">'[^,]+'</span>);</span><br><span class="line"><span class="comment">--- rsult: </span></span><br><span class="line"><span class="comment">--- 1</span></span><br><span class="line"><span class="comment">--- 7</span></span><br><span class="line"><span class="comment">--- 250</span></span><br></pre></td></tr></table></figure>

<h2 id="LISTAGG"><a href="#LISTAGG" class="headerlink" title="LISTAGG"></a>LISTAGG</h2><blockquote>
<p><a href="https://docs.oracle.com/cd/E11882_01/server.112/e41084/functions089.htm" target="_blank" rel="noopener">listagg - Oracle Docs</a></p>
</blockquote>
<p>LISTAGG(measure_expr [, ‘delimiter’])  WITHIN GROUP (order_by_clause) [OVER query_partition_clause]</p>
<p>在每个分组内，LISTAGG 根据 order by 子句对列进行排序，然后将排序后的结果拼接起来</p>
<ul>
<li>measure_expr：任何基于列的表达式</li>
<li>delimiter：分隔符</li>
<li>order_by_clause：order by 子句决定了列值被拼接的顺序</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	<span class="keyword">LISTAGG</span> ( ENGLISH_NAME, <span class="string">' &gt; '</span> ) <span class="keyword">WITHIN</span> <span class="keyword">GROUP</span> ( <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">ID</span> ) address </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	GLOBAL_LOCATION </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	<span class="keyword">ID</span> <span class="keyword">IN</span> ( <span class="number">1</span>, <span class="number">7</span>, <span class="number">250</span> )</span><br><span class="line">  </span><br><span class="line"><span class="comment">--- result: </span></span><br><span class="line"><span class="comment">--- Asia &gt; China &gt; Shanxi</span></span><br></pre></td></tr></table></figure>

<h2 id="日期处理函数"><a href="#日期处理函数" class="headerlink" title="日期处理函数"></a>日期处理函数</h2><h3 id="ADD-MONTHS"><a href="#ADD-MONTHS" class="headerlink" title="ADD_MONTHS"></a>ADD_MONTHS</h3><blockquote>
<p><a href="https://docs.oracle.com/cd/B28359_01/server.111/b28286/functions004.htm" target="_blank" rel="noopener">ADD_MONTHS | Oracle</a></p>
<p><code>ADD_MONTHS</code> returns the date <code>date</code> plus <code>integer</code> months. A month is defined by the session parameter <code>NLS_CALENDAR</code>. The date argument can be a datetime value or any value that can be implicitly converted to <code>DATE</code>. The <code>integer</code> argument can be an integer or any value that can be implicitly converted to an integer. The return type is always <code>DATE</code>, regardless of the datatype of <code>date</code>. If <code>date</code> is the last day of the month or if the resulting month has fewer days than the day component of <code>date</code>, then the result is the last day of the resulting month. Otherwise, the result has the same day component as <code>date</code>.</p>
</blockquote>
<p>语法：ADD_MONTHS(date, integer)</p>
<p>eg：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> TO_CHAR( ADD_MONTHS( <span class="keyword">SYSDATE</span>, - <span class="number">1</span> ), <span class="string">'YYYY-MM-dd'</span> ) <span class="string">"Last month"</span>, TO_CHAR( <span class="keyword">SYSDATE</span>, <span class="string">'yyyy-MM-dd'</span> ) <span class="string">"Now"</span>, TO_CHAR( ADD_MONTHS( <span class="keyword">SYSDATE</span>, <span class="number">1</span> ), <span class="string">'YYYY-MM-dd'</span> ) <span class="string">"Next month"</span> <span class="keyword">FROM</span> dual;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">"Last month" "Now"	      "Next month"</span><br><span class="line"><span class="comment">------------ ------------ ------------</span></span><br><span class="line">"2019-07-14" "2019-08-14"	"2019-09-14"</span><br></pre></td></tr></table></figure>

<h3 id="LAST-DAY"><a href="#LAST-DAY" class="headerlink" title="LAST_DAY"></a>LAST_DAY</h3><blockquote>
<p><a href="https://docs.oracle.com/database/121/SQLRF/functions096.htm" target="_blank" rel="noopener">LAST_DAY | Oracle</a></p>
<p><code>LAST_DAY</code> returns the date of the last day of the month that contains <code>date</code>. The last day of the month is defined by the session parameter <code>NLS_CALENDAR</code>. The return type is always <code>DATE</code>, regardless of the data type of <code>date</code>.</p>
</blockquote>
<p>语法：LAST_DAY(date)</p>
<p>eg：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SYSDATE</span>, <span class="keyword">LAST_DAY</span>( <span class="keyword">SYSDATE</span> ) <span class="string">"Last"</span>, <span class="keyword">LAST_DAY</span>( <span class="keyword">SYSDATE</span> ) - <span class="keyword">SYSDATE</span> <span class="string">"Days Left"</span> <span class="keyword">FROM</span> DUAL;</span><br><span class="line"></span><br><span class="line">"SYSDATE"             "Last"                "Days Left"</span><br><span class="line"><span class="comment">--------------------- --------------------- -----------</span></span><br><span class="line">"2019-08-14 05:41:01" "2019-08-31 05:41:01"          17</span><br></pre></td></tr></table></figure>



<h2 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h2><h3 id="COUNT"><a href="#COUNT" class="headerlink" title="COUNT"></a>COUNT</h3><h4 id="按日期统计"><a href="#按日期统计" class="headerlink" title="按日期统计"></a>按日期统计</h4><p>需求：统计收集数量</p>
<p><img src="https://i.loli.net/2019/08/14/wImuRzxqEybkW5C.png" alt="pic"></p>
<h5 id="按年统计"><a href="#按年统计" class="headerlink" title="按年统计"></a>按年统计</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> TO_CHAR(COLLECT_DATE, <span class="string">'yyyy'</span>) <span class="keyword">AS</span> COLLECT_DATE, <span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> <span class="keyword">COUNT</span> <span class="keyword">FROM</span> COLLECT_RECORD <span class="keyword">GROUP</span> <span class="keyword">BY</span> TO_CHAR(COLLECT_DATE, <span class="string">'yyyy'</span>)</span><br></pre></td></tr></table></figure>

<h5 id="按月统计"><a href="#按月统计" class="headerlink" title="按月统计"></a>按月统计</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> TO_CHAR(COLLECT_DATE, <span class="string">'yyyy-MM'</span>) <span class="keyword">AS</span> COLLECT_DATE, <span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> <span class="keyword">COUNT</span> <span class="keyword">FROM</span> COLLECT_RECORD <span class="keyword">GROUP</span> <span class="keyword">BY</span> TO_CHAR(COLLECT_DATE, <span class="string">'yyyy-MM'</span>)</span><br></pre></td></tr></table></figure>

<h5 id="按日统计"><a href="#按日统计" class="headerlink" title="按日统计"></a>按日统计</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> TO_CHAR(COLLECT_DATE, <span class="string">'yyyy-MM-dd'</span>) <span class="keyword">AS</span> COLLECT_DATE, <span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> <span class="keyword">COUNT</span> <span class="keyword">FROM</span> COLLECT_RECORD <span class="keyword">GROUP</span> <span class="keyword">BY</span> TO_CHAR(COLLECT_DATE, <span class="string">'yyyy-MM-dd'</span>)</span><br></pre></td></tr></table></figure>

<h2 id="TRUNC"><a href="#TRUNC" class="headerlink" title="TRUNC"></a>TRUNC</h2><blockquote>
<p><a href="https://docs.oracle.com/cd/B10501_01/appdev.920/a96583/cci08r14.htm#1072049" target="_blank" rel="noopener">Documentation | Oracle</a><br>This method returns the Number object truncated at the number of decimal places provided by the parameter specified.</p>
</blockquote>
<p>语法：TRUNC(number, num_digits)</p>
<ul>
<li>number：需要截断取整的数字</li>
<li>num_digits：用于指定取整精度的数字，默认值为 0</li>
</ul>
<p>eg：</p>
<ul>
<li><p>数字</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> trunc(<span class="number">123.458</span>) <span class="keyword">from</span> dual    <span class="comment">--123</span></span><br><span class="line"><span class="keyword">select</span> trunc(<span class="number">123.458</span>,<span class="number">0</span>) <span class="keyword">from</span> dual  <span class="comment">--123</span></span><br><span class="line"><span class="keyword">select</span> trunc(<span class="number">123.458</span>,<span class="number">1</span>) <span class="keyword">from</span> dual  <span class="comment">--123.4</span></span><br><span class="line"><span class="keyword">select</span> trunc(<span class="number">123.458</span>,<span class="number">-1</span>) <span class="keyword">from</span> dual <span class="comment">--120</span></span><br><span class="line"><span class="keyword">select</span> trunc(<span class="number">123.458</span>,<span class="number">-4</span>) <span class="keyword">from</span> dual <span class="comment">--0</span></span><br><span class="line"><span class="keyword">select</span> trunc(<span class="number">123.458</span>,<span class="number">4</span>) <span class="keyword">from</span> dual  <span class="comment">--123.458</span></span><br><span class="line"><span class="keyword">select</span> trunc(<span class="number">123</span>) <span class="keyword">from</span> dual        <span class="comment">--123</span></span><br><span class="line"><span class="keyword">select</span> trunc(<span class="number">123</span>,<span class="number">1</span>) <span class="keyword">from</span> dual      <span class="comment">--123</span></span><br><span class="line"><span class="keyword">select</span> trunc(<span class="number">123</span>,<span class="number">-1</span>) <span class="keyword">from</span> dual     <span class="comment">--120</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>日期</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> trunc(<span class="keyword">sysdate</span>) <span class="keyword">from</span> dual</span><br><span class="line"><span class="comment">--2019-08-14 00:00:00  今天的日期</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> trunc(<span class="keyword">sysdate</span>, <span class="string">'mm'</span>) <span class="keyword">from</span> dual</span><br><span class="line"><span class="comment">--2019-08-01 00:00:00  当月第一天</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> trunc(<span class="keyword">sysdate</span>,<span class="string">'yy'</span>) <span class="keyword">from</span> dual</span><br><span class="line"><span class="comment">--2019-01-01 00:00:00  当年第一天</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> trunc(<span class="keyword">sysdate</span>,<span class="string">'dd'</span>) <span class="keyword">from</span> dual</span><br><span class="line"><span class="comment">--2019-08-14 00:00:00  当前年月日</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> trunc(<span class="keyword">sysdate</span>,<span class="string">'yyyy'</span>) <span class="keyword">from</span> dual</span><br><span class="line"><span class="comment">--2019-01-01 00:00:00  当年第一天</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> trunc(<span class="keyword">sysdate</span>,<span class="string">'d'</span>) <span class="keyword">from</span> dual</span><br><span class="line"><span class="comment">--2019-08-11 00:00:00  当前星期的第一天(星期天)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> trunc(<span class="keyword">sysdate</span>, <span class="string">'hh'</span>) <span class="keyword">from</span> dual</span><br><span class="line"><span class="comment">--2019-08-14 03:00:00  当前时间的第一分钟</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> trunc(<span class="keyword">sysdate</span>, <span class="string">'mi'</span>) <span class="keyword">from</span> dual</span><br><span class="line"><span class="comment">--2019-08-14 03:56:00  当前时间的第一秒，TRUNC()函数没有秒的精确</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h2><h3 id="JSON-TABLE"><a href="#JSON-TABLE" class="headerlink" title="JSON_TABLE"></a>JSON_TABLE</h3><blockquote>
<p><a href="https://docs.oracle.com/database/121/SQLRF/functions092.htm" target="_blank" rel="noopener">json_table - Oracle Docs</a></p>
</blockquote>
<p>语法：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">JSON_TABLE</span><br><span class="line">  ( expr [ FORMAT JSON ], JSON_path_expression</span><br><span class="line">    [ JSON_table_on_error_clause ] JSON_columns_clause )</span><br></pre></td></tr></table></figure>

<p>eg：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> j_purchaseorder</span><br><span class="line">  (<span class="keyword">id</span> <span class="keyword">RAW</span> (<span class="number">16</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">   date_loaded <span class="built_in">TIMESTAMP</span>(<span class="number">6</span>) <span class="keyword">WITH</span> <span class="built_in">TIME</span> ZONE,</span><br><span class="line">   po_document <span class="keyword">CLOB</span> <span class="keyword">CONSTRAINT</span> ensure_json <span class="keyword">CHECK</span> (po_document <span class="keyword">IS</span> <span class="keyword">JSON</span>));</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> j_purchaseorder</span><br><span class="line">  <span class="keyword">VALUES</span> (</span><br><span class="line">    SYS_GUID(),</span><br><span class="line">    SYSTIMESTAMP,</span><br><span class="line">    <span class="string">'&#123;"PONumber"              : 1600,</span></span><br><span class="line"><span class="string">      "Reference"             : "ABULL-20140421",</span></span><br><span class="line"><span class="string">       "Requestor"            : "Alexis Bull",</span></span><br><span class="line"><span class="string">       "User"                 : "ABULL",</span></span><br><span class="line"><span class="string">       "CostCenter"           : "A50",</span></span><br><span class="line"><span class="string">       "ShippingInstructions" : &#123;"name"   : "Alexis Bull",</span></span><br><span class="line"><span class="string">                                 "Address": &#123;"street"   : "200 Sporting Green",</span></span><br><span class="line"><span class="string">                                              "city"    : "South San Francisco",</span></span><br><span class="line"><span class="string">                                              "state"   : "CA",</span></span><br><span class="line"><span class="string">                                              "zipCode" : 99236,</span></span><br><span class="line"><span class="string">                                              "country" : "United States of America"&#125;,</span></span><br><span class="line"><span class="string">                                 "Phone" : [&#123;"type" : "Office", "number" : "909-555-7307"&#125;,</span></span><br><span class="line"><span class="string">                                            &#123;"type" : "Mobile", "number" : "415-555-1234"&#125;]&#125;,</span></span><br><span class="line"><span class="string">       "Special Instructions" : null,</span></span><br><span class="line"><span class="string">       "AllowPartialShipment" : true,</span></span><br><span class="line"><span class="string">       "LineItems" : [&#123;"ItemNumber" : 1,</span></span><br><span class="line"><span class="string">                       "Part" : &#123;"Description" : "One Magic Christmas",</span></span><br><span class="line"><span class="string">                                 "UnitPrice"   : 19.95,</span></span><br><span class="line"><span class="string">                                 "UPCCode"     : 13131092899&#125;,</span></span><br><span class="line"><span class="string">                       "Quantity" : 9.0&#125;,</span></span><br><span class="line"><span class="string">                      &#123;"ItemNumber" : 2,</span></span><br><span class="line"><span class="string">                       "Part" : &#123;"Description" : "Lethal Weapon",</span></span><br><span class="line"><span class="string">                                 "UnitPrice"   : 19.95,</span></span><br><span class="line"><span class="string">                                 "UPCCode"     : 85391628927&#125;,</span></span><br><span class="line"><span class="string">                       "Quantity" : 5.0&#125;]&#125;'</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> jt.*</span><br><span class="line"><span class="keyword">FROM</span> j_purchaseorder,</span><br><span class="line">JSON_TABLE(po_document, <span class="string">'$.ShippingInstructions.Phone[*]'</span></span><br><span class="line"><span class="keyword">COLUMNS</span> (row_number <span class="keyword">FOR</span> <span class="keyword">ORDINALITY</span>,</span><br><span class="line">         phone_type <span class="built_in">VARCHAR2</span>(<span class="number">10</span>) <span class="keyword">PATH</span> <span class="string">'$.type'</span>,</span><br><span class="line">         phone_num <span class="built_in">VARCHAR2</span>(<span class="number">20</span>) <span class="keyword">PATH</span> <span class="string">'$.number'</span>))</span><br><span class="line"><span class="keyword">AS</span> jt;</span><br><span class="line"></span><br><span class="line">ROW_NUMBER PHONE_TYPE PHONE_NUM</span><br><span class="line"><span class="comment">---------- ---------- --------------------</span></span><br><span class="line">         1 Office     909-555-7307</span><br><span class="line">         2 Mobile     415-555-1234</span><br></pre></td></tr></table></figure>

<h2 id="分析函数"><a href="#分析函数" class="headerlink" title="分析函数"></a>分析函数</h2><h3 id="ROW-NUMBER"><a href="#ROW-NUMBER" class="headerlink" title="ROW_NUMBER"></a>ROW_NUMBER</h3><blockquote>
<p><a href="https://docs.oracle.com/cd/B19306_01/server.102/b14200/functions137.htm" target="_blank" rel="noopener">row_number - Oracle Docs</a></p>
</blockquote>
<p>语法：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ROW_NUMBER( )</span><br><span class="line">   OVER ([ query_partition_clause ] order_by_clause)</span><br></pre></td></tr></table></figure>

<p>eg：查找最新一条收集任务</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	* </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	( <span class="keyword">SELECT</span> ct.* , row_number () <span class="keyword">over</span> ( <span class="keyword">ORDER</span> <span class="keyword">BY</span> ct.CREATE_DATE <span class="keyword">DESC</span> ) rn <span class="keyword">FROM</span> COLLECT_TASK ct ) </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	rn = <span class="number">1</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ID 	COLLECTOR_ID CITY_ID CREATE_BY CREATE_DATE 	      UPDATE_BY UPDATE_DATE 	     DEL_FLAG RN </span><br><span class="line">--- ------------ ------- --------- ------------------ --------- ------------------ -------- --</span><br><span class="line">135 176 	       5185 	 1 	       26&#x2F;8&#x2F;2019 17:23:37 1 	      26&#x2F;8&#x2F;2019 17:25:14 0 	      1</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Database</category>
        <category>Oracle</category>
      </categories>
      <tags>
        <tag>Oracle</tag>
        <tag>SQL-Function</tag>
      </tags>
  </entry>
  <entry>
    <title>Study Notes of Vue</title>
    <url>/2019/08/13/Study-Notes-of-Vue/</url>
    <content><![CDATA[<img src="https://4.bp.blogspot.com/-QPkAcNH1NUQ/WRfc27-qWFI/AAAAAAAAy6g/74NNXOZ4pywIMCBbExG566EhxupnNDDrACLcB/s1600/vue-newsletter.png" width="100%"/>

<a id="more"></a>

<h2 id="Vue-Loader"><a href="#Vue-Loader" class="headerlink" title="Vue Loader"></a>Vue Loader</h2><h3 id="深度作用选择器"><a href="#深度作用选择器" class="headerlink" title="深度作用选择器"></a>深度作用选择器</h3><p>如果你希望 <code>scoped</code> 样式中的一个选择器能够作用得“更深”，例如<strong>影响子组件</strong>，你可以使用 <code>&gt;&gt;&gt;</code> 操作符：</p>
<p>有些像 Sass 之类的预处理器无法正确解析 <code>&gt;&gt;&gt;</code>。这种情况下你可以使用 <code>/deep/</code> 操作符取而代之——这是一个 <code>&gt;&gt;&gt;</code> 的别名，同样可以正常工作。</p>
<h2 id="计算属性"><a href="#计算属性" class="headerlink" title="计算属性"></a>计算属性</h2><h3 id="关闭缓存功能"><a href="#关闭缓存功能" class="headerlink" title="关闭缓存功能"></a>关闭缓存功能</h3><iframe height="265" style="width: 100%;" scrolling="no" title="xxKdaPe" src="//codepen.io/libo9527/embed/xxKdaPe/?height=265&theme-id=0&default-tab=js,result" frameborder="no" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href='https://codepen.io/libo9527/pen/xxKdaPe/' target="_blank" rel="noopener">xxKdaPe</a> by libo9527
  (<a href='https://codepen.io/libo9527' target="_blank" rel="noopener">@libo9527</a>) on <a href='https://codepen.io' target="_blank" rel="noopener">CodePen</a>.
</iframe>

]]></content>
      <categories>
        <category>Front-end</category>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>Handbook of Mac OS</title>
    <url>/2019/08/10/Handbook-of-Mac-OS/</url>
    <content><![CDATA[<img src="https://assets.website-files.com/5acbcf3278f9ca8c8c178e76/5bae943f1d8edfa43e6a7ae2_main-mojave.jpg" width="100%"/>

<a id="more"></a>

<h2 id="Keymap"><a href="#Keymap" class="headerlink" title="Keymap"></a>Keymap</h2><blockquote>
<p><a href="https://support.apple.com/zh-cn/HT201236" target="_blank" rel="noopener">Mac 键盘快捷键</a></p>
<p><a href="https://support.apple.com/zh-cn/guide/mac-help/cpmh0011/mac" target="_blank" rel="noopener">键盘符号对照表</a></p>
</blockquote>
<h3 id="新开一个终端窗口"><a href="#新开一个终端窗口" class="headerlink" title="新开一个终端窗口"></a>新开一个终端窗口</h3><p><code>Command + T</code></p>
<h3 id="删除光标后面的字符"><a href="#删除光标后面的字符" class="headerlink" title="删除光标后面的字符"></a>删除光标后面的字符</h3><p><code>fn + delete</code></p>
<h3 id="删除整行"><a href="#删除整行" class="headerlink" title="删除整行"></a>删除整行</h3><p><code>command + delete</code></p>
<h3 id="查看当前所有窗口"><a href="#查看当前所有窗口" class="headerlink" title="查看当前所有窗口"></a>查看当前所有窗口</h3><p><code>Control + ↑</code></p>
<h3 id="显示最前面的应用的所有窗口"><a href="#显示最前面的应用的所有窗口" class="headerlink" title="显示最前面的应用的所有窗口"></a>显示最前面的应用的所有窗口</h3><p><code>Control + ↓</code></p>
<h3 id="切换同一应用下不同窗口"><a href="#切换同一应用下不同窗口" class="headerlink" title="切换同一应用下不同窗口"></a>切换同一应用下不同窗口</h3><p><code>Command + ~</code></p>
<h3 id="输入特殊字符"><a href="#输入特殊字符" class="headerlink" title="输入特殊字符"></a>输入特殊字符</h3><p><code>control + command + space</code></p>
<h3 id="英文名称中间-·-的输入"><a href="#英文名称中间-·-的输入" class="headerlink" title="英文名称中间 · 的输入"></a>英文名称中间 <code>·</code> 的输入</h3><p>中文输入法下的 <code>~</code> 键</p>
<h3 id="翻页"><a href="#翻页" class="headerlink" title="翻页"></a>翻页</h3><p><code>fn + ↑ / ↓</code></p>
<p><code>space/shift + space</code></p>
<h3 id="切换全屏窗口"><a href="#切换全屏窗口" class="headerlink" title="切换全屏窗口"></a>切换全屏窗口</h3><p><code>control + ← / →</code></p>
<h3 id="最大化窗口"><a href="#最大化窗口" class="headerlink" title="最大化窗口"></a>最大化窗口</h3><p><code>control + command + F</code></p>
<h3 id="最小化窗口"><a href="#最小化窗口" class="headerlink" title="最小化窗口"></a>最小化窗口</h3><p><code>Command + M</code></p>
<h3 id="截图"><a href="#截图" class="headerlink" title="截图"></a>截图</h3><blockquote>
<p><a href="https://zh.wikihow.com/在Mac-OS-X上截取屏幕截图" target="_blank" rel="noopener">5种方法来在Mac OS X上截取屏幕截图 - wikiHow</a></p>
</blockquote>
<ul>
<li><p>对整个屏幕进行截图</p>
<p><code>command + shift + 3</code></p>
</li>
<li><p>对屏幕的一部分进行截图</p>
<p><code>Command + Shift + 4 + 鼠标拉选</code></p>
</li>
<li><p>对打开的窗口进行截图</p>
<p><code>Command + Shift + 4 + Space + 鼠标点选</code></p>
</li>
</ul>
<h3 id="回到桌面"><a href="#回到桌面" class="headerlink" title="回到桌面"></a>回到桌面</h3><p><code>command + F3</code> / <code>fn + f11</code></p>
<h3 id="窗口缩放"><a href="#窗口缩放" class="headerlink" title="窗口缩放"></a>窗口缩放</h3><p><code>command + &#39;+&#39; / &#39;-&#39;</code></p>
<h2 id="Command-Line-Tools"><a href="#Command-Line-Tools" class="headerlink" title="Command Line Tools"></a>Command Line Tools</h2><blockquote>
<p><a href="https://www.jianshu.com/p/308d7be8b8df" target="_blank" rel="noopener">Mac安装Command Line Tools</a></p>
</blockquote>
<p>Mac 下使用 git 需要安装Command Line Tools</p>
<h2 id="Mac-下-Chrome-快捷键"><a href="#Mac-下-Chrome-快捷键" class="headerlink" title="Mac 下 Chrome 快捷键"></a>Mac 下 Chrome 快捷键</h2><h3 id="刷新"><a href="#刷新" class="headerlink" title="刷新"></a>刷新</h3><p><code>Command + R</code></p>
<h2 id="Mac-下-IDEA-快捷键"><a href="#Mac-下-IDEA-快捷键" class="headerlink" title="Mac 下 IDEA 快捷键"></a>Mac 下 IDEA 快捷键</h2><blockquote>
<p><a href="https://resources.jetbrains.com/storage/products/intellij-idea/docs/IntelliJIDEA_ReferenceCard.pdf" target="_blank" rel="noopener">默认快捷键PDF</a></p>
<p><a href="https://disq.us/url?url=https%3A%2F%2Fplugins.jetbrains.com%2Fplugin%2F7066-keymap-exporter%3APzIda8xZJUI_yTke-yVWlDxszNw&cuid=476847" target="_blank" rel="noopener">快捷键PDF导出插件</a></p>
</blockquote>
<h3 id="回到历史光标位置"><a href="#回到历史光标位置" class="headerlink" title="回到历史光标位置"></a>回到历史光标位置</h3><p><code>control + command + ← / →</code></p>
<h3 id="切换选种字符大小写"><a href="#切换选种字符大小写" class="headerlink" title="切换选种字符大小写"></a>切换选种字符大小写</h3><p><code>command + shift + U</code></p>
<h3 id="优化-import-信息"><a href="#优化-import-信息" class="headerlink" title="优化 import 信息"></a>优化 import 信息</h3><p><code>control + option + o</code></p>
<h3 id="扩展选中字符"><a href="#扩展选中字符" class="headerlink" title="扩展选中字符"></a>扩展选中字符</h3><p><code>option + ↑ / ↓</code></p>
<ul>
<li>比如光标在单词中间，想要选中整个单词时就可以用这个快捷键。</li>
<li>如果光标在 <code>{</code>/  <code>}</code>前后时，可使用该快捷键选中整个 {} 的内容。</li>
<li>如果光标在 <code>;</code> 后，使用该快捷键可选中整行。</li>
</ul>
<h3 id="移动代码"><a href="#移动代码" class="headerlink" title="移动代码"></a>移动代码</h3><p><code>command + shift + ↑ / ↓</code></p>
<h2 id="Mac-下-WebStorm-快捷键"><a href="#Mac-下-WebStorm-快捷键" class="headerlink" title="Mac 下 WebStorm 快捷键"></a>Mac 下 WebStorm 快捷键</h2><blockquote>
<p><strong>[PDF]</strong><a href="https://resources.jetbrains.com/storage/products/webstorm/docs/WebStorm_ReferenceCard.pdf" target="_blank" rel="noopener">DEFAULT OS X KEYMAP - JetBrains</a></p>
</blockquote>
<h3 id="多行输入"><a href="#多行输入" class="headerlink" title="多行输入"></a>多行输入</h3><ul>
<li><p>连续多行输入</p>
<p>option + shift + 鼠标下拉选中连续行</p>
</li>
<li><p>隔行多行输入</p>
<p>option + 鼠标点击多行选中</p>
</li>
</ul>
<h2 id="Terminal"><a href="#Terminal" class="headerlink" title="Terminal"></a>Terminal</h2><h3 id="查看命令手册"><a href="#查看命令手册" class="headerlink" title="查看命令手册"></a>查看命令手册</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> man <span class="built_in">command</span></span></span><br></pre></td></tr></table></figure>

<h3 id="复制粘贴"><a href="#复制粘贴" class="headerlink" title="复制粘贴"></a>复制粘贴</h3><p>pbcopy / pbpaste</p>
<p>实例：</p>
<ul>
<li><p>将生成的 SSH 公钥复制到剪切板</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> pbcopy &lt; ~/.ssh/id_sra.pub</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> or</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> cat ~/.ssh/id_sra.pub | pbcopy</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="打开目录或文件"><a href="#打开目录或文件" class="headerlink" title="打开目录或文件"></a>打开目录或文件</h3><p>open</p>
<blockquote>
<p><strong>-n</strong>  Open a new instance of the application(s) even if one is already running.</p>
</blockquote>
<p>实例：</p>
<ul>
<li><p>在 finder 中打开当前目录</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> open .</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在 Atom 中打开指定文件</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> open xxx.txt -a atom</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>微信双开</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> open -n /Applications/WeChat.app/Contents/MacOS/WeChat</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="网络代理"><a href="#网络代理" class="headerlink" title="网络代理"></a>网络代理</h3><blockquote>
<p><a href="/2020/03/03/Configing-Procy-of-Network-in-Mac-Terminal/">Mac 终端环境下配置网络代理</a></p>
</blockquote>
<h2 id="Spotlight"><a href="#Spotlight" class="headerlink" title="Spotlight"></a>Spotlight</h2><h3 id="进入文件所在目录"><a href="#进入文件所在目录" class="headerlink" title="进入文件所在目录"></a>进入文件所在目录</h3><p>选中搜索结果后按 <code>Command + 回车</code>，之后就能打开这个文件所在的文件夹，并且这个文件已被选中了。</p>
<p>选中 Spotlight 的一个搜索条目，按下 Command 键，在 Spotlight 的预览区下方就会出现所选文件的完整路径。</p>
<h3 id="按文件类型和文件格式进行查找"><a href="#按文件类型和文件格式进行查找" class="headerlink" title="按文件类型和文件格式进行查找"></a>按文件类型和文件格式进行查找</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">kind:image keyword</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">kind:text keyword</span><br></pre></td></tr></table></figure>

<h3 id="检索-Markdown-文件"><a href="#检索-Markdown-文件" class="headerlink" title="检索 Markdown 文件"></a>检索 Markdown 文件</h3><blockquote>
<p><a href="https://gist.github.com/gereon/3150445#gistcomment-2764557" target="_blank" rel="noopener">Markdown to Spotlight</a></p>
<p><a href="https://baltazaar.wordpress.com/2018/11/20/add-markdown-support-to-mac-os-x-spotlight/" target="_blank" rel="noopener">Add Markdown Indexing to Mac OS X Spotlight</a></p>
<p><a href="http://theoveranalyzed.net/2015/12/3/how-to-force-spotlight-to-index-markdown-files-in-el-capitan" target="_blank" rel="noopener">How to Force Spotlight to Index Markdown Files in El Capitan</a></p>
<p><a href="https://brettterpstra.com/2011/10/18/fixing-spotlight-indexing-of-markdown-content/" target="_blank" rel="noopener">Fixing Spotlight indexing of Markdown content</a></p>
</blockquote>
<ol>
<li><p><code>cp -r /System/Library/Spotlight/RichText.mdimporter ~/</code></p>
</li>
<li><p>打开 <code>RichText.mdimporter/Contents/Info.plist</code>，添加下面的代码。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">string</span>&gt;</span>net.daringfireball.markdown<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://i.postimg.cc/dwn4fgdw/markdown-finder.png" alt=""></p>
</li>
<li><p>重命名 RichText.mdimporter 为 Markdown.mdimporter。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mv ~/RichText.mdimporter Markdown.mdimporter</span><br></pre></td></tr></table></figure>
</li>
<li><p>把 Markdown.mdimporter 拷贝到 <code>/Library/Spotlight</code></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo cp -R ~/Markdown.mdimporter /Library/Spotlight</span><br></pre></td></tr></table></figure>
</li>
<li><p>将 Markdown.mdimporter 导入系统</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mdimport -r /Library/Spotlight/Markdown.mdimporter</span><br></pre></td></tr></table></figure>
</li>
<li><p>强制 Spotlight 重新建立索引</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo mdutil -E /</span><br></pre></td></tr></table></figure>


</li>
</ol>
<h3 id="Spotlight-的命令行版本"><a href="#Spotlight-的命令行版本" class="headerlink" title="Spotlight 的命令行版本"></a>Spotlight 的命令行版本</h3><p>在命令行中使用 <code>mdfind</code> 命令来实现 Spotlight 功能。</p>
<h4 id="限制目录进行检索"><a href="#限制目录进行检索" class="headerlink" title="限制目录进行检索"></a>限制目录进行检索</h4><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> mdfind <span class="string">"keyword"</span> -onlyin ~/Document</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Mac-OS</category>
      </categories>
      <tags>
        <tag>Mac-OS</tag>
      </tags>
  </entry>
  <entry>
    <title>Study Notes of Oracle</title>
    <url>/2019/08/07/Study-Notes-of-Oracle/</url>
    <content><![CDATA[<img src="https://www.datocms-assets.com/2885/1522106007-oracle.png" width="100%"/>

<a id="more"></a>

<h2 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h2><h3 id="查看版本"><a href="#查看版本" class="headerlink" title="查看版本"></a>查看版本</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">version</span> <span class="keyword">FROM</span> v$<span class="keyword">instance</span>;</span><br></pre></td></tr></table></figure>

<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a><a href="https://libo9527.github.io/2019/08/14/SQL-Functions-in-ORACLE/" target="_blank" rel="noopener">函数</a></h2><h2 id="GROUP-BY"><a href="#GROUP-BY" class="headerlink" title="GROUP BY"></a>GROUP BY</h2><h3 id="缺省值-NULL"><a href="#缺省值-NULL" class="headerlink" title="缺省值 NULL"></a>缺省值 NULL</h3><ul>
<li><p>Oracle 在 Order by 时认为 null 是最大值，所以如果是 ASC 升序则排在最后，DESC 降序则排在最前。</p>
</li>
<li><p>可以使用 nulls first 或者 nulls last 语法来控制 NULL 的位置。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">---将 null 始终放在最前</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">TABLE</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">COLUMN</span> <span class="keyword">nulls</span> <span class="keyword">first</span></span><br><span class="line"><span class="comment">---将 null 始终放在最后</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">TABLE</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">COLUMN</span> <span class="keyword">nulls</span> <span class="keyword">last</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="EXISTS"><a href="#EXISTS" class="headerlink" title="EXISTS"></a>EXISTS</h2><blockquote>
<p><a href="https://docs.oracle.com/cd/B19306_01/server.102/b14200/conditions012.htm" target="_blank" rel="noopener">EXISTS Condition | Oracle</a></p>
<p>An <code>EXISTS</code> condition tests for existence of rows in a subquery.</p>
</blockquote>
<p>一般情况下公司数据库不会加外健来关联两张表，查询时为了避免数据不存在会使用 EXISTS 进行过滤。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	d.department_id </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	departments d </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line"><span class="keyword">EXISTS</span> ( </span><br><span class="line">	<span class="keyword">SELECT</span></span><br><span class="line">		* </span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		employees e </span><br><span class="line">	<span class="keyword">WHERE</span></span><br><span class="line">	d.department_id = e.department_id</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h2 id="GROUP-BY-VS-PARTITION-BY"><a href="#GROUP-BY-VS-PARTITION-BY" class="headerlink" title="GROUP BY VS PARTITION BY"></a>GROUP BY VS PARTITION BY</h2><blockquote>
<p>Oracle 对于 GROUP BY 是严格的，oracle 中规定，使用 group by 时，select 后面所有不是聚合函数的字段，都必须出现在 group by 后面，否则会报错：“ORA-00979: not a GROUP BY expression”。而 MySQL 则不同，如果 SELECT 出来的字段在 GROUP BY 后面没有出现，那么会随机取出一个值。</p>
</blockquote>
<blockquote>
<p><a href="https://asktom.oracle.com/pls/asktom/asktom.search?tag=partition-by-and-group-by" target="_blank" rel="noopener">partition by and group by | Oracle</a></p>
<p>Totally different things.</p>
<p>GROUP BY is about aggregation. Take ‘n’ rows and reduce the number of rows (by summing, or max, or min etc)..But we are <em>consolidating</em> some data.</p>
<p>PARTITION BY is about carving up data into chunks. Take ‘n’ rows, apply some rule to split the rows into buckets…but will still have ‘n’ rows.</p>
</blockquote>
<ul>
<li>GROUP BY 是关于聚合函数的，PARTITION BY 是敢于分析函数的。</li>
<li>对于 n 行数据，GROUP BY 返回的肯定小于等于 n 行，而 PARTITION BY 会返回 n 行。</li>
</ul>
<p>eg：求各部门员工工资总和</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 使用分组函数GROUP BY方式</span></span><br><span class="line"><span class="keyword">SELECT</span> deptno 部门编号,<span class="keyword">SUM</span>(sal) 部门工资总和 <span class="keyword">FROM</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> deptno;</span><br><span class="line"><span class="comment">-- 结果</span></span><br><span class="line"><span class="comment">-----------------------</span></span><br><span class="line">| 部门编号 | 部门工资总和 |</span><br><span class="line">| 30 | 10900 |</span><br><span class="line">| 20 | 10575 |</span><br><span class="line">| 10 | 9250 |</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 使用分析函数 PARTITION BY方式</span></span><br><span class="line"><span class="keyword">SELECT</span> deptno 部门编号,<span class="keyword">SUM</span>(SAL) <span class="keyword">OVER</span> (<span class="keyword">partition</span> <span class="keyword">by</span> sal) 部门工资总和 <span class="keyword">FROM</span> emp;</span><br><span class="line"><span class="comment">-----------------</span></span><br><span class="line">| 部门编号 | 部门工资总和 |</span><br><span class="line">|	30 | 1450 |</span><br><span class="line">|	30 | 1500 |</span><br><span class="line">|	30 | 3200 |</span><br><span class="line">|	20 | 3200 |</span><br><span class="line">|	30 | 3500 |</span><br><span class="line">|	30 | 3500 |</span><br><span class="line">|	10 | 1800 |</span><br><span class="line">|	10 | 2450 |</span><br><span class="line">|	30 | 2850 |</span><br><span class="line">|	20 | 2975 |</span><br><span class="line">|	20 | 6000 |</span><br><span class="line">|	20 | 6000 |</span><br><span class="line">|	10 | 5000 |</span><br><span class="line"><span class="comment">-----------------</span></span><br><span class="line"><span class="keyword">SELECT</span> deptno 部门编号 ,ename 员工姓名, sal 员工工资, <span class="keyword">SUM</span>(sal) <span class="keyword">OVER</span>(<span class="keyword">PARTITION</span> <span class="keyword">BY</span> deptno <span class="keyword">ORDER</span> <span class="keyword">BY</span> sal) 所在部门工资总和  <span class="keyword">FROM</span> emp;</span><br><span class="line"><span class="comment">----------------------------------------------</span></span><br><span class="line">| 部门编号 | 员工姓名 | 员工工资 | 所在部门工资总和 |</span><br><span class="line">| 10 | MILLER | 1800 | 1800 |</span><br><span class="line">| 10 | CLARK | 2450 | 4250 |</span><br><span class="line">| 10 | KING | 5000 | 9250 |</span><br><span class="line">| 20 | ADAMS | 1600 | 1600 |</span><br><span class="line">| 20 | JONES | 2975 | 4575 |</span><br><span class="line">| 20 | SCOTT | 3000 | 10575 |</span><br><span class="line">| 20 | FORD | 3000 | 10575 |</span><br><span class="line">| 30 | JAMES | 1450 | 1450 |</span><br><span class="line">| 30 | TURNER | 1500 | 2950 |</span><br><span class="line">| 30 | ALLEN | 1600 | 4550 |</span><br><span class="line">| 30 | WARD | 1750 | 8050 |</span><br><span class="line">| 30 | MARTIN | 1750 | 8050 |</span><br><span class="line">| 30 | BLAKE | 2850 | 10900 |</span><br></pre></td></tr></table></figure>

<h2 id="递归查询"><a href="#递归查询" class="headerlink" title="递归查询"></a>递归查询</h2><p>语法：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> ... <span class="keyword">FROM</span> tablename <span class="keyword">WHERE</span> ... <span class="keyword">START</span> <span class="keyword">WITH</span> ... <span class="keyword">CONNECT</span> <span class="keyword">BY</span> <span class="keyword">PRIOR</span> ...</span><br></pre></td></tr></table></figure>

<p>eg：</p>
<p>地址表 GLOBAL_LOCATION</p>
<p><img src="https://i.loli.net/2019/08/13/6nlYZxW5zsLbfAC.png" alt="pic"></p>
<ul>
<li><p>查询北京所有的子孙节点</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ID</span>, PARENT_ID, <span class="keyword">NAME</span> <span class="keyword">FROM</span> GLOBAL_LOCATION <span class="keyword">START</span> <span class="keyword">WITH</span> PARENT_ID = <span class="number">247</span> <span class="keyword">CONNECT</span> <span class="keyword">BY</span> <span class="keyword">PRIOR</span> <span class="keyword">ID</span> = PARENT_ID</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询海淀所有的祖先节点</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ID</span>, PARENT_ID, <span class="keyword">NAME</span> <span class="keyword">FROM</span> GLOBAL_LOCATION <span class="keyword">START</span> <span class="keyword">WITH</span> <span class="keyword">ID</span> = <span class="number">3026</span> <span class="keyword">CONNECT</span> <span class="keyword">BY</span> <span class="keyword">PRIOR</span> PARENT_ID = <span class="keyword">ID</span></span><br></pre></td></tr></table></figure>



</li>
</ul>
<h2 id="Comprehensive-examples-in-work"><a href="#Comprehensive-examples-in-work" class="headerlink" title="Comprehensive examples in work"></a>Comprehensive examples in work</h2><h3 id="地址树远程搜索"><a href="#地址树远程搜索" class="headerlink" title="地址树远程搜索"></a>地址树远程搜索</h3><p>需求说明：input 框中输入地址，远程搜索出匹配节点，由于同名地址到存在，要求将完整地址一同显示。</p>
<p><img src="https://i.loli.net/2019/08/10/TCvoScY2A7Vajd8.png" alt="pic"></p>
<p>表结构：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">"SKYSTAR"</span>.<span class="string">"GLOBAL_LOCATION_copy1"</span> (</span><br><span class="line">  <span class="string">"ID"</span> <span class="built_in">NUMBER</span>(<span class="number">20</span>) <span class="keyword">VISIBLE</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> ,</span><br><span class="line">  <span class="string">"PARENT_ID"</span> <span class="built_in">NUMBER</span>(<span class="number">20</span>) <span class="keyword">VISIBLE</span> ,</span><br><span class="line">  <span class="string">"PATH"</span> <span class="built_in">VARCHAR2</span>(<span class="number">100</span> <span class="keyword">BYTE</span>) <span class="keyword">VISIBLE</span> ,</span><br><span class="line">  <span class="string">"ENGLISH_NAME"</span> <span class="built_in">VARCHAR2</span>(<span class="number">255</span> <span class="keyword">BYTE</span>) <span class="keyword">VISIBLE</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>样例数据：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">"GLOBAL_LOCATION"</span>(<span class="string">"ID"</span>, <span class="string">"PARENT_ID"</span>, <span class="string">"PATH"</span>, <span class="string">"ENGLISH_NAME"</span>) <span class="keyword">VALUES</span> (<span class="string">'250'</span>, <span class="string">'7'</span>, <span class="string">',1,7,250,'</span>, <span class="string">'Shanxi'</span>);</span><br></pre></td></tr></table></figure>

<ol>
<li><p>根据输入查找节点</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ID</span>, ENGLISH_NAME, <span class="keyword">PATH</span> <span class="keyword">FROM</span> GLOBAL_LOCATION <span class="keyword">WHERE</span> <span class="keyword">UPPER</span>(ENGLISH_NAME) <span class="keyword">LIKE</span> <span class="string">'%'</span> || <span class="keyword">UPPER</span>(<span class="comment">#&#123;NAME&#125;) || '%'</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>去掉 PATH 前后的 <code>,</code></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SUBSTR</span>( <span class="string">',1,7,250,'</span>, <span class="number">2</span>, <span class="keyword">LENGTH</span>( <span class="string">',1,7,250,'</span> ) - <span class="number">2</span> ) <span class="keyword">FROM</span> dual</span><br></pre></td></tr></table></figure>
</li>
<li><p>将去掉前后 <code>,</code> 的路径 PATH 按 <code>,</code> 分割得到祖先 ID</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	REGEXP_SUBSTR( <span class="string">'1,7,250'</span>, <span class="string">'[^,]+'</span>, <span class="number">1</span>, <span class="keyword">ROWNUM</span> ) </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	dual <span class="keyword">CONNECT</span> <span class="keyword">BY</span> <span class="keyword">ROWNUM</span> &lt;= <span class="keyword">LENGTH</span>( <span class="string">'1,7,250'</span> ) - <span class="keyword">LENGTH</span>(REGEXP_REPLACE( <span class="string">'1,7,250'</span>, <span class="string">','</span>, <span class="string">''</span> )) + <span class="number">1</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>查找所有祖先节点，并使用 <code>&gt;</code> 连接</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	<span class="keyword">LISTAGG</span> ( ENGLISH_NAME, <span class="string">' &gt; '</span> ) <span class="keyword">WITHIN</span> <span class="keyword">GROUP</span> ( <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">ID</span> ) address </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	( <span class="keyword">SELECT</span> <span class="keyword">ID</span>, ENGLISH_NAME <span class="keyword">FROM</span> GLOBAL_LOCATION <span class="keyword">WHERE</span> <span class="keyword">ID</span> <span class="keyword">IN</span> ( <span class="number">1</span>, <span class="number">7</span>, <span class="number">250</span> ) )</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>汇总后的 SQL：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    <span class="keyword">ID</span>,</span><br><span class="line">    ENGLISH_NAME,</span><br><span class="line">(</span><br><span class="line">    <span class="keyword">SELECT</span></span><br><span class="line">        <span class="keyword">LISTAGG</span> ( ENGLISH_NAME, <span class="string">' &gt; '</span> ) <span class="keyword">WITHIN</span> <span class="keyword">GROUP</span> ( <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">ID</span> ) ADDRESS</span><br><span class="line">    <span class="keyword">FROM</span></span><br><span class="line">    (</span><br><span class="line">        <span class="keyword">SELECT</span></span><br><span class="line">            <span class="keyword">ID</span>,</span><br><span class="line">            ENGLISH_NAME</span><br><span class="line">        <span class="keyword">FROM</span></span><br><span class="line">            GLOBAL_LOCATION</span><br><span class="line">        <span class="keyword">WHERE</span> <span class="keyword">ID</span> <span class="keyword">IN</span> (</span><br><span class="line">            <span class="keyword">SELECT</span></span><br><span class="line">                REGEXP_SUBSTR( t1.ADDRESS, <span class="string">'[^,]+'</span>, <span class="number">1</span>, <span class="keyword">ROWNUM</span> )</span><br><span class="line">            <span class="keyword">FROM</span></span><br><span class="line">                dual <span class="keyword">CONNECT</span> <span class="keyword">BY</span> <span class="keyword">ROWNUM</span> &lt;= <span class="keyword">LENGTH</span>( t1.address ) - <span class="keyword">LENGTH</span>(REGEXP_REPLACE( t1.ADDRESS, <span class="string">','</span>, <span class="string">''</span> )) + <span class="number">1</span>)</span><br><span class="line">    )</span><br><span class="line">) FULL_ADDRESS</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">(</span><br><span class="line">    <span class="keyword">SELECT</span></span><br><span class="line">        <span class="keyword">ID</span>,</span><br><span class="line">        ENGLISH_NAME,</span><br><span class="line">        ( <span class="keyword">SELECT</span> <span class="keyword">SUBSTR</span>( gl.PATH, <span class="number">2</span>, <span class="keyword">LENGTH</span>( gl.PATH ) - <span class="number">2</span> ) <span class="keyword">FROM</span> dual ) ADDRESS</span><br><span class="line">    <span class="keyword">FROM</span></span><br><span class="line">    ( <span class="keyword">SELECT</span> <span class="keyword">ID</span>, ENGLISH_NAME, <span class="keyword">PATH</span> <span class="keyword">FROM</span> GLOBAL_LOCATION <span class="keyword">WHERE</span> <span class="keyword">UPPER</span>( ENGLISH_NAME ) <span class="keyword">LIKE</span> <span class="string">'%'</span> || <span class="keyword">UPPER</span>( <span class="string">'shan'</span> ) || <span class="string">'%'</span> ) gl</span><br><span class="line">) t1</span><br></pre></td></tr></table></figure>

<p><img src="https://i.loli.net/2019/08/10/F6XYRiD7Q29OHrE.png" alt="pic"></p>
<p><img src="https://i.loli.net/2019/08/10/NL9lIHtJnXxmC38.png" alt="pic"></p>
<h2 id=""><a href="#" class="headerlink" title=""></a><a href="/2019/09/17/Using-Triggers-in-ORACLE/" title="触发器（TRIGGER）">触发器（TRIGGER）</a></h2><h2 id="ERROR"><a href="#ERROR" class="headerlink" title="ERROR"></a>ERROR</h2><h3 id="ORA-03113"><a href="#ORA-03113" class="headerlink" title="ORA-03113"></a>ORA-03113</h3><blockquote>
<p><a href="https://blog.csdn.net/zwk626542417/article/details/39667999" target="_blank" rel="noopener">Oracle错误——ORA-03113:通信通道的文件结尾 解决办法</a></p>
</blockquote>
<h4 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h4><p>Oracle 中使用 <code>COUNT(DISTINCT xxx)</code> 时出现：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">ORA-03113：<span class="keyword">end</span>-<span class="keyword">of</span>-<span class="keyword">file</span> <span class="keyword">on</span> communication  channel</span><br></pre></td></tr></table></figure>

<p>而且只有在原始表中执行会报这个错，将原始表复制后再执行又不报错，或者把 <code>DISTINCT</code> 去掉再执行也不报错。</p>
<h4 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    t.address_cityTown <span class="keyword">AS</span> <span class="keyword">ID</span>,</span><br><span class="line">    gl.PATH,</span><br><span class="line">    <span class="keyword">COUNT</span>( <span class="keyword">DISTINCT</span> t.id ) <span class="keyword">AS</span> collectedQTY</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    (</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    cr.id,</span><br><span class="line">    jt.*</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    ( <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> CUSTOMER_RAW <span class="keyword">WHERE</span> DEL_FLAG = <span class="number">0</span> ) cr,</span><br><span class="line">    JSON_TABLE (</span><br><span class="line">    <span class="keyword">DATA</span>,</span><br><span class="line">    <span class="string">'$.generalInfo.address[*]'</span> <span class="keyword">COLUMNS</span> ( row_number <span class="keyword">FOR</span> <span class="keyword">ORDINALITY</span>, address_cityTown <span class="built_in">NUMBER</span> ( <span class="number">20</span> ) <span class="keyword">PATH</span> <span class="string">'$.cityTown'</span> )) <span class="keyword">AS</span> jt</span><br><span class="line">    ) t</span><br><span class="line">    <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> GLOBAL_LOCATION gl <span class="keyword">ON</span> t.address_cityTown = gl.ID</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">    t.address_cityTown,</span><br><span class="line">    gl.PATH</span><br></pre></td></tr></table></figure>

<h4 id="TABLE"><a href="#TABLE" class="headerlink" title="TABLE"></a>TABLE</h4><blockquote>
<p><a href="/download/CUSTOMER_RAW.sql">CUSTOMER_RAW.sql</a></p>
</blockquote>
<h3 id="ORA-04098"><a href="#ORA-04098" class="headerlink" title="ORA-04098"></a>ORA-04098</h3><blockquote>
<p><a href="https://www.cnblogs.com/enternal07/p/6762752.html" target="_blank" rel="noopener">Oracle触发器，解决ORA-04098: 触发器 ‘USER.DECTUSERTEST_TRI’ 无效且未通过重新验证</a></p>
</blockquote>
<h4 id="问题描述-1"><a href="#问题描述-1" class="headerlink" title="问题描述"></a>问题描述</h4><p>创建了一个触发器，在执行触发事件的 SQL 时报错：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">ORA-04098: trigger 'SKYSTAR.COUNT_COLLECTED_QTY' is invalid and failed re-validation</span><br></pre></td></tr></table></figure>

<h4 id="触发器"><a href="#触发器" class="headerlink" title="触发器"></a>触发器</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> <span class="keyword">REPLACE</span> <span class="keyword">TRIGGER</span> Count_Collected_Qty </span><br><span class="line"><span class="keyword">AFTER</span> <span class="keyword">INSERT</span>  </span><br><span class="line"><span class="keyword">ON</span> CUSTOMER_RAW_TEST</span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">each</span> <span class="keyword">ROW</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">		<span class="keyword">UPDATE</span> GLOBAL_LOCATION_TEST <span class="keyword">SET</span> COLLECTED_QTY = COLLECTED_QTY + <span class="number">1</span> </span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure>

<h4 id="触发-SQL"><a href="#触发-SQL" class="headerlink" title="触发 SQL"></a>触发 SQL</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">"CUSTOMER_RAW_TEST"</span>(<span class="string">"ID"</span>, <span class="string">"DATA"</span>, <span class="string">"SOURCE_TYPE_ID"</span>, <span class="string">"STATUS"</span>, <span class="string">"CREATE_BY"</span>, <span class="string">"CREATE_DATE"</span>, <span class="string">"UPDATE_BY"</span>, <span class="string">"UPDATE_DATE"</span>, <span class="string">"DEL_FLAG"</span>, <span class="string">"GOOGLE_FLAG"</span>, <span class="string">"GOOGLE_ADDRESS"</span>, <span class="string">"PROCESS_FLAG"</span>) <span class="keyword">VALUES</span> </span><br><span class="line">(<span class="string">'5'</span>, <span class="string">'&#123;"generalInfo":&#123;"address":[&#123;"country":5100,"countryName":"Test Country A","state":5110,"stateName":"Test State AA","cityTown":5111,"cityTownName":"Test City AAA"&#125;]&#125;&#125;'</span>, <span class="string">'1'</span>, <span class="string">'213'</span>, <span class="string">'1435'</span>, <span class="keyword">TO_DATE</span>(<span class="string">'2019-09-16 15:36:37'</span>, <span class="string">'SYYYY-MM-DD HH24:MI:SS'</span>), <span class="string">'1435'</span>, <span class="keyword">TO_DATE</span>(<span class="string">'2019-09-16 15:36:37'</span>, <span class="string">'SYYYY-MM-DD HH24:MI:SS'</span>), <span class="string">'0'</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>);</span><br></pre></td></tr></table></figure>

<h4 id="TABLE-1"><a href="#TABLE-1" class="headerlink" title="TABLE"></a>TABLE</h4><p><a href="/download/GLOBAL_LOCATION_TEST.sql">GLOBAL_LOCATION_TEST.sql</a></p>
<p><a href="/download/CUSTOMER_RAW_TEST.sql">CUSTOMER_RAW_TEST.sql</a></p>
<h4 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h4><p>触发操作中的 SQL 语句没有加 <code>;</code></p>
]]></content>
      <categories>
        <category>Oracle</category>
      </categories>
      <tags>
        <tag>Oracle</tag>
      </tags>
  </entry>
  <entry>
    <title>Study Notes of CSS</title>
    <url>/2019/07/31/Study-Notes-of-CSS/</url>
    <content><![CDATA[<img src="https://miro.medium.com/max/1200/1*OFsc0SD55jhi8cjo7aCA4w.jpeg" width="100%"/>

<a id="more"></a>

<h2 id="垂直居中"><a href="#垂直居中" class="headerlink" title="垂直居中"></a>垂直居中</h2><h3 id="Flexbox-布局中实现元素的水平垂直居中"><a href="#Flexbox-布局中实现元素的水平垂直居中" class="headerlink" title="Flexbox 布局中实现元素的水平垂直居中"></a>Flexbox 布局中实现元素的水平垂直居中</h3><blockquote>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/justify-content" target="_blank" rel="noopener">justify-content | MDN</a></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/align-items" target="_blank" rel="noopener">align-items | MDN</a></p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#container</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<iframe height="265" style="width: 100%;" scrolling="no" title="bXmeLr" src="//codepen.io/libo9527/embed/bXmeLr/?height=265&theme-id=0&default-tab=result" frameborder="no" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href='https://codepen.io/libo9527/pen/bXmeLr/' target="_blank" rel="noopener">bXmeLr</a> by libo9527
  (<a href='https://codepen.io/libo9527' target="_blank" rel="noopener">@libo9527</a>) on <a href='https://codepen.io' target="_blank" rel="noopener">CodePen</a>.
</iframe>

<h2 id="position-sticky"><a href="#position-sticky" class="headerlink" title="position: sticky"></a>position: sticky</h2><blockquote>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/position" target="_blank" rel="noopener">position | MDN</a></p>
<p><a href="https://www.zhangxinxu.com/wordpress/2018/12/css-position-sticky/" target="_blank" rel="noopener">杀了个回马枪，还是说说position:sticky吧« 张鑫旭-鑫空间-鑫生活</a></p>
</blockquote>
<p>需求说明：实现导航的跟随定位效果</p>
<iframe width="100%" height="300" src="https://www.zhangxinxu.com/study/201812/position-sticky.html" frameborder="0" style="max-width:100%;border:1px solid #ddd;"></iframe>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">nav</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: -webkit-sticky;</span><br><span class="line">    <span class="attribute">position</span>: sticky;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="单位"><a href="#单位" class="headerlink" title="单位"></a>单位</h2><h3 id="vw、vh、vm"><a href="#vw、vh、vm" class="headerlink" title="vw、vh、vm"></a>vw、vh、vm</h3><blockquote>
<p><a href="https://www.zhangxinxu.com/wordpress/2012/09/new-viewport-relative-units-vw-vh-vm-vmin/" target="_blank" rel="noopener">视区相关单位vw, vh..简介以及可实际应用场景</a></p>
</blockquote>
<p>vw 相对于视区的宽度：视区宽度是100vw；vh 相对于视区的高度：视区高度是100vh</p>
<p><strong>“视区”指浏览器内部的可视区域大小</strong>，即<code>window.innerWidth/window.innerHeight</code>大小，不包含任务栏标题栏以及底部工具栏的浏览器区域大小。</p>
<h2 id="CSS截取图片的几种方式"><a href="#CSS截取图片的几种方式" class="headerlink" title="CSS截取图片的几种方式"></a>CSS截取图片的几种方式</h2><ol>
<li><p>div元素，使用 background-position：Xpx Ypx，配合 width 和 height</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"div_bg"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">   <span class="selector-class">.div_bg</span></span></span><br><span class="line">        &#123;</span><br><span class="line">            width: 550px;</span><br><span class="line">            height: 113px;</span><br><span class="line">            background-image: url(img/bk_title_all.jpg);</span><br><span class="line">            background-repeat: no-repeat;</span><br><span class="line">            background-position: 0px -599px;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="去除inline-block元素间间距的N种方法"><a href="#去除inline-block元素间间距的N种方法" class="headerlink" title="去除inline-block元素间间距的N种方法"></a><a href="https://www.zhangxinxu.com/wordpress/2012/04/inline-block-space-remove-%E5%8E%BB%E9%99%A4%E9%97%B4%E8%B7%9D/" target="_blank" rel="noopener">去除inline-block元素间间距的N种方法</a></h2><ol>
<li>去掉HTML中的空格，自然间距就木有了。</li>
</ol>
]]></content>
      <categories>
        <category>Front-end</category>
        <category>CSS</category>
      </categories>
  </entry>
  <entry>
    <title>Study Notes of JavaScript</title>
    <url>/2019/07/31/Study-Notes-of-JavaScript/</url>
    <content><![CDATA[<img src="https://www.tutorialrepublic.com/lib/images/javascript-illustration.png" width="100%"/>

<a id="more"></a>

<h2 id="ForEach"><a href="#ForEach" class="headerlink" title="ForEach"></a>ForEach</h2><p>JS 中 forEach 遍历数组的时候是无法通过 <code>break</code> 或者 <code>return false</code> 来中断的。</p>
<h2 id="取整"><a href="#取整" class="headerlink" title="取整"></a>取整</h2><h3 id="向下取整"><a href="#向下取整" class="headerlink" title="向下取整"></a>向下取整</h3><blockquote>
<p>向下取整就是在坐标轴上从左到右取离原数最近的整数</p>
<table>
<thead>
<tr>
<th align="center">x</th>
<th align="center">⌊x⌋</th>
</tr>
</thead>
<tbody><tr>
<td align="center">-1.9</td>
<td align="center">-2</td>
</tr>
<tr>
<td align="center">1.9</td>
<td align="center">1</td>
</tr>
</tbody></table>
</blockquote>
<h4 id="number-0"><a href="#number-0" class="headerlink" title="number | 0"></a>number | 0</h4><p>JS 没有整数的概念，所有的数值型都是双精度浮点数。而<a href="https://www.zhihu.com/question/319351649" target="_blank" rel="noopener">浮点数无法直接进行位运算</a>，在用位运算符时，JS 会先把操作数转变成整数再进行位运算，而 0 与其他值异或或者按位或都不会改变操作数，进而实现取整。</p>
<p>但是对于正数来说会进行向下取整，而对于负数则会进行向上取整。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">·&gt; -1.9 | 0</span><br><span class="line">&lt;· -1</span><br><span class="line">-------------</span><br><span class="line">·&gt; -1.1 | 0</span><br><span class="line">&lt;· -1</span><br><span class="line">-------------</span><br><span class="line">·&gt; 1.1 | 0</span><br><span class="line">&lt;· 1</span><br><span class="line">-------------</span><br><span class="line">·&gt; 1.9 | 0</span><br><span class="line">&lt;· 1</span><br></pre></td></tr></table></figure>

<h2 id="树的遍历"><a href="#树的遍历" class="headerlink" title="树的遍历"></a>树的遍历</h2><blockquote>
<p><a href="http://objcer.com/2017/02/26/traverse-the-tree/" target="_blank" rel="noopener">JS 中遍历树| Deng’s Blog</a></p>
<p><a href="https://blog.csdn.net/My_Jobs/article/details/43451187" target="_blank" rel="noopener">二叉树遍历（前序、中序、后序、层次遍历、深度优先、广度优先）</a></p>
</blockquote>
<h3 id="递归遍历"><a href="#递归遍历" class="headerlink" title="递归遍历"></a>递归遍历</h3><p>需求说明：公司项目中要求增加一个排序按钮，对地址树进行排序。排序则需要对树进行遍历，递归的排序子结点。</p>
<iframe height="265" style="width: 100%;" scrolling="no" title="Tree Sort" src="//codepen.io/libo9527/embed/gVjedo/?height=265&theme-id=0&default-tab=js,result" frameborder="no" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href='https://codepen.io/libo9527/pen/gVjedo/' target="_blank" rel="noopener">Tree Sort</a> by libo9527
  (<a href='https://codepen.io/libo9527' target="_blank" rel="noopener">@libo9527</a>) on <a href='https://codepen.io' target="_blank" rel="noopener">CodePen</a>.
</iframe>

<p>递归代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">recursive (root) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!root || !root.childNodes) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">  root.childNodes.forEach(<span class="function">(<span class="params">node</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.recursive(node)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h2><h3 id="unshift"><a href="#unshift" class="headerlink" title="unshift()"></a>unshift()</h3><blockquote>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/unshift" target="_blank" rel="noopener">Array.prototype.unshift() | MDN</a></p>
<p><strong>unshift()</strong> 方法将一个或多个元素添加到数组的<strong>开头</strong>，并返回该数组的<strong>新长度</strong>(该方法修改原有数组)</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> array1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(array1.unshift(<span class="number">4</span>, <span class="number">5</span>));</span><br><span class="line"><span class="comment">// expected output: 5</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(array1);</span><br><span class="line"><span class="comment">// expected output: Array [4, 5, 1, 2, 3]</span></span><br></pre></td></tr></table></figure>

<h3 id="map"><a href="#map" class="headerlink" title="map()"></a>map()</h3><blockquote>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/map" target="_blank" rel="noopener">Array.prototype.map()</a></p>
<p><code>map()</code> 方法创建一个新数组，其结果是该数组中的每个元素都调用一个提供的函数后返回的结果。</p>
</blockquote>
<h3 id="splice"><a href="#splice" class="headerlink" title="splice()"></a>splice()</h3><blockquote>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/splice" target="_blank" rel="noopener">Array.prototype.splice() - MDN</a></p>
<p><strong>splice()</strong> 方法通过删除或替换现有元素或者原地添加新的元素来修改数组,并以数组形式返回被修改的内容。此方法会改变原数组。</p>
</blockquote>
<h4 id="获取数组的最后一个元素"><a href="#获取数组的最后一个元素" class="headerlink" title="获取数组的最后一个元素"></a>获取数组的最后一个元素</h4><blockquote>
<p><a href="https://www.jianshu.com/p/a8d6a1fe4b60" target="_blank" rel="noopener">JavaScript 获取数组的最后一个元素方法（多种）</a></p>
</blockquote>
<p>浅复制的slice方法</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> args = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">var</span> lastElement = args.slice(<span class="number">-1</span>); <span class="comment">// [3]</span></span><br></pre></td></tr></table></figure>

<h3 id="判空"><a href="#判空" class="headerlink" title="判空"></a>判空</h3><blockquote>
<p><a href="https://stackoverflow.com/questions/24403732/check-if-array-is-empty-or-does-not-exist-js" target="_blank" rel="noopener">Check if array is empty or does not exist. JS</a></p>
</blockquote>
<p>Js Array 并没有 isEmpty() 这种直接判空的方法，需要使用如下方式进行判空</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (!array || array.length === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">// array empty or does not exist</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="遍历删除子结点"><a href="#遍历删除子结点" class="headerlink" title="遍历删除子结点"></a>遍历删除子结点</h3><h4 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h4><p>具有层级结构的结点数组，如何在遍历的过程中删除所有的子结点</p>
<h4 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h4><p>从后往前遍历数组，然后在遍历过程中删除子结点。需要注意的是<strong>数组中结点的顺序必须保证子结点一定在父结点之后</strong>。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> tree = [&#123;</span><br><span class="line">    id: <span class="number">1</span>,</span><br><span class="line">    name: <span class="string">'Aisa'</span>,</span><br><span class="line">    parentId: <span class="number">0</span></span><br><span class="line">&#125;, &#123;</span><br><span class="line">    id: <span class="number">11</span>,</span><br><span class="line">    name: <span class="string">'China'</span>,</span><br><span class="line">    parentId: <span class="number">1</span></span><br><span class="line">&#125;, &#123;</span><br><span class="line">    id: <span class="number">2</span>,</span><br><span class="line">    name: <span class="string">'Europe'</span>,</span><br><span class="line">    parentId: <span class="number">0</span></span><br><span class="line">&#125;, &#123;</span><br><span class="line">    id: <span class="number">21</span>,</span><br><span class="line">    name: <span class="string">'France'</span>,</span><br><span class="line">    parentId: <span class="number">1</span></span><br><span class="line">&#125;]</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'########### Before ###########'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'tree:'</span>, tree)</span><br><span class="line">tree.forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`name : <span class="subst">$&#123;item.name&#125;</span>`</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> ids = tree.map(<span class="function"><span class="params">item</span> =&gt;</span> item.id)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = tree.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">    <span class="keyword">let</span> node = tree[i]</span><br><span class="line">    <span class="keyword">if</span> (ids.includes(node.parentId)) &#123;</span><br><span class="line">        tree.splice(i, <span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'########### After ###########'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'tree:'</span>, tree)</span><br><span class="line">tree.forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`name : <span class="subst">$&#123;item.name&#125;</span>`</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">########### Before ########### </span><br><span class="line">tree: [&#123;&quot;id&quot;:1,&quot;name&quot;:&quot;Aisa&quot;,&quot;parentId&quot;:0&#125;,&#123;&quot;id&quot;:11,&quot;name&quot;:&quot;China&quot;,&quot;parentId&quot;:1&#125;,&#123;&quot;id&quot;:2,&quot;name&quot;:&quot;Europe&quot;,&quot;parentId&quot;:0&#125;,&#123;&quot;id&quot;:21,&quot;name&quot;:&quot;France&quot;,&quot;parentId&quot;:1&#125;] </span><br><span class="line">name : Aisa </span><br><span class="line">name : China </span><br><span class="line">name : Europe </span><br><span class="line">name : France </span><br><span class="line">########### After ########### </span><br><span class="line">tree: [&#123;&quot;id&quot;:1,&quot;name&quot;:&quot;Aisa&quot;,&quot;parentId&quot;:0&#125;,&#123;&quot;id&quot;:2,&quot;name&quot;:&quot;Europe&quot;,&quot;parentId&quot;:0&#125;] </span><br><span class="line">name : Aisa </span><br><span class="line">name : Europe</span><br></pre></td></tr></table></figure>

<h3 id="indexOf"><a href="#indexOf" class="headerlink" title="indexOf()"></a>indexOf()</h3><blockquote>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf" target="_blank" rel="noopener"><code>Array.prototype.indexOf()</code></a></p>
<p><strong>indexOf()</strong>方法返回在数组中可以找到一个给定元素的第一个索引，如果不存在，则返回-1。</p>
</blockquote>
<h3 id="includes"><a href="#includes" class="headerlink" title="includes()"></a>includes()</h3><blockquote>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/includes" target="_blank" rel="noopener"><code>Array.prototype.includes()</code></a></p>
<p><strong>includes()</strong> 方法用来判断一个数组是否包含一个指定的值，根据情况，如果包含则返回 true，否则返回false。</p>
</blockquote>
<h3 id="from"><a href="#from" class="headerlink" title="from()"></a>from()</h3><blockquote>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/from" target="_blank" rel="noopener">Array.from() | MDN</a></p>
<p><code>Array.from()</code> 方法从一个类似数组或可迭代对象中创建一个新的，浅拷贝的数组实例。</p>
</blockquote>
<h4 id="将-Set-转化为-Array"><a href="#将-Set-转化为-Array" class="headerlink" title="将 Set 转化为 Array"></a>将 Set 转化为 Array</h4><blockquote>
<p><a href="https://stackoverflow.com/questions/20069828/how-to-convert-set-to-array" target="_blank" rel="noopener">How to convert Set to Array?</a></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> array = <span class="built_in">Array</span>.from(mySet);</span><br></pre></td></tr></table></figure>

<h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h2><h3 id="add"><a href="#add" class="headerlink" title="add()"></a>add()</h3><blockquote>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Set/add" target="_blank" rel="noopener">Set.prototype.add() | MDN</a></p>
<p><code>add()</code> 方法用来向一个 <code>Set</code> 对象的末尾添加一个指定的值。</p>
</blockquote>
<p>Set 没有直接添加一个数组的方法，只能通过构造函数来添加：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">set</span> = new Set(['a', 'b', 'c'])</span><br><span class="line">const arr = ['d', 'e', 'f']</span><br><span class="line">const extendedSet = new Set([ ...<span class="keyword">set</span>, ...arr ])</span><br><span class="line">// Set &#123; <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>, <span class="string">'f'</span> &#125;</span><br></pre></td></tr></table></figure>

<h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><h3 id="delete"><a href="#delete" class="headerlink" title="delete()"></a>delete()</h3><blockquote>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Map/delete" target="_blank" rel="noopener">Map.prototype.delete()</a></p>
<p><code>delete()</code> 方法用于移除 <code>Map</code> 对象中指定 key 的键值对。</p>
</blockquote>
<h2 id="String"><a href="#String" class="headerlink" title="String"></a>String</h2><h3 id="localeCompare"><a href="#localeCompare" class="headerlink" title="localeCompare()"></a>localeCompare()</h3><blockquote>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/localeCompare" target="_blank" rel="noopener">String.prototype.localeCompare() | MDN</a></p>
<p><strong>localeCompare()</strong> 方法返回一个数字来指示一个参考字符串是否在排序顺序前面或之后或与给定字符串相同。</p>
</blockquote>
<p>项目中在对树结点按字母排序时使用：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">root.childNodes.sort(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (sortDirection === <span class="string">'asc'</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a.data.englishName.localeCompare(b.data.englishName)</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (sortDirection === <span class="string">'desc'</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> b.data.englishName.localeCompare(a.data.englishName)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="Console"><a href="#Console" class="headerlink" title="Console"></a>Console</h2><blockquote>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Console/log" target="_blank" rel="noopener">console.log()</a></p>
<p><a href="https://www.cnblogs.com/Wayou/p/chrome-console-tips-and-tricks.html" target="_blank" rel="noopener">Chrome 控制台不完全指南</a></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">`temp的值为: <span class="subst">$&#123;temp&#125;</span>`</span>)</span><br></pre></td></tr></table></figure>

<h2 id="Element"><a href="#Element" class="headerlink" title="Element"></a>Element</h2><h3 id="element-className-replace"><a href="#element-className-replace" class="headerlink" title="element.className.replace()"></a>element.className.replace()</h3><blockquote>
<p><a href="https://www.w3schools.com/howto/howto_js_remove_class.asp" target="_blank" rel="noopener">How TO - Remove a Class</a></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> element = <span class="built_in">document</span>.getElementById(<span class="string">"myDIV"</span>);</span><br><span class="line">element.classList.remove(<span class="string">"mystyle"</span>);</span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>Front-end</category>
        <category>JavaScript</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux Command</title>
    <url>/2019/07/31/Linux-Command/</url>
    <content><![CDATA[<img src="https://opensource.com/sites/default/files/styles/image-full-size/public/lead-images/tux_linux_penguin_code_binary.jpg?itok=TxGxW0KY" width="100%"/>

<a id="more"></a>

<blockquote>
<p><a href="https://man.linuxde.net/" target="_blank" rel="noopener">Linux命令大全</a></p>
</blockquote>
<h2 id="文件和目录管理"><a href="#文件和目录管理" class="headerlink" title="文件和目录管理"></a>文件和目录管理</h2><h3 id="mkdir"><a href="#mkdir" class="headerlink" title="mkdir"></a>mkdir</h3><blockquote>
<p><a href="https://man.linuxde.net/mkdir" target="_blank" rel="noopener">mkdir</a></p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ mkdir -p /media/userfiles/<span class="built_in">cd</span>/temp</span><br><span class="line"><span class="comment"># -p, --parents</span></span><br><span class="line">no error <span class="keyword">if</span> existing, make parent directories as needed</span><br></pre></td></tr></table></figure>

<h3 id="mv"><a href="#mv" class="headerlink" title="mv"></a>mv</h3><blockquote>
<p><a href="https://man.linuxde.net/mv" target="_blank" rel="noopener">mv | Linux命令大全</a></p>
<p><strong>mv命令</strong>用来对文件或目录重新命名，或者将文件从一个目录移到另一个目录中。</p>
</blockquote>
<h4 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h4><ul>
<li><p>将 admin 文件夹重命名为 ledger-admin</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> 到 admin 上一级</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> mv admin ledger-admin</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>将文件 a.txt 从目录 <code>/a</code> 移动到 <code>/b</code></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> mv /a/a.txt /b/a.txt</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
  </entry>
  <entry>
    <title>Mac-OS-Terminal</title>
    <url>/2019/07/31/Mac-OS-Terminal/</url>
    <content><![CDATA[<img src="https://photos5.appleinsider.com/gallery/29497-47785-000-3x2-Terminal-part-2-l.jpg" width="100%"/>

<a id="more"></a>

<h2 id="文件权限"><a href="#文件权限" class="headerlink" title="文件权限"></a>文件权限</h2><blockquote>
<p><a href="http://cn.linux.vbird.org/linux_basic/0210filepermission.php" target="_blank" rel="noopener">第六章、Linux 的文件权限与目录配置</a></p>
</blockquote>
<h3 id="查看文件权限"><a href="#查看文件权限" class="headerlink" title="查看文件权限"></a>查看文件权限</h3><p>命令：<code>ls -l</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ls -l xxx.xxx</span><br><span class="line">-rw-r--r--@ 1 boris  staff  1080  7 31 18:00 xxx.xxx</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>文件类型和访问权限</th>
<th>文件数量</th>
<th align="center">所属用户</th>
<th>所在群组</th>
<th>文件大小</th>
<th>修改日期（月 日 时 分）</th>
<th>文件名称</th>
</tr>
</thead>
<tbody><tr>
<td>-rw-r–r–@</td>
<td>1</td>
<td align="center">boris</td>
<td>staff</td>
<td>1080</td>
<td>7 31 18:00</td>
<td>xxx.xxx</td>
</tr>
</tbody></table>
<h4 id="文件类型和访问权限"><a href="#文件类型和访问权限" class="headerlink" title="文件类型和访问权限"></a>文件类型和访问权限</h4><p>第一个符号代表文件类型：</p>
<ul>
<li><code>-</code> 表示该文件是非目录类型</li>
<li><code>d</code> 表示目录类型</li>
<li>中间九个字母分为三组，分别对应用户（user）、所在组（group）和其他用户（other）对该文件的访问权限。每组中的三个字符 “rwx” 分别表示对应用户对该文件拥有的可读／可写／可执行权限，没有相应权限则使用 “-” 符号替代。</li>
<li>末尾的 @ 符号表示文件拓展属性，属于文件系统的一个功能。</li>
</ul>
<h3 id="修改文件权限"><a href="#修改文件权限" class="headerlink" title="修改文件权限"></a>修改文件权限</h3><p>命令：<code>chmod [用户][操作][权限] [文件]</code></p>
<ul>
<li>用户部分：使用字母 u 表示文件拥有者（user），g 表示拥有者所在群组（group），o 表示其他用户（other），a 表示全部用户（all，包含前面三种用户范围）；</li>
<li>操作部分：“+” 符号表示增加权限，“-” 符号表示取消权限，“=” 符号表示赋值权限；</li>
<li>权限部分：“r” 符号表示可读（read），“w” 表示可写（write），“x” 表示可执行权限（execute）；</li>
<li>文件部分：如不指定文件名，表示操作对象为当前目录下的所有文件。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> chmod a-w demo.txt <span class="comment"># 所有用户去掉‘写’权限</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ls -l demo.txt </span></span><br><span class="line">-r--r--r--  1 boris  staff  4  8  7 09:10 demo.txt</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Mac</category>
      </categories>
      <tags>
        <tag>Command-line</tag>
      </tags>
  </entry>
  <entry>
    <title>Use-of-ElementUI</title>
    <url>/2019/07/31/Use-of-ElementUI/</url>
    <content><![CDATA[<img src="https://i.loli.net/2019/07/31/5d41178cb31bc93582.png" width="100%"/>

<a id="more"></a>

<blockquote>
<p><a href="https://element.eleme.cn" target="_blank" rel="noopener">ElementUI</a></p>
</blockquote>
<h2 id="Scrollbar-滚动条"><a href="#Scrollbar-滚动条" class="headerlink" title="Scrollbar 滚动条"></a>Scrollbar 滚动条</h2><blockquote>
<p><a href="https://codepen.io/libo9527/pen/jgmYmb" target="_blank" rel="noopener">Demo code</a></p>
</blockquote>
<p><img src="https://i.loli.net/2019/07/31/5d4135303465a78467.png" alt="项目中的使用"></p>
<p>注：如果不需要横向滚动条，将 wrap 层的 <code>overflow-x</code> 置为 <code>hidden</code> 即可。</p>
<h2 id="ERROR"><a href="#ERROR" class="headerlink" title="ERROR"></a>ERROR</h2><h3 id="懒加载情况下无法添加一级结点"><a href="#懒加载情况下无法添加一级结点" class="headerlink" title="懒加载情况下无法添加一级结点"></a>懒加载情况下无法添加一级结点</h3><h4 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h4><p>懒加载情况下无法通过 append/insertBefore 等方法添加一级结点</p>
<h4 id="报错"><a href="#报错" class="headerlink" title="报错"></a>报错</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">console_runner-1df7d3399bdc1f40995a35209755dcfd8c7547da127f6469fd81e5fba982f6af.js:1 [Vue warn]: Error in v-on handler: &quot;TypeError: Cannot read property &#39;indexOf&#39; of undefined&quot;</span><br><span class="line"></span><br><span class="line">found in</span><br><span class="line"></span><br><span class="line">---&gt; &lt;ElButton&gt; at packages&#x2F;button&#x2F;src&#x2F;button.vue</span><br><span class="line">       &lt;ElCard&gt; at packages&#x2F;card&#x2F;src&#x2F;main.vue</span><br><span class="line">         &lt;Root&gt;</span><br></pre></td></tr></table></figure>

<h4 id="CODE"><a href="#CODE" class="headerlink" title="CODE"></a>CODE</h4><iframe height="300" style="width: 100%;" scrolling="no" title="ElemnetUI Tree 添加顶级结点" src="//codepen.io/libo9527/embed/qBWyyYx/?height=265&theme-id=0&default-tab=result" frameborder="no" allowtransparency="true" allowfullscreen="true">
  See the Pen <a href='https://codepen.io/libo9527/pen/qBWyyYx/' target="_blank" rel="noopener">ElemnetUI Tree 添加顶级结点</a> by libo9527
  (<a href='https://codepen.io/libo9527' target="_blank" rel="noopener">@libo9527</a>) on <a href='https://codepen.io' target="_blank" rel="noopener">CodePen</a>.
</iframe>]]></content>
      <categories>
        <category>Front-end</category>
      </categories>
      <tags>
        <tag>ElementUI</tag>
      </tags>
  </entry>
  <entry>
    <title>Summary of PAT</title>
    <url>/2019/02/15/Summary-of-PAT/</url>
    <content><![CDATA[<img src="https://i.loli.net/2019/01/11/5c3813443dce6.jpg" width="100%"/>

<a id="more"></a>

<h2 id="PAT总结"><a href="#PAT总结" class="headerlink" title="PAT总结"></a>PAT总结</h2><h3 id="最佳实践"><a href="#最佳实践" class="headerlink" title="最佳实践"></a>最佳实践</h3><ul>
<li>输入使用<code>scanf</code>，输出使用<code>printf</code></li>
<li>题目要求 10^9 以内或者说 32 位整数，使用 int</li>
<li>题目要求 10^10 以内或者说 64 位整数，使用 double</li>
<li>浮点型数据使用 double 存储，不要用 float</li>
<li>小写字母的 ASCLL 码比大写字母的 ASCLL 码值 32</li>
<li>常量使用 const 方式定义，不要用<strong>宏定义</strong></li>
<li>无穷大的数 INF 设置为 <code>(1 &lt;&lt; 31) - 1</code></li>
<li>数组大小大于 10^6，则将其定义在主函数外面</li>
<li>只用 memset 函数给数组赋 0 或 -1，使用 fill 函数赋其他值</li>
</ul>
<h3 id="PAT-OJ-坑"><a href="#PAT-OJ-坑" class="headerlink" title="PAT OJ 坑"></a>PAT OJ 坑</h3><ul>
<li><p>PTA OJ 使用 <code>get()</code> 函数，C++ 会编译不通过，C 编译可以通过，但注意将头文件修改成 C 语言格式。</p>
<p>解决方法：</p>
<ol>
<li><p>使用 <code>scanf(&quot;%s&quot;, a)</code> 替代</p>
<p>sacanf() 无法接受带有空格的字符串。</p>
</li>
<li><p>使用 <code>fgets(char* a,int maxlens,stdin)</code> 替代</p>
<p>fgets 函数在<strong>未读取到我们要求的大小时</strong>（例如 maxlens=10，但只输入了3个字符），遇到换行符，那么读取到的数据就是： 已经读到的数据（遇到换行符前的数据）+ 换行符 + NULL，这会导致 strlen() 函数求得的长度比实际值多 1。</p>
</li>
</ol>
</li>
</ul>
<h3 id="C-C-语法"><a href="#C-C-语法" class="headerlink" title="C / C++ 语法"></a>C / C++ 语法</h3><h4 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h4><p><strong>四种基本数据类型</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>大致范围</th>
</tr>
</thead>
<tbody><tr>
<td>int（long int）</td>
<td>-2 x 10^9 ~ 2 x 10^9</td>
</tr>
<tr>
<td>long long（long long int)</td>
<td>-9 x 10^18 ~ 9 x 10^18</td>
</tr>
<tr>
<td>float</td>
<td>实际精度 6 ~ 7 位</td>
</tr>
<tr>
<td>double</td>
<td>实际精度 15 ~ 16 位</td>
</tr>
<tr>
<td>char</td>
<td>-128 ~ 127</td>
</tr>
<tr>
<td>bool</td>
<td>0(false) or 1(true)</td>
</tr>
</tbody></table>
<p>long long 型赋大于 2^31 - 1 的初值时，需要在初值后面加上 LL</p>
<h4 id="格式符"><a href="#格式符" class="headerlink" title="格式符"></a>格式符</h4><p><strong>scanf 格式符</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>格式符</th>
</tr>
</thead>
<tbody><tr>
<td>int</td>
<td>%d</td>
</tr>
<tr>
<td>long long</td>
<td>%lld</td>
</tr>
<tr>
<td>folat</td>
<td>%f</td>
</tr>
<tr>
<td>double</td>
<td>%lf</td>
</tr>
<tr>
<td>char</td>
<td>%c</td>
</tr>
<tr>
<td>字符串（char 数组）</td>
<td>%s</td>
</tr>
</tbody></table>
<p>除了 <code>%s</code> 外，scanf 对其他格式符的输入是以空白符（空格、换行）为结束判断标志。</p>
<p><strong>printf 格式符</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>格式符</th>
</tr>
</thead>
<tbody><tr>
<td>int</td>
<td>%d</td>
</tr>
<tr>
<td>long long</td>
<td>%lld</td>
</tr>
<tr>
<td>folat</td>
<td>%f</td>
</tr>
<tr>
<td>double</td>
<td>%f（不是 %lf）</td>
</tr>
<tr>
<td>char</td>
<td>%c</td>
</tr>
<tr>
<td>字符串（char 数组）</td>
<td>%s</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>格式符</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>%md</td>
<td>使不足 m 位的 int 型变量以 m 位进行右对齐输出，高位用<strong>空格</strong>补齐</td>
</tr>
<tr>
<td>%0md</td>
<td>类似<code>%md</code>，不过高位用 0 补齐</td>
</tr>
<tr>
<td>%.mf</td>
<td>浮点数保留 m 位小数，采用<strong>四舍六入五成双</strong>规则</td>
</tr>
</tbody></table>
<p><strong><em>想要输出 <code>%</code>,<code>\</code>需要在前面再加上一个<code>%</code>,<code>\</code></em></strong></p>
<h4 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h4><p><strong>常用 math 函数</strong></p>
<p>使用时需要添加 <code>&lt;cmath</code> 头文件。</p>
<ol>
<li><p>绝对值：<code>fabs(double x)</code></p>
</li>
<li><p>取整：<code>floor(double x)</code>，<code>ceil(double x)</code></p>
</li>
<li><p>指数：<code>sqrt(double x)</code></p>
</li>
<li><p>对数：<code>log(double x)</code></p>
</li>
</ol>
<p>换底公式：<code>log(a, b) = log(e, b) / log(e, a)</code></p>
<ol start="5">
<li><p>三角：<code>sin(double x), cos(double x), tan(double x)</code></p>
</li>
<li><p>反三角：<code>asin(double x), acos(double x), atan(double x)</code></p>
</li>
<li><p>四舍五入：<code>round(double x)</code></p>
</li>
</ol>
<p><strong>memset</strong></p>
<p>使用时需要添加 <code>&lt;cstring&gt;</code> 头文件</p>
<p>对数组每个元素赋相同的值。</p>
<p><strong>常见 string 函数</strong></p>
<p>需要添加 <code>&lt;cstring&gt;</code> 头文件</p>
<ol>
<li><p>取长：<code>strlen()</code></p>
<p>strlen() 函数返回的类型是一个无符号整数类型，这就带来了一些需要<strong><em>注意的问题</em></strong>。</p>
<p>比如<br>1  <code>if( strlen(str1) &gt;= strlen(str2) )......</code><br>2  <code>if( strlen(str1) - strlen(str2) &gt;= 0)......</code></p>
<p>第一个 if 能够正常工作，但是第二个就不能了，因为 strlen() 的返回值是无符号整型值，所以 &gt;=  左边的整个式子的结果就是一个无符号整型值。也就是说第二个 if 的结果永远都为真（无符号数不可能大于0）。</p>
</li>
<li><p>比较：<code>strcmp()</code></p>
</li>
<li><p>复制：<code>strcpy()</code></p>
</li>
<li><p>拼接：<code>strcat()</code></p>
</li>
</ol>
<p>数组可以作为函数的参数，但<strong>不能作为返回值类型</strong></p>
<h4 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h4><p>数组大小必须是整数常量，不可以是变量</p>
<p>整型数组部分初始化后其余默认位 0，但如果都没有初始化，则每个元素都是一个随机数。</p>
<p>字符数组可以直接赋值字符串类初始化，但<strong>仅限于初始化</strong>，其他位置不允许。</p>
<h4 id="指针"><a href="#指针" class="headerlink" title="指针"></a>指针</h4><ul>
<li>指针就是变量的地址</li>
<li>指针是一个 unsigned 类型的整数</li>
<li><code>*</code> 一般放在变量前，但<strong>星号是类型的一部分</strong></li>
</ul>
<h4 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h4><ul>
<li>引用不产生副本，而是给原变量<strong>起别名</strong></li>
<li>引用不是取地址。<code>&amp;</code> 只有在函数的参数列表中出现才叫<strong>引用</strong>，其余地方叫<strong>取址符</strong></li>
</ul>
<h4 id="结构体"><a href="#结构体" class="headerlink" title="结构体"></a>结构体</h4><ul>
<li>访问结构体内的元素有两种方法：<code>.</code> 和 <code>-&gt;</code></li>
</ul>
<h4 id="浮点数的比较"><a href="#浮点数的比较" class="headerlink" title="浮点数的比较"></a>浮点数的比较</h4><p>精度 eps 一般取 10^-8</p>
<p><code>const double eps = 1e-8</code></p>
<ol>
<li>等于</li>
</ol>
<p><code>#define Equ(a, b) ((fabs((a) - (b))) &lt; (eps))</code></p>
<ol start="2">
<li>大于</li>
</ol>
<p><code>#define More(a, b) (((a) - (b)) &gt; (eps))</code></p>
<ol start="3">
<li>小于</li>
</ol>
<p><code>#define Less(a, b) (((a) - (b) &lt; (eps)))</code></p>
<ol start="4">
<li>大于等于</li>
</ol>
<p><code>#define MoreEqu(a, b) (((a) - (b) &gt; (-eps)))</code></p>
<ol start="5">
<li>小于等于</li>
</ol>
<p><code>#define LessEqu(a, b)(((a) - (b) &lt; (eps)))</code></p>
<h4 id="复杂度"><a href="#复杂度" class="headerlink" title="复杂度"></a>复杂度</h4><p><strong>时间复杂度</strong></p>
<p>O(1) &lt; O(logn) &lt; O(n) &lt; O(n^2)</p>
<p><strong>空间复杂度</strong></p>
<p>一般都够用，只要不开好几盒 10^7 以上的数组即可。</p>
<h3 id="评测结果"><a href="#评测结果" class="headerlink" title="评测结果"></a>评测结果</h3><h4 id="AC（Accepted-答案正确）"><a href="#AC（Accepted-答案正确）" class="headerlink" title="AC（Accepted 答案正确）"></a>AC（Accepted 答案正确）</h4><h4 id="CE（Compile-Eroor-编译错误）"><a href="#CE（Compile-Eroor-编译错误）" class="headerlink" title="CE（Compile Eroor 编译错误）"></a>CE（Compile Eroor 编译错误）</h4><h4 id="WA（Wrong-Answer-答案错误）"><a href="#WA（Wrong-Answer-答案错误）" class="headerlink" title="WA（Wrong Answer 答案错误）"></a>WA（Wrong Answer 答案错误）</h4><h4 id="TLE（Time-Limit-Exceeded-运行超时）"><a href="#TLE（Time-Limit-Exceeded-运行超时）" class="headerlink" title="TLE（Time Limit Exceeded 运行超时）"></a>TLE（Time Limit Exceeded 运行超时）</h4><ul>
<li>时间复杂度太高</li>
<li>死循环</li>
</ul>
<h4 id="RE（Runtime-Error-运行错误）"><a href="#RE（Runtime-Error-运行错误）" class="headerlink" title="RE（Runtime Error 运行错误）"></a>RE（Runtime Error 运行错误）</h4><ul>
<li>段错误</li>
<li>非法访问内存</li>
<li>数组越界</li>
<li>指针乱指</li>
<li>浮点错误</li>
<li>除数为 0</li>
<li>模数为 0</li>
<li>递归爆栈</li>
<li>递归层数太深</li>
</ul>
<h4 id="MLE（Memory-Limit-Exceeded-内存超限）"><a href="#MLE（Memory-Limit-Exceeded-内存超限）" class="headerlink" title="MLE（Memory Limit Exceeded 内存超限）"></a>MLE（Memory Limit Exceeded 内存超限）</h4><ul>
<li>数组太大</li>
</ul>
<h4 id="PE（Presentation-Error-格式错误）"><a href="#PE（Presentation-Error-格式错误）" class="headerlink" title="PE（Presentation Error 格式错误）"></a>PE（Presentation Error 格式错误）</h4><ul>
<li>空格</li>
<li>换行</li>
</ul>
<h4 id="OLE（Output-Limit-Exceeded-输出超限）"><a href="#OLE（Output-Limit-Exceeded-输出超限）" class="headerlink" title="OLE（Output Limit Exceeded 输出超限）"></a>OLE（Output Limit Exceeded 输出超限）</h4><ul>
<li>调试信息</li>
<li>死循环输出</li>
</ul>
]]></content>
      <categories>
        <category>PAT</category>
      </categories>
      <tags>
        <tag>PAT</tag>
      </tags>
  </entry>
  <entry>
    <title>Scenic Strategy</title>
    <url>/2019/02/03/Scenic-Strategy/</url>
    <content><![CDATA[<img src="http://staticnew.mayi.com/resourcesWeb/travel/images/zixun/201509030020127533.jpg" width="100%"/>

<a id="more"></a>

<h2 id="景点攻略"><a href="#景点攻略" class="headerlink" title="景点攻略"></a>景点攻略</h2><blockquote>
<p><a href="https://www.meet99.com/lvyou" target="_blank" rel="noopener">景点大全</a></p>
</blockquote>
<h2 id="金鸡湖景区"><a href="#金鸡湖景区" class="headerlink" title="金鸡湖景区"></a>金鸡湖景区</h2><p>门票<br>金鸡湖免费，摩天轮乐园成人80元，学生40元/人。<br>开放时间<br>全天。金鸡湖音乐喷泉的时间：周五周六晚上20:00-20:30</p>
<p><img src="http://jinjilake.sipac.gov.cn/images/yxjjh/yxjjh_wh.png" alt=""></p>
<p>景区内目前有3个游客接待中心，分别是北门游客中心、南门游客中心和博览游客中心。这里可以免费获取旅游手册，资讯旅游信息，租借婴儿椅、轮椅等，还能寄送明信片。</p>
<h2 id="拙政园"><a href="#拙政园" class="headerlink" title="拙政园"></a>拙政园</h2><blockquote>
<p><a href="https://www.baidu.com/link?url=grc1aIl18kWGOdDq8Mqa8biQ5gH_L_h-fThoI4uKjGMYNCO4g7d1bTCKxy6_G2N-NT8R9n7qG-1qtBS5fjNoia9fULDznfN7fr_ku1NmjyVCDk7lauTzs89plubteNBgVyr905Ni2iRSWCzkY3JJDgcUDy383rBzQYMqaFdWNnNZHBAkbMmnmjbeprSNFx91YCZXqyrKPKB0ONJzjfN-YzwWFyYgxDjxgRx4v9kJLnYbuOsZguDs6L-dYQXESXJhQsXkvR6w5uPk0Gg0dsSuxpjo5mMMIpCO8-mFRHCj6pqnNQqdKET7IYZY6iy5gOqihT-qxBwYdhsT2o19TLCTD3XBdJhzIuWvHx7Es-H1jeHzwsb3DwX6kFRgqvTM55gAzT0IsHdAz5gh5oLiX7iTrXKeFMX0elI7SVfBeim616hR3Bv9W_haYvrS63si8XR41TtobevSyyH3bOgTz46iJtEieeCgG2neSKLf7fMQNixsBtK7lcX_MOhlU65_q5c6p2zERiYNAjUhcxP6FLoUelGlJX8JE2F19Hh5OyB493gBxslDsF9xoh1fHTN-7MFo8OlIvI0S5mqH2qiMf1DMdCUe7lPkWC7_41aRdPdK0P91okYLnLCr009xwDOF3Nw7pKS6Y4TV7dgPtS8cg3fIcncF91-ktjFmFbvHiqO6ao3dwbz51UcgTZ66fJt8MF4_KIHxK3xT0yp13x7BwOUhiQCGLpxlCjEQyGt3NcN87I2n4J0rg13TSsyaNbajEvYFNpjPCQV4_sPndk2bj5ZI6mYQyA_6JTxlNvb3G2afdmRHHLjEi78R2exewsnhQX2knEbIetIRD6AINEuc5cELJMAEHDqKaVbLIZNZzm_L38kDNmwPJTtyUcSBZpGwwbo2z5yyRic51VFLdfx8oUQkWftCgnEEAJgX8Se4hMXbbPsrWldec7OHSlkCTrCuZ4IOYK6z2kVR3UQKE4qiP5n8j_&wd=&eqid=8dac39ec0000553e000000065c566595" target="_blank" rel="noopener">苏州拙政园官网</a></p>
</blockquote>
<p>园林门票</p>
<p><strong>园林票价</strong></p>
<ul>
<li><strong>淡季 70元/位 1月  2月  3月  6月  11月  12月</strong></li>
<li><strong>旺季 90元/位 4月  5月  7月  8月  9 月  10月</strong></li>
</ul>
<p><strong>开园时间</strong> </p>
<ul>
<li><strong>7:30～17:30（3月1日～11月15日）</strong></li>
<li><strong>7:30～17:00（11月16日～次年2月29日）</strong></li>
</ul>
<p><strong>[</strong> <strong>减免门票入园规定]</strong><br>1、身高在1.4米以下儿童（含1.4米）由成人携带免票入园（不包括学生团队春秋游）；6周岁（含6周岁以下儿童）凭有效证件，由成人携带免票入园。<br>2、6周岁（不含6周岁）到18周岁（含18周岁）未成年人、本科及以下全日制在校学生（不含函授、成人教育及短期培训生、交流生和研究生），须凭本人有效学生证和身份证件享受半价优惠。<br>3、凭苏州市老干部局、苏州市园林和绿化管理局发放的离休干部游园证可免票入园。<br>4、现役军人、军队离退休干部凭有效证件可免票入园，革命伤残军人持国务院颁发的伤残军人证免票入园。<br>5、70周岁以上的老年人，持《高龄证》或居民身份证可免票入园；60至69周岁的老年人凭《老年人优待证》或身份证等有效证件可半价优惠。<br>6、全国“劳动模范”、市区市级以上（含市级）劳动模范凭苏州市园林和绿化管理局和苏州市总工会发放的“游园证”可免票入园。<br>7、持有苏州市环卫工人“荣誉证书”的市区居民，凭证书可免票入园。<br>8、全国残疾人员凭有效证件免票入园。<br>9、导游人员持有导游证和旅行社委派行程单带团实行免票。</p>
<p>以上政策规定自2014年6月30日起执行。</p>
<p><strong>以上优惠政策仅供参考，最终解释权归景区所有，以咨询景区实际答复为准。咨询热线：962015</strong></p>
<p>拙政园，位于江苏省苏州市，始建于明正德初年（16世纪初），是江南古典园林的代表作品。拙政园与北京颐和园、承德避暑山庄、苏州留园一起被誉为中国四大名园。</p>
<p>拙政园位于苏州城东北隅（东北街178号），截至2014年，仍是苏州存在的最大的古典园林，占地78亩（约合5.2公顷）。全园以水为中心，山水萦绕，厅榭精美，花木繁茂，具有浓郁的江南水乡特色。花园分为东、中、西三部分，东花园开阔疏朗，中花园是全园精华所在，西花园建筑精美，各具特色。园南为住宅区，体现典型江南地区传统民居多进的格局。园南还建有苏州园林博物馆，是国内唯一的园林专题博物馆。</p>
<p>1961年3月，拙政园被列为首批全国重点文物保护单位，1991年被国家计委、旅游局、建设部列为国家级特殊游览参观点。1997年联合国教科文组织批准列入《世界遗产名录》。2007年被国家旅游局评为首批国家AAAAA级旅游景区。</p>
<p>中国四大名园分别为：江苏省苏州市拙政园、 北京市海淀区颐和园、河北省承德市避暑山庄、江苏省苏州市留园。</p>
<p>苏州四大园林——沧浪亭、狮子林、拙政园和留园，分别代表着宋、元、明、清四个朝代的艺术风格，被称为苏州“四大名园”。</p>
<h2 id="苏州博物馆"><a href="#苏州博物馆" class="headerlink" title="苏州博物馆"></a>苏州博物馆</h2><blockquote>
<p><a href="http://trust.baidu.com/vstar/official/intro?type=gw" target="_blank" rel="noopener">苏州博物馆官网</a></p>
</blockquote>
<ul>
<li><p>门票</p>
<p>大成殿:30人民币；联票(大成殿、王谢古居):32人民币 (1月1日-12月31日 周一-周日) </p>
</li>
<li><p>开放时间</p>
<p>09:00-17:00；停止入场时间:16:00 (1月1日-12月31日 周二-周日) tips: 周一闭馆(国家法定节假日除外) ，本馆遇有重大活动或重要设备设施维修保养时，可根据需要临时闭馆，届时将告示公众。</p>
</li>
</ul>
<p>个人预约。简单注册一下就可以预约了，一个账号可以预约三个人。预约成功以后有二维码和短信，参观的时候带着身份证直接走到博物馆正门出示一下就可以进入了。请记得提前几天预约，周一博物馆不开放，平常9:00-17:00，四点就不能入馆了。请不要带食物、茶水、饮料进入。拍摄文物时请不要打开闪光灯。</p>
<p>不能带水和食物进入的.</p>
<p>在进入博物馆的时候要过安检的,我看到有人当时就把水喝光才进去的.没有寄存处的哦,</p>
<p>周一的时候是闭馆的,在周二和周五的营业时间是早上九点和下午五点,但是下午四点就不让进馆了.</p>
<p>所以在周一或者下午四点后就不要再去了.</p>
<p>新馆大门是入口，忠王府大门是出口</p>
<ol>
<li>参观人数过多时博物馆会实行限流，建议尽量避开周末和节假日前往</li>
<li>安检，不能携带食物和有色饮料，不能穿拖鞋进馆；馆内温度常年在20摄氏度左右，请注意衣着适宜；70岁以上老人、残疾人有专门的绿色通道。</li>
<li>有时会有特别展览（需购票），但不影响游客免费参观基本陈列。</li>
<li>博物馆提供专人讲解服务，每场100元起。</li>
<li>该景点与狮子林、苏州园林博物馆、苏州民俗博物馆等相近，可一并游览。</li>
</ol>
<h2 id="平江路-1小时"><a href="#平江路-1小时" class="headerlink" title="平江路(1小时)"></a>平江路(1小时)</h2><blockquote>
<p><a href="http://www.pingjiangroad.com/blogs/909.html" target="_blank" rel="noopener">苏州平江路旅游攻略</a></p>
</blockquote>
<p>平江路是苏州的一条历史老街，是一条沿河的小路，其河名为平江河。平江路历史街区是苏州古城迄今为止保存最为完整的一个区域，堪称古城缩影。对照南宋《平江图》及明末《苏州府城内水道总图》，平江路基本延续了唐宋以来的城坊格局，并至今保持着活力。</p>
<p>宋时苏州称“平江”，取名缘于此。平江路古名十泉里，因该路有古井十口的缘故。但清乾隆《长洲县志》学宫图中，已标作“平江大路”，自清同治《苏州府志》起，本路一直称作平江路，《姑苏图》等也均标平江路。</p>
<p>长1606.8米，宽3.2米，1985年改弹石路面为长方石人字形路面。2004年5月，平江路完成保护与整治工程，路面改建传统长条石横铺彻成。两侧支巷多为历史悠久的小巷，路以“水陆并行，河街相邻”特色著称，西侧平江河即为古城内“三横四直”干流中第四直河，宽5～6米，从南端苑桥到北端华阳桥，中间共有11座桥东西向跨越其上。</p>
<p>狐狸家手工酸…2809人去过 2<br>鸡脚旮旯(邾长巷)1700人去过 3<br>平江路历史街区1567人去过 4<br>皇城秘制鸡爪388人去过 5<br>桃花源记(平江店)611人去过 6<br>品芳茶社(平江…464人去过 7<br>鱼食饭稻土灶…568人去过 8<br>旧人家吃食104人去过</p>
<h2 id="乌镇"><a href="#乌镇" class="headerlink" title="乌镇"></a>乌镇</h2><blockquote>
<p><a href="http://www.baidu.com/link?url=AHieag_AeO2jaBjej02WLpGhAdrTmPNN6mwA0Q7ypZYxGNhUqWefFl7sXPXy3wsC" target="_blank" rel="noopener">乌镇旅游官方网站</a></p>
<p><a href="http://www.mafengwo.cn/mdd/cityroute/10434_139.html" target="_blank" rel="noopener">乌镇精华1日线路</a></p>
</blockquote>
<p>东栅：120元/人</p>
<p>西栅：150元/人</p>
<p>东西栅联票：200元/人</p>
<p>游览车：非住宿客人10元/人，住宿客人免费乘坐。景区内南线及北线游览车停靠点都有设置二维码叫车服务，方便快捷，减少等待时间</p>
<p>游船：拼包船（限8人）：60元/人（成人）、30元/人（1.5米以下儿童）；单包船：480元/艘（限8人）</p>
<p><a href="http://www.mafengwo.cn/poi/14972.html" target="_blank" rel="noopener">江南百床馆(30分钟)</a> → <a href="http://www.mafengwo.cn/poi/14958.html" target="_blank" rel="noopener">乌镇东栅景区-江南民俗馆(20分钟)</a> → <a href="http://www.mafengwo.cn/poi/14960.html" target="_blank" rel="noopener">宏源泰染坊(30分钟)</a> → <a href="http://www.mafengwo.cn/poi/15152.html" target="_blank" rel="noopener">江南木雕陈列馆(0.5-1小时)</a> → <a href="http://www.mafengwo.cn/poi/32299.html" target="_blank" rel="noopener">乌镇东栅景区-茅盾故居(30分钟)</a> → <a href="http://www.mafengwo.cn/poi/15514.html" target="_blank" rel="noopener">草木本色染坊(30分钟)</a> → <a href="http://www.mafengwo.cn/poi/14982.html" target="_blank" rel="noopener">乌镇西栅景区-昭明书院(30分钟)</a> → <a href="http://www.mafengwo.cn/poi/14965.html" target="_blank" rel="noopener">乌镇邮局(30分钟)</a>→ <a href="http://www.mafengwo.cn/poi/15023.html" target="_blank" rel="noopener">乌镇西栅景区-白莲塔(30分钟)</a> → <a href="http://www.mafengwo.cn/poi/1308.html" target="_blank" rel="noopener">女红街(30分钟)</a></p>
<p>东栅很小，一个充实的上午轻轻松松可以逛完的。</p>
<p>开放时间</p>
<p>07:00-18:00(东栅景区) (5月1日-9月30日 周一-周日)<br>07:00-17:30(东栅景区) (10月1日-次年4月30日 周一-周日)09:00-22:00(西栅景区) (10月1日-次年4月30日 周一-周日)</p>
<p>乌镇景区与高德地图合作，在高德地图上打造的首个人文智慧景区产品，进一步提升了乌镇景区游客游玩体验度。在计划出游前，游客可在高德地图搜索“乌镇”，“一键”直达乌镇“景区门户”，在这里不仅能看到景区动态信息，还可在线购门票、定酒店，查询官方推荐玩法、交通路线等信息。</p>
<h2 id="西湖"><a href="#西湖" class="headerlink" title="西湖"></a>西湖</h2><p>一山 <a href="https://baike.baidu.com/item/%E5%AD%A4%E5%B1%B1" target="_blank" rel="noopener">孤山</a><br>二塔 <a href="https://baike.baidu.com/item/%E9%9B%B7%E5%B3%B0%E5%A1%94" target="_blank" rel="noopener">雷峰塔</a>和<a href="https://baike.baidu.com/item/%E4%BF%9D%E4%BF%B6%E5%A1%94" target="_blank" rel="noopener">保俶塔</a><br>三岛 <strong>小瀛洲</strong> <strong>湖心亭</strong> <strong>阮公墩</strong><br>三堤 <strong>白堤</strong> <strong>苏堤</strong> <strong>杨公堤</strong><br>西湖十景<br>环湖街道</p>
<p>最初的十景景目为<a href="https://baike.baidu.com/item/%E5%B9%B3%E6%B9%96%E7%A7%8B%E6%9C%88" target="_blank" rel="noopener">平湖秋月</a>、<a href="https://baike.baidu.com/item/%E8%8B%8F%E5%A0%A4%E6%98%A5%E6%99%93" target="_blank" rel="noopener">苏堤春晓</a>、<a href="https://baike.baidu.com/item/%E6%96%AD%E6%A1%A5%E6%AE%8B%E9%9B%AA" target="_blank" rel="noopener">断桥残雪</a>、<a href="https://baike.baidu.com/item/%E9%9B%B7%E5%B3%B0%E5%A4%95%E7%85%A7" target="_blank" rel="noopener">雷峰夕照</a>、<a href="https://baike.baidu.com/item/%E5%8D%97%E5%B1%8F%E6%99%9A%E9%92%9F" target="_blank" rel="noopener">南屏晚钟</a>、<a href="https://baike.baidu.com/item/%E6%9B%B2%E8%8B%91%E9%A3%8E%E8%8D%B7" target="_blank" rel="noopener">曲苑风荷</a>、<a href="https://baike.baidu.com/item/%E8%8A%B1%E6%B8%AF%E8%A7%82%E9%B1%BC" target="_blank" rel="noopener">花港观鱼</a>、<a href="https://baike.baidu.com/item/%E6%9F%B3%E6%B5%AA%E9%97%BB%E8%8E%BA" target="_blank" rel="noopener">柳浪闻莺</a>、<a href="https://baike.baidu.com/item/%E4%B8%89%E6%BD%AD%E5%8D%B0%E6%9C%88" target="_blank" rel="noopener">三潭印月</a><strong>、</strong>两峰插云。</p>
<p>最后新十景确定为<a href="https://baike.baidu.com/item/%E4%BA%91%E6%A0%96%E7%AB%B9%E5%BE%84" target="_blank" rel="noopener">云栖竹径</a>、<a href="https://baike.baidu.com/item/%E6%BB%A1%E9%99%87%E6%A1%82%E9%9B%A8" target="_blank" rel="noopener">满陇桂雨</a>、<a href="https://baike.baidu.com/item/%E8%99%8E%E8%B7%91%E6%A2%A6%E6%B3%89" target="_blank" rel="noopener">虎跑梦泉</a>、<a href="https://baike.baidu.com/item/%E9%BE%99%E4%BA%95%E9%97%AE%E8%8C%B6" target="_blank" rel="noopener">龙井问茶</a>、<a href="https://baike.baidu.com/item/%E4%B9%9D%E6%BA%AA%E7%83%9F%E6%A0%91" target="_blank" rel="noopener">九溪烟树</a>、<a href="https://baike.baidu.com/item/%E5%90%B4%E5%B1%B1%E5%A4%A9%E9%A3%8E" target="_blank" rel="noopener">吴山天风</a>、<a href="https://baike.baidu.com/item/%E9%98%AE%E5%A2%A9%E7%8E%AF%E7%A2%A7" target="_blank" rel="noopener">阮墩环碧</a>、<a href="https://baike.baidu.com/item/%E9%BB%84%E9%BE%99%E5%90%90%E7%BF%A0" target="_blank" rel="noopener">黄龙吐翠</a>、<a href="https://baike.baidu.com/item/%E7%8E%89%E7%9A%87%E9%A3%9E%E4%BA%91" target="_blank" rel="noopener">玉皇飞云</a>、<a href="https://baike.baidu.com/item/%E5%AE%9D%E7%9F%B3%E6%B5%81%E9%9C%9E" target="_blank" rel="noopener">宝石流霞</a>。</p>
<p>2007年，杭州市政府进行“三评西湖十景”和名称征集，<a href="https://baike.baidu.com/item/%E7%81%B5%E9%9A%90%E5%AF%BA" target="_blank" rel="noopener">灵隐寺</a>等一批景点入围，成为三评西湖十景。确定为<a href="https://baike.baidu.com/item/%E7%81%B5%E9%9A%90%E7%A6%85%E8%B8%AA" target="_blank" rel="noopener">灵隐禅踪</a>、<a href="https://baike.baidu.com/item/%E5%85%AD%E5%92%8C%E5%90%AC%E6%B6%9B" target="_blank" rel="noopener">六和听涛</a>、<a href="https://baike.baidu.com/item/%E5%B2%B3%E5%A2%93%E6%A0%96%E9%9C%9E" target="_blank" rel="noopener">岳墓栖霞</a>、<a href="https://baike.baidu.com/item/%E6%B9%96%E6%BB%A8%E6%99%B4%E9%9B%A8" target="_blank" rel="noopener">湖滨晴雨</a>、<a href="https://baike.baidu.com/item/%E9%92%B1%E7%A5%A0%E8%A1%A8%E5%BF%A0" target="_blank" rel="noopener">钱祠表忠</a>、<a href="https://baike.baidu.com/item/%E4%B8%87%E6%9D%BE%E4%B9%A6%E7%BC%98" target="_blank" rel="noopener">万松书缘</a>、<a href="https://baike.baidu.com/item/%E6%9D%A8%E5%A0%A4%E6%99%AF%E8%A1%8C" target="_blank" rel="noopener">杨堤景行</a>、<a href="https://baike.baidu.com/item/%E4%B8%89%E5%8F%B0%E4%BA%91%E6%B0%B4" target="_blank" rel="noopener">三台云水</a>、<a href="https://baike.baidu.com/item/%E6%A2%85%E5%9D%9E%E6%98%A5%E6%97%A9" target="_blank" rel="noopener">梅坞春早</a>、<a href="https://baike.baidu.com/item/%E5%8C%97%E8%A1%97%E6%A2%A6%E5%AF%BB" target="_blank" rel="noopener">北街梦寻</a>。</p>
<table>
<thead>
<tr>
<th>南宋时期</th>
<th>康熙题字</th>
<th>现代通用名</th>
<th>新西湖十景</th>
<th>三评西湖十景</th>
</tr>
</thead>
<tbody><tr>
<td><a href="https://baike.baidu.com/item/%E5%B9%B3%E6%B9%96%E7%A7%8B%E6%9C%88/71330" target="_blank" rel="noopener">平湖秋月</a></td>
<td>沿用</td>
<td>沿用</td>
<td><a href="https://baike.baidu.com/item/%E4%BA%91%E6%A0%96%E7%AB%B9%E5%BE%84" target="_blank" rel="noopener">云栖竹径</a></td>
<td><a href="https://baike.baidu.com/item/%E7%81%B5%E9%9A%90%E7%A6%85%E8%B8%AA" target="_blank" rel="noopener">灵隐禅踪</a></td>
</tr>
<tr>
<td><a href="https://baike.baidu.com/item/%E8%8B%8F%E5%A0%A4%E6%98%A5%E6%99%93" target="_blank" rel="noopener">苏堤春晓</a></td>
<td>沿用</td>
<td>沿用</td>
<td><a href="https://baike.baidu.com/item/%E4%B9%9D%E6%BA%AA%E7%83%9F%E6%A0%91" target="_blank" rel="noopener">九溪烟树</a></td>
<td><a href="https://baike.baidu.com/item/%E5%85%AD%E5%92%8C%E5%90%AC%E6%B6%9B" target="_blank" rel="noopener">六和听涛</a></td>
</tr>
<tr>
<td><a href="https://baike.baidu.com/item/%E6%96%AD%E6%A1%A5%E6%AE%8B%E9%9B%AA/7576" target="_blank" rel="noopener">断桥残雪</a></td>
<td>沿用</td>
<td>沿用</td>
<td><a href="https://baike.baidu.com/item/%E8%99%8E%E8%B7%91%E6%A2%A6%E6%B3%89" target="_blank" rel="noopener">虎跑梦泉</a></td>
<td><a href="https://baike.baidu.com/item/%E5%B2%B3%E5%A2%93%E6%A0%96%E9%9C%9E" target="_blank" rel="noopener">岳墓栖霞</a></td>
</tr>
<tr>
<td><a href="https://baike.baidu.com/item/%E9%9B%B7%E5%B3%B0%E5%A4%95%E7%85%A7" target="_blank" rel="noopener">雷峰夕照</a></td>
<td>雷峰西照</td>
<td>雷峰夕照</td>
<td><a href="https://baike.baidu.com/item/%E9%BB%84%E9%BE%99%E5%90%90%E7%BF%A0" target="_blank" rel="noopener">黄龙吐翠</a></td>
<td><a href="https://baike.baidu.com/item/%E6%B9%96%E6%BB%A8%E6%99%B4%E9%9B%A8" target="_blank" rel="noopener">湖滨晴雨</a></td>
</tr>
<tr>
<td><a href="https://baike.baidu.com/item/%E5%8D%97%E5%B1%8F%E6%99%9A%E9%92%9F/24619" target="_blank" rel="noopener">南屏晚钟</a></td>
<td>南屏晓钟</td>
<td>南屏晚钟</td>
<td><a href="https://baike.baidu.com/item/%E6%BB%A1%E9%99%87%E6%A1%82%E9%9B%A8" target="_blank" rel="noopener">满陇桂雨</a></td>
<td><a href="https://baike.baidu.com/item/%E9%92%B1%E7%A5%A0%E8%A1%A8%E5%BF%A0" target="_blank" rel="noopener">钱祠表忠</a></td>
</tr>
<tr>
<td><a href="https://baike.baidu.com/item/%E6%9B%B2%E9%99%A2%E9%A3%8E%E8%8D%B7/71334" target="_blank" rel="noopener">曲院风荷</a></td>
<td>沿用</td>
<td>沿用</td>
<td><a href="https://baike.baidu.com/item/%E7%8E%89%E7%9A%87%E9%A3%9E%E4%BA%91" target="_blank" rel="noopener">玉皇飞云</a></td>
<td><a href="https://baike.baidu.com/item/%E4%B8%87%E6%9D%BE%E4%B9%A6%E7%BC%98" target="_blank" rel="noopener">万松书缘</a></td>
</tr>
<tr>
<td><a href="https://baike.baidu.com/item/%E8%8A%B1%E6%B8%AF%E8%A7%82%E9%B1%BC" target="_blank" rel="noopener">花港观鱼</a></td>
<td>沿用</td>
<td>沿用</td>
<td><a href="https://baike.baidu.com/item/%E9%BE%99%E4%BA%95%E9%97%AE%E8%8C%B6" target="_blank" rel="noopener">龙井问茶</a></td>
<td><a href="https://baike.baidu.com/item/%E6%9D%A8%E5%A0%A4%E6%99%AF%E8%A1%8C" target="_blank" rel="noopener">杨堤景行</a></td>
</tr>
<tr>
<td><a href="https://baike.baidu.com/item/%E6%9F%B3%E6%B5%AA%E9%97%BB%E8%8E%BA/33243" target="_blank" rel="noopener">柳浪闻莺</a></td>
<td>沿用</td>
<td>沿用</td>
<td><a href="https://baike.baidu.com/item/%E5%AE%9D%E7%9F%B3%E6%B5%81%E9%9C%9E" target="_blank" rel="noopener">宝石流霞</a></td>
<td><a href="https://baike.baidu.com/item/%E4%B8%89%E5%8F%B0%E4%BA%91%E6%B0%B4" target="_blank" rel="noopener">三台云水</a></td>
</tr>
<tr>
<td><a href="https://baike.baidu.com/item/%E4%B8%89%E6%BD%AD%E5%8D%B0%E6%9C%88/37099" target="_blank" rel="noopener">三潭印月</a></td>
<td>沿用</td>
<td>沿用</td>
<td><a href="https://baike.baidu.com/item/%E5%90%B4%E5%B1%B1%E5%A4%A9%E9%A3%8E" target="_blank" rel="noopener">吴山天风</a></td>
<td><a href="https://baike.baidu.com/item/%E6%A2%85%E5%9D%9E%E6%98%A5%E6%97%A9" target="_blank" rel="noopener">梅坞春早</a></td>
</tr>
<tr>
<td>两峰插云</td>
<td>双峰插云</td>
<td><a href="https://baike.baidu.com/item/%E5%8F%8C%E5%B3%B0%E6%8F%92%E4%BA%91" target="_blank" rel="noopener">双峰插云</a></td>
<td><a href="https://baike.baidu.com/item/%E9%98%AE%E5%A2%A9%E7%8E%AF%E7%A2%A7" target="_blank" rel="noopener">阮墩环碧</a></td>
<td><a href="https://baike.baidu.com/item/%E5%8C%97%E8%A1%97%E6%A2%A6%E5%AF%BB" target="_blank" rel="noopener">北街梦寻</a></td>
</tr>
</tbody></table>
<h2 id="断桥残雪"><a href="#断桥残雪" class="headerlink" title="断桥残雪"></a>断桥残雪</h2><p>断桥残雪是西湖上著名的景色，以冬雪时远观桥面若隐若现于湖面而称著。属于西湖十景之一。断桥残雪是欣赏西湖雪景之佳地，中国著名的民间传说《白蛇传》，为断桥景物增添了浪漫的色彩。</p>
<p>·是《白蛇传》中许仙、白娘子的相会之地，也给这座长桥平添许多浪漫色彩。<br>·冬雪初下，桥的阳面冰雪消融，但阴面仍被残雪覆盖，从高处看桥似断非断，形成著名的“断桥残雪”。<br>·可以作为游玩西湖的起点。从断桥上白堤去孤山，依次游玩西湖周边的各个景点。</p>
<h2 id="白堤"><a href="#白堤" class="headerlink" title="白堤"></a>白堤</h2><p>白堤原名“白沙堤”，是将杭州市区与风景区相连的纽带，东起“断桥残雪”，经锦带桥向西，止于“平湖秋月”，长约2里。在唐即称白沙堤、沙堤，其后在宋、明又称孤山路、十锦塘。白堤横亘湖上，把西湖划分为外湖和里湖，并将孤山和北山连接在一起。白堤的风景，四季分明：春桃夏柳，秋桂冬雪，具是风采独特。</p>
<p>白堤原名白沙堤，为贮蓄湖水灌溉农田而建。旧日以白沙铺地，今已改为柏油路面。早在一千多年前的唐朝，就以风光旖旎而著称。人们以为这条堤是<a href="https://baike.baidu.com/item/%E7%99%BD%E5%B1%85%E6%98%93" target="_blank" rel="noopener">白居易</a>主持修筑的，就叫它白堤。实际上白居易任杭州刺史时，曾在旧日<a href="https://baike.baidu.com/item/%E9%92%B1%E5%A1%98%E9%97%A8" target="_blank" rel="noopener">钱塘门</a>外的石涵桥附近修筑了一条堤，称为白公堤，如今已经无迹可寻了。今日人们所知的白堤，虽与白居易主持修筑的白堤不在一个方位，但杭州人民为缅怀这位对杭州作出杰出贡献的“老市长”，仍把它命名为白堤。</p>
<h2 id="孤山"><a href="#孤山" class="headerlink" title="孤山"></a>孤山</h2><p>孤山位于浙江省杭州市西湖风景区旁，是西湖的一个著名景点。孤山是西湖中最大的岛屿，面积20公顷，山高38米，是文物胜迹荟萃之地。现有胜景30处，走在山间小径颇有山林的感觉。<br>主要景点有：放鹤亭、林和靖墓、西泠印社，玛瑙坡、一眼泉水、文澜阁、中山公园、清行宫、敬一书院、秋瑾墓、六一泉、苏曼殊墓园、半壁亭等。<br>孤山碧波环绕，山间花木繁茂，亭台楼阁错落别致，是一座融自然美和艺术美为一体的立体园林，闻其名便知，乃湖中一孤峙之岛，孤山景色早在唐宋已闻名遐迩，唐诗人白居易有“孤山寺北贾亭西，水面初平云脚低”，明代凌云翰有“冻木晨闻尾毕浦，孤山景好胜披图”的佳句。更有宋代隐居诗人林和靖墓寝，流传着有”梅妻鹤子”之说。<br>林逋是以杰出的咏梅诗词闻名于世的。他隐居孤山躬耕农桑并大量植梅，写出了不少咏梅佳句，其中《山园小梅》传出后脍炙人口，“疏影横斜水清浅，暗香浮动月黄昏”，在诗词界引起了轰动，成为从古至今咏梅的第一佳句，无人能与伦比。<br>冬天是探梅、赏雪胜地。孤山的雪景最为引人入胜。雪后山：“兀峙水中，后带葛岭，高低层叠，塑雪平铺；日光初照，与全湖波光相激射，璀璨夺目”。泛舟湖上，如见琼楼玉宇，遍山一色银装。若置峰山间，宜往放鹤亭踏雪寻梅，除了檀香梅急性先开，其他如宫粉梅俏丽香浓，朱砂梅紫艳色重，绿萼梅洁白素雅，洒金梅红白相间，各逞妖娆，各具情趣，扬眉有《孤山的梅》，更反映出对梅的追求与向往。</p>
<h2 id="曲院风荷"><a href="#曲院风荷" class="headerlink" title="曲院风荷"></a>曲院风荷</h2><p>曲院风荷位于西湖西侧，<a href="https://baike.baidu.com/item/%E5%B2%B3%E9%A3%9E%E5%BA%99/2182214" target="_blank" rel="noopener">岳飞庙</a>前面。南宋时，此有一座官家酿酒的作坊，取<a href="https://baike.baidu.com/item/%E9%87%91%E6%B2%99" target="_blank" rel="noopener">金沙</a>涧的溪水造曲酒，闻名国内。附近的池塘种有菱荷，每当夏日风起，酒香荷香沁人心脾，因名“曲院风荷”。总占地面积12.65万平方米，总建筑面积268000万平米。</p>
<h2 id="苏堤春晓"><a href="#苏堤春晓" class="headerlink" title="苏堤春晓"></a>苏堤春晓</h2><p>苏堤春晓，西湖十景之一。南宋时，苏堤春晓被列为西湖十景之首，元代又称之为“六桥烟柳”而列入钱塘十景。<br>“苏堤春晓”景观是指寒冬过后，苏堤报春的美妙景色。<br>苏堤南起南屏山麓，北到栖霞岭下，全长近三公里，是北宋大诗人苏东坡任杭州知州时，疏浚西湖，利用挖出的葑泥构筑而成。后人为了纪念苏东坡治理西湖的功绩将她命名为苏堤。长堤卧波，连接了南山北山，给西湖增添了一道妩媚的风景线。</p>
<h2 id="花港观鱼"><a href="#花港观鱼" class="headerlink" title="花港观鱼"></a>花港观鱼</h2><p>花港观鱼是由花、港、鱼为特色的风景点。<a href="https://baike.baidu.com/item/%E8%A5%BF%E6%B9%96%E5%8D%81%E6%99%AF/562" target="_blank" rel="noopener">西湖十景</a>之一。地处<a href="https://baike.baidu.com/item/%E8%8B%8F%E5%A0%A4" target="_blank" rel="noopener">苏堤</a>南段西侧。1964年二期扩建工程告竣后，占地面积达20公顷。全园分为红鱼池、<a href="https://baike.baidu.com/item/%E7%89%A1%E4%B8%B9%E5%9B%AD/74926" target="_blank" rel="noopener">牡丹园</a>、花港、<a href="https://baike.baidu.com/item/%E5%A4%A7%E8%8D%89%E5%9D%AA/3401892" target="_blank" rel="noopener">大草坪</a>、密林地五个景区。与<a href="https://baike.baidu.com/item/%E9%9B%B7%E5%B3%B0%E5%A1%94/427171" target="_blank" rel="noopener">雷峰塔</a>、<a href="https://baike.baidu.com/item/%E5%87%80%E6%85%88%E5%AF%BA/65580" target="_blank" rel="noopener">净慈寺</a>隔苏堤相望。</p>
<p>红鱼池位于园中部偏南处，是全园游赏的中心区域。池岸曲折自然，池中堆土成岛，池上架设曲桥，倚桥栏俯看，数千尾金鳞红鱼结队往来，泼刺戏水。</p>
<h2 id="吴山广场"><a href="#吴山广场" class="headerlink" title="吴山广场"></a>吴山广场</h2><p>吴山广场，位于杭州<a href="https://baike.baidu.com/item/%E4%B8%8A%E5%9F%8E%E5%8C%BA" target="_blank" rel="noopener">上城区</a>延安路1号，与杭州市中心<a href="https://baike.baidu.com/item/%E6%AD%A6%E6%9E%97%E5%B9%BF%E5%9C%BA/2839269" target="_blank" rel="noopener">武林广场</a>沿<a href="https://baike.baidu.com/item/%E5%BB%B6%E5%AE%89%E8%B7%AF/5911005" target="_blank" rel="noopener">延安路</a>南北呼应。占地8万平方米，1999年9月建成。是杭州主城区大型广场之一、距离<a href="https://baike.baidu.com/item/%E8%A5%BF%E6%B9%96/4668821" target="_blank" rel="noopener">西湖</a>水域最近的城市广场，<a href="https://baike.baidu.com/item/%E6%B2%B3%E5%9D%8A%E8%A1%97/5006437" target="_blank" rel="noopener">河坊街</a>、<a href="https://baike.baidu.com/item/%E6%9D%AD%E5%B7%9E%E5%8D%9A%E7%89%A9%E9%A6%86/5133976" target="_blank" rel="noopener">杭州博物馆</a>、<a href="https://baike.baidu.com/item/%E5%8D%97%E5%AE%8B%E5%BE%A1%E8%A1%97/2099138" target="_blank" rel="noopener">南宋御街</a>等旅游景点也紧邻吴山广场。<a href="https://baike.baidu.com/item/%E6%96%B0%E8%A5%BF%E6%B9%96%E5%8D%81%E6%99%AF/4551684" target="_blank" rel="noopener">新西湖十景</a>“<a href="https://baike.baidu.com/item/%E5%90%B4%E5%B1%B1%E5%A4%A9%E9%A3%8E/6342522" target="_blank" rel="noopener">吴山天风</a>”也位于此。</p>
<h2 id="西湖音乐喷泉"><a href="#西湖音乐喷泉" class="headerlink" title="西湖音乐喷泉"></a>西湖音乐喷泉</h2><p><a href="https://baike.baidu.com/item/%E8%A5%BF%E6%B9%96/4668821" target="_blank" rel="noopener">西湖</a>音乐喷泉位于湖滨三公园附近湖面上，长126米的“<a href="https://baike.baidu.com/item/%E9%9F%B3%E4%B9%90%E5%96%B7%E6%B3%89/1632227" target="_blank" rel="noopener">音乐喷泉</a>”向人们展露迷人风姿。 2016年5月1日晚间，西湖音乐喷泉经过大半年的整改，重新开放。</p>
<p>演出时间是每晚19:00、20:00各一场，每场播放三曲。</p>
<h2 id="灵隐飞来峰"><a href="#灵隐飞来峰" class="headerlink" title="灵隐飞来峰"></a>灵隐飞来峰</h2><p><a href="https://baike.baidu.com/item/%E7%81%B5%E9%9A%90/2696217" target="_blank" rel="noopener">灵隐</a>一带的山峰怪石嵯峨，风景绝异，印度僧人慧理称：“此乃中天竺国灵鹫山之小岭，不知何以飞来？”，因此称为“<a href="https://baike.baidu.com/item/%E9%A3%9E%E6%9D%A5%E5%B3%B0/13032771" target="_blank" rel="noopener">飞来峰</a>”。 飞来峰是江南少见的古代石窟艺术瑰宝，有着<a href="https://baike.baidu.com/item/%E5%A4%AA%E5%A7%A5%E5%B1%B1/607313" target="_blank" rel="noopener">太姥山</a>的灵石峭壁，<a href="https://baike.baidu.com/item/%E5%85%94%E8%80%B3%E5%B2%AD/15903933" target="_blank" rel="noopener">兔耳岭</a>的石峰见景之美，可与四川<a href="https://baike.baidu.com/item/%E5%A4%A7%E8%B6%B3%E7%9F%B3%E5%88%BB/209440" target="_blank" rel="noopener">大足石刻</a>媲美。<a href="https://baike.baidu.com/item/%E8%8B%8F%E4%B8%9C%E5%9D%A1/53970" target="_blank" rel="noopener">苏东坡</a>曾有“溪山处处皆可庐，最爱灵隐飞来峰”的诗句。</p>
<p>门票信息：45.00元（不含灵隐寺）灵隐寺：30.00元</p>
<p>开放时间：07:00~18:00</p>
<p><img src="https://gss0.bdstatic.com/94o3dSag_xI4khGkpoWK1HF6hhy/baike/s%3D220/sign=288b38fca6c379317968812bdbc5b784/63d9f2d3572c11dff99745d96a2762d0f603c282.jpg" alt="杭州飞来峰"></p>
<h2 id="灵隐寺"><a href="#灵隐寺" class="headerlink" title="灵隐寺"></a>灵隐寺</h2><p><a href="https://baike.baidu.com/item/%E7%81%B5%E9%9A%90%E5%AF%BA/110918" target="_blank" rel="noopener">灵隐寺</a>，又名云林寺，位于<a href="https://baike.baidu.com/item/%E6%B5%99%E6%B1%9F%E7%9C%81" target="_blank" rel="noopener">浙江省</a><a href="https://baike.baidu.com/item/%E6%9D%AD%E5%B7%9E%E5%B8%82" target="_blank" rel="noopener">杭州市</a>，背靠<a href="https://baike.baidu.com/item/%E5%8C%97%E9%AB%98%E5%B3%B0/309548" target="_blank" rel="noopener">北高峰</a>，面朝<a href="https://baike.baidu.com/item/%E9%A3%9E%E6%9D%A5%E5%B3%B0/13032771" target="_blank" rel="noopener">飞来峰</a>，始建于<a href="https://baike.baidu.com/item/%E4%B8%9C%E6%99%8B/456028" target="_blank" rel="noopener">东晋</a>咸和元年（326年），占地面积约87000平方米。灵隐寺开山祖师为西印度僧人<a href="https://baike.baidu.com/item/%E6%85%A7%E7%90%86/3665551" target="_blank" rel="noopener">慧理</a><a href="https://baike.baidu.com/item/%E5%92%8C%E5%B0%9A/189974" target="_blank" rel="noopener">和尚</a>。<a href="https://baike.baidu.com/item/%E5%8D%97%E6%9C%9D/7131305" target="_blank" rel="noopener">南朝</a><a href="https://baike.baidu.com/item/%E6%A2%81%E6%AD%A6%E5%B8%9D" target="_blank" rel="noopener">梁武帝</a>赐田并扩建。五代<a href="https://baike.baidu.com/item/%E5%90%B4%E8%B6%8A%E7%8E%8B" target="_blank" rel="noopener">吴越王</a><a href="https://baike.baidu.com/item/%E9%92%B1%E9%95%A0" target="_blank" rel="noopener">钱镠</a>命请永明<a href="https://baike.baidu.com/item/%E5%BB%B6%E5%AF%BF%E5%A4%A7%E5%B8%88" target="_blank" rel="noopener">延寿大师</a>重兴开拓，并赐名灵隐新寺。<a href="https://baike.baidu.com/item/%E5%AE%8B%E5%AE%81%E5%AE%97/1242434" target="_blank" rel="noopener">宋宁宗</a>嘉定年间，灵隐寺被誉为江南禅宗“五山”之一。清顺治年间，禅宗巨匠具德和尚住持灵隐，筹资重建，仅建殿堂时间就前后历十八年之久，其规模之宏伟跃居“东南之冠”  。清康熙二十八年（1689年），<a href="https://baike.baidu.com/item/%E5%BA%B7%E7%86%99%E5%B8%9D/613801" target="_blank" rel="noopener">康熙帝</a>南巡时，赐名 “云林禅寺”。</p>
<p>灵隐寺主要以天王殿、大雄宝殿、药师殿、法堂、华严殿为中轴线，两边附以五百罗汉堂、济公殿、华严阁、大悲楼、方丈楼等建筑构成。现任方丈是光泉法师。</p>
<p>浙江灵隐寺为全国重点文物保护单位 。</p>
<h2 id="雷峰塔"><a href="#雷峰塔" class="headerlink" title="雷峰塔"></a>雷峰塔</h2><p>雷峰塔（Leifeng Pagoda）又名黄妃塔、皇妃塔、西关砖塔，位于<a href="https://baike.baidu.com/item/%E6%B5%99%E6%B1%9F%E7%9C%81/190275" target="_blank" rel="noopener">浙江省</a>会<a href="https://baike.baidu.com/item/%E6%9D%AD%E5%B7%9E%E5%B8%82/200167" target="_blank" rel="noopener">杭州市</a><a href="https://baike.baidu.com/item/%E8%A5%BF%E6%B9%96%E9%A3%8E%E6%99%AF%E5%8C%BA/1361587" target="_blank" rel="noopener">西湖风景区</a>南岸夕照山的雷峰上。雷峰塔为<a href="https://baike.baidu.com/item/%E5%90%B4%E8%B6%8A" target="_blank" rel="noopener">吴越</a>忠懿王<a href="https://baike.baidu.com/item/%E9%92%B1%E5%BC%98%E4%BF%B6" target="_blank" rel="noopener">钱弘俶</a>因黄妃得子建，初名“皇妃塔”因地建于雷峰，后人改称“雷峰塔”。</p>
<p>中国民间故事《<a href="https://baike.baidu.com/item/%E7%99%BD%E8%9B%87%E4%BC%A0/17510" target="_blank" rel="noopener">白蛇传</a>》中，法海和尚骗<a href="https://baike.baidu.com/item/%E8%AE%B8%E4%BB%99/1817443" target="_blank" rel="noopener">许仙</a>至金山，<a href="https://baike.baidu.com/item/%E7%99%BD%E5%A8%98%E5%AD%90/328475" target="_blank" rel="noopener">白娘子</a>水漫金山救许仙，被<a href="https://baike.baidu.com/item/%E6%B3%95%E6%B5%B7/13681912" target="_blank" rel="noopener">法海</a>镇在雷峰塔下。后小青苦练法力，终于打败了法海，雷峰塔倒塌，白素贞获救。</p>
<p>旧雷峰塔已于1924年倒塌，后重建，新建的雷峰塔为中国首座彩色铜雕宝塔。<a href="https://baike.baidu.com/item/%E9%9B%B7%E5%B3%B0%E5%A4%95%E7%85%A7/2195468" target="_blank" rel="noopener">雷峰夕照</a>为<a href="https://baike.baidu.com/item/%E8%A5%BF%E6%B9%96%E5%8D%81%E6%99%AF/562" target="_blank" rel="noopener">西湖十景</a>之一。是西湖重要景区之一。</p>
<h2 id="柳浪闻莺"><a href="#柳浪闻莺" class="headerlink" title="柳浪闻莺"></a>柳浪闻莺</h2><p><a href="https://baike.baidu.com/item/%E6%9F%B3%E6%B5%AA%E9%97%BB%E8%8E%BA/33243" target="_blank" rel="noopener">柳浪闻莺</a>是<a href="https://baike.baidu.com/item/%E8%A5%BF%E6%B9%96" target="_blank" rel="noopener">西湖</a>十景之五，位于西湖东南岸，<a href="https://baike.baidu.com/item/%E6%B8%85%E6%B3%A2%E9%97%A8" target="_blank" rel="noopener">清波门</a>处的大型公园。分友谊、闻莺、聚景、南园四个景区。柳丛衬托着<a href="https://baike.baidu.com/item/%E7%B4%AB%E6%A5%A0/2038693" target="_blank" rel="noopener">紫楠</a>、雪松、广玉兰、梅花等异木名花。<a href="https://baike.baidu.com/item/%E5%8D%97%E5%AE%8B/457341" target="_blank" rel="noopener">南宋</a>时，这里是京城最大的<a href="https://baike.baidu.com/item/%E5%BE%A1%E8%8A%B1%E5%9B%AD/2146652" target="_blank" rel="noopener">御花园</a>，称<a href="https://baike.baidu.com/item/%E8%81%9A%E6%99%AF%E5%9B%AD/9713444" target="_blank" rel="noopener">聚景园</a>。当时园内有会芳殿和三堂、九亭，以及柳浪桥和学士桥。清代恢复柳浪闻莺旧景。有柳洲之名。其间黄莺飞舞，竞相啼鸣，故有“柳浪闻莺”之称。</p>
<h2 id="河坊街"><a href="#河坊街" class="headerlink" title="河坊街"></a>河坊街</h2><p>河坊街位于<a href="https://baike.baidu.com/item/%E5%90%B4%E5%B1%B1/14967" target="_blank" rel="noopener">吴山</a>脚下，是<a href="https://baike.baidu.com/item/%E6%B8%85%E6%B2%B3%E5%9D%8A/3021178" target="_blank" rel="noopener">清河坊</a>的一部分，属于杭州<a href="https://baike.baidu.com/item/%E8%80%81%E5%9F%8E%E5%8C%BA/1074312" target="_blank" rel="noopener">老城区</a>， 旧时，与中山中路相交得“清河坊四拐角”，自民国以来，分别为<a href="https://baike.baidu.com/item/%E5%AD%94%E5%87%A4%E6%98%A5%E9%A6%99%E7%B2%89%E5%BA%97/6703175" target="_blank" rel="noopener">孔凤春香粉店</a>、宓大昌旱烟、<a href="https://baike.baidu.com/item/%E4%B8%87%E9%9A%86/52150" target="_blank" rel="noopener">万隆</a>火腿店、张允升帽庄四家各踞一角，成为当时远近闻名得区片。</p>
<p>河坊街为杭州历史文化街区，街上最具影响的有<a href="https://baike.baidu.com/item/%E8%83%A1%E9%9B%AA%E5%B2%A9%E6%95%85%E5%B1%85/427332" target="_blank" rel="noopener">胡雪岩故居</a>和<a href="https://baike.baidu.com/item/%E6%9C%B1%E7%82%B3%E4%BB%81%E9%93%9C%E9%9B%95%E8%89%BA%E6%9C%AF%E5%8D%9A%E7%89%A9%E9%A6%86/8450477" target="_blank" rel="noopener">朱炳仁铜雕艺术博物馆</a>，成为此街的一大亮点。</p>
<p>河坊街位于吴山脚下，是清河坊的一部分，属于杭州老城区，东起江城路，向西越南北向得建国南路、中河中路、中山中路、华光路、劳动路至<a href="https://baike.baidu.com/item/%E5%8D%97%E5%B1%B1%E8%B7%AF/3117771" target="_blank" rel="noopener">南山路</a>，路长1800多米，<a href="https://baike.baidu.com/item/%E5%90%B4%E5%B1%B1%E5%B9%BF%E5%9C%BA/4236241" target="_blank" rel="noopener">吴山广场</a>至中山中路段为步行街，青石板路面，路宽13米，其余路宽32米。旧时，与中山中路相交得“清河坊四拐角”，自民国以来，分别为孔凤春香粉店、宓大昌旱烟、万隆火腿店、张允升帽庄四家各踞一角，成为当时远近闻名的区片。杭城闻名的“五杭”（杭粉、杭剪、杭扇、杭烟、杭线）就出与此。 这里特色小吃、 古玩字画、商铺云集。老字号、杭州特色各类店铺约有一百余家。</p>
]]></content>
  </entry>
  <entry>
    <title>Details of Charges</title>
    <url>/2019/01/31/Details-of-Charges/</url>
    <content><![CDATA[<img src="http://www.divorcelawyer.com.hk/wp-content/uploads/2017/07/%E7%A6%BB%E5%A9%9A%E5%BE%8B%E5%B8%88%E8%B4%B9%E7%94%A8.jpg" width="100%"/>

<a id="more"></a>

<h2 id="费用明细"><a href="#费用明细" class="headerlink" title="费用明细"></a>费用明细</h2><table>
<thead>
<tr>
<th>类型</th>
<th>详情</th>
<th>时间</th>
<th>金额</th>
<th>截图</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>住宿</td>
<td>汉庭苏州苏蠡路酒店</td>
<td>2019-01-30 16:24</td>
<td>306</td>
<td><a href="https://ws1.sinaimg.cn/large/005M2pcYgy1fzpu1x32b0j30u01t0dvj.jpg" target="_blank" rel="noopener">https://ws1.sinaimg.cn/large/005M2pcYgy1fzpu1x32b0j30u01t0dvj.jpg</a><br /><a href="https://wx4.sinaimg.cn/large/005M2pcYgy1fzptxz1l1fj30u01t07h9.jpg" target="_blank" rel="noopener">https://wx4.sinaimg.cn/large/005M2pcYgy1fzptxz1l1fj30u01t07h9.jpg</a></td>
<td></td>
</tr>
<tr>
<td>住宿</td>
<td>汉庭苏州苏蠡路酒店</td>
<td>2019-01-30 16:19</td>
<td>296</td>
<td><a href="https://ws4.sinaimg.cn/large/005M2pcYgy1fzpu6x8lshj30u01t0qgs.jpg" target="_blank" rel="noopener">https://ws4.sinaimg.cn/large/005M2pcYgy1fzpu6x8lshj30u01t0qgs.jpg</a><br /><a href="https://wx4.sinaimg.cn/large/005M2pcYgy1fzpu7joakij30u01t0h0y.jpg" target="_blank" rel="noopener">https://wx4.sinaimg.cn/large/005M2pcYgy1fzpu7joakij30u01t0h0y.jpg</a></td>
<td></td>
</tr>
<tr>
<td>住宿</td>
<td>汉庭上海中环沪南路酒店</td>
<td>2019-01-28 21:57</td>
<td>458</td>
<td><a href="https://ws2.sinaimg.cn/large/005M2pcYgy1fzpuerugvbj30u01t0gzh.jpg" target="_blank" rel="noopener">https://ws2.sinaimg.cn/large/005M2pcYgy1fzpuerugvbj30u01t0gzh.jpg</a><br /><a href="https://ws4.sinaimg.cn/large/005M2pcYgy1fzpuexzixhj30u01t0k6g.jpg" target="_blank" rel="noopener">https://ws4.sinaimg.cn/large/005M2pcYgy1fzpuexzixhj30u01t0k6g.jpg</a></td>
<td></td>
</tr>
<tr>
<td>住宿</td>
<td>汉庭上海中环沪南路酒店</td>
<td>2019-01-28 21:50</td>
<td>458</td>
<td><a href="https://wx1.sinaimg.cn/large/005M2pcYgy1fzpug452wxj30u01t0na4.jpg" target="_blank" rel="noopener">https://wx1.sinaimg.cn/large/005M2pcYgy1fzpug452wxj30u01t0na4.jpg</a><br /><a href="https://ws2.sinaimg.cn/large/005M2pcYgy1fzpugbgy7cj30u01t0aos.jpg" target="_blank" rel="noopener">https://ws2.sinaimg.cn/large/005M2pcYgy1fzpugbgy7cj30u01t0aos.jpg</a></td>
<td></td>
</tr>
<tr>
<td>住宿</td>
<td>汉庭上海浦东机场T2航站楼酒店双床房</td>
<td>2019-01-24 21:58</td>
<td>322</td>
<td><a href="https://wx4.sinaimg.cn/large/005M2pcYgy1fzpuipmjw0j30u01t04am.jpg" target="_blank" rel="noopener">https://wx4.sinaimg.cn/large/005M2pcYgy1fzpuipmjw0j30u01t04am.jpg</a><br /><a href="https://ws4.sinaimg.cn/large/005M2pcYgy1fzpukl8d3mj30u00dqadl.jpg" target="_blank" rel="noopener">https://ws4.sinaimg.cn/large/005M2pcYgy1fzpukl8d3mj30u00dqadl.jpg</a></td>
<td></td>
</tr>
<tr>
<td>住宿</td>
<td>汉庭上海康桥沪南路酒店</td>
<td>2019-02-10 09:26</td>
<td>190</td>
<td><a href="https://wx1.sinaimg.cn/large/005M2pcYgy1g04si08katj30u01t0ju0.jpg" target="_blank" rel="noopener">https://wx1.sinaimg.cn/large/005M2pcYgy1g04si08katj30u01t0ju0.jpg</a><br /><a href="https://ws3.sinaimg.cn/large/005M2pcYgy1g04sinqu2vj30u01t0go2.jpg" target="_blank" rel="noopener">https://ws3.sinaimg.cn/large/005M2pcYgy1g04sinqu2vj30u01t0go2.jpg</a></td>
<td></td>
</tr>
<tr>
<td>住宿</td>
<td>汉庭上海康桥沪南路酒店</td>
<td>2019-02-11 08:36</td>
<td>94</td>
<td><a href="https://ws1.sinaimg.cn/large/005M2pcYgy1g04sieal7sj30u01t0q5l.jpg" target="_blank" rel="noopener">https://ws1.sinaimg.cn/large/005M2pcYgy1g04sieal7sj30u01t0q5l.jpg</a><br /><a href="https://wx4.sinaimg.cn/large/005M2pcYgy1g04siyiz00j30u01t0acm.jpg" target="_blank" rel="noopener">https://wx4.sinaimg.cn/large/005M2pcYgy1g04siyiz00j30u01t0acm.jpg</a></td>
<td></td>
</tr>
<tr>
<td>住宿</td>
<td>汉庭上海康桥沪南路酒店</td>
<td>2019-02-11 08:36</td>
<td>94</td>
<td><a href="https://ws1.sinaimg.cn/large/005M2pcYgy1g04sieal7sj30u01t0q5l.jpg" target="_blank" rel="noopener">https://ws1.sinaimg.cn/large/005M2pcYgy1g04sieal7sj30u01t0q5l.jpg</a><br /><a href="https://wx4.sinaimg.cn/large/005M2pcYgy1g04siyiz00j30u01t0acm.jpg" target="_blank" rel="noopener">https://wx4.sinaimg.cn/large/005M2pcYgy1g04siyiz00j30u01t0acm.jpg</a></td>
<td></td>
</tr>
<tr>
<td>火车票</td>
<td>杭州东 - 深圳北</td>
<td>2019-01-24 15:15</td>
<td>455</td>
<td><a href="https://wx1.sinaimg.cn/large/005M2pcYgy1fzpumqhkihj30u01t0amd.jpg" target="_blank" rel="noopener">https://wx1.sinaimg.cn/large/005M2pcYgy1fzpumqhkihj30u01t0amd.jpg</a><br /><a href="https://ws1.sinaimg.cn/large/005M2pcYgy1fzpun06q08j30u01t01kx.jpg" target="_blank" rel="noopener">https://ws1.sinaimg.cn/large/005M2pcYgy1fzpun06q08j30u01t01kx.jpg</a></td>
<td></td>
</tr>
<tr>
<td>机票</td>
<td>深圳 - 上海</td>
<td>2019-01-24 14:19</td>
<td>340</td>
<td><a href="https://wx1.sinaimg.cn/large/005M2pcYgy1fzpuplw7hqj30u01t0wqj.jpg" target="_blank" rel="noopener">https://wx1.sinaimg.cn/large/005M2pcYgy1fzpuplw7hqj30u01t0wqj.jpg</a><br /><a href="https://ws2.sinaimg.cn/large/005M2pcYgy1fzpupu2u3uj30u01t04nw.jpg" target="_blank" rel="noopener">https://ws2.sinaimg.cn/large/005M2pcYgy1fzpupu2u3uj30u01t04nw.jpg</a></td>
<td></td>
</tr>
<tr>
<td>火车票</td>
<td>杭州 - 西安<br />退票费</td>
<td>2019-01-24 09:58</td>
<td>262</td>
<td><a href="https://wx3.sinaimg.cn/large/005M2pcYgy1fzputhtowlj30u01t013v.jpg" target="_blank" rel="noopener">https://wx3.sinaimg.cn/large/005M2pcYgy1fzputhtowlj30u01t013v.jpg</a><br /><a href="https://ws3.sinaimg.cn/large/005M2pcYgy1fzputpxvajj30u024bwmw.jpg" target="_blank" rel="noopener">https://ws3.sinaimg.cn/large/005M2pcYgy1fzputpxvajj30u024bwmw.jpg</a></td>
<td>退票</td>
</tr>
<tr>
<td>机票</td>
<td>西安-上海<br />退票费</td>
<td>2019-01-24 08:08</td>
<td>280</td>
<td></td>
<td>退票</td>
</tr>
<tr>
<td>机票</td>
<td>西安-上海</td>
<td>2019-01-24 08:08</td>
<td>1000</td>
<td><a href="https://wx3.sinaimg.cn/large/005M2pcYgy1fzpuv5r6fgj30u01t0al6.jpg" target="_blank" rel="noopener">https://wx3.sinaimg.cn/large/005M2pcYgy1fzpuv5r6fgj30u01t0al6.jpg</a><br /><a href="https://wx3.sinaimg.cn/large/005M2pcYgy1fzpuw88pblj30u036davy.jpg" target="_blank" rel="noopener">https://wx3.sinaimg.cn/large/005M2pcYgy1fzpuw88pblj30u036davy.jpg</a></td>
<td></td>
</tr>
<tr>
<td>地铁</td>
<td>汉庭（浦东机场店）<br />汉庭（上海中环沪南路）<br />六张成人票</td>
<td>2019-02-05 09:00</td>
<td>36</td>
<td></td>
<td></td>
</tr>
<tr>
<td>地铁</td>
<td>汉庭（上海中环沪南路）<br />豫园<br />六张成人票</td>
<td>2019-02-05 11:00</td>
<td>24</td>
<td></td>
<td></td>
</tr>
<tr>
<td>地铁</td>
<td>外白渡桥<br />汉庭（上海中环沪南路）<br />六张成人票</td>
<td>2019-02-05 18:00</td>
<td>24</td>
<td></td>
<td></td>
</tr>
<tr>
<td>门票</td>
<td>城隍庙<br />六张成人票</td>
<td>2019-02-05 13:00</td>
<td>60</td>
<td></td>
<td></td>
</tr>
<tr>
<td>拍照</td>
<td>外滩拍照<br />3张 12寸照片</td>
<td>2019-02-05 16:36</td>
<td>150</td>
<td><a href="https://ws2.sinaimg.cn/large/005M2pcYgy1g04luszyjej30u01t046n.jpg" target="_blank" rel="noopener">https://ws2.sinaimg.cn/large/005M2pcYgy1g04luszyjej30u01t046n.jpg</a><br /><a href="https://ws1.sinaimg.cn/large/005M2pcYgy1g04luzj5efj30u01t0ai9.jpg" target="_blank" rel="noopener">https://ws1.sinaimg.cn/large/005M2pcYgy1g04luzj5efj30u01t0ai9.jpg</a></td>
<td></td>
</tr>
<tr>
<td>照片</td>
<td>下载电子版照片</td>
<td>2019-02-11 21:21</td>
<td>19.8</td>
<td><a href="https://wx1.sinaimg.cn/large/005M2pcYgy1g04lx9qd4qj30u01t0myy.jpg" target="_blank" rel="noopener">https://wx1.sinaimg.cn/large/005M2pcYgy1g04lx9qd4qj30u01t0myy.jpg</a><br /><a href="https://wx1.sinaimg.cn/large/005M2pcYgy1g04lx9qd4qj30u01t0myy.jpg" target="_blank" rel="noopener">https://wx1.sinaimg.cn/large/005M2pcYgy1g04lx9qd4qj30u01t0myy.jpg</a></td>
<td></td>
</tr>
<tr>
<td>吃饭</td>
<td>肯德基</td>
<td>2019-02-05 19:43</td>
<td>145</td>
<td><a href="https://ws3.sinaimg.cn/large/005M2pcYgy1g04maaiz7ej30u01t04az.jpg" target="_blank" rel="noopener">https://ws3.sinaimg.cn/large/005M2pcYgy1g04maaiz7ej30u01t04az.jpg</a></td>
<td></td>
</tr>
<tr>
<td>超市</td>
<td>超市购物</td>
<td>2019-02-05 19:35</td>
<td>117</td>
<td><a href="https://ws2.sinaimg.cn/large/005M2pcYgy1g04ma3p2jtj30u01t0tl7.jpg" target="_blank" rel="noopener">https://ws2.sinaimg.cn/large/005M2pcYgy1g04ma3p2jtj30u01t0tl7.jpg</a></td>
<td></td>
</tr>
<tr>
<td>公交</td>
<td>汉庭上海中环沪南路酒店<br />朱家角古镇景区</td>
<td>2019-02-06 08:00</td>
<td>84</td>
<td></td>
<td></td>
</tr>
<tr>
<td>门票</td>
<td>上海 朱家角 新水乡访古游+游船</td>
<td>2019-02-06 07:43</td>
<td>357</td>
<td><a href="https://ws1.sinaimg.cn/large/005M2pcYgy1g04mhfyhw6j30u01t0alq.jpg" target="_blank" rel="noopener">https://ws1.sinaimg.cn/large/005M2pcYgy1g04mhfyhw6j30u01t0alq.jpg</a></td>
<td></td>
</tr>
<tr>
<td>吃饭</td>
<td>朱家角古镇外饭馆</td>
<td>2019-02-06 13:43</td>
<td>90</td>
<td></td>
<td></td>
</tr>
<tr>
<td>地铁</td>
<td>朱家角<br />田子坊</td>
<td>2019-02-06 14:00</td>
<td>48</td>
<td></td>
<td></td>
</tr>
<tr>
<td>地铁</td>
<td>田子坊<br />汉庭上海中环沪南路酒店</td>
<td>2019-02-06 18:00</td>
<td>24</td>
<td></td>
<td></td>
</tr>
<tr>
<td>地铁</td>
<td>汉庭上海中环沪南路酒店<br />中华艺术宫</td>
<td>2019-02-07 08:00</td>
<td>30</td>
<td></td>
<td></td>
</tr>
<tr>
<td>行李寄存</td>
<td>上海站行李寄存</td>
<td>2019-02-07 09:23</td>
<td>40</td>
<td><a href="https://wx4.sinaimg.cn/large/005M2pcYgy1g04n2209vsj30u01t0aka.jpg" target="_blank" rel="noopener">https://wx4.sinaimg.cn/large/005M2pcYgy1g04n2209vsj30u01t0aka.jpg</a></td>
<td></td>
</tr>
<tr>
<td>地铁</td>
<td>中华艺术宫<br />上海博物馆</td>
<td>2019-02-07 14:00</td>
<td>18</td>
<td></td>
<td></td>
</tr>
<tr>
<td>吃饭</td>
<td>粉丝汤+梅菜扣肉</td>
<td>2019-02-07 14:52</td>
<td>207</td>
<td><a href="https://wx4.sinaimg.cn/large/005M2pcYgy1g04n644u14j30u01t0q5k.jpg" target="_blank" rel="noopener">https://wx4.sinaimg.cn/large/005M2pcYgy1g04n644u14j30u01t0q5k.jpg</a></td>
<td></td>
</tr>
<tr>
<td>地铁</td>
<td>上海博物馆<br />上海站</td>
<td>2019-02-07 17:00</td>
<td>18</td>
<td></td>
<td></td>
</tr>
<tr>
<td>火车</td>
<td>上海站<br />苏州站</td>
<td>2019-02-07 08:00</td>
<td>81.5</td>
<td><a href="https://wx2.sinaimg.cn/large/005M2pcYgy1g04n7o2rt8j30u01t041s.jpg" target="_blank" rel="noopener">https://wx2.sinaimg.cn/large/005M2pcYgy1g04n7o2rt8j30u01t041s.jpg</a><br /><a href="https://ws4.sinaimg.cn/large/005M2pcYgy1g04n94bl5qj30u01t0tc5.jpg" target="_blank" rel="noopener">https://ws4.sinaimg.cn/large/005M2pcYgy1g04n94bl5qj30u01t0tc5.jpg</a></td>
<td></td>
</tr>
<tr>
<td>地铁</td>
<td>苏州站<br />汉庭苏州苏蠡路酒店</td>
<td>2019-02-07 22:00</td>
<td>18</td>
<td></td>
<td></td>
</tr>
<tr>
<td>公交</td>
<td>汉庭苏州苏蠡路酒店<br />拙政园</td>
<td>2019-02-08 08:00</td>
<td>24</td>
<td></td>
<td></td>
</tr>
<tr>
<td>门票</td>
<td>拙政园门票</td>
<td>2019-02-08 09:00</td>
<td>320</td>
<td><a href="https://ws1.sinaimg.cn/large/005M2pcYgy1g04nf2ihk1j30u01t0go9.jpg" target="_blank" rel="noopener">https://ws1.sinaimg.cn/large/005M2pcYgy1g04nf2ihk1j30u01t0go9.jpg</a><br /><a href="https://ws2.sinaimg.cn/large/005M2pcYgy1g04ng2gm1cj30u01t0q4v.jpg" target="_blank" rel="noopener">https://ws2.sinaimg.cn/large/005M2pcYgy1g04ng2gm1cj30u01t0q4v.jpg</a></td>
<td></td>
</tr>
<tr>
<td>吃饭</td>
<td>苏州博物馆外饭馆</td>
<td>2019-02-08 14:00</td>
<td>200</td>
<td></td>
<td></td>
</tr>
<tr>
<td>公交</td>
<td>平江路<br />汉庭苏州苏蠡路酒店</td>
<td>2019-02-08 19:00</td>
<td>48</td>
<td></td>
<td></td>
</tr>
<tr>
<td>超市</td>
<td>超市购物+饺子</td>
<td>2019-02-08 21:00</td>
<td>247</td>
<td></td>
<td></td>
</tr>
<tr>
<td>公交</td>
<td>汉庭苏州苏蠡路酒店<br />苏州汽车北站</td>
<td>2019-02-09 08:00</td>
<td>12</td>
<td></td>
<td></td>
</tr>
<tr>
<td>大巴</td>
<td>苏州汽车北站<br />杭州汽车客运中心站</td>
<td>2019-02-09 10:05</td>
<td>456</td>
<td><a href="https://wx3.sinaimg.cn/large/005M2pcYgy1g04np403unj30u01t0jul.jpg" target="_blank" rel="noopener">https://wx3.sinaimg.cn/large/005M2pcYgy1g04np403unj30u01t0jul.jpg</a><br /><a href="https://wx3.sinaimg.cn/large/005M2pcYgy1g04np403unj30u01t0jul.jpg" target="_blank" rel="noopener">https://wx3.sinaimg.cn/large/005M2pcYgy1g04np403unj30u01t0jul.jpg</a></td>
<td></td>
</tr>
<tr>
<td>地铁</td>
<td>杭州汽车客运中心站<br />下沙江滨</td>
<td>2019-02-09 12:05</td>
<td>30</td>
<td></td>
<td></td>
</tr>
<tr>
<td>地铁</td>
<td>下沙江滨<br />杭州西湖</td>
<td>2019-02-10 08:00</td>
<td>42</td>
<td></td>
<td></td>
</tr>
<tr>
<td>出行</td>
<td>雷峰塔<br />下沙江滨</td>
<td>2019-02-10 14:00</td>
<td>27</td>
<td></td>
<td></td>
</tr>
<tr>
<td>地铁</td>
<td>下沙江滨<br />杭州东站</td>
<td>2019-02-10 14:50</td>
<td>36</td>
<td></td>
<td></td>
</tr>
<tr>
<td>火车</td>
<td>杭州东站<br />上海南站</td>
<td>2019-02-10 17:35</td>
<td>165</td>
<td><a href="https://ws3.sinaimg.cn/large/005M2pcYgy1g04sgujfpzj30u01t077m.jpg" target="_blank" rel="noopener">https://ws3.sinaimg.cn/large/005M2pcYgy1g04sgujfpzj30u01t077m.jpg</a><br /><a href="https://ws4.sinaimg.cn/large/005M2pcYgy1g04sgyyhbjj30u01t0q68.jpg" target="_blank" rel="noopener">https://ws4.sinaimg.cn/large/005M2pcYgy1g04sgyyhbjj30u01t0q68.jpg</a><br /><a href="https://wx2.sinaimg.cn/large/005M2pcYgy1g04shaugxuj30u01t0wgc.jpg" target="_blank" rel="noopener">https://wx2.sinaimg.cn/large/005M2pcYgy1g04shaugxuj30u01t0wgc.jpg</a></td>
<td></td>
</tr>
<tr>
<td>地铁</td>
<td>上海南站<br />御桥站</td>
<td>2019-02-10 22:25</td>
<td>30</td>
<td><a href="https://wx1.sinaimg.cn/large/005M2pcYgy1g04slkqwajj30u01t077a.jpg" target="_blank" rel="noopener">https://wx1.sinaimg.cn/large/005M2pcYgy1g04slkqwajj30u01t077a.jpg</a></td>
<td></td>
</tr>
<tr>
<td>打车</td>
<td>御桥站<br />汉庭上海康桥沪南路酒店</td>
<td>2019-02-10 22:45</td>
<td>28</td>
<td></td>
<td></td>
</tr>
<tr>
<td>门票</td>
<td>迪士尼<br />三张成人票一张儿童票</td>
<td>2019-02-10 23:55</td>
<td>1496</td>
<td><a href="https://wx1.sinaimg.cn/large/005M2pcYgy1g04smuk613j30u01t0q56.jpg" target="_blank" rel="noopener">https://wx1.sinaimg.cn/large/005M2pcYgy1g04smuk613j30u01t0q56.jpg</a></td>
<td></td>
</tr>
<tr>
<td>打车</td>
<td>汉庭上海康桥沪南路酒店<br />御桥站</td>
<td>2019-02-11 06:00</td>
<td>18</td>
<td></td>
<td></td>
</tr>
<tr>
<td>地铁</td>
<td>御桥站<br />迪士尼</td>
<td>2019-02-11 06:05</td>
<td>24</td>
<td></td>
<td></td>
</tr>
<tr>
<td>地铁</td>
<td>迪士尼<br />上海动物园</td>
<td>2019-02-11 08:35</td>
<td>18</td>
<td></td>
<td></td>
</tr>
<tr>
<td>门票</td>
<td>上海动物园</td>
<td>2019-02-11 09:05</td>
<td>80</td>
<td></td>
<td></td>
</tr>
<tr>
<td>地铁</td>
<td>上海动物园<br />新天地</td>
<td>2019-02-11 13:35</td>
<td>12</td>
<td></td>
<td></td>
</tr>
<tr>
<td>地铁</td>
<td>新天地<br />御桥站</td>
<td>2019-02-11 14:45</td>
<td>15</td>
<td></td>
<td></td>
</tr>
<tr>
<td>打车</td>
<td>迪士尼<br />汉庭上海康桥沪南路酒店</td>
<td>2019-02-11 19:45</td>
<td>45</td>
<td></td>
<td></td>
</tr>
<tr>
<td>地铁</td>
<td>汉庭上海康桥沪南路酒店<br />上海站</td>
<td>2019-02-12 07:45</td>
<td>30</td>
<td></td>
<td></td>
</tr>
<tr>
<td>火车</td>
<td>上海站<br />西安站</td>
<td>2019-02-12 07:45</td>
<td>1515.5</td>
<td><a href="https://wx2.sinaimg.cn/large/005M2pcYgy1g04t3dcvjrj30u01t0djf.jpg" target="_blank" rel="noopener">https://wx2.sinaimg.cn/large/005M2pcYgy1g04t3dcvjrj30u01t0djf.jpg</a><br /><a href="https://ws1.sinaimg.cn/large/005M2pcYgy1g04lln0rk3j30u01t0wgn.jpg" target="_blank" rel="noopener">https://ws1.sinaimg.cn/large/005M2pcYgy1g04lln0rk3j30u01t0wgn.jpg</a></td>
<td></td>
</tr>
<tr>
<td>大巴</td>
<td>西安城南客运站<br />大荔</td>
<td>2019-02-13 06:40</td>
<td>164.25</td>
<td></td>
<td></td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>Charges</category>
      </categories>
      <tags>
        <tag>Tour</tag>
      </tags>
  </entry>
  <entry>
    <title>Travel Strategy of Disney</title>
    <url>/2019/01/31/Travel-Strategy-of-Disney/</url>
    <content><![CDATA[<img src="https://images.shobserver.com/news/690_390/2017/1/6/bb24dcee-035d-4631-a293-544347aadd3d.jpeg" width="100%"/>

<a id="more"></a>

<h2 id="迪士尼攻略"><a href="#迪士尼攻略" class="headerlink" title="迪士尼攻略"></a>迪士尼攻略</h2><blockquote>
<p><a href="https://www.ly.com/travels/1037450.html" target="_blank" rel="noopener">2018年上海迪士尼攻略大全</a></p>
</blockquote>
<h3 id="交通"><a href="#交通" class="headerlink" title="交通"></a>交通</h3><p><a href="https://www.amap.com/dir?from%5Bid%5D=B0FFHGJ1YN-from&from%5Bname%5D=%E6%B1%89%E5%BA%AD%E9%85%92%E5%BA%97%E4%B8%8A%E6%B5%B7%E4%B8%AD%E7%8E%AF%E6%B2%AA%E5%8D%97%E8%B7%AF%E5%BA%97&from%5Blnglat%5D=121.562351%2C31.163604&from%5Bmodxy%5D=121.562517%2C31.16354&from%5Bpoitype%5D=100105&from%5Badcode%5D=310115&to%5Bname%5D=%E4%B8%8A%E6%B5%B7%E8%BF%AA%E5%A3%AB%E5%B0%BC%E5%BA%A6%E5%81%87%E5%8C%BA&to%5Blnglat%5D=121.661735%2C31.141333&to%5Bid%5D=B00157AW8O-to&to%5Bpoitype%5D=080501&to%5Badcode%5D=310000&to%5Bmodxy%5D=121.657565%2C31.139744&type=bus&policy=0&dateTime=now" target="_blank" rel="noopener">汉庭酒店(上海中环沪南路店) - 上海迪士尼景区</a></p>
<p><strong>地铁11号线</strong>（迪士尼方向）</p>
<h4 id="御桥-上车（7号口进）"><a href="#御桥-上车（7号口进）" class="headerlink" title="御桥   上车（7号口进）"></a><a href="javascript:void(0)">御桥 </a>  上车（7号口进）</h4><h4 id="迪士尼-下车（1号口出）"><a href="#迪士尼-下车（1号口出）" class="headerlink" title="迪士尼   下车（1号口出）"></a><a href="javascript:void(0)">迪士尼 </a>  下车（1号口出）</h4><p>上车站 首：06:55  末：23:25  约12分钟/趟 共4站</p>
<h3 id="门票"><a href="#门票" class="headerlink" title="门票"></a>门票</h3><blockquote>
<p><a href="https://www.shanghaidisneyresort.com/" target="_blank" rel="noopener">上海迪士尼度假区官方网站</a></p>
</blockquote>
<p>官网预订：可以通过上海迪士尼官网预订一日票或两日联票</p>
<p><img src="https://wx2.sinaimg.cn/large/005M2pcYgy1fzu5wewz5mj30ey07ujrs.jpg" alt="image"></p>
<p><img src="https://wx2.sinaimg.cn/large/005M2pcYgy1fzu5xh797zj30g1069t90.jpg" alt="image"></p>
<p><img src="https://wx3.sinaimg.cn/large/005M2pcYgy1fzu5yad7epj30f705zq38.jpg" alt="image"></p>
<h3 id="APP"><a href="#APP" class="headerlink" title="APP"></a>APP</h3><p>提前下载“迪士尼度假区”app，在园内一天的活动基本都要使用到这个app。入园时需携带购票者身份证，无需取票，直接刷身份证入园，需所有使用同一个身份证号购票的人一起入园。</p>
<p>取得纸质票后立即打开app选择“我的门票”扫描纸质票后面的二维码，可以关联多张门票建立游玩组，就可以一个人同时领取多人的快速通行证了。</p>
<p>1、领取快速通行证（免费）：相当于提前预约指定项目的一个时段游玩，在规定时间前往，无需排队，但数量有限，建议优先领取最想玩最难排队的项目（如飞跃地平线）。每两小时可以领取一次，比如9：30入园领取了一次，下一次在11:30可以领取，可不断领取直到所有项目的快速通行证领完。但如果手中的某个项目的快速通行证还未使用，再次领取时不得领取同一项目，只能领取不同项目。</p>
<p>FP就是是FAST PASS卡。在规定时间去玩这个项目可以不用排队</p>
<p>在上海迪士尼度假区官方App上领取迪士尼快速通行证：</p>
<pre><code>第一步：在您前往上海迪士尼度假区前，提前下载上海迪士尼度假区官方App，并使用您的手机号码或邮箱创建账户。

第二步：进入上海迪士尼乐园后，打开并登录上海迪士尼度假区官方App，点击“获取快速通行证”，扫描您乐园门票上的二维码 。

第三步：还可将同行伙伴的门票一同关联至您的账户，并创建游玩组，便捷为您游玩组内的所有成员领取同一景点、同一返回时间的快速通行证，与亲友同享奇妙乐趣。（需注意，游玩组内的每一位成员都须已进入乐园。）

第四步：选择想要游玩景点的快速通行证，无需支付额外费用。

第五步：确认您所选择的迪士尼快速通行证。

第六步：您可在指定返回时间回到景点的“迪士尼快速通行证入口”，扫描手机或乐园门票上的二维码，验证成功后，即可快速进入景点。</code></pre><p>2、查看各项目排队时间：app实时显示各项目排队时间，可以在想玩的项目中选择排队时间较短的项目优先游玩。</p>
<p>3、查看地图／定位位置：目前园区的游玩项目主要集中在“梦幻世界”“明日世界”“宝藏湾／探险岛”，今年夏天会建成开放一个新区域“玩具总动员”，园区比较大，app地图可以定位目前所在位置。且地图按“游玩设施”“餐饮”“洗手间”等分类，可以选择类别迅速寻找到自己所需。</p>
<h3 id="饮食"><a href="#饮食" class="headerlink" title="饮食"></a>饮食</h3><p>食品：由于迪士尼乐园规则调整，目前不准携带任何食物进园！无论是否开封</p>
<p>饮料：非酒精类可携带不超过600ml，可提前准备盒装牛奶、果汁带进去。园内有瓶装水、可乐等售卖，想喝热水的可以自带保温杯，园内的乐园餐厅都有热水提供。</p>
<p>爆米花价格在30元/桶起，矿泉水10元/瓶起</p>
<p>园区有多个寄存柜，可将物品临时寄存</p>
<h3 id="项目"><a href="#项目" class="headerlink" title="项目"></a>项目</h3><p>1、五星：飞跃地平线、创极速光轮</p>
<p>2、四星：加勒比海盗、七个小矮人矿山车、小飞侠天空奇遇、雷鸣山漂流（需雨衣，可提前网上购买，现场购买10元）</p>
<p>3、三星：古迹探索营的绳索挑战道、喷气背包飞行器、探险家独木舟</p>
<p>4、两星：巴斯光年星际营救、旋转木马、晶彩奇航  </p>
<p><strong>成人游玩路线推荐：入口——米奇大街——探险岛——宝藏湾——梦幻世界——明日世界——奇想花园</strong></p>
<p><strong>儿童游玩路线推荐：入口——米奇大街——奇想花园——梦幻世界——宝藏湾——探险套——明日世界</strong></p>
<p><strong>烟火</strong></p>
<p><strong>一定不要错过！诀窍：</strong></p>
<p><strong>大概5点就要在城堡下找座位，越近越好，然后耐心等着！一定占好座位！</strong></p>
<p><strong>否则，你肯定看不爽的，会后悔莫及！</strong></p>
<p><strong>占位:</strong></p>
<p><img src="https://pic3.zhimg.com/50/v2-cd669ec856e3dc8378fcc62b2f91926d_b.jpg" alt="img"></p>
<p><strong>大概在我标红圈的位置，视觉极佳，很震撼，别为了坐旋转木马耽误了。</strong></p>
<p><strong>完全没法比。</strong></p>
<p>作者：梦尧</p>
<p>链接：<a href="https://www.zhihu.com/question/42804614/answer/165982506" target="_blank" rel="noopener">https://www.zhihu.com/question/42804614/answer/165982506</a></p>
<p>来源：知乎</p>
<p>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>
<h3 id="关于身高限制"><a href="#关于身高限制" class="headerlink" title="关于身高限制"></a>关于身高限制</h3><p>多大的娃可以逛迪士尼？我曾经在母婴室里碰到1个多月就被父母拖出来逛上海迪士尼的婴儿，那心也真是大了去了。但是，我们妹妹2岁了，哥哥6岁了，还是遇到了很多项目不能玩，那是因为很多项目都是有身高限制的，比如以下这些：</p>
<p>创极速光轮122cm</p>
<p>喷气背包飞行器112cm</p>
<p>雷鸣山漂流107cm</p>
<p>绳索挑战道（在古迹探索营）106cm</p>
<p>翱翔飞越地平线102cm</p>
<p>七个小矮人矿山车97cm</p>
<p>探险家独木舟要求游客乘坐独木舟时必须能够双脚着地</p>
<p>幻想曲旋转木马120cm或以上可以单独乘坐</p>
<p>你千万不要抱着侥幸心理让孩子先排队，以为排了几个小时队工作人员会同情你，开恩让你玩有身高限制的项目了。迪士尼的工作人员可是很认真负责的，我看到过好几次，排到最后关头，因为身高不够，被拦在外面呜呜哭的孩子。</p>
<p>至于上海迪士尼的大门票，1米以下儿童免票，所以1米以下的娃，趁着长高前赶紧去吧。</p>
<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><ul>
<li>不允许带自拍杆</li>
<li>一共有两道门。第一是检查包裹。 <a href="https://www.mafengwo.cn/travel-scenic-spot/mafengwo/11242.html" target="_blank" rel="noopener">开封</a> 的食物和600ml的饮料都不能带。快八点会打开第一道门。<br>进去后在第二道门前排队，大概八点半会开第二道门，进园区时刷身份证当场取票。</li>
</ul>
<h3 id="强烈建议"><a href="#强烈建议" class="headerlink" title="强烈建议"></a>强烈建议</h3><ul>
<li>老老实实排队争取第一批进园，<strong>你来晚了，什么攻略都没用</strong></li>
<li>9点半园区正式开门，这个时候要注意！！！（敲黑板！！）进入园区的第一件事不是抢FP，而是向右跑！！一定要拿出最快的速度，往飞跃地平线项目跑！这是景区快速游玩套路的重中之重！只要赶上了第一波飞跃地平线，那最后至少帮你节省两个半小时还帮你省下了一张FP！！！</li>
<li>景区快速游玩儿套路——逆时针玩法。先玩儿后面的，再玩儿前面的。这种玩儿法的精髓就是错开人流，出其不意。正常情况下玩儿完飞跃地平线要等待两个小时以上，但是如果一进园就先玩儿飞跃地平线的话能够大大的节省时间，事实证明，这种方法屡试不爽。</li>
<li>如果是地铁返程的话烟花秀一定不要看完，看到十分钟左右就可以了，然后跑着去地铁站。这个时候还是有座位的，如果等到看完了再去，成千上万的人拥挤不说，还要排无尽的队。</li>
<li>谨防黄牛党！！！</li>
</ul>
]]></content>
      <categories>
        <category>Strategy</category>
      </categories>
      <tags>
        <tag>Tour</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring Tour 2019</title>
    <url>/2019/01/28/Spring-Tour/</url>
    <content><![CDATA[<img src="http://wx1.sinaimg.cn/large/005M2pcYgy1fzg88oizf2j30b607e0ug.jpg" width="100%"/>

<a id="more"></a>

<h2 id="2019-年新春游"><a href="#2019-年新春游" class="headerlink" title="2019 年新春游"></a>2019 年新春游</h2><h3 id="总体规划"><a href="#总体规划" class="headerlink" title="总体规划"></a>总体规划</h3><p>上海 ~ 苏州 ~ 乌镇 ~ 杭州</p>
<h4 id="成员"><a href="#成员" class="headerlink" title="成员"></a>成员</h4><p>李博，李永斌，吕聪慧，李艳红，王钰溪，李一萍，李欣芮，李欣楠</p>
<h4 id="总站点分布图"><a href="#总站点分布图" class="headerlink" title="总站点分布图"></a><a href="http://c.dituhui.com/maps/1977946" target="_blank" rel="noopener">总站点分布图</a></h4><iframe  width='100%' height='400' frameBorder='0' src='http://c.dituhui.com/maps/1977946/embed'></iframe><div style='margin-bottom:5px'> <strong> <a href='http://c.dituhui.com/maps/1977946' title='' target='_blank'>2019春游地图</a> </strong> 分享自 <strong><a href='http://c.dituhui.com' target='_blank'>地图慧</a></strong> </div></iframe>
#### [地铁线路图](http://map.amap.com/subway/index.html)

<iframe  width='100%' height='1000' frameBorder='0' src='http://map.amap.com/subway/index.html'></iframe>
#### 费用

<p><a href="">费用明细表</a></p>
<h2 id="上海"><a href="#上海" class="headerlink" title="上海"></a>上海</h2><h3 id="天气"><a href="#天气" class="headerlink" title="天气"></a>天气</h3><iframe width="100%" scrolling="no" height="60" frameborder="0" allowtransparency="true" src="//i.tianqi.com/index.php?c=code&id=12&icon=1&py=shanghai&num=5&site=12"></iframe>
### 住宿

<p><strong>2019-02-04 14:00:00 ~ 2019-02-05 12:00:00</strong></p>
<p><a href="http://hotels.huazhu.com/hotel/detail/2012011?CheckInDate=2019-02-04&CheckOutDate=2019-02-05" target="_blank" rel="noopener">汉庭上海浦东机场T2航站楼酒店</a></p>
<p>双床房：李博，李永斌</p>
<p>双床房：吕聪慧，李一萍，李欣芮，李欣楠</p>
<p><strong>2019-02-05 14:00:00 ~ 2019-02-07 12:00:00</strong></p>
<p><a href="http://hotels.huazhu.com/Hotel/Detail?HotelId=2001245" target="_blank" rel="noopener">汉庭上海中环沪南路酒店</a></p>
<p>双床房：吕聪慧，李欣芮，李永斌，李博</p>
<p>双床房：李一萍，李欣芮，李艳红，王钰溪</p>
<h3 id="第一天"><a href="#第一天" class="headerlink" title="第一天"></a>第一天</h3><h4 id="住宿"><a href="#住宿" class="headerlink" title="住宿"></a>住宿</h4><p>2019-02-04 14:00:00 ~ 2019-02-05 12:00:00</p>
<p><a href="http://hotels.huazhu.com/hotel/detail/2012011?CheckInDate=2019-02-04&CheckOutDate=2019-02-05" target="_blank" rel="noopener">汉庭上海浦东机场T2航站楼酒店</a></p>
<p>双床房：李博，李永斌</p>
<p>双床房：吕聪慧，李一萍，李欣芮，李欣楠</p>
<h4 id="路线"><a href="#路线" class="headerlink" title="路线"></a>路线</h4><p>老城隍庙旅游区(2小时) → 豫园(1小时) → 南京路步行街(3小时) → 外滩(1小时) → 外白渡桥(30分钟)</p>
<ul>
<li><a href="https://www.amap.com/dir?from%5Badcode%5D=310115&from%5Bname%5D=%E6%B1%89%E5%BA%AD%E9%85%92%E5%BA%97%E4%B8%8A%E6%B5%B7%E6%B5%A6%E4%B8%9C%E6%9C%BA%E5%9C%BAT2%E8%88%AA%E7%AB%99%E6%A5%BC%E5%BA%97&from%5Bid%5D=B00157HL4Y-from&from%5Bpoitype%5D=100105&from%5Blnglat%5D=121.76788199999999%2C31.211475&from%5Bmodxy%5D=&type=bus&policy=0&to%5Bid%5D=B0FFHGJ1YN-to&to%5Bname%5D=%E6%B1%89%E5%BA%AD%E9%85%92%E5%BA%97%E4%B8%8A%E6%B5%B7%E4%B8%AD%E7%8E%AF%E6%B2%AA%E5%8D%97%E8%B7%AF%E5%BA%97&to%5Blnglat%5D=121.562351%2C31.163604&to%5Bmodxy%5D=121.562517%2C31.16354&to%5Bpoitype%5D=100105&to%5Badcode%5D=310115&dateTime=now" target="_blank" rel="noopener">汉庭上海浦东机场T2航站楼酒店 - 汉庭上海中环沪南路酒店</a></li>
<li><a href="https://www.amap.com/dir?from%5Badcode%5D=310115&from%5Bname%5D=%E6%B1%89%E5%BA%AD%E9%85%92%E5%BA%97%E4%B8%8A%E6%B5%B7%E4%B8%AD%E7%8E%AF%E6%B2%AA%E5%8D%97%E8%B7%AF%E5%BA%97&from%5Bid%5D=B0FFHGJ1YN-from&from%5Bpoitype%5D=100105&from%5Blnglat%5D=121.56235100000004%2C31.163604&from%5Bmodxy%5D=121.562517%2C31.16354&to%5Badcode%5D=310101&to%5Bname%5D=%E4%B8%8A%E6%B5%B7%E5%9F%8E%E9%9A%8D%E5%BA%99&to%5Bid%5D=B00155FHOA-to&to%5Bpoitype%5D=110205&to%5Blnglat%5D=121.49251200000003%2C31.225722&to%5Bmodxy%5D=121.492575%2C31.225336&type=bus&policy=0&dateTime=now" target="_blank" rel="noopener">汉庭上海中环沪南路酒店 - 老城隍庙</a></li>
<li><a href="https://www.amap.com/dir?from%5Badcode%5D=310101&from%5Bname%5D=%E4%B8%8A%E6%B5%B7%E5%9F%8E%E9%9A%8D%E5%BA%99&from%5Bid%5D=B00155FHOA-from&from%5Bpoitype%5D=110205&from%5Blnglat%5D=121.49251200000003%2C31.225722&from%5Bmodxy%5D=121.492575%2C31.225336&to%5Badcode%5D=310101&to%5Bname%5D=%E8%B1%AB%E5%9B%AD&to%5Bid%5D=B00155MF55-to&to%5Bpoitype%5D=110202&to%5Blnglat%5D=121.491983%2C31.227029&to%5Bmodxy%5D=121.491487%2C31.22785&type=walk&policy=0&dateTime=now" target="_blank" rel="noopener">城隍庙 - 豫园</a></li>
<li><a href="https://www.amap.com/dir?from%5Bid%5D=B00155MF55-from&from%5Bname%5D=%E8%B1%AB%E5%9B%AD&from%5Blnglat%5D=121.491983%2C31.227029&from%5Bmodxy%5D=121.491487%2C31.22785&from%5Bpoitype%5D=110202&from%5Badcode%5D=310101&to%5Badcode%5D=310101&to%5Bname%5D=%E5%8D%97%E4%BA%AC%E8%B7%AF%E6%AD%A5%E8%A1%8C%E8%A1%97&to%5Bid%5D=B0FFF5VNSV-to&to%5Bpoitype%5D=061001&to%5Blnglat%5D=121.47979700000002%2C31.235742&to%5Bmodxy%5D=121.484843%2C31.237513&type=bus&policy=0&dateTime=now" target="_blank" rel="noopener">豫园 - 南京路步行街</a></li>
<li><a href="https://www.amap.com/dir?from%5Badcode%5D=310101&from%5Bname%5D=%E5%8D%97%E4%BA%AC%E8%B7%AF%E6%AD%A5%E8%A1%8C%E8%A1%97&from%5Bid%5D=B0FFF5VNSV-from&from%5Bpoitype%5D=061001&from%5Blnglat%5D=121.47979700000002%2C31.235742&from%5Bmodxy%5D=121.484843%2C31.237513&to%5Badcode%5D=310101&to%5Bname%5D=%E5%A4%96%E6%BB%A9&to%5Bid%5D=B00155FXB3-to&to%5Bpoitype%5D=110200&to%5Blnglat%5D=121.49060199999997%2C31.237767&to%5Bmodxy%5D=121.492255%2C31.233005&type=walk&policy=0&dateTime=now" target="_blank" rel="noopener">南京路步行街 - 外滩</a></li>
<li><a href="https://www.amap.com/dir?from%5Badcode%5D=310101&from%5Bname%5D=%E5%A4%96%E6%BB%A9&from%5Bid%5D=B00155FXB3-from&from%5Bpoitype%5D=110200&from%5Blnglat%5D=121.49060199999997%2C31.237767&from%5Bmodxy%5D=121.492255%2C31.233005&to%5Bname%5D=%E5%A4%96%E7%99%BD%E6%B8%A1%E6%A1%A5&to%5Blnglat%5D=121.490185%2C31.243425&to%5Bid%5D=B00155IL1T-to&to%5Bpoitype%5D=&to%5Badcode%5D=310000&to%5Bmodxy%5D=121.490185%2C31.243425&type=walk&policy=0&dateTime=now" target="_blank" rel="noopener">外滩 - 外白渡桥</a></li>
<li><a href="https://www.amap.com/dir?from%5Bname%5D=%E5%A4%96%E7%99%BD%E6%B8%A1%E6%A1%A5&from%5Blnglat%5D=121.490185%2C31.243425&from%5Bid%5D=B00155IL1T-from&from%5Bpoitype%5D=&from%5Badcode%5D=310000&from%5Bmodxy%5D=121.490185%2C31.243425&to%5Bid%5D=B0FFHGJ1YN-to&to%5Bname%5D=%E6%B1%89%E5%BA%AD%E9%85%92%E5%BA%97%E4%B8%8A%E6%B5%B7%E4%B8%AD%E7%8E%AF%E6%B2%AA%E5%8D%97%E8%B7%AF%E5%BA%97&to%5Blnglat%5D=121.562351%2C31.163604&to%5Bmodxy%5D=121.562517%2C31.16354&to%5Bpoitype%5D=100105&to%5Badcode%5D=310115&type=bus&policy=0&dateTime=now" target="_blank" rel="noopener">外白渡桥 - 汉庭上海中环沪南路酒店</a></li>
</ul>
<h3 id="第二天"><a href="#第二天" class="headerlink" title="第二天"></a>第二天</h3><h4 id="住宿-1"><a href="#住宿-1" class="headerlink" title="住宿"></a>住宿</h4><p>2019-02-05 14:00:00 ~ 2019-02-06 12:00:00</p>
<p><a href="http://hotels.huazhu.com/Hotel/Detail?HotelId=2001245" target="_blank" rel="noopener">汉庭上海中环沪南路酒店</a></p>
<p>双床房：吕聪慧，李欣芮，李永斌，李博</p>
<p>双床房：李一萍，李欣芮，李艳红，王钰溪</p>
<h4 id="景点"><a href="#景点" class="headerlink" title="景点"></a>景点</h4><p>迪士尼 <a href="https://libo9527.github.io/2019/01/31/Travel-Strategy-of-Disney/" target="_blank" rel="noopener">迪士尼攻略</a></p>
<p><a href="http://www.mafengwo.cn/poi/4988.html" target="_blank" rel="noopener">上海朱家角古镇旅游区</a>(3小时) → 上海博物馆(1小时) → 中华艺术宫(2小时) → 田子坊(1小时) → 上海新天地(1小时)</p>
<h4 id="路线-1"><a href="#路线-1" class="headerlink" title="路线"></a>路线</h4><ul>
<li><a href="https://www.amap.com/dir?from%5Bid%5D=B0FFHGJ1YN-from&from%5Bname%5D=%E6%B1%89%E5%BA%AD%E9%85%92%E5%BA%97%E4%B8%8A%E6%B5%B7%E4%B8%AD%E7%8E%AF%E6%B2%AA%E5%8D%97%E8%B7%AF%E5%BA%97&from%5Blnglat%5D=121.562351%2C31.163604&from%5Bmodxy%5D=121.562517%2C31.16354&from%5Bpoitype%5D=100105&from%5Badcode%5D=310115&to%5Bname%5D=%E6%9C%B1%E5%AE%B6%E8%A7%92%E5%8F%A4%E9%95%87&to%5Blnglat%5D=121.05388%2C31.109867&to%5Bid%5D=B001558F5I-to&to%5Bpoitype%5D=110202&to%5Badcode%5D=310000&to%5Bmodxy%5D=121.053613%2C31.114342&type=bus&policy=0&dateTime=now" target="_blank" rel="noopener">汉庭上海中环沪南路酒店 - 朱家角古镇</a></li>
<li><a href="https://www.amap.com/dir?from%5Bid%5D=B001558F5I-from&from%5Bname%5D=%E6%9C%B1%E5%AE%B6%E8%A7%92%E5%8F%A4%E9%95%87&from%5Blnglat%5D=121.05388%2C31.109867&from%5Bmodxy%5D=121.053613%2C31.114342&from%5Bpoitype%5D=110202&from%5Badcode%5D=310118&to%5Badcode%5D=310101&to%5Bname%5D=%E4%B8%8A%E6%B5%B7%E5%8D%9A%E7%89%A9%E9%A6%86&to%5Bid%5D=B001535BBC-to&to%5Bpoitype%5D=140100&to%5Blnglat%5D=121.47552999999999%2C31.228245&to%5Bmodxy%5D=121.476137%2C31.227577&type=bus&policy=0&dateTime=now" target="_blank" rel="noopener">朱家角古镇旅游区 - 上海博物馆</a></li>
<li><a href="https://www.amap.com/dir?from%5Badcode%5D=310101&from%5Bname%5D=%E4%B8%8A%E6%B5%B7%E5%8D%9A%E7%89%A9%E9%A6%86&from%5Bid%5D=B001535BBC-from&from%5Bpoitype%5D=140100&from%5Blnglat%5D=121.47552999999999%2C31.228245&from%5Bmodxy%5D=121.476137%2C31.227577&to%5Badcode%5D=310115&to%5Bname%5D=%E4%B8%AD%E5%8D%8E%E8%89%BA%E6%9C%AF%E5%AE%AB&to%5Bid%5D=B00155L9WI&to%5Bpoitype%5D=140100&to%5Blnglat%5D=121.49472500000002%2C31.184385&to%5Bmodxy%5D=121.493502%2C31.184149&type=bus&policy=0&dateTime=now" target="_blank" rel="noopener">上海博物馆 - 中华艺术宫</a></li>
<li><a href="https://www.amap.com/dir?from%5Badcode%5D=310115&from%5Bname%5D=%E4%B8%AD%E5%8D%8E%E8%89%BA%E6%9C%AF%E5%AE%AB&from%5Bid%5D=B00155L9WI-from&from%5Bpoitype%5D=140100&from%5Blnglat%5D=121.49472500000002%2C31.184385&from%5Bmodxy%5D=121.493502%2C31.184149&to%5Badcode%5D=310101&to%5Bname%5D=%E7%94%B0%E5%AD%90%E5%9D%8A&to%5Bid%5D=B00155HO6Y-to&to%5Bpoitype%5D=061000&to%5Blnglat%5D=121.46841699999999%2C31.208032&to%5Bmodxy%5D=121.469361%2C31.207774&type=bus&policy=0&dateTime=now" target="_blank" rel="noopener">中华艺术宫 - 田子坊</a></li>
<li><a href="https://www.amap.com/dir?from%5Badcode%5D=310101&from%5Bname%5D=%E7%94%B0%E5%AD%90%E5%9D%8A&from%5Bid%5D=B00155HO6Y-from&from%5Bpoitype%5D=061000&from%5Blnglat%5D=121.46841699999999%2C31.208032&from%5Bmodxy%5D=121.469361%2C31.207774&to%5Badcode%5D=310101&to%5Bname%5D=%E4%B8%8A%E6%B5%B7%E6%96%B0%E5%A4%A9%E5%9C%B0%E9%A9%AC%E5%BD%93%E8%B7%AF&to%5Bid%5D=B00155KUM0&to%5Bpoitype%5D=120201&to%5Blnglat%5D=121.47495000000004%2C31.219921&to%5Bmodxy%5D=121.475037%2C31.218473&type=walk&policy=0&dateTime=now" target="_blank" rel="noopener">田子坊 - 上海新天地</a></li>
<li><a href="https://www.amap.com/dir?from%5Badcode%5D=310101&from%5Bname%5D=%E4%B8%8A%E6%B5%B7%E6%96%B0%E5%A4%A9%E5%9C%B0%E9%A9%AC%E5%BD%93%E8%B7%AF&from%5Bid%5D=B00155KUM0-from&from%5Bpoitype%5D=120201&from%5Blnglat%5D=121.47495000000004%2C31.219921&from%5Bmodxy%5D=121.475037%2C31.218473&to%5Badcode%5D=310115&to%5Bname%5D=%E6%B1%89%E5%BA%AD%E9%85%92%E5%BA%97%E4%B8%8A%E6%B5%B7%E4%B8%AD%E7%8E%AF%E6%B2%AA%E5%8D%97%E8%B7%AF%E5%BA%97&to%5Bid%5D=B0FFHGJ1YN&to%5Bpoitype%5D=100105&to%5Blnglat%5D=121.56235100000004%2C31.163604&to%5Bmodxy%5D=121.562517%2C31.16354&type=bus&policy=0&dateTime=now" target="_blank" rel="noopener">上海新天地 - 汉庭上海中环沪南路酒店</a></li>
</ul>
<h3 id="第三天"><a href="#第三天" class="headerlink" title="第三天"></a>第三天</h3><h4 id="住宿-2"><a href="#住宿-2" class="headerlink" title="住宿"></a>住宿</h4><p>2019-02-06 14:00:00 ~ 2019-02-07 12:00:00</p>
<p><a href="http://hotels.huazhu.com/Hotel/Detail?HotelId=2001245" target="_blank" rel="noopener">汉庭上海中环沪南路酒店</a></p>
<p>双床房：吕聪慧，李欣芮，李永斌，李博</p>
<p>双床房：李一萍，李欣芮，李艳红，王钰溪</p>
<h4 id="景点-1"><a href="#景点-1" class="headerlink" title="景点"></a>景点</h4><p><a href="http://www.mafengwo.cn/poi/3782250.html?sfrom=ginfo_img_poi" target="_blank" rel="noopener">崇明岛</a>(4小时) → 陆家嘴(2小时) → 东方明珠(2小时) → 上海环球金融中心(1小时)</p>
<h4 id="路线-2"><a href="#路线-2" class="headerlink" title="路线"></a>路线</h4><ul>
<li><a href="https://www.amap.com/dir?from%5Badcode%5D=310115&from%5Bname%5D=%E6%B1%89%E5%BA%AD%E9%85%92%E5%BA%97%E4%B8%8A%E6%B5%B7%E4%B8%AD%E7%8E%AF%E6%B2%AA%E5%8D%97%E8%B7%AF%E5%BA%97&from%5Bid%5D=B0FFHGJ1YN-from&from%5Bpoitype%5D=100105&from%5Blnglat%5D=121.56235100000004%2C31.163604&from%5Bmodxy%5D=121.562517%2C31.16354&to%5Badcode%5D=310106&to%5Bname%5D=%E4%B8%8A%E6%B5%B7%E7%AB%99&to%5Bid%5D=B00155KSDE&to%5Bpoitype%5D=150200&to%5Blnglat%5D=121.455739%2C31.249563&to%5Bmodxy%5D=121.45452%2C31.247485&type=bus&policy=0&dateTime=now" target="_blank" rel="noopener">汉庭上海中环沪南路酒店 - 上海站</a>（行李寄存）</li>
<li><a href="https://www.amap.com/dir?from%5Badcode%5D=310106&from%5Bname%5D=%E4%B8%8A%E6%B5%B7%E7%AB%99&from%5Bid%5D=B00155KSDE-from&from%5Bpoitype%5D=150200&from%5Blnglat%5D=121.455739%2C31.249563&from%5Bmodxy%5D=121.45452%2C31.247485&to%5Badcode%5D=310151&to%5Bname%5D=%E5%B4%87%E6%98%8E%E5%B2%9B&to%5Bid%5D=B00155PJEA&to%5Bpoitype%5D=190202&to%5Blnglat%5D=121.63505800000001%2C31.576855&to%5Bmodxy%5D=&type=bus&policy=0&dateTime=now" target="_blank" rel="noopener">上海站 - 崇明岛</a></li>
<li><a href="https://www.amap.com/dir?from%5Badcode%5D=310151&from%5Bname%5D=%E5%B4%87%E6%98%8E%E5%B2%9B&from%5Bid%5D=B00155PJEA-from&from%5Bpoitype%5D=190202&from%5Blnglat%5D=121.63505800000001%2C31.576855&from%5Bmodxy%5D=&to%5Badcode%5D=310115&to%5Bname%5D=%E9%99%86%E5%AE%B6%E5%98%B4&to%5Bid%5D=B00156EVQO-to&to%5Bpoitype%5D=190700&to%5Blnglat%5D=121.5025%2C31.237015&to%5Bmodxy%5D=121.50288%2C31.237136&type=bus&policy=0&dateTime=now" target="_blank" rel="noopener">崇明岛 - 陆家嘴</a></li>
<li><a href="https://www.amap.com/dir?from%5Badcode%5D=310115&from%5Bname%5D=%E9%99%86%E5%AE%B6%E5%98%B4&from%5Bid%5D=B00156EVQO-from&from%5Bpoitype%5D=190700&from%5Blnglat%5D=121.5025%2C31.237015&from%5Bmodxy%5D=121.50288%2C31.237136&to%5Badcode%5D=310115&to%5Bname%5D=%E4%B8%9C%E6%96%B9%E6%98%8E%E7%8F%A0%E5%B9%BF%E6%92%AD%E7%94%B5%E8%A7%86%E5%A1%94&to%5Bid%5D=B00150F6D6-to&to%5Bpoitype%5D=110202&to%5Blnglat%5D=121.49980900000003%2C31.239666&to%5Bmodxy%5D=121.501072%2C31.23935&type=walk&policy=0&dateTime=now" target="_blank" rel="noopener">陆家嘴 - 东方明珠</a></li>
<li><a href="https://www.amap.com/dir?from%5Badcode%5D=310115&from%5Bname%5D=%E4%B8%9C%E6%96%B9%E6%98%8E%E7%8F%A0%E5%B9%BF%E6%92%AD%E7%94%B5%E8%A7%86%E5%A1%94&from%5Bid%5D=B00150F6D6-from&from%5Bpoitype%5D=110202&from%5Blnglat%5D=121.49980900000003%2C31.239666&from%5Bmodxy%5D=121.501072%2C31.23935&to%5Bid%5D=B00155IR0X&to%5Bname%5D=%E4%B8%8A%E6%B5%B7%E7%8E%AF%E7%90%83%E9%87%91%E8%9E%8D%E4%B8%AD%E5%BF%83%E8%A7%82%E5%85%89%E5%8E%85&to%5Blnglat%5D=121.507061%2C31.234424&to%5Bmodxy%5D=121.506703%2C31.234309&to%5Bpoitype%5D=110202&to%5Badcode%5D=310115&type=walk&policy=0&dateTime=now" target="_blank" rel="noopener">东方明珠 - 上海环球金融中心</a></li>
<li><a href="https://www.amap.com/dir?from%5Badcode%5D=310115&from%5Bname%5D=%E4%B8%8A%E6%B5%B7%E7%8E%AF%E7%90%83%E9%87%91%E8%9E%8D%E4%B8%AD%E5%BF%83&from%5Bid%5D=B00155MLEY-from&from%5Bpoitype%5D=120201&from%5Blnglat%5D=121.50776100000002%2C31.234339&from%5Bmodxy%5D=121.50773%2C31.23559&to%5Bid%5D=B00155KSDE-to&to%5Bname%5D=%E4%B8%8A%E6%B5%B7%E7%AB%99&to%5Blnglat%5D=121.455739%2C31.249563&to%5Bmodxy%5D=121.45452%2C31.247485&to%5Bpoitype%5D=150200&to%5Badcode%5D=310106&type=bus&policy=0&dateTime=now" target="_blank" rel="noopener">上海环球金融中心 - 上海站</a></li>
<li><a href="http://trains.ctrip.com/TrainBooking/Search.aspx?from=shanghai&to=suzhou&day=2019-02-07&number=&fromCn=%25E4%25B8%258A%25E6%25B5%25B7&toCn=%25E8%258B%258F%25E5%25B7%259E&mkt_header=bdkx" target="_blank" rel="noopener">上海站 - 苏州站</a></li>
<li><a href="https://www.amap.com/dir?from%5Badcode%5D=320508&from%5Bname%5D=%E8%8B%8F%E5%B7%9E%E7%AB%99&from%5Bid%5D=B0200172JB&from%5Bpoitype%5D=150200&from%5Blnglat%5D=120.61084199999999%2C31.329724&from%5Bmodxy%5D=120.610444%2C31.330798&to%5Bid%5D=B020018ASM&to%5Bname%5D=%E6%B1%89%E5%BA%AD%E9%85%92%E5%BA%97%E8%8B%8F%E5%B7%9E%E8%8B%8F%E8%A0%A1%E8%B7%AF%E5%BA%97&to%5Blnglat%5D=120.615901%2C31.244855&to%5Bmodxy%5D=120.615529%2C31.24485&to%5Bpoitype%5D=100105&to%5Badcode%5D=320506&type=bus&policy=0&dateTime=now" target="_blank" rel="noopener">苏州站 - 汉庭苏州苏蠡路酒店</a></li>
</ul>
<h2 id="苏州"><a href="#苏州" class="headerlink" title="苏州"></a>苏州</h2><p><a href="http://map.baidu.com/?subwayShareId=suzhou,224" target="_blank" rel="noopener">苏州地铁线路图-百度地图</a></p>
<h3 id="天气-1"><a href="#天气-1" class="headerlink" title="天气"></a>天气</h3><iframe width="100%" scrolling="no" height="60" frameborder="0" allowtransparency="true" src="//i.tianqi.com/index.php?c=code&id=12&icon=1&py=suzhou&num=5&site=12"></iframe>
### 住宿

<p>2019-02-07 14:00:00 ~ 2019-02-09 12:00:00</p>
<p><a href="http://hotels.huazhu.com/hotel/detail?HotelId=2150214&CheckInDate=2019-02-07&CheckOutDate=2019-02-09" target="_blank" rel="noopener">汉庭苏州苏蠡路酒店</a></p>
<p>双床房：吕聪慧，李欣芮，李永斌，李博</p>
<p>双床房：李一萍，李欣芮，李艳红，王钰溪</p>
<h3 id="路线-3"><a href="#路线-3" class="headerlink" title="路线"></a>路线</h3><p>金鸡湖景区(2小时) → 拙政园(2小时) → 苏州博物馆(2小时) → 平江路(1小时)</p>
<ul>
<li><a href="https://www.amap.com/dir?from%5Badcode%5D=320506&from%5Bname%5D=%E6%B1%89%E5%BA%AD%E9%85%92%E5%BA%97%E8%8B%8F%E5%B7%9E%E8%8B%8F%E8%A0%A1%E8%B7%AF%E5%BA%97&from%5Bid%5D=B020018ASM&from%5Bpoitype%5D=100105&from%5Blnglat%5D=120.61590100000001%2C31.244855&from%5Bmodxy%5D=120.615529%2C31.24485&to%5Badcode%5D=320506&to%5Bname%5D=%E9%87%91%E9%B8%A1%E6%B9%96%E6%99%AF%E5%8C%BA&to%5Bid%5D=B020019OXQ&to%5Bpoitype%5D=110202&to%5Blnglat%5D=120.70095300000003%2C31.303466&to%5Bmodxy%5D=120.704358%2C31.323084&type=bus&policy=0&dateTime=now" target="_blank" rel="noopener">汉庭苏州苏蠡路酒店 - 金鸡湖景区</a></li>
<li><a href="https://www.amap.com/dir?from%5Badcode%5D=320506&from%5Bname%5D=%E9%87%91%E9%B8%A1%E6%B9%96%E6%99%AF%E5%8C%BA&from%5Bid%5D=B020019OXQ-from&from%5Bpoitype%5D=110202&from%5Blnglat%5D=120.70095300000003%2C31.303466&from%5Bmodxy%5D=120.704358%2C31.323084&to%5Badcode%5D=320508&to%5Bname%5D=%E6%8B%99%E6%94%BF%E5%9B%AD&to%5Bid%5D=B020001R2Q&to%5Bpoitype%5D=110202&to%5Blnglat%5D=120.629029%2C31.32416&to%5Bmodxy%5D=120.63063%2C31.323278&type=bus&policy=0&dateTime=now" target="_blank" rel="noopener">金鸡湖景区 - 拙政园</a></li>
<li><a href="https://www.amap.com/dir?from%5Badcode%5D=320508&from%5Bname%5D=%E6%8B%99%E6%94%BF%E5%9B%AD&from%5Bid%5D=B020001R2Q-from&from%5Bpoitype%5D=110202&from%5Blnglat%5D=120.629029%2C31.32416&from%5Bmodxy%5D=120.63063%2C31.323278&to%5Badcode%5D=320508&to%5Bname%5D=%E8%8B%8F%E5%B7%9E%E5%8D%9A%E7%89%A9%E9%A6%86&to%5Bid%5D=B020001285-to&to%5Bpoitype%5D=140100&to%5Blnglat%5D=120.627654%2C31.323&to%5Bmodxy%5D=120.627848%2C31.322573&type=walk&policy=0&dateTime=now" target="_blank" rel="noopener">拙政园 - 苏州博物馆</a></li>
<li><a href="https://www.amap.com/dir?from%5Badcode%5D=320508&from%5Bname%5D=%E8%8B%8F%E5%B7%9E%E5%8D%9A%E7%89%A9%E9%A6%86&from%5Bid%5D=B020001285-from&from%5Bpoitype%5D=140100&from%5Blnglat%5D=120.627654%2C31.323&from%5Bmodxy%5D=120.627848%2C31.322573&to%5Badcode%5D=320508&to%5Bname%5D=%E5%B9%B3%E6%B1%9F%E8%B7%AF&to%5Bid%5D=B02000K4XZ&to%5Bpoitype%5D=110202&to%5Blnglat%5D=120.63225999999997%2C31.318832&to%5Bmodxy%5D=120.632246%2C31.318878&type=walk&policy=0&dateTime=now" target="_blank" rel="noopener">苏州博物馆 - 平江路</a></li>
<li><a href="https://www.amap.com/dir?from%5Badcode%5D=320508&from%5Bname%5D=%E5%B9%B3%E6%B1%9F%E8%B7%AF&from%5Bid%5D=B02000K4XZ-from&from%5Bpoitype%5D=110202&from%5Blnglat%5D=120.63225999999997%2C31.318832&from%5Bmodxy%5D=120.632246%2C31.318878&to%5Badcode%5D=320506&to%5Bname%5D=%E6%B1%89%E5%BA%AD%E9%85%92%E5%BA%97%E8%8B%8F%E5%B7%9E%E8%8B%8F%E8%A0%A1%E8%B7%AF%E5%BA%97&to%5Bid%5D=B020018ASM&to%5Bpoitype%5D=100105&to%5Blnglat%5D=120.61590100000001%2C31.244855&to%5Bmodxy%5D=120.615529%2C31.24485&type=bus&policy=0&dateTime=now" target="_blank" rel="noopener">平江路 - 汉庭苏州苏蠡路酒店</a></li>
<li><a href="https://www.amap.com/dir?from%5Badcode%5D=320506&from%5Bname%5D=%E6%B1%89%E5%BA%AD%E9%85%92%E5%BA%97%E8%8B%8F%E5%B7%9E%E8%8B%8F%E8%A0%A1%E8%B7%AF%E5%BA%97&from%5Bid%5D=B020018ASM-from&from%5Bpoitype%5D=100105&from%5Blnglat%5D=120.61590100000001%2C31.244855&from%5Bmodxy%5D=120.615529%2C31.24485&to%5Badcode%5D=320508&to%5Bname%5D=%E8%8B%8F%E5%B7%9E%E5%8D%97%E9%97%A8%E6%B1%BD%E8%BD%A6%E5%AE%A2%E8%BF%90%E7%AB%99&to%5Bid%5D=B0FFFDX8ZR&to%5Bpoitype%5D=150400&to%5Blnglat%5D=120.63746400000002%2C31.278791&to%5Bmodxy%5D=120.637909%2C31.280558&type=bus&policy=0&dateTime=now" target="_blank" rel="noopener">汉庭苏州苏蠡路酒店 - 苏州南门汽车客运站</a></li>
<li><a href="https://bus.ctrip.com/busListn.html?from=%E8%8B%8F%E5%B7%9E&to=%E4%B9%8C%E9%95%87&date=2019-01-31&ctm_ref=baidu_pc&allianceid=1020737&sid=1618449" target="_blank" rel="noopener">苏州南门汽车客运站 - 乌镇客运站</a></li>
</ul>
<h2 id="乌镇"><a href="#乌镇" class="headerlink" title="乌镇"></a>乌镇</h2><h3 id="天气-2"><a href="#天气-2" class="headerlink" title="天气"></a>天气</h3><iframe width="100%" scrolling="no" height="60" frameborder="0" allowtransparency="true" src="//i.tianqi.com/index.php?c=code&id=12&icon=1&py=tongxiang&num=5&site=12"></iframe>
### 路线

<p>西栅景区(2小时) → 东栅景区(2小时)</p>
<ul>
<li><a href="https://www.amap.com/dir?from%5Badcode%5D=330483&from%5Bname%5D=%E4%B9%8C%E9%95%87%E6%B1%BD%E8%BD%A6%E7%AB%99&from%5Bid%5D=B023D045MA&from%5Bpoitype%5D=150400&from%5Blnglat%5D=120.49405300000001%2C30.731302&from%5Bmodxy%5D=120.494128%2C30.731987&to%5Badcode%5D=330483&to%5Bname%5D=%E4%B9%8C%E9%95%87%E8%A5%BF%E6%A0%85%E6%99%AF%E5%8C%BA&to%5Bid%5D=B023D02SCY&to%5Bpoitype%5D=110202&to%5Blnglat%5D=120.48380900000001%2C30.74965&to%5Bmodxy%5D=120.492176%2C30.747969&type=bus&policy=0&dateTime=now" target="_blank" rel="noopener">乌镇客运站（行李寄存） - 西栅景区</a></li>
<li><a href="https://www.amap.com/dir?from%5Badcode%5D=330483&from%5Bname%5D=%E4%B9%8C%E9%95%87%E8%A5%BF%E6%A0%85%E6%99%AF%E5%8C%BA&from%5Bid%5D=B023D02SCY-from&from%5Bpoitype%5D=110202&from%5Blnglat%5D=120.48380900000001%2C30.74965&from%5Bmodxy%5D=120.492176%2C30.747969&to%5Bid%5D=B023D03VEN&to%5Bname%5D=%E4%B9%8C%E9%95%87%E4%B8%9C%E6%A0%85%E6%99%AF%E5%8C%BA&to%5Blnglat%5D=120.496901%2C30.739693&to%5Bmodxy%5D=120.497805%2C30.736884&to%5Bpoitype%5D=110202&to%5Badcode%5D=330483&type=bus&policy=0&dateTime=now" target="_blank" rel="noopener">西栅景区 - 东栅景区</a></li>
<li><a href="https://www.amap.com/dir?from%5Bid%5D=B023D03VEN-from&from%5Bname%5D=%E4%B9%8C%E9%95%87%E4%B8%9C%E6%A0%85%E6%99%AF%E5%8C%BA&from%5Blnglat%5D=120.496901%2C30.739693&from%5Bmodxy%5D=120.497805%2C30.736884&from%5Bpoitype%5D=110202&from%5Badcode%5D=330483&to%5Badcode%5D=330483&to%5Bname%5D=%E4%B9%8C%E9%95%87%E6%B1%BD%E8%BD%A6%E7%AB%99&to%5Bid%5D=B023D045MA-to&to%5Bpoitype%5D=150400&to%5Blnglat%5D=120.49405300000001%2C30.731302&to%5Bmodxy%5D=120.494128%2C30.731987&type=bus&policy=0&dateTime=now" target="_blank" rel="noopener">东栅景区 - 乌镇客运站</a></li>
<li><a href="https://bus.ctrip.com/busListn.html?from=%E4%B9%8C%E9%95%87&to=%E6%9D%AD%E5%B7%9E&date=2019-02-08" target="_blank" rel="noopener">乌镇客运站 - 杭州客运中心站</a></li>
<li><a href="https://www.amap.com/dir?from%5Bid%5D=B023B0AAW3-from&from%5Bname%5D=%E6%9D%AD%E5%B7%9E%E6%B1%BD%E8%BD%A6%E5%AE%A2%E8%BF%90%E4%B8%AD%E5%BF%83%E7%AB%99&from%5Blnglat%5D=120.279002%2C30.31307&from%5Bmodxy%5D=120.276727%2C30.311674&from%5Bpoitype%5D=150400&from%5Badcode%5D=330104&to%5Bid%5D=B023B1D1X1&to%5Bname%5D=%E6%B5%B7%E5%8F%8B%E9%85%92%E5%BA%97%E6%9D%AD%E5%B7%9E%E8%A5%BF%E6%B9%96%E5%A4%A7%E9%81%93%E5%BA%97&to%5Blnglat%5D=120.173872%2C30.247483&to%5Bmodxy%5D=120.173872%2C30.247682&to%5Bpoitype%5D=100105&to%5Badcode%5D=330102&type=bus&policy=0&dateTime=now" target="_blank" rel="noopener">杭州客运中心站 - 海友杭州西湖大道酒店</a></li>
</ul>
<h2 id="杭州"><a href="#杭州" class="headerlink" title="杭州"></a>杭州</h2><h3 id="总述"><a href="#总述" class="headerlink" title="总述"></a>总述</h3><iframe width="100%" scrolling="no" height="60" frameborder="0" allowtransparency="true" src="//i.tianqi.com/index.php?c=code&id=12&icon=1&py=hangzhou&num=5&site=12"></iframe>
### 住宿

<p>2019-02-09 14:00:00 ~ 2019-02-11 12:00:00</p>
<p><a href="http://hotels.huazhu.com/hotel/detail/3100092?CheckInDate=2019-02-09&CheckOutDate=2019-02-11" target="_blank" rel="noopener">海友杭州西湖大道酒店</a></p>
<p>双床房：吕聪慧，李欣芮，李永斌，李博</p>
<p>双床房：李一萍，李欣芮，李艳红，王钰溪</p>
<h3 id="第一天-1"><a href="#第一天-1" class="headerlink" title="第一天"></a>第一天</h3><h4 id="路线-4"><a href="#路线-4" class="headerlink" title="路线"></a>路线</h4><p>断桥残雪(10分钟) → 白堤(20分钟) → 孤山(1-2小时) → 楼外楼(孤山路店)(1小时) → 曲院风荷(1小时) → 苏堤春晓(30分钟) → 花港观鱼(1小时) → 吴山广场(1小时) → 西湖音乐喷泉(10分钟)</p>
<ul>
<li><a href="https://www.amap.com/dir?from%5Bname%5D=%E6%B5%B7%E5%8F%8B%E9%85%92%E5%BA%97%E6%9D%AD%E5%B7%9E%E8%A5%BF%E6%B9%96%E5%A4%A7%E9%81%93%E5%BA%97&from%5Blnglat%5D=120.173872%2C30.247483&from%5Bid%5D=B023B1D1X1&from%5Bpoitype%5D=100105&from%5Badcode%5D=330100&from%5Bmodxy%5D=120.173872%2C30.247682&to%5Badcode%5D=330106&to%5Bname%5D=%E6%9D%AD%E5%B7%9E%E8%A5%BF%E6%B9%96%E9%A3%8E%E6%99%AF%E5%90%8D%E8%83%9C%E5%8C%BA-%E6%96%AD%E6%A1%A5%E6%AE%8B%E9%9B%AA&to%5Bid%5D=B023B01EE6&to%5Bpoitype%5D=110202&to%5Blnglat%5D=120.15119500000003%2C30.258105&to%5Bmodxy%5D=120.1523%2C30.259286&type=bus&policy=0&dateTime=now" target="_blank" rel="noopener">海友杭州西湖大道酒店 - 断桥残雪</a></li>
<li><a href="https://www.amap.com/dir?from%5Badcode%5D=330106&from%5Bname%5D=%E6%9D%AD%E5%B7%9E%E8%A5%BF%E6%B9%96%E9%A3%8E%E6%99%AF%E5%90%8D%E8%83%9C%E5%8C%BA-%E6%96%AD%E6%A1%A5%E6%AE%8B%E9%9B%AA&from%5Bid%5D=B023B01EE6-from&from%5Bpoitype%5D=110202&from%5Blnglat%5D=120.15119500000003%2C30.258105&from%5Bmodxy%5D=120.1523%2C30.259286&to%5Bid%5D=B0FFFTYEG4-to&to%5Bname%5D=%E6%9D%AD%E5%B7%9E%E8%A5%BF%E6%B9%96%E9%A3%8E%E6%99%AF%E5%90%8D%E8%83%9C%E5%8C%BA-%E7%99%BD%E5%A0%A4&to%5Blnglat%5D=120.149202%2C30.255651&to%5Bmodxy%5D=120.151323%2C30.258179&to%5Bpoitype%5D=110200&to%5Badcode%5D=330106&type=walk&policy=0&dateTime=now" target="_blank" rel="noopener">断桥残雪 - 白堤</a></li>
<li><a href="https://www.amap.com/dir?from%5Bid%5D=B0FFFTYEG4-from&from%5Bname%5D=%E6%9D%AD%E5%B7%9E%E8%A5%BF%E6%B9%96%E9%A3%8E%E6%99%AF%E5%90%8D%E8%83%9C%E5%8C%BA-%E7%99%BD%E5%A0%A4&from%5Blnglat%5D=120.149202%2C30.255651&from%5Bmodxy%5D=120.151323%2C30.258179&from%5Bpoitype%5D=110200&from%5Badcode%5D=330106&to%5Badcode%5D=330106&to%5Bname%5D=%E5%AD%A4%E5%B1%B1&to%5Bid%5D=B023B197QF&to%5Bpoitype%5D=190203&to%5Blnglat%5D=120.14275199999997%2C30.251897&to%5Bmodxy%5D=&type=walk&policy=0&dateTime=now" target="_blank" rel="noopener">白堤 - 孤山</a></li>
<li><a href="https://www.amap.com/dir?from%5Badcode%5D=330106&from%5Bname%5D=%E5%AD%A4%E5%B1%B1&from%5Bid%5D=B023B197QF-from&from%5Bpoitype%5D=190203&from%5Blnglat%5D=120.14275199999997%2C30.251897&from%5Bmodxy%5D=&to%5Bid%5D=B023B09325&to%5Bname%5D=%E6%A5%BC%E5%A4%96%E6%A5%BC%E5%AD%A4%E5%B1%B1%E8%B7%AF%E5%BA%97&to%5Blnglat%5D=120.140682%2C30.250322&to%5Bmodxy%5D=120.140682%2C30.250322&to%5Bpoitype%5D=050101&to%5Badcode%5D=330106&type=walk&policy=0&dateTime=now" target="_blank" rel="noopener">孤山 - 楼外楼(孤山路店)</a></li>
<li><a href="https://www.amap.com/dir?from%5Bid%5D=B023B09325-from&from%5Bname%5D=%E6%A5%BC%E5%A4%96%E6%A5%BC%E5%AD%A4%E5%B1%B1%E8%B7%AF%E5%BA%97&from%5Blnglat%5D=120.140682%2C30.250322&from%5Bmodxy%5D=120.140682%2C30.250322&from%5Bpoitype%5D=050101&from%5Badcode%5D=330106&to%5Badcode%5D=330106&to%5Bname%5D=%E6%9D%AD%E5%B7%9E%E8%A5%BF%E6%B9%96%E9%A3%8E%E6%99%AF%E5%90%8D%E8%83%9C%E5%8C%BA-%E6%9B%B2%E9%99%A2%E9%A3%8E%E8%8D%B7&to%5Bid%5D=B023B0253E&to%5Bpoitype%5D=110200&to%5Blnglat%5D=120.13550199999997%2C30.251182&to%5Bmodxy%5D=120.132344%2C30.252057&type=walk&policy=0&dateTime=now" target="_blank" rel="noopener">楼外楼(孤山路店) - 曲院风荷</a></li>
<li><a href="https://www.amap.com/dir?from%5Badcode%5D=330106&from%5Bname%5D=%E6%9D%AD%E5%B7%9E%E8%A5%BF%E6%B9%96%E9%A3%8E%E6%99%AF%E5%90%8D%E8%83%9C%E5%8C%BA-%E6%9B%B2%E9%99%A2%E9%A3%8E%E8%8D%B7&from%5Bid%5D=B023B0253E-from&from%5Bpoitype%5D=110200&from%5Blnglat%5D=120.13550199999997%2C30.251182&from%5Bmodxy%5D=120.132344%2C30.252057&to%5Badcode%5D=330106&to%5Bname%5D=%E6%9D%AD%E5%B7%9E%E8%A5%BF%E6%B9%96%E9%A3%8E%E6%99%AF%E5%90%8D%E8%83%9C%E5%8C%BA-%E8%8B%8F%E5%A0%A4%E6%98%A5%E6%99%93&to%5Bid%5D=B023B02070&to%5Bpoitype%5D=110200&to%5Blnglat%5D=120.13796000000002%2C30.24388&to%5Bmodxy%5D=120.138022%2C30.243896&type=walk&policy=0&dateTime=now" target="_blank" rel="noopener">曲院风荷 - 苏堤春晓</a></li>
<li><a href="https://www.amap.com/dir?from%5Badcode%5D=330106&from%5Bname%5D=%E6%9D%AD%E5%B7%9E%E8%A5%BF%E6%B9%96%E9%A3%8E%E6%99%AF%E5%90%8D%E8%83%9C%E5%8C%BA-%E8%8B%8F%E5%A0%A4%E6%98%A5%E6%99%93&from%5Bid%5D=B023B02070-from&from%5Bpoitype%5D=110200&from%5Blnglat%5D=120.13796000000002%2C30.24388&from%5Bmodxy%5D=120.138022%2C30.243896&to%5Bid%5D=B023B023B2&to%5Bname%5D=%E6%9D%AD%E5%B7%9E%E8%A5%BF%E6%B9%96%E9%A3%8E%E6%99%AF%E5%90%8D%E8%83%9C%E5%8C%BA-%E8%8A%B1%E6%B8%AF%E8%A7%82%E9%B1%BC&to%5Blnglat%5D=120.142121%2C30.232194&to%5Bmodxy%5D=120.14246%2C30.232125&to%5Bpoitype%5D=110200&to%5Badcode%5D=330106&type=walk&policy=0&dateTime=now" target="_blank" rel="noopener">苏堤春晓 - 花港观鱼</a></li>
<li><a href="https://www.amap.com/dir?from%5Bid%5D=B023B023B2-from&from%5Bname%5D=%E6%9D%AD%E5%B7%9E%E8%A5%BF%E6%B9%96%E9%A3%8E%E6%99%AF%E5%90%8D%E8%83%9C%E5%8C%BA-%E8%8A%B1%E6%B8%AF%E8%A7%82%E9%B1%BC&from%5Blnglat%5D=120.142121%2C30.232194&from%5Bmodxy%5D=120.14246%2C30.232125&from%5Bpoitype%5D=110200&from%5Badcode%5D=330106&to%5Badcode%5D=330102&to%5Bname%5D=%E5%90%B4%E5%B1%B1%E6%99%AF%E5%8C%BA%E5%90%B4%E5%B1%B1%E5%B9%BF%E5%9C%BA%E8%A3%85%E4%BF%AE%E4%B8%AD&to%5Bid%5D=B023B0A5KT&to%5Bpoitype%5D=110105&to%5Blnglat%5D=120.16377999999997%2C30.239222&to%5Bmodxy%5D=120.162583%2C30.2398&type=bus&policy=0&dateTime=now" target="_blank" rel="noopener">花港观鱼 - 吴山广场</a></li>
<li><a href="https://www.amap.com/dir?from%5Badcode%5D=330102&from%5Bname%5D=%E5%90%B4%E5%B1%B1%E6%99%AF%E5%8C%BA%E5%90%B4%E5%B1%B1%E5%B9%BF%E5%9C%BA%E8%A3%85%E4%BF%AE%E4%B8%AD&from%5Bid%5D=B023B0A5KT-from&from%5Bpoitype%5D=110105&from%5Blnglat%5D=120.16377999999997%2C30.239222&from%5Bmodxy%5D=120.162583%2C30.2398&to%5Bid%5D=B023B08WZ7-to&to%5Bname%5D=%E8%A5%BF%E6%B9%96%E9%9F%B3%E4%B9%90%E5%96%B7%E6%B3%89%E8%A1%A8%E6%BC%94&to%5Blnglat%5D=120.160970%2C30.253778&to%5Bmodxy%5D=120.161481%2C30.253925&to%5Bpoitype%5D=220106&to%5Badcode%5D=330102&type=bus&policy=0&dateTime=now" target="_blank" rel="noopener">吴山广场 - 西湖音乐喷泉</a></li>
<li><a href="https://www.amap.com/dir?from%5Bid%5D=B023B08WZ7-from&from%5Bname%5D=%E8%A5%BF%E6%B9%96%E9%9F%B3%E4%B9%90%E5%96%B7%E6%B3%89%E8%A1%A8%E6%BC%94&from%5Blnglat%5D=120.160970%2C30.253778&from%5Bmodxy%5D=120.161481%2C30.253925&from%5Bpoitype%5D=220106&from%5Badcode%5D=330102&to%5Bid%5D=B023B1D1X1&to%5Bname%5D=%E6%B5%B7%E5%8F%8B%E9%85%92%E5%BA%97%E6%9D%AD%E5%B7%9E%E8%A5%BF%E6%B9%96%E5%A4%A7%E9%81%93%E5%BA%97&to%5Blnglat%5D=120.173872%2C30.247483&to%5Bmodxy%5D=120.173872%2C30.247682&to%5Bpoitype%5D=100105&to%5Badcode%5D=330102&type=bus&policy=0&dateTime=now" target="_blank" rel="noopener">西湖音乐喷泉 - 海友杭州西湖大道酒店</a></li>
</ul>
<h3 id="第二天-1"><a href="#第二天-1" class="headerlink" title="第二天"></a>第二天</h3><h4 id="路线-5"><a href="#路线-5" class="headerlink" title="路线"></a>路线</h4><p>灵隐飞来峰(1小时) → 灵隐寺(1-2小时) → 雷峰塔(2小时) → 柳浪闻莺(1小时) → 河坊街(1-2小时)</p>
<ul>
<li><a href="https://www.amap.com/dir?from%5Bid%5D=B023B1D1X1&from%5Bname%5D=%E6%B5%B7%E5%8F%8B%E9%85%92%E5%BA%97%E6%9D%AD%E5%B7%9E%E8%A5%BF%E6%B9%96%E5%A4%A7%E9%81%93%E5%BA%97&from%5Blnglat%5D=120.173872%2C30.247483&from%5Bmodxy%5D=120.173872%2C30.247682&from%5Bpoitype%5D=100105&from%5Badcode%5D=330102&to%5Bid%5D=B023B05MJE&to%5Bname%5D=%E6%9D%AD%E5%B7%9E%E8%A5%BF%E6%B9%96%E9%A3%8E%E6%99%AF%E5%90%8D%E8%83%9C%E5%8C%BA-%E7%81%B5%E9%9A%90%E9%A3%9E%E6%9D%A5%E5%B3%B0&to%5Blnglat%5D=120.102244%2C30.239433&to%5Bmodxy%5D=120.105344%2C30.240648&to%5Bpoitype%5D=110200&to%5Badcode%5D=330106&type=bus&policy=0&dateTime=now" target="_blank" rel="noopener">海友杭州西湖大道酒店 - 灵隐飞来峰</a></li>
<li><a href="https://www.amap.com/dir?from%5Bid%5D=B023B05MJE-from&from%5Bname%5D=%E6%9D%AD%E5%B7%9E%E8%A5%BF%E6%B9%96%E9%A3%8E%E6%99%AF%E5%90%8D%E8%83%9C%E5%8C%BA-%E7%81%B5%E9%9A%90%E9%A3%9E%E6%9D%A5%E5%B3%B0&from%5Blnglat%5D=120.102244%2C30.239433&from%5Bmodxy%5D=120.105344%2C30.240648&from%5Bpoitype%5D=110200&from%5Badcode%5D=330106&to%5Badcode%5D=330106&to%5Bname%5D=%E7%81%B5%E9%9A%90%E5%AF%BA&to%5Bid%5D=B023B02842&to%5Bpoitype%5D=110202&to%5Blnglat%5D=120.10119299999997%2C30.238169&to%5Bmodxy%5D=120.105346%2C30.240649&type=walk&policy=0&dateTime=now" target="_blank" rel="noopener">灵隐飞来峰 - 灵隐寺</a></li>
<li><a href="https://www.amap.com/dir?from%5Badcode%5D=330106&from%5Bname%5D=%E7%81%B5%E9%9A%90%E5%AF%BA&from%5Bid%5D=B023B02842-from&from%5Bpoitype%5D=110202&from%5Blnglat%5D=120.10119299999997%2C30.238169&from%5Bmodxy%5D=120.105346%2C30.240649&to%5Badcode%5D=330106&to%5Bname%5D=%E9%9B%B7%E5%B3%B0%E5%A1%94%E6%99%AF%E5%8C%BA&to%5Bid%5D=B023B09LKR-to&to%5Bpoitype%5D=110202&to%5Blnglat%5D=120.14887199999998%2C30.230895&to%5Bmodxy%5D=120.149266%2C30.230364&type=bus&policy=0&dateTime=now" target="_blank" rel="noopener">灵隐寺 - 雷峰塔</a></li>
<li><a href="https://www.amap.com/dir?from%5Badcode%5D=330106&from%5Bname%5D=%E9%9B%B7%E5%B3%B0%E5%A1%94%E6%99%AF%E5%8C%BA&from%5Bid%5D=B023B09LKR-from&from%5Bpoitype%5D=110202&from%5Blnglat%5D=120.14887199999998%2C30.230895&from%5Bmodxy%5D=120.149266%2C30.230364&to%5Bid%5D=B023B0247C&to%5Bname%5D=%E6%9D%AD%E5%B7%9E%E8%A5%BF%E6%B9%96%E9%A3%8E%E6%99%AF%E5%90%8D%E8%83%9C%E5%8C%BA-%E6%9F%B3%E6%B5%AA%E9%97%BB%E8%8E%BA&to%5Blnglat%5D=120.158000%2C30.239366&to%5Bmodxy%5D=120.158221%2C30.239325&to%5Bpoitype%5D=110200&to%5Badcode%5D=330102&type=bus&policy=0&dateTime=now" target="_blank" rel="noopener">雷峰塔 - 柳浪闻莺</a></li>
<li><a href="https://www.amap.com/dir?from%5Bid%5D=B023B0247C-from&from%5Bname%5D=%E6%9D%AD%E5%B7%9E%E8%A5%BF%E6%B9%96%E9%A3%8E%E6%99%AF%E5%90%8D%E8%83%9C%E5%8C%BA-%E6%9F%B3%E6%B5%AA%E9%97%BB%E8%8E%BA&from%5Blnglat%5D=120.158000%2C30.239366&from%5Bmodxy%5D=120.158221%2C30.239325&from%5Bpoitype%5D=110200&from%5Badcode%5D=330102&to%5Badcode%5D=330102&to%5Bname%5D=%E6%B2%B3%E5%9D%8A%E8%A1%97&to%5Bid%5D=B0FFGQ772L-to&to%5Bpoitype%5D=190301&to%5Blnglat%5D=120.16863000000001%2C30.240099&to%5Bmodxy%5D=&type=walk&policy=0&dateTime=now" target="_blank" rel="noopener">柳浪闻莺 - 河坊街</a></li>
<li><a href="https://www.amap.com/dir?from%5Badcode%5D=330102&from%5Bname%5D=%E6%B2%B3%E5%9D%8A%E8%A1%97&from%5Bid%5D=B0FFGQ772L-from&from%5Bpoitype%5D=190301&from%5Blnglat%5D=120.16863000000001%2C30.240099&from%5Bmodxy%5D=&to%5Bid%5D=B023B1D1X1-to&to%5Bname%5D=%E6%B5%B7%E5%8F%8B%E9%85%92%E5%BA%97%E6%9D%AD%E5%B7%9E%E8%A5%BF%E6%B9%96%E5%A4%A7%E9%81%93%E5%BA%97&to%5Blnglat%5D=120.173872%2C30.247483&to%5Bmodxy%5D=120.173872%2C30.247682&to%5Bpoitype%5D=100105&to%5Badcode%5D=330102&type=walk&policy=0&dateTime=now" target="_blank" rel="noopener">河坊街- 海友杭州西湖大道酒店</a></li>
<li><a href="https://www.amap.com/dir?from%5Bid%5D=B023B1D1X1-from&from%5Bname%5D=%E6%B5%B7%E5%8F%8B%E9%85%92%E5%BA%97%E6%9D%AD%E5%B7%9E%E8%A5%BF%E6%B9%96%E5%A4%A7%E9%81%93%E5%BA%97&from%5Blnglat%5D=120.173872%2C30.247483&from%5Bmodxy%5D=120.173872%2C30.247682&from%5Bpoitype%5D=100105&from%5Badcode%5D=330102&to%5Bid%5D=B023B07ERI-to&to%5Bname%5D=%E6%9D%AD%E5%B7%9E%E7%AB%99&to%5Blnglat%5D=120.182839%2C30.243403&to%5Bmodxy%5D=120.181827%2C30.244185&to%5Bpoitype%5D=150200&to%5Badcode%5D=330102&type=walk&policy=0&dateTime=now" target="_blank" rel="noopener">海友杭州西湖大道酒店 - 杭州站</a></li>
</ul>
]]></content>
      <categories>
        <category>Strategy</category>
      </categories>
      <tags>
        <tag>Tour</tag>
      </tags>
  </entry>
  <entry>
    <title>Use Redis in Spring Boot</title>
    <url>/2019/01/18/Use-Redis-in-Spring-Boot/</url>
    <content><![CDATA[<img src="https://grokonez.com/wp-content/uploads/2017/12/spring-data-springjpa-crud-operation-redis-example-spring-boot-redis-example-feature-image.png" width="100%"/>

<a id="more"></a>

<h2 id="RedisTemplate"><a href="#RedisTemplate" class="headerlink" title="RedisTemplate"></a>RedisTemplate</h2><p>80% 都用的是 <code>opsForValue()</code></p>
]]></content>
      <categories>
        <category>Java</category>
        <category>Spring Data</category>
        <category>Redis</category>
      </categories>
      <tags>
        <tag>Spring Data Redis</tag>
      </tags>
  </entry>
  <entry>
    <title>Prepare for PAT</title>
    <url>/2019/01/11/Prepare-for-PAT/</url>
    <content><![CDATA[<img src="https://i.loli.net/2019/01/11/5c3813443dce6.jpg" width="100%"/>

<a id="more"></a>

<blockquote>
<p><a href="https://www.patest.cn/" target="_blank" rel="noopener">PAT官网</a></p>
</blockquote>
<h2 id="计划"><a href="#计划" class="headerlink" title="计划"></a>计划</h2><h3 id="1-11-2-20"><a href="#1-11-2-20" class="headerlink" title="1/11-2/20"></a>1/11-2/20</h3><p>一共 50h</p>
<p><a href="https://doc.weiyun.com/bec9710ef6076b30f1154413324b9ef1" target="_blank" rel="noopener">PAT-timeaxis.xlsx</a></p>
<p><img src="https://i.loli.net/2019/01/11/5c38115365f11.jpg" alt=""></p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><blockquote>
<p><a href="https://github.com/libo9527/PAT" target="_blank" rel="noopener">PAT</a></p>
</blockquote>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><blockquote>
<p><a href="https://libo9527.github.io/2019/02/15/Summary-of-PAT/" target="_blank" rel="noopener">Summary of PAT</a></p>
</blockquote>
<p>条件判断中如果有对称性的逻辑，尽量适用下面这种方式，即变量不动，逻辑判断动。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(a1 + b1 == a2 &amp;&amp; a1 + b1 != b2)&#123;</span><br><span class="line">    a++;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(a1 + b1 != a2 &amp;&amp; a1 + b1 == b2)&#123;</span><br><span class="line">    b++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>避免适用下面这种方式（比较混乱）</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(a1 + b1 == a2 &amp;&amp; a1 + b1 != b2)&#123;</span><br><span class="line">    a++;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(a1 + b1 == b2 &amp;&amp; a1 + b1 != a2)&#123;</span><br><span class="line">    b++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><a href="http://www.morecoder.com/article/1115597.html" target="_blank" rel="noopener">PAT——甲级1042：Shuffling Mashine</a></p>
<p>long long 类型在 C++(g++) 下错误 C++(clang++) 下正确。</p>
<figure class="highlight c++"><figcaption><span>PAT-1065.cpp</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> t;</span><br><span class="line">  <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;t);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; t; i++)&#123;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> a, b, c;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%lld%lld%lld"</span>, &amp;a, &amp;b, &amp;c);</span><br><span class="line">    <span class="keyword">if</span>(a &gt; <span class="number">0</span> &amp;&amp; b &gt; <span class="number">0</span> &amp;&amp; a + b &lt; <span class="number">0</span>)&#123;</span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">"Case #%d: true\n"</span>, i+<span class="number">1</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(a &lt; <span class="number">0</span> &amp;&amp; b &lt; <span class="number">0</span> &amp;&amp; a + b &gt;= <span class="number">0</span>)&#123;</span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">"Case #%d: false\n"</span>, i+<span class="number">1</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(a + b &gt; c)&#123;</span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">"Case #%d: true\n"</span>, i+<span class="number">1</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">"Case #%d: false\n"</span>, i+<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>注意计数器自增自减和条件判断的前后顺序。</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">count--;</span><br><span class="line"><span class="keyword">if</span>(count &gt; <span class="number">0</span>)&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">////</span></span><br><span class="line"><span class="keyword">if</span>(count &gt; <span class="number">0</span>)&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line">count--;</span><br></pre></td></tr></table></figure>



<p>sort() 函数的使用</p>
<h3 id="C-error-2872-不明确的符号-code-nie的博客-CSDN博客"><a href="#C-error-2872-不明确的符号-code-nie的博客-CSDN博客" class="headerlink" title="C++ error 2872:不明确的符号 - code_nie的博客 - CSDN博客"></a><a href="https://www.baidu.com/link?url=HvAoxxP6Vh5jlJN6_5JVIgqn4V5H04hTcU8KEF6ctZDJEEgE7k-y7GsouW6h_IlqUgHTgYR1YWeomMvxU3_yM0_i8Lmz4EJGseKSohh6zR_&wd=&eqid=eec0d1d100080620000000065c6bbaed" target="_blank" rel="noopener"><em>C++</em> error 2872:<em>不明确的符号</em> - code_nie的博客 - CSDN博客</a></h3><p>简单地说，出现这种情况是因为程序使用的命名空间里已经有这个变量名了</p>
<p>namespace std,  “rank”</p>
<p>vs2010 报错：</p>
<p>1&gt;MSVCRTD.lib(crtexe.obj) : error LNK2019: 无法解析的外部符号 _main，该符号在函数 ___tmainCRTStartup 中被引用<br>1&gt;f:\visual studio 2010\Projects\pat\Debug\pat.exe : fatal error LNK1120: 1 个无法解析的外部命令</p>
<p>原因：main 拼错了，拼成了 mian</p>
<p>strcpy() 函数</p>
<h2 id="考点"><a href="#考点" class="headerlink" title="考点"></a>考点</h2><p>深圳大学： 白鉴聪, <a href="mailto:szubjc@szu.edu.cn">szubjc@szu.edu.cn</a><br>Dev C++ 5.10; Code::Blocks16.01; Java SE Development Kit9.0.1; Eclipse Oxygen.2 版本 4.7.2; Python解释器（3.6.5）; PyCharm Community Edition</p>
<p>求余（%）和取整（/）优先级相同。</p>
<blockquote>
<p><a href="https://blog.csdn.net/qq_38658814/article/details/82534765?utm_source=blogxgwz2" target="_blank" rel="noopener">PAT备考经验&amp;相关信息</a></p>
</blockquote>
]]></content>
      <categories>
        <category>Algorithm</category>
        <category>PAT</category>
      </categories>
      <tags>
        <tag>PAT</tag>
      </tags>
  </entry>
  <entry>
    <title>Use of Microsoft Office</title>
    <url>/2019/01/08/Use-of-Microsoft-Office/</url>
    <content><![CDATA[<img src="https://www.salfordcommunityleisure.co.uk/sites/default/files/styles/page_width_standard/public/uploads/events/Microsoft%20Office%20%281%29%20edited%20for%20web.jpg?itok=SpDJ00oc" width="100%"/>

<a id="more"></a>

<h2 id="Online"><a href="#Online" class="headerlink" title="Online"></a>Online</h2><blockquote>
<p><a href="https://onedrive.live.com/" target="_blank" rel="noopener">OneDrive</a></p>
<p><a href="https://doc.weiyun.com/" target="_blank" rel="noopener">腾讯微云|文档</a></p>
</blockquote>
<h2 id="Excel"><a href="#Excel" class="headerlink" title="Excel"></a>Excel</h2><blockquote>
<p><a href="https://templates.office.com/zh-CN/%E6%AC%A2%E8%BF%8E%E4%BD%BF%E7%94%A8-Excel-TM10000137" target="_blank" rel="noopener">欢迎使用 Excel</a></p>
<p><a href="http://www.excelapi.net/" target="_blank" rel="noopener">Excel 网络函数库</a></p>
</blockquote>
<p><strong>换行</strong></p>
<p>ALT + 回车</p>
<p><strong>自动填充的间距</strong></p>
<blockquote>
<p><a href="https://zhidao.baidu.com/question/808141593749676452.html" target="_blank" rel="noopener">如何设置excel自动填充的间距</a></p>
</blockquote>
<p>1、先在前两个单元格中输入50、100；(日期时间等也适用)</p>
<p>2、选中这两个单元格，将鼠标指针放在其右下角的黑色标记处，当鼠标指针变为黑色十字形后，拖动鼠标进入自<br>动填充</p>
<p><strong>冻结窗格</strong></p>
<blockquote>
<p><a href="https://support.office.com/zh-cn/article/%E5%86%BB%E7%BB%93%E7%AA%97%E6%A0%BC%E4%BB%A5%E9%94%81%E5%AE%9A%E8%A1%8C%E5%92%8C%E5%88%97-dab2ffc9-020d-4026-8121-67dd25f2508f" target="_blank" rel="noopener">冻结窗格以锁定行和列</a></p>
</blockquote>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><p><strong>IFERROR</strong></p>
<blockquote>
<p><a href="https://support.office.com/zh-cn/article/iferror-%E5%87%BD%E6%95%B0-c526fd07-caeb-47b8-8bb6-63f3e417f611" target="_blank" rel="noopener">IFERROR 函数</a></p>
</blockquote>
<p><strong>在公式中定义和使用名称</strong></p>
<blockquote>
<p><a href="https://support.office.com/zh-cn/article/%E5%9C%A8%E5%85%AC%E5%BC%8F%E4%B8%AD%E5%AE%9A%E4%B9%89%E5%92%8C%E4%BD%BF%E7%94%A8%E5%90%8D%E7%A7%B0-4d0f13ac-53b7-422e-afd2-abd7ff379c64" target="_blank" rel="noopener">在公式中定义和使用名称</a></p>
</blockquote>
<p><strong>MATCH</strong></p>
<blockquote>
<p><a href="https://support.office.com/zh-cn/article/match-%E5%87%BD%E6%95%B0-e8dffd45-c762-47d6-bf89-533f4a37673a" target="_blank" rel="noopener">MATCH 函数</a></p>
</blockquote>
<p><strong>引用</strong></p>
<blockquote>
<p><a href="https://support.office.com/zh-cn/article/%E5%9C%A8%E7%9B%B8%E5%AF%B9%E5%BC%95%E7%94%A8%E3%80%81%E7%BB%9D%E5%AF%B9%E5%BC%95%E7%94%A8%E5%92%8C%E6%B7%B7%E5%90%88%E5%BC%95%E7%94%A8%E9%97%B4%E5%88%87%E6%8D%A2-dfec08cd-ae65-4f56-839e-5f0d8d0baca9" target="_blank" rel="noopener">在相对引用、绝对引用和混合引用间切换</a></p>
</blockquote>
<p><strong>运算符</strong></p>
<blockquote>
<p><a href="https://support.office.com/zh-cn/article/%E5%9C%A8-excel-%E5%85%AC%E5%BC%8F%E4%B8%AD%E4%BD%BF%E7%94%A8%E8%AE%A1%E7%AE%97%E8%BF%90%E7%AE%97%E7%AC%A6-78be92ad-563c-4d62-b081-ae6da5c2ca69" target="_blank" rel="noopener">在 Excel 公式中使用计算运算符</a></p>
</blockquote>
<p><strong>LEFT、LEFTB</strong></p>
<blockquote>
<p><a href="https://support.office.com/zh-cn/article/left%E3%80%81leftb-%E5%87%BD%E6%95%B0-9203d2d2-7960-479b-84c6-1ea52b99640c" target="_blank" rel="noopener">LEFT、LEFTB 函数</a></p>
</blockquote>
<h2 id="Office-模板和主题"><a href="#Office-模板和主题" class="headerlink" title="Office 模板和主题"></a><a href="https://templates.office.com/" target="_blank" rel="noopener">Office 模板和主题</a></h2>]]></content>
      <categories>
        <category>Tools</category>
        <category>Office</category>
      </categories>
      <tags>
        <tag>Office</tag>
      </tags>
  </entry>
  <entry>
    <title>Use JPA in Spring Boot</title>
    <url>/2019/01/07/Use-JPA-in-Spring-Boot/</url>
    <content><![CDATA[<img src="https://javadeveloperzone.com/wp-content/uploads/2018/02/Spring-boot-jpa-mysql-example-1024x488.jpg" width="100%"/>

<a id="more"></a>

<h2 id="什么是JPA"><a href="#什么是JPA" class="headerlink" title="什么是JPA"></a>什么是JPA</h2><p>​    JPA 的全称叫做 Java Persistence API，是一个基于 O/R 映射的标准<strong>规范</strong>。目前 JPA 的主要实现有Hibernate、EclipseLink、OpenJPA等，事实上，由于 Hibernate 在数据访问解决技术领域的绝对霸主地位，JPA的标准基本是由 Hibernate 来主导的。Spring 框架为我们提供了 Spring Data JPA，可以减少我们使用 JPA 时的代码量。</p>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><ol>
<li><p><code>spring.jpa.show-sql=true</code>：日志中打印 SQL 语句。</p>
</li>
<li><p><code>spring.jpa.hibernate.ddl-auto=create</code>：配置实体类维护数据库表结构的具体行为。</p>
<ul>
<li>update：当实体类的属性发生变化时，表结构跟着更新。</li>
<li>create：启动的时候删除现有的表，并根据实体类重新生成表。</li>
<li>create-drop：启动时根据实体类生成表，但是当 sessionFactory 关闭的时候表会被删除。</li>
<li>validate：启动时验证实体类和数据表是否一致，不会创建新表，但是会插入新值。</li>
<li>none：什么都不做。</li>
</ul>
</li>
<li><p><code>spring.jpa.database-platform=org.hibernate.dialect.MySQL5InnoDBDialect</code></p>
<p>在 SrpingBoot 2.0 版本中，Hibernate 创建数据表的时候，默认的数据库存储引擎选择的是 MyISAM 。这个参数是在建表的时候，将默认的存储引擎切换为 InnoDB 用的。</p>
</li>
<li><p><code>jpa.generate-ddl=true</code>：开启 DDL 功能。<a href="https://docs.spring.io/spring-boot/docs/current/reference/html/howto-database-initialization.html#howto-initialize-a-database-using-jpa" target="_blank" rel="noopener">Initialize a Database Using JPA</a></p>
</li>
</ol>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><blockquote>
<p><a href="https://docs.spring.io/spring-data/jpa/docs/2.1.0.RELEASE/api/" target="_blank" rel="noopener">Spring Data JPA 2.1.0.RELEASE API</a></p>
</blockquote>
<h3 id="原生SQL语句"><a href="#原生SQL语句" class="headerlink" title="原生SQL语句"></a>原生SQL语句</h3><ol>
<li>使用<code>@Query</code>注解</li>
<li>设置 nativeQuery 属性值为 true</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Query</span>(value=<span class="string">"SELECT count(*) FROM user"</span>, nativeQuery=<span class="keyword">true</span>)</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getTotalRow</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<h3 id="JPQL"><a href="#JPQL" class="headerlink" title="JPQL"></a>JPQL</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Query</span>(<span class="string">"SELECT u FROM User u WHERE u.status = 1"</span>)</span><br><span class="line"><span class="function">Collection&lt;User&gt; <span class="title">findAllActiveUsers</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<p><strong>JPQL 不支持使用 INSERT</strong></p>
<h3 id="多条件查询"><a href="#多条件查询" class="headerlink" title="多条件查询"></a>多条件查询</h3><blockquote>
<p><a href="https://www.jianshu.com/p/659e9715d01d" target="_blank" rel="noopener">【一目了然】Spring Data JPA使用Specification动态构建多表查询、复杂查询及排序示例</a></p>
</blockquote>
<ol>
<li><p>dao 层接口继承 <a href="https://docs.spring.io/spring-data/jpa/docs/2.1.0.RELEASE/api/org/springframework/data/jpa/repository/JpaSpecificationExecutor.html" target="_blank" rel="noopener">JpaSpecificationExecutor</a> 接口。</p>
</li>
<li><p>调用 <a href="https://docs.spring.io/spring-data/jpa/docs/2.1.0.RELEASE/api/org/springframework/data/jpa/repository/JpaSpecificationExecutor.html#findAll-org.springframework.data.jpa.domain.Specification-" target="_blank" rel="noopener">List<T> findAll(Specification<T> spec);</a></p>
</li>
<li><p>实现 <a href="https://docs.spring.io/spring-data/jpa/docs/2.1.0.RELEASE/api/org/springframework/data/jpa/domain/Specification.html" target="_blank" rel="noopener">Specification</a></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> root 根对象，即条件将被封装到该对象中。where 列名 = label.getXXX</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> query 查询关键字的封装。例如group by、order by等。几乎不用！</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> cb 用来封装条件对象。</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@return</span> 返回null代表没有任何条件</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Predicate <span class="title">toPredicate</span><span class="params">(Root&lt;T&gt; root, CriteriaQuery&lt;?&gt; query, CriteriaBuilder cb)</span></span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>eg：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Student&gt; <span class="title">getStudent</span><span class="params">(String studentNumber,String name ,String nickName,</span></span></span><br><span class="line"><span class="function"><span class="params">            Date birthday,String courseName,<span class="keyword">float</span> chineseScore,<span class="keyword">float</span> mathScore,</span></span></span><br><span class="line"><span class="function"><span class="params">            <span class="keyword">float</span> englishScore,<span class="keyword">float</span> performancePoints)</span> </span>&#123;</span><br><span class="line">    Specification&lt;Student&gt; specification = <span class="keyword">new</span> Specification&lt;Student&gt;()&#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Predicate <span class="title">toPredicate</span><span class="params">(Root&lt;Student&gt; root, CriteriaQuery&lt;?&gt; query, CriteriaBuilder cb)</span> </span>&#123;</span><br><span class="line">            <span class="comment">//用于暂时存放查询条件的集合</span></span><br><span class="line">            List&lt;Predicate&gt; predicatesList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">            <span class="comment">//--------------------------------------------</span></span><br><span class="line">            <span class="comment">//查询条件示例</span></span><br><span class="line">            <span class="comment">//equal示例</span></span><br><span class="line">            <span class="keyword">if</span> (!StringUtils.isEmpty(name))&#123;</span><br><span class="line">                Predicate namePredicate = cb.equal(root.get(<span class="string">"name"</span>), name);</span><br><span class="line">                predicatesList.add(namePredicate);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//like示例</span></span><br><span class="line">            <span class="keyword">if</span> (!StringUtils.isEmpty(nickName))&#123;</span><br><span class="line">                Predicate nickNamePredicate = cb.like(root.get(<span class="string">"nickName"</span>), <span class="string">'%'</span>+nickName+<span class="string">'%'</span>);</span><br><span class="line">                predicatesList.add(nickNamePredicate);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//between示例</span></span><br><span class="line">            <span class="keyword">if</span> (birthday != <span class="keyword">null</span>) &#123;</span><br><span class="line">                Predicate birthdayPredicate = cb.between(root.get(<span class="string">"birthday"</span>), birthday, <span class="keyword">new</span> Date());</span><br><span class="line">                predicatesList.add(birthdayPredicate);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//关联表查询示例</span></span><br><span class="line">            <span class="keyword">if</span> (!StringUtils.isEmpty(courseName)) &#123;</span><br><span class="line">                Join&lt;Student,Teacher&gt; joinTeacher = root.join(<span class="string">"teachers"</span>,JoinType.LEFT);</span><br><span class="line">                Predicate coursePredicate = cb.equal(joinTeacher.get(<span class="string">"courseName"</span>), courseName);</span><br><span class="line">                predicatesList.add(coursePredicate);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//复杂条件组合示例</span></span><br><span class="line">            <span class="keyword">if</span> (chineseScore!=<span class="number">0</span> &amp;&amp; mathScore!=<span class="number">0</span> &amp;&amp; englishScore!=<span class="number">0</span> &amp;&amp; performancePoints!=<span class="number">0</span>) &#123;</span><br><span class="line">                Join&lt;Student,Examination&gt; joinExam = root.join(<span class="string">"exams"</span>,JoinType.LEFT);</span><br><span class="line">                Predicate predicateExamChinese = cb.ge(joinExam.get(<span class="string">"chineseScore"</span>),chineseScore);</span><br><span class="line">                Predicate predicateExamMath = cb.ge(joinExam.get(<span class="string">"mathScore"</span>),mathScore);</span><br><span class="line">                Predicate predicateExamEnglish = cb.ge(joinExam.get(<span class="string">"englishScore"</span>),englishScore);</span><br><span class="line">                Predicate predicateExamPerformance = cb.ge(joinExam.get(<span class="string">"performancePoints"</span>),performancePoints);</span><br><span class="line">                <span class="comment">//组合</span></span><br><span class="line">                Predicate predicateExam = cb.or(predicateExamChinese,predicateExamEnglish,predicateExamMath);</span><br><span class="line">                Predicate predicateExamAll = cb.and(predicateExamPerformance,predicateExam);</span><br><span class="line">                predicatesList.add(predicateExamAll);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//--------------------------------------------</span></span><br><span class="line">            <span class="comment">//排序示例(先根据学号排序，后根据姓名排序)</span></span><br><span class="line">            query.orderBy(cb.asc(root.get(<span class="string">"studentNumber"</span>)),cb.asc(root.get(<span class="string">"name"</span>)));</span><br><span class="line">            <span class="comment">//--------------------------------------------</span></span><br><span class="line">            <span class="comment">//最终将查询条件拼好然后return</span></span><br><span class="line">            Predicate[] predicates = <span class="keyword">new</span> Predicate[predicatesList.size()];</span><br><span class="line">            <span class="keyword">return</span> cb.and(predicatesList.toArray(predicates));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> repository.findAll(specification);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<blockquote>
<p>使用 <a href="https://link.jianshu.com/?t=https%3A%2F%2Fgithub.com%2Fwenhao%2Fjpa-spec" target="_blank" rel="noopener">jpa-spec</a> 能够减少一些代码量</p>
</blockquote>
<h3 id="分页"><a href="#分页" class="headerlink" title="分页"></a>分页</h3><ol>
<li><p>dao 层接口继承 <code>JpaSpecificationExecutor</code>接口。</p>
</li>
<li><p>调用 <a href="https://docs.spring.io/spring-data/jpa/docs/2.1.0.RELEASE/api/org/springframework/data/jpa/repository/JpaSpecificationExecutor.html#findAll-org.springframework.data.jpa.domain.Specification-org.springframework.data.domain.Pageable-" target="_blank" rel="noopener">Page<T> findAll(@Nullable Specification<T> spec, Pageable pageable)</a></p>
</li>
<li><p>实现 <a href="https://docs.spring.io/spring-data/jpa/docs/2.1.0.RELEASE/api/org/springframework/data/jpa/domain/Specification.html" target="_blank" rel="noopener">Specification</a>，及 <a href="https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/domain/Pageable.html?is-external=true" target="_blank" rel="noopener">Pageable</a></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> root 根对象，即条件将被封装到该对象中。where 列名 = label.getXXX</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> query 查询关键字的封装。例如group by、order by等。几乎不用！</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> cb 用来封装条件对象。</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> pageable 用来封装分页的对象。</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@return</span> 返回null代表没有任何条件</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Page&lt;T&gt; <span class="title">toPredicate</span><span class="params">(Root&lt;T&gt; root, CriteriaQuery&lt;?&gt; query, CriteriaBuilder cb, Pageable pageable)</span></span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>eg：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Page&lt;User&gt; <span class="title">selectAll</span><span class="params">(<span class="keyword">int</span> pageNum, <span class="keyword">int</span> pageSize)</span> </span>&#123;</span><br><span class="line">    Pageable pageable = <span class="keyword">new</span> PageRequest(pageNum, pageSize);</span><br><span class="line">    Page&lt;User&gt; users = userRepository.findAll(<span class="keyword">new</span> Specification&lt;Student&gt;()&#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> Predicate <span class="title">toPredicate</span><span class="params">(Root&lt;Student&gt; root, CriteriaQuery&lt;?&gt; query, CriteriaBuilder cb)</span> </span>&#123;</span><br><span class="line">            List&lt;Predicate&gt; predicatesList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">            <span class="keyword">if</span> (!StringUtils.isEmpty(name))&#123;</span><br><span class="line">                Predicate namePredicate = cb.equal(root.get(<span class="string">"name"</span>), name);</span><br><span class="line">                predicatesList.add(namePredicate);</span><br><span class="line">            &#125;</span><br><span class="line">            Predicate[] predicates = <span class="keyword">new</span> Predicate[predicatesList.size()];</span><br><span class="line">            <span class="keyword">return</span> cb.and(predicatesList.toArray(predicates));</span><br><span class="line">        &#125;, pageable);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h3><blockquote>
<p><a href="https://blog.csdn.net/moshowgame/article/details/80090453" target="_blank" rel="noopener">JPA事务问题Executing an update/delete query</a></p>
<p><a href="https://blog.csdn.net/hanghangde/article/details/53241150" target="_blank" rel="noopener">用Spring boot jpa update modify delete 数据和事务管理的那些坑</a></p>
</blockquote>
<p>JPA 要求<strong>没有事务支持，不能执行更新和删除操作</strong>。默认情况下， SpringData 的每个方法上有事务， 但都是一个<strong>只读事务</strong>。</p>
<p>所以在 Service 层上必须加上事务注解<code>@Transactional</code>，如果没加则会报如下异常：<code>Executing an update/delete query</code></p>
<p><strong>@Modifyig</strong></p>
<p>在 @Query 注解中编写 JPQL 语句时，必须使用 @Modifying 进行修饰。以通知 SpringData，这是一个 UPDATE 或 DELETE 操作。同时需要在 service 层的方法上添加事务注解。</p>
]]></content>
      <categories>
        <category>JAVA</category>
        <category>Spring Boot</category>
        <category>Datasource</category>
      </categories>
      <tags>
        <tag>Spring Boot</tag>
        <tag>JPA</tag>
      </tags>
  </entry>
  <entry>
    <title>Study Notes of JAVA</title>
    <url>/2019/01/07/Study-Notes-of-JAVA/</url>
    <content><![CDATA[<img src="https://www.imarslan.com/wp-content/uploads/2018/06/cover.png" width="100%"/>

<a id="more"></a>

<h2 id="包装类"><a href="#包装类" class="headerlink" title="包装类"></a>包装类</h2><h3 id="Integer-与-int"><a href="#Integer-与-int" class="headerlink" title="Integer 与 int"></a>Integer 与 int</h3><p>Integer 是类，提供了很多方法方便使用，而 int 可以保证没有空指针异常，初始值为 0。</p>
<h2 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h2><blockquote>
<p><a href="http://www.runoob.com/java/java-generics.html" target="_blank" rel="noopener">Java 泛型| 菜鸟教程</a></p>
<p><a href="https://blog.csdn.net/qq_27093465/article/details/73229016" target="_blank" rel="noopener">Java泛型详解：和Class的使用。泛型类，泛型方法的详细使用实例</a></p>
</blockquote>
<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>​    Java 泛型（generics）是 JDK 5 中引入的一个新特性, 泛型提供了编译时类型安全检测机制，该机制允许程序员在编译时检测到非法的类型。</p>
<p>​    <strong>泛型的本质是参数化类型</strong>，即将类型由原来具体的类型参数化。这种参数类型可以用在类、接口和方法中，分别被称为泛型类、泛型接口、泛型方法。<strong>泛型类型在逻辑上可以看成是多个不同的类型，实际上都是相同的基本类型。</strong></p>
<p>​    ArrayList 就是泛型的典型应用。</p>
<p>​    Java泛型很大程度上只能提供静态类型检查，然后类型的信息就会被擦除。类型擦除就是指 Java 泛型只能用于在编译期间的静态类型检查，然后编译器生成的代码会擦除相应的类型信息（即类型均变为 Object），这样到了运行期间实际上JVM根本就知道泛型所代表的具体类型。这样做的目的是因为Java泛型是1.5之后才被引入的，为了保持向下的兼容性，所以只能做类型擦除来兼容以前的非泛型代码。</p>
<h3 id="相比-Object，泛型的优势"><a href="#相比-Object，泛型的优势" class="headerlink" title="相比 Object，泛型的优势"></a>相比 Object，泛型的优势</h3><ol>
<li>不用强制转换</li>
<li>避开运行时的类型转换错误。在 settValue 时如果传入类型不对，编译时便会报错。</li>
</ol>
<h3 id="字母规范"><a href="#字母规范" class="headerlink" title="字母规范"></a>字母规范</h3><p>虽然在定义泛型时，可以使用任意字母，其意义完全相同，单为了提高可读性，还是用有意义的字母比较好，一般来讲，在不同的情境下使用的字母意义如下：</p>
<ul>
<li>E — Element，常用在 java Collection 里，如：List<E>,Iterator<E>,Set<E></li>
<li>K,V — Key，Value，代表Map的键值对</li>
<li>N — Number，数字</li>
<li>T — Type，类型，如 String，Integer 等等</li>
</ul>
<h3 id="和-T-的区别"><a href="#和-T-的区别" class="headerlink" title="? 和 T 的区别"></a>? 和 T 的区别</h3><p>​    <code>? extends E</code>: 接收E类型或者E的子类型。<code>? super E</code>: 接收E类型或者E的父类型</p>
<p>​    ？和T都表示不确定的类型 ，但如果是 T 的话，函数里面可以对 T 进行操作，比方 <code>T car = getCar()</code>，而不能用 <code>？ car = getCar()</code>。</p>
<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><ol>
<li>Java 中不允许创建泛型数组</li>
</ol>
<h2 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h2><h3 id="Collections"><a href="#Collections" class="headerlink" title="Collections"></a>Collections</h3><h4 id="nCopies"><a href="#nCopies" class="headerlink" title="nCopies()"></a>nCopies()</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  List&lt;Integer&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;(</span><br><span class="line">    Collections.nCopies(<span class="number">3</span>, <span class="number">0</span>));</span><br><span class="line">  System.out.println(list);</span><br><span class="line">  <span class="comment">// [0, 0, 0]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="fill"><a href="#fill" class="headerlink" title="fill()"></a>fill()</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  List&lt;Integer&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;(</span><br><span class="line">    Collections.nCopies(<span class="number">3</span>, <span class="number">0</span>));</span><br><span class="line">  System.out.println(list);</span><br><span class="line">  <span class="comment">// [0, 0, 0]</span></span><br><span class="line">  Collections.fill(list, <span class="number">1</span>);</span><br><span class="line">  System.out.println(list);</span><br><span class="line">  <span class="comment">// [1, 1, 1]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Collections.nCopies() 只能在创建 List 时填充容器，Collections.fill() 是用来对一个已有容器的填充。</p>
<h2 id="线程"><a href="#线程" class="headerlink" title="线程"></a>线程</h2><h3 id="线程池"><a href="#线程池" class="headerlink" title="线程池"></a>线程池</h3>]]></content>
      <categories>
        <category>Study Notes</category>
        <category>JAVA</category>
      </categories>
  </entry>
  <entry>
    <title>Study Notes of Algorithm</title>
    <url>/2019/01/05/Study-Notes-of-Algorithm/</url>
    <content><![CDATA[<img src="https://www.kaleandcaramel.com/wp-content/uploads/2018/06/honest-insta-word-cloud.png" width="100%"/>

<a id="more"></a>

<h2 id="排名算法"><a href="#排名算法" class="headerlink" title="排名算法"></a>排名算法</h2><blockquote>
<p><a href="http://www.ruanyifeng.com/blog/2012/02/ranking_algorithm_hacker_news.html" target="_blank" rel="noopener">基于用户投票的排名算法（一）：Delicious和Hacker News</a></p>
<p><a href="http://www.ruanyifeng.com/blog/2012/03/ranking_algorithm_reddit.html" target="_blank" rel="noopener">基于用户投票的排名算法（二）：Reddit</a></p>
<p><a href="http://www.ruanyifeng.com/blog/2012/03/ranking_algorithm_stack_overflow.html" target="_blank" rel="noopener">基于用户投票的排名算法（三）：Stack Overflow</a></p>
<p><a href="http://www.ruanyifeng.com/blog/2012/03/ranking_algorithm_newton_s_law_of_cooling.html" target="_blank" rel="noopener">基于用户投票的排名算法（四）：牛顿冷却定律</a></p>
<p><a href="http://www.ruanyifeng.com/blog/2012/03/ranking_algorithm_wilson_score_interval.html" target="_blank" rel="noopener">基于用户投票的排名算法（五）：威尔逊区间</a></p>
<p><a href="http://www.ruanyifeng.com/blog/2012/03/ranking_algorithm_bayesian_average.html" target="_blank" rel="noopener">基于用户投票的排名算法（六）：贝叶斯平均</a></p>
</blockquote>
<h3 id="Hacker-News"><a href="#Hacker-News" class="headerlink" title="Hacker News"></a>Hacker News</h3><p><img src="https://i.loli.net/2018/12/12/5c10c01fd8f48.png" alt=""></p>
<p>P：表示帖子的得票数，减去1是为了忽略发帖人的投票。</p>
<p>T：表示距离发帖的时间（单位为小时），加上2是为了防止最新的帖子导致分母过小（之所以选择2，可能是因为从原始文章出现在其他网站，到转贴至Hacker News，平均需要两个小时）。</p>
<p>G：表示”重力因子”（gravityth power），即将帖子排名往下拉的力量，默认值为1.8</p>
<p>结论：</p>
<ol>
<li>得票越多，排名越高。</li>
<li>发帖时间越新，排名越高。或者说，帖子的排名会随着时间不断下降。（经过24小时之后，所有帖子的得分基本上都小于1）</li>
<li><strong>重力因子G</strong>数值大小决定了排名随时间下降的速度。G值越大，排名下降得越快。</li>
</ol>
<p>缺点：用户只能投赞成票，不允许用户投反对票</p>
<h3 id="Reddit"><a href="#Reddit" class="headerlink" title="Reddit"></a>Reddit</h3><p><img src="https://i.loli.net/2018/12/12/5c10c8a584474.png" alt=""></p>
<p>t：帖子的新旧程度，<code>t = 发贴时间 - 2005年12月8日7:46:43</code>，单位为秒，用unix时间戳计算。</p>
<p>x：赞成票与反对票的差，<code>x = 赞成票 - 反对票</code></p>
<p>y：投票方向，y是一个符号变量，表示对文章的总体看法。如果赞成票居多，y就是+1；如果反对票居多，y就是-1；如果赞成票和反对票相等，y就是0。</p>
<p><img src="https://i.loli.net/2018/12/12/5c10c965abb44.png" alt=""></p>
<p>z：帖子的受肯定（否定）的程度，z表示赞成票与反对票之间差额的绝对值。如果对某个帖子的评价，越是一边倒，z就越大。如果赞成票等于反对票，z就等于1。</p>
<p><img src="https://i.loli.net/2018/12/12/5c10c9b792fa4.png" alt=""></p>
<p>总结：</p>
<ol>
<li>赞成票与反对票的差额z越大，得分越高。</li>
<li>差额越大，分数越不受投票影响。</li>
<li>帖子越新，分数越高。分数会随时间下降</li>
</ol>
<p>缺点：不利于赞成票和反对票都比较高，但两者非常接近的情况。假定同一时间有两个帖子发表，文章A有1张赞成票（发帖人投的）、0张反对票，文章B有1000张赞成票、1000张反对票，那么A的排名会高于B。</p>
<p><strong>Reddit的排名，基本上由发帖时间决定，超级受欢迎的文章会排在最前面，一般性受欢迎的文章、有争议的文章都不会很靠前。</strong>这决定了Reddit是一个符合大众口味的社区，不是一个很激进、可以展示少数派想法的地方。</p>
<h3 id="Stack-Overflow"><a href="#Stack-Overflow" class="headerlink" title="Stack Overflow"></a>Stack Overflow</h3><p><img src="https://i.loli.net/2018/12/12/5c10d5fa90af2.png" alt=""></p>
<p><strong>Qviews：问题的浏览次数</strong></p>
<p>问题的浏览次数越多，就代表越受关注，得分也就越高。取对数的用意是当访问量越来越大，它对得分的影响将不断变小。</p>
<p><strong>Qscore：问题得分</strong></p>
<p>Qscore = 赞成票 - 反对票</p>
<p><strong>Qanswers：回答的数量</strong></p>
<p>回答的数量代表有多少人参与这个问题。这个值越大，得分将成倍放大。这里需要注意的是，如果无人回答，Qscore再高也没用，意味着再好的问题，也必须有人回答，否则进不了热点问题排行榜。</p>
<p><strong>Ascores：回答得分</strong></p>
<p>“回答”比”问题”更有意义。这一项的得分越高，就代表回答的质量越高。</p>
<p>简单加总的设计还不够全面。<strong>首先</strong>，一个正确的回答胜过一百个无用的回答，简单加总会导致，1个得分为100的回答与100个得分为1的回答，总得分相同。<strong>其次</strong>，由于得分会出现负值，因此那些特别差的回答，会拉低正确回答的得分。</p>
<p><strong>Qage：距离问题发表的时间</strong></p>
<p>随着时间流逝，这个值都会越变越大，导致分母增大，因此总得分会越来越小。</p>
<p><strong>Qupdated：距离最后一个回答的时间</strong></p>
<p>随着时间流逝，这个值都会越变越大，导致分母增大，因此总得分会越来越小。</p>
<p><strong>总结</strong></p>
<p>Stack Overflow热点问题的排名，与<strong>参与度</strong>（Qviews和Qanswers）和<strong>质量</strong>（Qscore和Ascores）成正比，与<strong>时间</strong>（Qage和Qupdated）成反比。</p>
<h2 id="分布式ID生成算法"><a href="#分布式ID生成算法" class="headerlink" title="分布式ID生成算法"></a>分布式ID生成算法</h2><h3 id="Twitter-SnowFlake"><a href="#Twitter-SnowFlake" class="headerlink" title="Twitter SnowFlake"></a>Twitter SnowFlake</h3><blockquote>
<p><a href="https://github.com/twitter-archive/snowflake" target="_blank" rel="noopener">snowflake</a></p>
<p><a href="https://www.lanindex.com/twitter-snowflake%EF%BC%8C64%E4%BD%8D%E8%87%AA%E5%A2%9Eid%E7%AE%97%E6%B3%95%E8%AF%A6%E8%A7%A3/" target="_blank" rel="noopener">Twitter-Snowflake，64位自增ID算法详解</a></p>
<p><a href="https://blog.csdn.net/yangding_/article/details/52768906" target="_blank" rel="noopener">Twitter Snowflake算法详解</a></p>
</blockquote>
<p>把<strong>时间戳</strong>，<strong>工作机器id</strong>，<strong>序列号</strong>组合在一起。</p>
<p><img src="https://www.lanindex.com/wp-content/uploads/2015/04/snowflake-64bit.jpg" alt=""></p>
<p>​    默认情况下 41bit 的时间戳可以支持该算法使用到 2082 年，10bit 的工作机器 id 可以支持1024台机器，序列号持 1 毫秒产生 4096 个自增序列 id。SnowFlake 的优点是，整体上按照时间自增排序，并且整个分布式系统内不会产生 ID 碰撞(由数据中心 ID 和机器 ID 作区分)，并且效率较高，经测试，SnowFlake 每秒能够产生 26 万 ID 左右。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Twitter_Snowflake</span></span><br><span class="line"><span class="comment"> * SnowFlake的结构如下(每部分用-分开):</span></span><br><span class="line"><span class="comment"> * 0 - 0000000000 0000000000 0000000000 0000000000 0 - 00000 - 00000 - 000000000000</span></span><br><span class="line"><span class="comment"> * 1位标识，由于long基本类型在Java中是带符号的，最高位是符号位，正数是0，负数是1，id一般是正数，所以最高位是0</span></span><br><span class="line"><span class="comment"> * 41位时间截(毫秒级)，注意，41位时间截不是存储当前时间的时间截，而是存储时间截的差值（当前时间截 - 开始时间截)得到的值）</span></span><br><span class="line"><span class="comment"> * 这里的的开始时间截，一般是我们的id生成器开始使用的时间，由我们程序来指定的（如下下面程序IdWorker类的startTime属性）。</span></span><br><span class="line"><span class="comment"> * 41位的时间截，可以使用69年： (1L &lt;&lt; 41) / (1000L * 60 * 60 * 24 * 365) = 69</span></span><br><span class="line"><span class="comment"> * 10位的数据机器位，可以部署1024个节点，包括5位datacenterId和5位workerId</span></span><br><span class="line"><span class="comment"> * 12位序列，毫秒内的计数，12位的计数顺序号支持每个节点每毫秒(同一机器，同一时间截)产生4096个ID序号</span></span><br><span class="line"><span class="comment"> * 加起来刚好64位，为一个Long型。</span></span><br><span class="line"><span class="comment"> * SnowFlake的优点是，整体上按照时间自增排序，并且整个分布式系统内不会产生ID碰撞(由数据中心ID和机器ID作区分)，并且效率较高，经测试，SnowFlake每秒能够产生26万ID左右。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SnowflakeIdWorker</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ==============================Fields===========================================</span></span><br><span class="line">    <span class="comment">/** 开始时间截 (2015-01-01) */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">long</span> twepoch = <span class="number">1420041600000L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 机器id所占的位数 */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">long</span> workerIdBits = <span class="number">5L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 数据标识id所占的位数 */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">long</span> datacenterIdBits = <span class="number">5L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 支持的最大机器id，结果是31 (这个移位算法可以很快的计算出几位二进制数所能表示的最大十进制数) */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">long</span> maxWorkerId = -<span class="number">1L</span> ^ (-<span class="number">1L</span> &lt;&lt; workerIdBits);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 支持的最大数据标识id，结果是31 */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">long</span> maxDatacenterId = -<span class="number">1L</span> ^ (-<span class="number">1L</span> &lt;&lt; datacenterIdBits);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 序列在id中占的位数 */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">long</span> sequenceBits = <span class="number">12L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 机器ID向左移12位 */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">long</span> workerIdShift = sequenceBits;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 数据标识id向左移17位(12+5) */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">long</span> datacenterIdShift = sequenceBits + workerIdBits;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 时间截向左移22位(5+5+12) */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">long</span> timestampLeftShift = sequenceBits + workerIdBits + datacenterIdBits;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 生成序列的掩码，这里为4095 (0b111111111111=0xfff=4095) */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">long</span> sequenceMask = -<span class="number">1L</span> ^ (-<span class="number">1L</span> &lt;&lt; sequenceBits);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 工作机器ID(0~31) */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> workerId;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 数据中心ID(0~31) */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> datacenterId;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 毫秒内序列(0~4095) */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> sequence = <span class="number">0L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 上次生成ID的时间截 */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> lastTimestamp = -<span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//==============================Constructors=====================================</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 构造函数</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> workerId 工作ID (0~31)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> datacenterId 数据中心ID (0~31)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SnowflakeIdWorker</span><span class="params">(<span class="keyword">long</span> workerId, <span class="keyword">long</span> datacenterId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (workerId &gt; maxWorkerId || workerId &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(String.format(<span class="string">"worker Id can't be greater than %d or less than 0"</span>, maxWorkerId));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (datacenterId &gt; maxDatacenterId || datacenterId &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(String.format(<span class="string">"datacenter Id can't be greater than %d or less than 0"</span>, maxDatacenterId));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.workerId = workerId;</span><br><span class="line">        <span class="keyword">this</span>.datacenterId = datacenterId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ==============================Methods==========================================</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获得下一个ID (该方法是线程安全的)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> SnowflakeId</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">long</span> <span class="title">nextId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> timestamp = timeGen();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//如果当前时间小于上一次ID生成的时间戳，说明系统时钟回退过这个时候应当抛出异常</span></span><br><span class="line">        <span class="keyword">if</span> (timestamp &lt; lastTimestamp) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(</span><br><span class="line">                    String.format(<span class="string">"Clock moved backwards.  Refusing to generate id for %d milliseconds"</span>, lastTimestamp - timestamp));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//如果是同一时间生成的，则进行毫秒内序列</span></span><br><span class="line">        <span class="keyword">if</span> (lastTimestamp == timestamp) &#123;</span><br><span class="line">            sequence = (sequence + <span class="number">1</span>) &amp; sequenceMask;</span><br><span class="line">            <span class="comment">//毫秒内序列溢出</span></span><br><span class="line">            <span class="keyword">if</span> (sequence == <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">//阻塞到下一个毫秒,获得新的时间戳</span></span><br><span class="line">                timestamp = tilNextMillis(lastTimestamp);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//时间戳改变，毫秒内序列重置</span></span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            sequence = <span class="number">0L</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//上次生成ID的时间截</span></span><br><span class="line">        lastTimestamp = timestamp;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//移位并通过或运算拼到一起组成64位的ID</span></span><br><span class="line">        <span class="keyword">return</span> ((timestamp - twepoch) &lt;&lt; timestampLeftShift) <span class="comment">//</span></span><br><span class="line">                | (datacenterId &lt;&lt; datacenterIdShift) <span class="comment">//</span></span><br><span class="line">                | (workerId &lt;&lt; workerIdShift) <span class="comment">//</span></span><br><span class="line">                | sequence;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 阻塞到下一个毫秒，直到获得新的时间戳</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> lastTimestamp 上次生成ID的时间截</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 当前时间戳</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">long</span> <span class="title">tilNextMillis</span><span class="params">(<span class="keyword">long</span> lastTimestamp)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> timestamp = timeGen();</span><br><span class="line">        <span class="keyword">while</span> (timestamp &lt;= lastTimestamp) &#123;</span><br><span class="line">            timestamp = timeGen();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> timestamp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 返回以毫秒为单位的当前时间</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 当前时间(毫秒)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">long</span> <span class="title">timeGen</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> System.currentTimeMillis();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//==============================Test=============================================</span></span><br><span class="line">    <span class="comment">/** 测试 */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SnowflakeIdWorker idWorker = <span class="keyword">new</span> SnowflakeIdWorker(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">long</span> id = idWorker.nextId();</span><br><span class="line">            System.out.println(Long.toBinaryString(id));</span><br><span class="line">            System.out.println(id);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="利用位运算计算指定位数的最大值"><a href="#利用位运算计算指定位数的最大值" class="headerlink" title="利用位运算计算指定位数的最大值"></a>利用位运算计算指定位数的最大值</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">-<span class="number">1L</span> ^ (-<span class="number">1L</span> &lt;&lt; len);</span><br></pre></td></tr></table></figure>

<p>eg:  5 位二进制最大值为 31</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">-1L &#x3D;</span><br><span class="line">1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111</span><br><span class="line"></span><br><span class="line">-1L &lt;&lt; 5 &#x3D;</span><br><span class="line">1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1110 0000</span><br><span class="line"></span><br><span class="line">-1L ^ (-1L &lt;&lt; len) &#x3D;</span><br><span class="line">  1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111</span><br><span class="line">^ 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1111 1110 0000</span><br><span class="line">&#x3D; 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0001 1111</span><br><span class="line">&#x3D; 31(D)</span><br></pre></td></tr></table></figure>

<h2 id="签名算法"><a href="#签名算法" class="headerlink" title="签名算法"></a>签名算法</h2><h3 id="排序加密签名算法"><a href="#排序加密签名算法" class="headerlink" title="排序加密签名算法"></a>排序加密签名算法</h3><blockquote>
<p><a href="https://blog.csdn.net/fengshizty/article/details/48754609" target="_blank" rel="noopener">App开放接口api安全性—Token签名sign的设计与实现</a></p>
</blockquote>
<ol>
<li>按照参数名ASCII码从小到大排序（字典序）</li>
<li>使用URL键值对的格式（即key1=value1&amp;key2=value2…）拼接成字符串。</li>
<li>加密算法对字符串进行加密，得到签名。</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</span><br><span class="line"><span class="keyword">import</span> java.net.URLEncoder;</span><br><span class="line"><span class="keyword">import</span> java.security.MessageDigest;</span><br><span class="line"><span class="keyword">import</span> java.security.NoSuchAlgorithmException;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span>：</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span>： libo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>： 2019/1/14:15:58</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SignUtil</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">createSign</span><span class="params">(Map&lt;String, String&gt; params, <span class="keyword">boolean</span> encode)</span> <span class="keyword">throws</span> UnsupportedEncodingException </span>&#123;</span><br><span class="line">        Set&lt;String&gt; keysSet = params.keySet();</span><br><span class="line">        Object[] keys = keysSet.toArray();</span><br><span class="line">        Arrays.sort(keys);</span><br><span class="line">        StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">        <span class="keyword">boolean</span> first = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (Object key : keys) &#123;</span><br><span class="line">            <span class="keyword">if</span> (first) &#123;</span><br><span class="line">                first = <span class="keyword">false</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                sb.append(<span class="string">"&amp;"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            sb.append(key).append(<span class="string">"="</span>);</span><br><span class="line">            Object value = params.get(key);</span><br><span class="line">            String valueString = <span class="string">""</span>;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">null</span> != value) &#123;</span><br><span class="line">                valueString = String.valueOf(value);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (encode) &#123;</span><br><span class="line">                sb.append(URLEncoder.encode(valueString, <span class="string">"UTF-8"</span>));</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                sb.append(valueString);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> md5(sb.toString()).toUpperCase();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">md5</span><span class="params">(String value)</span> </span>&#123;</span><br><span class="line">        MessageDigest md = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">byte</span>[] data = value.getBytes(<span class="string">"utf-8"</span>);</span><br><span class="line">            md = MessageDigest.getInstance(<span class="string">"MD5"</span>);</span><br><span class="line">            <span class="keyword">byte</span>[] digestData = md.digest(data);</span><br><span class="line">            <span class="keyword">return</span> toHex(digestData);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (NoSuchAlgorithmException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">toHex</span><span class="params">(<span class="keyword">byte</span> input[])</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (input == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        StringBuffer output = <span class="keyword">new</span> StringBuffer(input.length * <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; input.length; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> current = input[i] &amp; <span class="number">0xff</span>;</span><br><span class="line">            <span class="keyword">if</span> (current &lt; <span class="number">16</span>)</span><br><span class="line">                output.append(<span class="string">"0"</span>);</span><br><span class="line">            output.append(Integer.toString(current, <span class="number">16</span>));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> output.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="RC4算法"><a href="#RC4算法" class="headerlink" title="RC4算法"></a>RC4算法</h3><blockquote>
<p><a href="https://blog.csdn.net/White_Idiot/article/details/65937877" target="_blank" rel="noopener">【密码学】RC4加解密原理及其Java和C实现算法</a></p>
<p><a href="https://www.cnblogs.com/zwios/p/4196836.html" target="_blank" rel="noopener">RC4加密解密算法原理与完整源代码实例演示</a></p>
<p><a href="https://www.cnblogs.com/zibility/p/5404478.html" target="_blank" rel="noopener">RC4加密算法</a></p>
</blockquote>
<p><strong>加密原理</strong></p>
<p><img src="http://upload-images.jianshu.io/upload_images/2482101-2c5eb05fcc70d1fc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600" alt=""></p>
<p><img src="https://images2015.cnblogs.com/blog/889809/201604/889809-20160418145446757-1328061961.png" alt=""></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RC4</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        RC4 rc4 = <span class="keyword">new</span> RC4();</span><br><span class="line"></span><br><span class="line">        String plaintext = <span class="string">"helloworld"</span>;</span><br><span class="line">        String key = <span class="string">"key"</span>;</span><br><span class="line"></span><br><span class="line">        String ciphertext = rc4.encrypt(plaintext, key);</span><br><span class="line">        String decryptText = rc4.encrypt(ciphertext, key);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"明文为："</span> + plaintext);</span><br><span class="line">        System.out.println(<span class="string">"密钥为："</span> + key);</span><br><span class="line">        System.out.println(<span class="string">"密文为："</span> + ciphertext);</span><br><span class="line">        System.out.println(<span class="string">"解密为："</span> + decryptText);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1 加密</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">encrypt</span><span class="params">(<span class="keyword">final</span> String plaintext, <span class="keyword">final</span> String key)</span> </span>&#123;</span><br><span class="line">        Integer[] S = <span class="keyword">new</span> Integer[<span class="number">256</span>]; <span class="comment">// S盒</span></span><br><span class="line">        Character[] keySchedule = <span class="keyword">new</span> Character[plaintext.length()]; <span class="comment">// 生成的密钥流</span></span><br><span class="line">        StringBuffer ciphertext = <span class="keyword">new</span> StringBuffer();</span><br><span class="line"></span><br><span class="line">        ksa(S, key);</span><br><span class="line">        rpga(S, keySchedule, plaintext.length());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; plaintext.length(); ++i) &#123;</span><br><span class="line">            ciphertext.append((<span class="keyword">char</span>) (plaintext.charAt(i) ^ keySchedule[i]));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ciphertext.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1.1 KSA--密钥调度算法--利用key来对S盒做一个置换，也就是对S盒重新排列</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ksa</span><span class="params">(Integer[] s, String key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">256</span>; ++i) &#123;</span><br><span class="line">            s[i] = i;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">256</span>; ++i) &#123;</span><br><span class="line">            j = (j + s[i] + key.charAt(i % key.length())) % <span class="number">256</span>;</span><br><span class="line">            swap(s, i, j);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1.2 RPGA--伪随机生成算法--利用上面重新排列的S盒来产生任意长度的密钥流</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">rpga</span><span class="params">(Integer[] s, Character[] keySchedule, <span class="keyword">int</span> plaintextLength)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; plaintextLength; ++k) &#123;</span><br><span class="line">            i = (i + <span class="number">1</span>) % <span class="number">256</span>;</span><br><span class="line">            j = (j + s[i]) % <span class="number">256</span>;</span><br><span class="line">            swap(s, i, j);</span><br><span class="line">            keySchedule[k] = (<span class="keyword">char</span>) (s[(s[i] + s[j]) % <span class="number">256</span>]).intValue();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1.3 置换</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(Integer[] s, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">        Integer mTemp = s[i];</span><br><span class="line">        s[i] = s[j];</span><br><span class="line">        s[j] = mTemp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
      <tags>
        <tag>Algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title>Study Notes of Docker</title>
    <url>/2019/01/05/Study-Notes-of-Docker/</url>
    <content><![CDATA[<img src="http://finworks.com/wp-content/uploads/2017/01/Docker_Logo-500x250.png" width="100%"/>

<a id="more"></a>

<blockquote>
<p><a href="https://legacy.gitbook.com/book/yeasy/docker_practice" target="_blank" rel="noopener">Docker —— 从入门到实践</a></p>
</blockquote>
<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>Docker 属于 Linux 容器的一种封装，提供简单易用的容器使用接口。**它是目前最流行的 Linux 容器解决方案。</p>
<p>Docker基于Go语言开发，是DotCloud开源的、可以将任何应用包装在Linux container中运行的工具。</p>
<h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><h4 id="镜像"><a href="#镜像" class="headerlink" title="镜像"></a>镜像</h4><p>​    Docker 镜像是一个<strong>特殊的文件系统</strong>，除了提供容器运行时所需的程序、库、资源、配置等文件外，还包含了一些为运行时准备的一些配置参数（如匿名卷、环境变量、用户等）。镜像不包含任何动态数据，其内容在构建之后也不会被改变。</p>
<h4 id="容器"><a href="#容器" class="headerlink" title="容器"></a>容器</h4><p>​    镜像（<code>Image</code>）和容器（<code>Container</code>）的关系，就像是面向对象程序设计中的 <code>类</code> 和 <code>实例</code> 一样，镜像是静态的定义，容器是镜像运行时的实体。容器可以被创建、启动、停止、删除、暂停等。</p>
<p>​    容器的实质是进程。</p>
<h2 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h2><p><strong>启动 Docker</strong></p>
<blockquote>
<p><a href="https://docs.docker.com/config/daemon/systemd/" target="_blank" rel="noopener">Control Docker with systemd</a></p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl start docker</span><br></pre></td></tr></table></figure>

<p><strong>列出本地镜像</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure>

<p><strong>启动容器</strong></p>
<blockquote>
<p><a href="http://www.runoob.com/docker/docker-run-command.html" target="_blank" rel="noopener">Docker run 命令</a></p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run [OPTIONS] IMAGE [COMMAND] [ARG...]</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>-d:</strong> 后台运行容器，并返回容器ID；</li>
<li><strong>-p:</strong> 端口映射，格式为：主机(宿主)端口:容器端口</li>
<li><strong>–name=”nginx-lb”:</strong> 为容器指定一个名称；</li>
<li><strong>-e username=”ritchie”:</strong> 设置环境变量；</li>
</ul>
<p><strong>查看容器</strong></p>
<blockquote>
<p><a href="http://www.runoob.com/docker/docker-ps-command.html" target="_blank" rel="noopener">Docker ps 命令</a></p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker ps [OPTIONS]</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>-a :</strong>显示所有的容器，包括未运行的。</li>
</ul>
]]></content>
      <categories>
        <category>Study Notes</category>
      </categories>
      <tags>
        <tag>Docker</tag>
      </tags>
  </entry>
  <entry>
    <title>Use of IDEA</title>
    <url>/2019/01/05/Use-of-IDEA/</url>
    <content><![CDATA[<img src="https://www.paradigmadigital.com/wp-content/uploads/2017/08/intellijVSeclipse.jpg" width="100%"/>

<a id="more"></a>

<h2 id="设置"><a href="#设置" class="headerlink" title="设置"></a>设置</h2><h3 id="字体"><a href="#字体" class="headerlink" title="字体"></a>字体</h3><blockquote>
<p><a href="https://blog.csdn.net/zhaoyayua/article/details/46548613" target="_blank" rel="noopener">IntelliJ IDEA 调整字体大小- 赱向远方- CSDN博客</a></p>
</blockquote>
<h3 id="Maven"><a href="#Maven" class="headerlink" title="Maven"></a>Maven</h3><blockquote>
<p><a href="https://blog.csdn.net/qq_30551211/article/details/51277444" target="_blank" rel="noopener">IDEA新建MAVEN项目时速度缓慢</a></p>
</blockquote>
<p>​    IDEA 根据 maven archetype 的本质，其实是执行 <code>mvn archetype:generate</code> 命令，该命令执行时，需要指定一个<code>archetype-catalog.xml</code>文件。</p>
<p>​    该命令的参数<code>-DarchetypeCatalog</code>，可选值为：remote，internal  ，local等，用来指定archetype-catalog.xml文件从哪里获取。默认为remote，即从 <a href="http://repo1.maven.org/maven2/archetype-catalog.xml" target="_blank" rel="noopener">http://repo1.maven.org/maven2/archetype-catalog.xml</a> 路径下载<code>archetype-catalog.xml</code>文件。<a href="http://repo1.maven.org/maven2/archetype-catalog.xml" target="_blank" rel="noopener">http://repo1.maven.org/maven2/archetype-catalog.xml</a> 文件约为3-4M，下载速度很慢，所以导致创建过程缓慢。</p>
<p>​    可以在 <code>settings&gt;Building,Exceptiong,Deployment&gt;Maven&gt;Runner</code> 中配置 <code>VM Options</code> 来指定使用本地文件。如下图所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/130410-06580ab3367355e9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp" alt=""></p>
<h2 id="推荐做法"><a href="#推荐做法" class="headerlink" title="推荐做法"></a>推荐做法</h2><ol>
<li>项目、模块等命名时，尽量使用下划线（避免用横杠）来连接多个单词。</li>
</ol>
<h2 id="Mac-OS-下"><a href="#Mac-OS-下" class="headerlink" title="Mac OS 下"></a>Mac OS 下</h2><h3 id="快捷键"><a href="#快捷键" class="headerlink" title="快捷键"></a>快捷键</h3><h4 id="快速跳转到文件头"><a href="#快速跳转到文件头" class="headerlink" title="快速跳转到文件头"></a>快速跳转到文件头</h4><p><code>fn + Command + ←</code></p>
<h4 id="快速跳转到文件尾"><a href="#快速跳转到文件尾" class="headerlink" title="快速跳转到文件尾"></a>快速跳转到文件尾</h4><p><code>fn + Command + →</code></p>
<h4 id="快速跳转到当前窗口头"><a href="#快速跳转到当前窗口头" class="headerlink" title="快速跳转到当前窗口头"></a>快速跳转到当前窗口头</h4><p><code>cn +Command + ↑</code></p>
<h4 id="快速跳转到当前窗口尾"><a href="#快速跳转到当前窗口尾" class="headerlink" title="快速跳转到当前窗口尾"></a>快速跳转到当前窗口尾</h4><p><code>fn + Command + ↓</code></p>
<h4 id="快速跳转到某行-列"><a href="#快速跳转到某行-列" class="headerlink" title="快速跳转到某行/列"></a>快速跳转到某行/列</h4><p><code>Command + L</code></p>
<h4 id="添加-MyBatis-的-XML-文件模版"><a href="#添加-MyBatis-的-XML-文件模版" class="headerlink" title="添加 MyBatis 的 XML 文件模版"></a>添加 MyBatis 的 XML 文件模版</h4><ol>
<li><p>Preference –&gt; Editor –&gt; File and Code Templates</p>
<p><img src="https://oscimg.oschina.net/oscnet/ea4ccc152ffe4c2ee0800aa8c9feaa61b7a.jpg" alt=""></p>
<p>模版内容：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">mapper</span></span></span><br><span class="line"><span class="meta">  <span class="meta-keyword">PUBLIC</span> <span class="meta-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span></span></span><br><span class="line"><span class="meta">  <span class="meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">""</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>创建时选用 MybatisMapper 模版</p>
</li>
</ol>
]]></content>
      <categories>
        <category>Tools</category>
      </categories>
      <tags>
        <tag>IDEA</tag>
      </tags>
  </entry>
  <entry>
    <title>Study Notes of JQuery</title>
    <url>/2019/01/03/Study-Notes-of-JQuery/</url>
    <content><![CDATA[<img src="https://blog.teamtreehouse.com/wp-content/uploads/2012/10/jquery.jpg" width="100%"/>

<a id="more"></a>

<h2 id="文档就绪函数"><a href="#文档就绪函数" class="headerlink" title="文档就绪函数"></a>文档就绪函数</h2><blockquote>
<p><a href="https://blog.csdn.net/dongdong9223/article/details/50504518" target="_blank" rel="noopener">JQuery的函数“$(function() {})”的含义及与“$(document).ready(function(){})”的区别</a></p>
<p><a href="https://stackoverflow.com/questions/7642442/what-does-function-do" target="_blank" rel="noopener">What does $(function() {} ); do?</a></p>
<p><a href="http://www.w3school.com.cn/jquery/jquery_syntax.asp" target="_blank" rel="noopener">jQuery 语法</a></p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; ... &#125;);</span><br></pre></td></tr></table></figure>

<p>is just jQuery short-hand for</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; ... &#125;);</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>前端</category>
        <category>JQuery</category>
      </categories>
      <tags>
        <tag>JQuery</tag>
      </tags>
  </entry>
  <entry>
    <title>Study Notes of Bootstrap</title>
    <url>/2019/01/03/Study-Notes-of-Bootstrap/</url>
    <content><![CDATA[<img src="https://www.tutorialrepublic.com/lib/images/bootstrap-illustration.png" width="100%"/>

<a id="more"></a>

<blockquote>
<p><a href="https://getbootstrap.com/2.3.2/" target="_blank" rel="noopener">Bootstrap</a></p>
<p><a href="http://www.bootcss.com/" target="_blank" rel="noopener">Bootstrap中文网</a></p>
</blockquote>
<h2 id="BootstrapValidator"><a href="#BootstrapValidator" class="headerlink" title="BootstrapValidator"></a>BootstrapValidator</h2><blockquote>
<p><a href="http://bootstrapvalidator.votintsev.ru/" target="_blank" rel="noopener">BootstrapValidator</a></p>
<p><a href="https://mrbird.cc/BootstrapValidator%E6%8C%87%E5%8D%97.html" target="_blank" rel="noopener">BootstrapValidator指南</a></p>
<p><a href="https://blog.csdn.net/u013938465/article/details/53507109" target="_blank" rel="noopener">BootstrapValidator超详细教程</a></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    $(formSelector).bootstrapValidator(&#123;</span><br><span class="line">        excluded: ..., <span class="comment">// 指定不验证的情况</span></span><br><span class="line">        feedbackIcons: ...,	<span class="comment">// 指定验证后验证字段的提示字体图标。（默认是bootstrap风格）</span></span><br><span class="line">        live: <span class="string">'enabled'</span>, <span class="comment">// 生效规则</span></span><br><span class="line">        message: <span class="string">'This value is not valid'</span>,	<span class="comment">// 通用错误提示语</span></span><br><span class="line">        submitButtons: <span class="string">'button[type="submit"]'</span>, <span class="comment">// 指定提交的按钮</span></span><br><span class="line">        trigger: <span class="literal">null</span>, <span class="comment">// 统一触发验证方式</span></span><br><span class="line">        fields: ... <span class="comment">// 表单域配置</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>前端</category>
        <category>Bootstrap</category>
      </categories>
      <tags>
        <tag>Bootstrap</tag>
      </tags>
  </entry>
  <entry>
    <title>Encode and Decode</title>
    <url>/2019/01/03/Encode-and-Decode/</url>
    <content><![CDATA[<img src="http://www.habilelabs.io/wp-content/uploads/2016/08/encode-decode-model-of-communication.jpg" width="100%"/>

<a id="more"></a>

<h2 id="16进制编解码"><a href="#16进制编解码" class="headerlink" title="16进制编解码"></a>16进制编解码</h2><blockquote>
<p><a href="https://www.bejson.com/convert/ox2str/" target="_blank" rel="noopener">16进制到文本字符串的转换，16进制-BeJSON.com - Json校验</a></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hello world	&gt;	\x68\x65\x6c\x6c\x6f\x20\x77\x6f\x72\x6c\x64</span><br></pre></td></tr></table></figure>

<h2 id="ASCLL"><a href="#ASCLL" class="headerlink" title="ASCLL"></a>ASCLL</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">你好	&gt;	\u4f60\u597d</span><br></pre></td></tr></table></figure>

<h2 id="Unicode"><a href="#Unicode" class="headerlink" title="Unicode"></a>Unicode</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hello world	&gt;	&amp;#104;&amp;#101;&amp;#108;&amp;#108;&amp;#111;&amp;#32;&amp;#119;&amp;#111;&amp;#114;&amp;#108;&amp;#100;</span><br></pre></td></tr></table></figure>

<h2 id="URL"><a href="#URL" class="headerlink" title="URL"></a>URL</h2><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">http:&#x2F;&#x2F;www.baidu.com?q&#x3D;你好	&gt;	http:&#x2F;&#x2F;www.baidu.com?q&#x3D;%E4%BD%A0%E5%A5%BD</span><br></pre></td></tr></table></figure>

]]></content>
      <tags>
        <tag>Encoding</tag>
        <tag>Decoding</tag>
      </tags>
  </entry>
  <entry>
    <title>Comments</title>
    <url>/2019/01/03/Comments/</url>
    <content><![CDATA[<img src="https://neilpatel.com/wp-content/uploads/2015/03/comments.jpg" width="100%"/>

<a id="more"></a>

]]></content>
      <categories>
        <category>comment</category>
      </categories>
  </entry>
  <entry>
    <title>Internet Download Manager</title>
    <url>/2019/01/03/Internet-Download-Manager/</url>
    <content><![CDATA[<img src="https://www.hashhackers.com/images/idm-download.png" width="100%"/>

<a id="more"></a>

]]></content>
      <categories>
        <category>Tools</category>
      </categories>
      <tags>
        <tag>IDM</tag>
      </tags>
  </entry>
  <entry>
    <title>Handbook for Managers of XU</title>
    <url>/2018/12/29/Handbook-for-Managers-of-XU/</url>
    <content><![CDATA[<img src="https://i.loli.net/2018/12/29/5c27440b3f7f7.jpg" width="100%"/>

<a id="more"></a>

<h2 id="补单处理流程"><a href="#补单处理流程" class="headerlink" title="补单处理流程"></a>补单处理流程</h2><p><img src="https://i.loli.net/2018/12/29/5c2740dabe589.jpg" alt=""></p>
<h2 id="重复单处理流程"><a href="#重复单处理流程" class="headerlink" title="重复单处理流程"></a>重复单处理流程</h2><p><img src="https://i.loli.net/2018/12/29/5c2735a9b633b.jpg" alt=""></p>
<blockquote>
<p>如有疑问请留言。</p>
</blockquote>
]]></content>
  </entry>
  <entry>
    <title>Softs and Tools</title>
    <url>/2018/12/27/Softs-and-Tools/</url>
    <content><![CDATA[<img src="https://images.pexels.com/photos/147413/twitter-facebook-together-exchange-of-information-147413.jpeg?cs=srgb&dl=app-applications-apps-147413.jpg&fm=jpg" width="100%"/>

<a id="more"></a>

<h2 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h2><h3 id="截屏"><a href="#截屏" class="headerlink" title="截屏"></a>截屏</h3><p><strong>FastStone</strong></p>
<blockquote>
<p><a href="https://blog.csdn.net/moxiaoya1314/article/details/79952787" target="_blank" rel="noopener">FastStone Capture(FSCapture) 注册码</a></p>
</blockquote>
<h2 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h2><h3 id="录屏"><a href="#录屏" class="headerlink" title="录屏"></a>录屏</h3><blockquote>
<p><a href="https://www.bandicam.cn/" target="_blank" rel="noopener">Bandicam</a></p>
<p><a href="https://www.52pojie.cn/thread-657951-1-1.html" target="_blank" rel="noopener">Bandicam万能注册机</a></p>
</blockquote>
<h3 id="编辑"><a href="#编辑" class="headerlink" title="编辑"></a>编辑</h3><blockquote>
<p><a href="https://www.adobe.com/cn/products/premiere/free-trial-download.html" target="_blank" rel="noopener">Premiere Pro</a></p>
<p><a href="http://www.carrotchou.blog/7783.html" target="_blank" rel="noopener">Adobe Premiere Pro CC 2018 v12.1.2 特别破解版</a></p>
</blockquote>
<h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><h3 id="IDM"><a href="#IDM" class="headerlink" title="IDM"></a>IDM</h3><blockquote>
<p><a href="https://blog.csdn.net/miao_9/article/details/72852903" target="_blank" rel="noopener">配置IDM不限速下载百度云的大文件</a></p>
<p><a href="https://www.internetdownloadmanager.com/" target="_blank" rel="noopener">下载最新版本IDM</a> </p>
</blockquote>
<p>Internet Download Manager（简称IDM）是一个用于Windows系统的下载管理器，它是共享软件，免费试用期为30天，但是每月均有一段时间优惠。</p>
]]></content>
      <categories>
        <category>Software</category>
      </categories>
      <tags>
        <tag>Tool</tag>
        <tag>Software</tag>
      </tags>
  </entry>
  <entry>
    <title>Writing Norms</title>
    <url>/2018/12/26/Writing-Norms/</url>
    <content><![CDATA[<img src="https://i.loli.net/2018/12/26/5c2340bbf08fb.jpeg" width="100%"/>

<a id="more"></a>

<h2 id="英文标题大小写规则"><a href="#英文标题大小写规则" class="headerlink" title="英文标题大小写规则"></a>英文标题大小写规则</h2><blockquote>
<p><a href="https://www.douban.com/note/180259961/" target="_blank" rel="noopener">论文英文标题等的写法 - 豆瓣</a></p>
</blockquote>
<ol>
<li>一般实词（名词、动词、代词、形容词、副词等）首字母大写，虚词（介词、冠词、连词、感叹词）首字母小写。</li>
<li>标题第一个单词、最后一个单词无论词性首字母应该大写。</li>
<li>超过5个字母的虚词,如between、without、alongside、underneath等应该大写。</li>
<li>如果是重要提示性标题，或者是专有名称标题，可以全部字母都用大写，但这种用法应慎重。</li>
</ol>
<h2 id="中文技术文档"><a href="#中文技术文档" class="headerlink" title="中文技术文档"></a>中文技术文档</h2><blockquote>
<p><a href="http://www.ruanyifeng.com/blog/2016/10/document_style_guide.html" target="_blank" rel="noopener">中文技术文档的写作规范</a></p>
</blockquote>
<p>体会：</p>
<ol>
<li><p>文章内容主体一定要从二级标题开始，不要从一级标题开始。</p>
</li>
<li><p>谨慎使用四级标题，尽量避免出现，保持层级的简单，防止出现过于复杂的章节。如果三级标题下有并列性的内容，建议只使用项目列表（Item list）。</p>
</li>
<li><p>全角中文字符与半角英文字符之间，应有一个半角空格。</p>
</li>
<li><p>半角英文字符和半角阿拉伯数字，与全角标点符号之间不留空格。</p>
</li>
<li><p>用对“的”、“地”、“得”。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">她露出了开心的笑容。</span><br><span class="line">（形容词＋的＋名词）</span><br><span class="line"></span><br><span class="line">她开心地笑了。</span><br><span class="line">（副词＋地＋动词）</span><br><span class="line"></span><br><span class="line">她笑得很开心。</span><br><span class="line">（动词＋得＋副词）</span><br></pre></td></tr></table></figure>
</li>
<li><p>同样一个意思，尽量使用肯定句表达，不使用否定句表达。</p>
</li>
<li><p>避免使用双重否定句。</p>
</li>
<li><p>表示中文时，英文省略号（<code>⋯</code> 不知道这种英文省略号是怎么打出来的）应改为中文省略号（<code>……</code> Windows 系统中文全角下使用 <code>^</code>，即 <code>shift + 6</code>）。</p>
</li>
<li><p>第一次出现英文词汇时，在括号中给出中文标注。此后再次出现时，直接使用英文缩写即可。</p>
</li>
</ol>
]]></content>
      <categories>
        <category>Common Sense</category>
        <category>Writing</category>
      </categories>
      <tags>
        <tag>Writing</tag>
      </tags>
  </entry>
  <entry>
    <title>Site Collection</title>
    <url>/2018/12/26/Site-Collection/</url>
    <content><![CDATA[<img src="https://images.unsplash.com/photo-1522542550221-31fd19575a2d?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60" width="100%"/>

<a id="more"></a>

<h2 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h2><h3 id="10-Sites-for-Free-Stock-Photos"><a href="#10-Sites-for-Free-Stock-Photos" class="headerlink" title="10 Sites for Free Stock Photos"></a>10 Sites for Free Stock Photos</h3><ol>
<li><a href="https://unsplash.com/" target="_blank" rel="noopener">Unsplash</a></li>
<li><a href="https://gratisography.com/" target="_blank" rel="noopener">Gratisography</a></li>
<li><a href="https://morguefile.com/" target="_blank" rel="noopener">Morguefile</a></li>
<li><a href="https://pixabay.com/" target="_blank" rel="noopener">Pixabay</a></li>
<li><a href="http://www.stockvault.net/" target="_blank" rel="noopener">Stockvault</a></li>
<li><a href="https://www.pexels.com/" target="_blank" rel="noopener">Pexels</a></li>
<li><a href="https://picjumbo.com/" target="_blank" rel="noopener">Picjumbo</a></li>
<li><a href="https://www.pikwizard.com/" target="_blank" rel="noopener">Pikwizard</a></li>
<li><a href="https://www.rawpixel.com/" target="_blank" rel="noopener">Rawpixel</a></li>
<li><a href="https://www.reshot.com/" target="_blank" rel="noopener">Reshot</a></li>
</ol>
<h3 id="Wallroom"><a href="#Wallroom" class="headerlink" title="Wallroom"></a>Wallroom</h3><blockquote>
<p><a href="https://wallroom.io/" target="_blank" rel="noopener">高质量壁纸网站</a></p>
</blockquote>
<h2 id="网站"><a href="#网站" class="headerlink" title="网站"></a>网站</h2><h3 id="wikeHow"><a href="#wikeHow" class="headerlink" title="wikeHow"></a>wikeHow</h3><blockquote>
<p><a href="https://zh.wikihow.com" target="_blank" rel="noopener">任何人做任何事</a></p>
</blockquote>
<h3 id="程序员的个性化网址导航：GitNavi-com"><a href="#程序员的个性化网址导航：GitNavi-com" class="headerlink" title="程序员的个性化网址导航：GitNavi.com"></a><a href="http://www.gitnavi.com/u/judasn/" target="_blank" rel="noopener">程序员的个性化网址导航：GitNavi.com</a></h3><h2 id="博客"><a href="#博客" class="headerlink" title="博客"></a>博客</h2><p><a href="https://lai.yuweining.cn/" target="_blank" rel="noopener">不死鸟 - 分享为王</a></p>
<p><a href="http://www.yinwang.org/#" target="_blank" rel="noopener">当然我在扯淡</a></p>
<p><a href="https://www.liuchuo.net/" target="_blank" rel="noopener">柳婼 の blog</a> ——浙大柳神</p>
<p><a href="http://www.youmeek.com/" target="_blank" rel="noopener">YouMeek</a></p>
<p><a href="https://www.hifreud.com/" target="_blank" rel="noopener">Freud’s Blog</a></p>
<h2 id="开发者站点"><a href="#开发者站点" class="headerlink" title="开发者站点"></a>开发者站点</h2><p><a href="http://www.androidchina.net/" target="_blank" rel="noopener">Android 开发中文站</a></p>
<h2 id="GitHub"><a href="#GitHub" class="headerlink" title="GitHub"></a>GitHub</h2><h3 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h3><p><a href="https://github.com/apachecn/awesome-algorithm" target="_blank" rel="noopener">awesome-algorithm</a></p>
<h3 id="RESTful"><a href="#RESTful" class="headerlink" title="RESTful"></a>RESTful</h3><p><a href="https://github.com/restcookbook/restcookbook" target="_blank" rel="noopener">restcookbook</a></p>
<h3 id="Best-websites-a-programmer-should-visit"><a href="#Best-websites-a-programmer-should-visit" class="headerlink" title="Best-websites-a-programmer-should-visit"></a><a href="https://github.com/sdmg15/Best-websites-a-programmer-should-visit" target="_blank" rel="noopener">Best-websites-a-programmer-should-visit</a></h3><p>该仓库收集对程序员有用的网址，包含问题查找、技术新闻、技术博客、开源社区、英文提升、新奇的玩意儿、视频教程、在线工具等数十个方向的内容。</p>
<h3 id="适合后端开发者的前端-React-Admin"><a href="#适合后端开发者的前端-React-Admin" class="headerlink" title="适合后端开发者的前端 React-Admin"></a><a href="https://github.com/satan31415/umi-admin" target="_blank" rel="noopener">适合后端开发者的前端 React-Admin</a></h3><h3 id="List-of-Free-Learning-Resources"><a href="#List-of-Free-Learning-Resources" class="headerlink" title="List of Free Learning Resources"></a><a href="https://github.com/EbookFoundation/free-programming-books" target="_blank" rel="noopener">List of Free Learning Resources</a></h3><h3 id="Coding-Interview-University"><a href="#Coding-Interview-University" class="headerlink" title="Coding Interview University"></a><a href="https://github.com/jwasham/coding-interview-university" target="_blank" rel="noopener">Coding Interview University</a></h3><h2 id="GitBook"><a href="#GitBook" class="headerlink" title="GitBook"></a>GitBook</h2><h3 id="设计模式"><a href="#设计模式" class="headerlink" title="设计模式"></a>设计模式</h3><blockquote>
<p><a href="https://www.gitbook.com/book/alleniverson/java-design-patterns" target="_blank" rel="noopener">Java Design Patterns</a></p>
</blockquote>
<h3 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h3><blockquote>
<p><a href="https://legacy.gitbook.com/book/yeasy/docker_practice" target="_blank" rel="noopener">Docker —— 从入门到实践</a></p>
</blockquote>
<h3 id="Linux-内核揭密（中文）"><a href="#Linux-内核揭密（中文）" class="headerlink" title="Linux 内核揭密（中文）"></a><a href="https://xinqiu.gitbooks.io/linux-insides-cn/content/index.html" target="_blank" rel="noopener">Linux 内核揭密</a>（中文）</h3><p>本书是<a href="https://github.com/0xAX/linux-insides" target="_blank" rel="noopener">《Linux inside》</a>一书的中译，介绍 Linux 内核知识，从计算机通电讲起，需要 C 语言和汇编语言的知识。</p>
<h2 id="教程"><a href="#教程" class="headerlink" title="教程"></a>教程</h2><h3 id="IntelliJ-IDEA-使用教程"><a href="#IntelliJ-IDEA-使用教程" class="headerlink" title="IntelliJ IDEA 使用教程"></a><a href="http://wiki.jikexueyuan.com/project/intellij-idea-tutorial" target="_blank" rel="noopener">IntelliJ IDEA 使用教程</a></h3><h2 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h2><h3 id="Office-模板和主题"><a href="#Office-模板和主题" class="headerlink" title="Office 模板和主题"></a><a href="https://templates.office.com/" target="_blank" rel="noopener">Office 模板和主题</a></h3>]]></content>
      <categories>
        <category>Collection</category>
      </categories>
      <tags>
        <tag>Site</tag>
      </tags>
  </entry>
  <entry>
    <title>Study Notes of Guns</title>
    <url>/2018/12/25/Study-Notes-of-Guns/</url>
    <content><![CDATA[<p><img src="https://i.loli.net/2018/12/26/5c23433372f23.jpg" alt=""></p>
<a id="more"></a>

<blockquote>
<p>Guns基于SpringBoot 2，致力于做更简洁的后台管理系统，完美整合springmvc + shiro + mybatis-plus + beetl!Guns项目代码简洁，注释丰富，上手容易，同时Guns包含许多基础模块(用户管理，角色管理，部门管理，字典管理等10个模块)，可以直接作为一个后台管理系统的脚手架!</p>
<p><a href="http://stylefeng.cn/" target="_blank" rel="noopener">http://stylefeng.cn</a></p>
</blockquote>
<h2 id="后端分页"><a href="#后端分页" class="headerlink" title="后端分页"></a>后端分页</h2><blockquote>
<p>可参考 Guns 的【日志管理】模块</p>
<p><a href="https://mp.baomidou.com/guide/page.html" target="_blank" rel="noopener">分页插件| MyBatis-Plus</a></p>
</blockquote>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><ol>
<li>前端初始化<a href="http://bootstrap-table.wenzhixin.net.cn/zh-cn/documentation/" target="_blank" rel="noopener">Bootstrap Table</a>时设置分页方式为服务端分页。（<code>static/modular/system/log/log.js</code>）</li>
<li>后端接口使用<code>Guns</code>提供的工具类<code>common.constant.factory.PageFactory</code>来获取<a href="https://mp.baomidou.com/guide/page.html" target="_blank" rel="noopener"><code>MyBatis-Plus</code>分页插件</a>所需的<code>Page</code>对象。</li>
<li>然后将<code>Page</code>对象传递到<code>Mapper</code>层进行查询，<a href="https://mp.baomidou.com/guide/page.html" target="_blank" rel="noopener"><code>MyBatis-Plus</code>分页插件</a>会自动帮你实现分页。</li>
<li>将查询结果放入<code>Page</code>对象的<code>records</code>属性中。</li>
<li>使用<code>Guns</code>的<code>core.common.page.PageInfoBT</code>对分页结果进行封装后返回给前端。</li>
</ol>
<h3 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h3><ol>
<li>Guns配置分页插件的地方在<code>com.dubbo.pay.config.datasource</code></li>
</ol>
<h2 id="表单验证"><a href="#表单验证" class="headerlink" title="表单验证"></a>表单验证</h2><blockquote>
<p>参考 Guns 的【用户管理】模块</p>
<p><a href="http://bootstrapvalidator.votintsev.ru/" target="_blank" rel="noopener">BootstrapValidator</a></p>
<p><a href="https://mrbird.cc/BootstrapValidator%E6%8C%87%E5%8D%97.html" target="_blank" rel="noopener">BootstrapValidator指南</a></p>
</blockquote>
<ol>
<li><p>必要的<code>css</code>和<code>js</code>文件在<code>src\main\webapp\WEB-INF\view\common\_container.html</code>文件中引入。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 全局css --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"$&#123;ctxPath&#125;/static/css/bootstrap.min.css?v=3.3.6"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"$&#123;ctxPath&#125;/static/css/plugins/validate/bootstrapValidator.min.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 全局js --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"$&#123;ctxPath&#125;/static/js/jquery.min.js?v=2.1.4"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"$&#123;ctxPath&#125;/static/js/bootstrap.min.js?v=3.3.6"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"$&#123;ctxPath&#125;/static/js/plugins/validate/bootstrapValidator.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>HTML 表单</p>
<ul>
<li><p>表单要指定 ID</p>
<figure class="highlight html"><figcaption><span>WEB-INF/view/system/user/user_add.html</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-horizontal"</span> <span class="attr">id</span>=<span class="string">"userInfoForm"</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>需验证的字段，默认需要以<code>&lt;div class=”form-group”&gt;&lt;/div&gt;</code>包裹（对应错误提示会根据该class值定位），内部<code>&lt;input class=&quot;form-control&quot; /&gt;</code>标签必须有name属性值（作为验证匹配字段）。</p>
<figure class="highlight html"><figcaption><span>WEB-INF/view/system/user/user_add.html</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">#input</span> <span class="attr">id</span>=<span class="string">"account"</span> <span class="attr">name</span>=<span class="string">"账户"</span> <span class="attr">underline</span>=<span class="string">"true"</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>自定义标签 input ：</p>
<figure class="highlight html"><figcaption><span>WEB-INF/view/common/tags/input.tag</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"col-sm-3 control-label"</span>&gt;</span>$&#123;name&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-9"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"$&#123;id&#125;"</span> <span class="attr">name</span>=<span class="string">"$&#123;id&#125;"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">...</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>表单域配置（<a href="http://bootstrapvalidator.votintsev.ru/validators/" target="_blank" rel="noopener">官方默认验证</a>）</p>
<figure class="highlight js"><figcaption><span>static/modular/system/user/user_info.js</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> UserInfoDlg = &#123;</span><br><span class="line">    ...</span><br><span class="line">    validateFields: &#123;</span><br><span class="line">        account: &#123;</span><br><span class="line">            validators: &#123;</span><br><span class="line">                notEmpty: &#123;</span><br><span class="line">                    message: <span class="string">'账户不能为空'</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>js 入口函数中初始化验证器</p>
<figure class="highlight js"><figcaption><span>static/modular/system/user/user_info.js</span></figcaption><table><tr><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    Feng.initValidator(<span class="string">"userInfoForm"</span>, UserInfoDlg.validateFields);</span><br><span class="line">	...</span><br></pre></td></tr></table></figure>
</li>
<li><p>提交时手动触发</p>
<figure class="highlight js"><figcaption><span>static/modular/system/user/user_info.js</span></figcaption><table><tr><td class="code"><pre><span class="line">UserInfoDlg.validate = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 重置表单所有验证规则</span></span><br><span class="line">    $(<span class="string">'#userInfoForm'</span>).data(<span class="string">"bootstrapValidator"</span>).resetForm();</span><br><span class="line">    <span class="comment">// 触发全部验证</span></span><br><span class="line">    $(<span class="string">'#userInfoForm'</span>).bootstrapValidator(<span class="string">'validate'</span>);</span><br><span class="line">    <span class="comment">// 获取当前表单验证状态</span></span><br><span class="line">    <span class="keyword">return</span> $(<span class="string">"#userInfoForm"</span>).data(<span class="string">'bootstrapValidator'</span>).isValid();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>当提交按钮的<code>type=”submit”</code>时，会在 success 之前自动触发表单验证，Guns 提交按钮为普通按钮，故需要手动触发。</p>
<figure class="highlight html"><figcaption><span>WEB-INF/view/common/tags/button.tag</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">...</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="正整数"><a href="#正整数" class="headerlink" title="正整数"></a>正整数</h3><p>方式一：</p>
<p>用 BootstrapValidator 验证正整数时需要适用正则表达式：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">validateFields: &#123;</span><br><span class="line">        count: &#123;</span><br><span class="line">            validators: &#123;</span><br><span class="line">                regexp: &#123;</span><br><span class="line">                    regexp: <span class="regexp">/^[1-9]\d*$ /</span>,</span><br><span class="line">                    message: <span class="string">'格式错误，请输入正整数'</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>方式二：</p>
<p>H5 提供了 number 的<a href="http://www.w3school.com.cn/html5/html_5_form_input_types.asp" target="_blank" rel="noopener">表单类型</a>，用来控制数字输入。</p>
<p>将 input.tag 复制到对应 html 文件，该填的填，该删的删。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-6 b-r"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">#input</span> <span class="attr">id</span>=<span class="string">"name"</span> <span class="attr">name</span>=<span class="string">"姓名"</span> <span class="attr">underline</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"col-sm-3 control-label"</span>&gt;</span>数量<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-9"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">id</span>=<span class="string">"count"</span> <span class="attr">name</span>=<span class="string">"count"</span> <span class="attr">type</span>=<span class="string">"number"</span> <span class="attr">min</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-6"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">#input</span> <span class="attr">id</span>=<span class="string">"age"</span> <span class="attr">name</span>=<span class="string">"年龄"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Java</category>
        <category>Guns</category>
      </categories>
      <tags>
        <tag>Guns</tag>
      </tags>
  </entry>
  <entry>
    <title>Daily Note</title>
    <url>/2018/12/25/Daily-Note/</url>
    <content><![CDATA[<h3 id="艾力老师34枚金币时间管理法"><a href="#艾力老师34枚金币时间管理法" class="headerlink" title="艾力老师34枚金币时间管理法"></a><a href="https://www.baidu.com/link?url=5SuFx-9NWub2CCof8stm6CHhcoJ5cePsHcUkAUcd5dlnrxPsLNtsDGKdZmraf1FddnPuCjhghquaa99zBjpW3T8_Vwb4fek_-ADEIilBvyG&wd=&eqid=faf3fc3a00046acc000000065b99be7a" target="_blank" rel="noopener"><em>艾力老师</em>34枚金币<em>时间管理</em>法</a></h3><h1 id="SqlSessionTemplate"><a href="#SqlSessionTemplate" class="headerlink" title="SqlSessionTemplate"></a>SqlSessionTemplate</h1><h1 id="排名算法"><a href="#排名算法" class="headerlink" title="排名算法"></a>排名算法</h1><p><a href="http://www.ruanyifeng.com/blog/2012/02/ranking_algorithm_hacker_news.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2012/02/ranking_algorithm_hacker_news.html</a></p>
<p><a href="https://www.cnblogs.com/zhengyun_ustc/archive/2010/12/15/amir.html" target="_blank" rel="noopener">https://www.cnblogs.com/zhengyun_ustc/archive/2010/12/15/amir.html</a></p>
<h1 id="BootstrapValidator的使用"><a href="#BootstrapValidator的使用" class="headerlink" title="BootstrapValidator的使用"></a>BootstrapValidator的使用</h1><blockquote>
<p><a href="https://blog.csdn.net/fengsheng5210/article/details/78753329" target="_blank" rel="noopener">https://blog.csdn.net/fengsheng5210/article/details/78753329</a></p>
<p><a href="https://blog.csdn.net/u013938465/article/details/53507109" target="_blank" rel="noopener">BootstrapValidator超详细教程</a></p>
<p><a href="http://wenda.bootcss.com/question/491" target="_blank" rel="noopener">http://wenda.bootcss.com/question/491</a></p>
</blockquote>
<h1 id="正确匹配URL的正则表达式"><a href="#正确匹配URL的正则表达式" class="headerlink" title="正确匹配URL的正则表达式"></a><a href="https://www.cnblogs.com/speeding/p/5097790.html" target="_blank" rel="noopener">正确匹配URL的正则表达式</a></h1><blockquote>
<p><a href="https://blog.csdn.net/yu447338063/article/details/56014600" target="_blank" rel="noopener">近乎完美的金额正则表达式两位小数</a></p>
<p><a href="http://tool.oschina.net/regex/" target="_blank" rel="noopener">在线测试</a></p>
</blockquote>
<h1 id="Guns日志系统的流程"><a href="#Guns日志系统的流程" class="headerlink" title="Guns日志系统的流程"></a>Guns日志系统的流程</h1><blockquote>
<p><a href="https://blog.csdn.net/zerolaw/article/details/81236996" target="_blank" rel="noopener">Guns第九节日志系统</a></p>
</blockquote>
<h1 id="使用Fiddler的AutoResponder转发请求"><a href="#使用Fiddler的AutoResponder转发请求" class="headerlink" title="使用Fiddler的AutoResponder转发请求"></a>使用Fiddler的AutoResponder转发请求</h1><blockquote>
<p><a href="https://blog.csdn.net/panda_m/article/details/77892468" target="_blank" rel="noopener">https://blog.csdn.net/panda_m/article/details/77892468</a></p>
<p><a href="https://blog.csdn.net/willcaty/article/details/70209074" target="_blank" rel="noopener">Fiddler 之AutoResponder</a></p>
</blockquote>
<h1 id="Spring-boot-激活-profile的几种方式"><a href="#Spring-boot-激活-profile的几种方式" class="headerlink" title="Spring boot 激活 profile的几种方式"></a>Spring boot 激活 profile的几种方式</h1><blockquote>
<p><a href="https://my.oschina.net/u/1469495/blog/1522784" target="_blank" rel="noopener">https://my.oschina.net/u/1469495/blog/1522784</a></p>
<p><a href="https://blog.csdn.net/wu2374633583/article/details/80073271" target="_blank" rel="noopener">SpringBoot（7）–配置文件占位符，profile</a></p>
</blockquote>
<h1 id="怎么更改Guns项目名称？"><a href="#怎么更改Guns项目名称？" class="headerlink" title="怎么更改Guns项目名称？"></a>怎么更改Guns项目名称？</h1><h3 id="mybatis在mapper-xml中处理大于、小于、不等于号的方法-CSDN博客"><a href="#mybatis在mapper-xml中处理大于、小于、不等于号的方法-CSDN博客" class="headerlink" title="mybatis在mapper.xml中处理大于、小于、不等于号的方法 - CSDN博客"></a><a href="https://www.baidu.com/link?url=uHo9Ne-h0E-JX0TyGSGrehCtM7QBqG_340mSrOmw4_0FAZ9U5ik2N4-G1dmsOXNpqRJmXTc_USwS3NCjBmIGp_&wd=&eqid=fe1386000002198c000000065bab02cb" target="_blank" rel="noopener"><em>mybatis</em>在mapper.<em>xml</em>中处理<em>大于</em>、小于、<em>不等于</em>号的方法 - CSDN博客</a></h3><h3 id="JQuery-改变input-的placeholder的值-CSDN博客"><a href="#JQuery-改变input-的placeholder的值-CSDN博客" class="headerlink" title="JQuery 改变input 的placeholder的值 - CSDN博客"></a><a href="https://www.baidu.com/link?url=EG2hJrW7s-G50P73w-tbuNpJ5LubDhAEumDNe8B_jzlJZF82P8aVARFUV8dwyUWR7jieETGfnUJ3TAQXe7kZEavnYEW14-FUbwWvZDClRY_&wd=&eqid=9bc5498500024aca000000065bbc5397" target="_blank" rel="noopener"><em>JQuery</em> 改变<em>input</em> 的<em>placeholder</em>的值 - CSDN博客</a></h3><h1 id="JS正则表达式验证数字非常全"><a href="#JS正则表达式验证数字非常全" class="headerlink" title="JS正则表达式验证数字非常全"></a><a href="https://www.cnblogs.com/xinwusuo/p/5948908.html" target="_blank" rel="noopener">JS正则表达式验证数字非常全</a></h1><h3 id="正则表达式校验金额最多两位小数的实数-CSDN博客"><a href="#正则表达式校验金额最多两位小数的实数-CSDN博客" class="headerlink" title="正则表达式校验金额最多两位小数的实数 - CSDN博客"></a><a href="https://www.baidu.com/link?url=k3wj5Lgdd8s2KcLelhEz1JLwpQd1te8oTY7JLG94-BHHQgcc0pE9C1indmPl-4HF2YBYYoZGJxeN19RgiBvMQdjb569cBPd5PgSLBp6M_8y&wd=&eqid=e86bf6570000045b000000065bbc5d55" target="_blank" rel="noopener">正则表达式<em>校验<em>金额最多</em>两位小数的实数</em> - CSDN博客</a></h3><h3 id="JS比较两个数值的大小实例-javascript技巧-脚本之家"><a href="#JS比较两个数值的大小实例-javascript技巧-脚本之家" class="headerlink" title="JS比较两个数值的大小实例_javascript技巧_脚本之家"></a><a href="https://www.baidu.com/link?url=h5k8T-Yjh_yBzO8b47wzZiKYC5_gjRkIIjscdvX5HwRt9DiCJP84PSyX1B-xE7TY&wd=&eqid=e7dfe4fe000008a8000000065bbc5c57" target="_blank" rel="noopener"><em>JS比较</em>两个数值的<em>大小</em>实例_javascript技巧_脚本之家</a></h3><p><a href="https://www.jianshu.com/p/127dd30cf75f" target="_blank" rel="noopener">第9章Spring Boot开发者工具- 简书</a></p>
<p><a href="https://blog.csdn.net/yaomingyang/article/details/78241988" target="_blank" rel="noopener">spring boot项目中使用spring-boot-devtools模块进行代码热部署，避免 …</a></p>
<h1 id="自动部署"><a href="#自动部署" class="headerlink" title="自动部署"></a>自动部署</h1><p><a href="https://blog.csdn.net/java_and_json/article/details/79358764" target="_blank" rel="noopener">maven的wagon-maven-plugin插件详解</a></p>
<p><a href="https://blog.csdn.net/alibert/article/details/78912523" target="_blank" rel="noopener">Maven插件wagon-maven-plugin自动化部署</a></p>
<p><a href="https://ddnode.com/2015/04/14/git-modify-remote-responsity-url.html" target="_blank" rel="noopener">git修改远程仓库地址| Drupal 笔记</a></p>
<p><a href="https://blog.csdn.net/u011136197/article/details/79429000" target="_blank" rel="noopener">IDEA git修改远程仓库地址- bozi - CSDN博客</a></p>
<p><a href="https://segmentfault.com/a/1190000012930393" target="_blank" rel="noopener">使用 IDEA 远程 Debug</a></p>
<h1 id="Guns-Shiro放行接口"><a href="#Guns-Shiro放行接口" class="headerlink" title="Guns Shiro放行接口"></a>Guns Shiro放行接口</h1><p>com.stylefeng.guns.config.web</p>
<p>ShiroConfig</p>
<p>/<strong>Shiro的过滤器链</strong>/<br>@Bean</p>
<p>public ShiroFilterFactoryBean shiroFilter(DefaultWebSecurityManager securityManager) </p>
<h3 id="根据HttpServletRequest获取用户真实IP地址-YancyMauno-博客园"><a href="#根据HttpServletRequest获取用户真实IP地址-YancyMauno-博客园" class="headerlink" title="根据HttpServletRequest获取用户真实IP地址 - YancyMauno - 博客园"></a><a href="https://www.baidu.com/link?url=7Egil4dN2mNUQhI7NBE8uEJ_VrD8b6oOki6aH348AV5-N_scPoNWzVr-uXIlZZMpd9uwj8M2at5wf60treSKja&wd=&eqid=a891ee5300080693000000065bbef451" target="_blank" rel="noopener">根据<em>HttpServletRequest获取</em>用户真实<em>IP</em>地址 - YancyMauno - 博客园</a></h3><h3 id="Java-通过Request请求获取IP地址-大大的微笑的专栏-CSDN博客"><a href="#Java-通过Request请求获取IP地址-大大的微笑的专栏-CSDN博客" class="headerlink" title="Java 通过Request请求获取IP地址 - 大大的微笑的专栏 - CSDN博客"></a><a href="https://www.baidu.com/link?url=fe8H26WJ66zz5V-LtkLrcfnuj3koG-frpJZUN04BKr4kfWb3V4dzzZAB8Ac12L2fhjATILdKPlN-jdVLosUx0xq1ijzTJwflrsDIiDews_u&wd=&eqid=a891ee5300080693000000065bbef451" target="_blank" rel="noopener">Java 通过<em>Request</em>请求<em>获取IP</em>地址 - 大大的微笑的专栏 - CSDN博客</a></h3><h3 id="java替换指定url里的参数值"><a href="#java替换指定url里的参数值" class="headerlink" title="java替换指定url里的参数值"></a><a href="http://asflex.iteye.com/blog/2002047" target="_blank" rel="noopener">java替换指定url里的参数值</a></h3><p><a href="http://blog.csdn.net/qq_27093465/article/details/77449117" target="_blank" rel="noopener">IntelliJ IDEA使用教程 （总目录篇）</a></p>
<p><a href="https://blog.csdn.net/qq_27093465/article/details/64124330" target="_blank" rel="noopener">Intellij IDEA 2017 debug断点调试技巧与总结详解篇- 请叫我大师兄 …</a></p>
<p><a href="https://blog.csdn.net/zsg88/article/details/65045353" target="_blank" rel="noopener">mybatis xml中的数组</a></p>
<p>注意：collection=”list” 不是  collection=”#{list}”</p>
<h3 id="ps-ef和ps-aux的区别-CSDN博客"><a href="#ps-ef和ps-aux的区别-CSDN博客" class="headerlink" title="ps -ef和ps aux的区别 - CSDN博客"></a><a href="https://www.baidu.com/link?url=kpG0FIj0msBUz0C2TxI8m_vgSQ9KLde2HyBYDkqK1Bczmik5pF2Iwvg3pZr4x1vu1djJ7So4mHSHzZLk_aQxNENsUqvHjsnlZW7waE-9BYq&wd=&eqid=d140e50b0001bdd3000000065bc47265" target="_blank" rel="noopener"><em>ps</em> -<em>ef<em>和</em>ps</em> <em>aux<em>的</em>区别</em> - CSDN博客</a></h3><h3 id="linux-如何查看应用程序进程号、端口-Hurpe-CSDN博客"><a href="#linux-如何查看应用程序进程号、端口-Hurpe-CSDN博客" class="headerlink" title="linux 如何查看应用程序进程号、端口 - Hurpe - CSDN博客"></a><a href="https://www.baidu.com/link?url=DP0WLcCk-HdBm_Tt41FRfav0g2VysltZM-CDt2RnIepqU_GxCLpcDxAnDGriqTrA-0PQmBeG8AMqHpWcci1rCMLoUQ88CXzk_IFZFV_i-Mq&wd=&eqid=ae7a6afe00022137000000065bc4731a" target="_blank" rel="noopener"><em>linux</em> 如何<em>查看<em>应用</em>程序进程<em>号、</em>端口</em> - Hurpe - CSDN博客</a></h3><p><a href="https://blog.csdn.net/isea533/article/details/50281151" target="_blank" rel="noopener">Spring Boot 属性配置和使用</a></p>
<h3 id="SpringBoot进阶教程-第一篇-YML多文档块实现多环境配…-CSDN博客"><a href="#SpringBoot进阶教程-第一篇-YML多文档块实现多环境配…-CSDN博客" class="headerlink" title="SpringBoot进阶教程 | 第一篇:YML多文档块实现多环境配…_CSDN博客"></a><a href="https://www.baidu.com/link?url=UiQqy6aQw9SmSXshLbYzDsBpIUAvLuFWMnGIlYQO2pD4valwRrG9sJdHclbW_rep_t3o2t-Z2m44Yy7Z1SGjmh6y4YT_nLJi09EidPzcoze&wd=&eqid=b5277c960005d14b000000065bc5481f" target="_blank" rel="noopener">SpringBoot进阶教程 | 第一篇:<em>YML多</em>文档块实现<em>多环境</em>配…_CSDN博客</a></h3><p>注意配置项的顺序问题！</p>
<h3 id="js-定时器-菜鸟教程"><a href="#js-定时器-菜鸟教程" class="headerlink" title="js 定时器 | 菜鸟教程"></a><a href="https://www.baidu.com/link?url=muZp44FHk6oHM7dAinnPFnSgRQSxeIxUAwkAYU_iE0Q57APKPjVMnVXzqddVl-8yC0XIb2pNVM7kpHLNRHmlja&wd=&eqid=b4d230ad0000fbf4000000065bc5552c" target="_blank" rel="noopener"><em>js 定时器</em> | 菜鸟教程</a></h3><h3 id="Springboot循环依赖解决办法-dx125806的博客-CSDN博客"><a href="#Springboot循环依赖解决办法-dx125806的博客-CSDN博客" class="headerlink" title="Springboot循环依赖解决办法 - dx125806的博客 - CSDN博客"></a><a href="https://www.baidu.com/link?url=Yp5OmgS23RJvWWPVMIg1WYW6NRKjRhPfs2Lq5vSso0H7gF6ORtrRYuhnQyy4kzrw7TX4U4wTPIFFIesIKD6GqWOmWSLHluOiBFUJUhqC0vm&wd=&eqid=ee2d9bb70000356f000000065bc6d513" target="_blank" rel="noopener"><em>Springboot循环</em>依赖解决办法 - dx125806的博客 - CSDN博客</a></h3><h3 id="Mysql清空表-truncate-与删除表中数据-delete-的区别-x…-博客园"><a href="#Mysql清空表-truncate-与删除表中数据-delete-的区别-x…-博客园" class="headerlink" title="Mysql清空表(truncate)与删除表中数据(delete)的区别 - x…_博客园"></a><a href="https://www.baidu.com/link?url=oNXwQpejM6cZVr1z2zaNwSIUjnegIdF6KMyrUUmZ_37ddMn34ZuZAxYUUqr_IYeVS8pi4K-ykscv3ibOAntEja&wd=&eqid=ea21812400019ad0000000065bc718d9" target="_blank" rel="noopener"><em>Mysql清空表</em>(truncate)与删除表中数据(delete)的区别 - x…_博客园</a></h3><h3 id="Srping-MVC中Controller的void方法声明误区-yh-zeng2…-CSDN博客"><a href="#Srping-MVC中Controller的void方法声明误区-yh-zeng2…-CSDN博客" class="headerlink" title="Srping MVC中Controller的void方法声明误区 - yh_zeng2…_CSDN博客"></a><a href="https://www.baidu.com/link?url=cR2xRUnWgrxyNQBmdOaIC0NKg8Fl4Hfbsry_zy24LIPnlKlbNg2roOHgRnSGaKWF9KyORy0tMiXOF2_4YC9Ks2BazMURWpCOjVIe75hce8C&wd=&eqid=9667ad240001c75c000000065bc732ab" target="_blank" rel="noopener">Srping MVC中<em>Controller</em>的<em>void</em>方法声明误区 - yh_zeng2…_CSDN博客</a></h3><h3 id="springMVC对于controller处理方法返回值的可选类型-CSDN博客"><a href="#springMVC对于controller处理方法返回值的可选类型-CSDN博客" class="headerlink" title="springMVC对于controller处理方法返回值的可选类型 - CSDN博客"></a><a href="https://www.baidu.com/link?url=-obpxigJVzDGRTi2EEPE1brUBNCm8SJ7EwGvyUoKh_sk4y9q5pKgRf3-mJP1e1tfYLISQGIaD1oRRes1BSQwN6oEqd56zgsEIqllEaViPP7&wd=&eqid=af04f30a0001dcff000000065bc734d0" target="_blank" rel="noopener">springMVC对于<em>controller</em>处理方法<em>返回值</em>的可选类型 - CSDN博客</a></h3><h3 id="StringUtils中isEmpty-和isBlank的区别-程序猿001-博客园"><a href="#StringUtils中isEmpty-和isBlank的区别-程序猿001-博客园" class="headerlink" title="StringUtils中isEmpty 和isBlank的区别 - 程序猿001 - 博客园"></a><a href="https://www.baidu.com/link?url=GcV6MrUFbyKGU6NyUb5DozJj8-Z9WTr9x9iJ0H1sOLoA-iCugfMI2J-LymHjb-iqe_EHyDqoM0M9tTbzkmDQqa&wd=&eqid=a45e1b9a000487b5000000065bc749b7" target="_blank" rel="noopener"><em>StringUtils</em>中isEmpty 和<em>isBlank</em>的区别 - 程序猿001 - 博客园</a></h3><h1 id="初识Jsoup之解析HTML"><a href="#初识Jsoup之解析HTML" class="headerlink" title="初识Jsoup之解析HTML"></a><a href="https://www.cnblogs.com/boy1025/p/5040495.html" target="_blank" rel="noopener">初识Jsoup之解析HTML</a></h1><p><a href="https://blog.csdn.net/river_continent/article/details/74177781" target="_blank" rel="noopener">Jsoup处理Url与解析Html</a></p>
<h3 id="mysql格式化日期-kongweiteng-博客园"><a href="#mysql格式化日期-kongweiteng-博客园" class="headerlink" title="mysql格式化日期 - kongweiteng - 博客园"></a><a href="https://www.baidu.com/link?url=i2e1alTF2KIAhtWRVT6r6yS8HdObjl9Sb2h9LtslSEwjD5k_Q7pI1iAsht0ng9I9GhXax-v2ua1HYUc7KmvM2K&wd=&eqid=8068370800015d39000000065bc94e7d" target="_blank" rel="noopener"><em>mysql格式化日期</em> - kongweiteng - 博客园</a></h3><h3 id="架构设计之参数化与配置化"><a href="#架构设计之参数化与配置化" class="headerlink" title="架构设计之参数化与配置化"></a><a href="https://www.baidu.com/link?url=YxQXMY9oIfW3C8FYUFh7VVkyIHTIgfcUkK7zGBwzMDu_Slx2WANBArk2dN7gCjMGOyZ4szbC9xlExqy8fo3U7uYbAN1erM7TzPcDIv2QVf3&wd=&eqid=8de7d37d0000967b000000065bc9c302" target="_blank" rel="noopener"><em>架构设计之参数化与配置化</em></a></h3><p><a href="https://juejin.im/post/5ad82dbef265da503825b240" target="_blank" rel="noopener">java集合入门和深入学习，看这篇就差不多了- 掘金</a></p>
<p><a href="http://wiki.jikexueyuan.com/project/java-interview-bible/collection.html" target="_blank" rel="noopener">集合类- Java 面试宝典- 极客学院Wiki</a></p>
<p><a href="http://www.importnew.com/15980.html" target="_blank" rel="noopener">40个Java集合面试问题和答案- ImportNew</a></p>
<h3 id="Java给指定URL字符串添加值和获取URL字符串中的参数值-CSDN博客"><a href="#Java给指定URL字符串添加值和获取URL字符串中的参数值-CSDN博客" class="headerlink" title="Java给指定URL字符串添加值和获取URL字符串中的参数值 - CSDN博客"></a><a href="https://www.baidu.com/link?url=hRk6a_jFlupDS52vosD-Ah0EBYYkK-sJ_Ws0VUhbgDdN1XuxQo9SDS4MAaqNxQ8aCX8sS2toHOCr1t8ORHpNA5NAMNFHnS-_aeTeN4XAsV_&wd=&eqid=e57fafc000019250000000065bd13838" target="_blank" rel="noopener"><em>Java</em>给指定<em>URL</em>字符串添加值和<em>获取URL</em>字符串中的<em>参数</em>值 - CSDN博客</a></h3><h3 id="beetl中文文档"><a href="#beetl中文文档" class="headerlink" title="beetl中文文档"></a><a href="http://www.baidu.com/link?url=rG_uv1w1AckL7Z19v3xcqxm1s4-JDPkcSdzpQ2Q134kYXCCocU6X5E0eImqaTPAc" target="_blank" rel="noopener"><em>beetl</em>中文文档</a></h3><p><strong>千万不要</strong>在定界符里使用占位符号，因为占位符仅仅嵌在静态文本里，如下例子是<strong>错误</strong>例子</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;%</span><br><span class="line"><span class="keyword">var</span> a = <span class="string">"hi"</span>;</span><br><span class="line"><span class="keyword">var</span> c = $&#123;a&#125;+<span class="string">"beetl"</span>; <span class="comment">//应该是var c = a+"beetl"</span></span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>



<p><a href="https://blog.csdn.net/shiyangkai/article/details/79359512" target="_blank" rel="noopener">判断正整数的正则表达式</a></p>
<h3 id="js货币比较-CSDN博客"><a href="#js货币比较-CSDN博客" class="headerlink" title="js货币比较 - CSDN博客"></a><a href="https://www.baidu.com/link?url=2pwotvBC14dx928_j99U8J6TD-5Rg8ReFwh3e2Jl7UWKvAKwEcDlXm96eQRt7xCcJILKNtJ28_y2JG-dXnzO7_&wd=&eqid=98cb1de7000043c9000000065bd19269" target="_blank" rel="noopener"><em>js<em>货币</em>比较</em> - CSDN博客</a></h3><h3 id="js-判断字符串中是否包含某个字符串-草木物语-博客园"><a href="#js-判断字符串中是否包含某个字符串-草木物语-博客园" class="headerlink" title="js 判断字符串中是否包含某个字符串 - 草木物语 - 博客园"></a><a href="https://www.baidu.com/link?url=stryjYP3ebE2qQoSx620_1jX1miOlg3Dtgf4afbN5Fs14dMf7EU2jUeZ0FT8fFfsZDsxq2fgbucP443PcOnchq&wd=&eqid=9a40285700007a44000000065bd6b8a8" target="_blank" rel="noopener"><em>js</em> 判断<em>字符串<em>中是否</em>包含<em>某个</em>字符串</em> - 草木物语 - 博客园</a></h3><h3 id="这一次-让你彻底明白Java的值传递和引用传递"><a href="#这一次-让你彻底明白Java的值传递和引用传递" class="headerlink" title="这一次,让你彻底明白Java的值传递和引用传递!"></a><a href="http://mp.weixin.qq.com/s?src=11&timestamp=1540870119&ver=1213&signature=nNxk9l03HyGyOFlS0L-GyUlacRbp8ijYAxPbcpUrI9gQltfgN4Vcm-x2NyD9m9IW3no*CO5eFh-CHSbsKyQe4HS-zAX5r*3pCj35vm-JlgjX0srC8z9G-Dwm6R5Pw7rt&new=1" target="_blank" rel="noopener">这一次,让你彻底明白Java的<em>值传递和引用传递</em>!</a></h3><p><a href="https://blog.csdn.net/zhujianlin1990/article/details/51469359/" target="_blank" rel="noopener">java如何提取url里的域名</a></p>
<h3 id="SpringBoot定时任务及Cron表达式详解-51CTO-COM"><a href="#SpringBoot定时任务及Cron表达式详解-51CTO-COM" class="headerlink" title="SpringBoot定时任务及Cron表达式详解 - 51CTO.COM"></a><a href="https://www.baidu.com/link?url=vTmAX7vYQHFWkDGJCRWJ3Up49Hx59Uf_G_oOde7-FiH2ttYs6HdMJzPMGckG3JnNxXyx10T0ZZVII-M4Ioc1ia&wd=&eqid=ab8c7d490005cb9a000000065bd90e37" target="_blank" rel="noopener"><em>SpringBoot定时任务</em>及<em>Cron</em>表达式详解 - 51CTO.COM</a></h3><p><a href="https://blog.csdn.net/luckyxl029/article/details/81282815" target="_blank" rel="noopener">@Transactional注解和synchronized关键字不能同时使用</a></p>
<h3 id="MySQL中TIMESTAMPDIFF和TIMESTAMPADD函数的用法-欣宇…-CSDN博客"><a href="#MySQL中TIMESTAMPDIFF和TIMESTAMPADD函数的用法-欣宇…-CSDN博客" class="headerlink" title="MySQL中TIMESTAMPDIFF和TIMESTAMPADD函数的用法 - 欣宇…_CSDN博客"></a><a href="https://www.baidu.com/link?url=uXCVmz0SJCfXkCtH4ZSf4oVwWd41u-mQDG2O3-TVDT3_WMIEJFPKQ88rL3kq2M4D0Z5Jtgp_2H6dBSjIWsX51SOHDBfbr62P1IcrzYhDFwC&wd=&eqid=ad9b8c0e0002961a000000065bd97208" target="_blank" rel="noopener"><em>MySQL<em>中</em>TIMESTAMPDIFF<em>和TIMESTAMPADD函数</em>的用法</em> - 欣宇…_CSDN博客</a></h3><p><a href="https://blog.csdn.net/wushuchu/article/details/52036753" target="_blank" rel="noopener">并发页面访问量统计简单实现</a></p>
<h1 id="PV统计优化设计"><a href="#PV统计优化设计" class="headerlink" title="PV统计优化设计"></a><a href="https://segmentfault.com/a/1190000012250446" target="_blank" rel="noopener">PV统计优化设计</a></h1><h3 id="storm高并发UV统计"><a href="#storm高并发UV统计" class="headerlink" title="storm高并发UV统计"></a><a href="http://javafu.iteye.com/blog/2374288" target="_blank" rel="noopener">storm高并发UV统计</a></h3><p><a href="https://blog.csdn.net/u014203449/article/details/79330811" target="_blank" rel="noopener">权限管理(项目和源码)：一.springboot与shiro整合</a></p>
<h3 id="MySql修改时间字段-要争气-CSDN博客"><a href="#MySql修改时间字段-要争气-CSDN博客" class="headerlink" title="MySql修改时间字段 - 要争气 - CSDN博客"></a><a href="https://www.baidu.com/link?url=BPFLwq-qAxMd1RCKoav6hUc5wNaLg85MTzc48KZjFa3QDiqpxvfis2PSCwqMlBBViFSAVC-iCzftAeimH8CCLCsE7wNFsOHyrRH-VeDEXqW&wd=&eqid=8103d22a000350a4000000065bdaa05d" target="_blank" rel="noopener"><em>MySql修改时间</em>字段 - 要争气 - CSDN博客</a></h3><p><a href="https://www.oschina.net/question/146385_54132" target="_blank" rel="noopener">在遍历List时，对List里的对象进行remove()，此操作会改变List的大小 …</a></p>
<p><a href="https://www.jianshu.com/p/747b30ba5b4c" target="_blank" rel="noopener">Iterator/foreach遍历list时，删除元素的报错问题- 简书</a></p>
<h3 id="java中int与Integer-用-比较详解-xingkongdeasi的专栏-CSDN博客"><a href="#java中int与Integer-用-比较详解-xingkongdeasi的专栏-CSDN博客" class="headerlink" title="java中int与Integer*用==*比较详解 - xingkongdeasi的专栏 - CSDN博客"></a><a href="https://www.baidu.com/link?url=vGTMnPV9Z8zzXlRVbWx8BNtYqs4ewl5PQ30mgRIXTJNdho7t-FOmyxNBuocT5ORYYaYZksG4J3bQ3Y_l8xgthx9QN-ZfrENMwWXU_T4kdf7&wd=&eqid=8dde48a90001b4f3000000065bdbc568" target="_blank" rel="noopener">java中int与<em>Integer*用</em>==*比较详解 - xingkongdeasi的专栏 - CSDN博客</a></h3><h3 id="树状结构Java模型、层级关系Java模型、上下级关系Java模…-博客园"><a href="#树状结构Java模型、层级关系Java模型、上下级关系Java模…-博客园" class="headerlink" title="树状结构Java模型、层级关系Java模型、上下级关系Java模…_博客园"></a><a href="https://www.baidu.com/link?url=SGgkvID5dEcrH0gsYz-52r6JJSG868lF51VRPWnENMb0TEDYE604jPqr78gYy6eTo1QxudHbQvUJm8svl5jnVq&wd=&eqid=cabb0cd600014072000000065bdbeb1e" target="_blank" rel="noopener">树状结构Java<em>模型</em>、层级<em>关系</em>Java<em>模型</em>、<em>上下级关系</em>Java模…_博客园</a></h3><h3 id="Java关于数据结构的实现-树-郭孝星-CSDN博客"><a href="#Java关于数据结构的实现-树-郭孝星-CSDN博客" class="headerlink" title="Java关于数据结构的实现:树 - 郭孝星 - CSDN博客"></a><a href="https://www.baidu.com/link?url=NeOhiINyYatXzS1t7_YNe311TEXCAOFDBhmnyKhsPlI8qnlR1qPCYn6JyRgeR7OnE-FIANKh2FxWdbR3Ne8svW--RCVCbfoTz1F0cSqegUy&wd=&eqid=b500fb3d00014d63000000065bdbec29" target="_blank" rel="noopener"><em>Java</em>关于数据结构的实现:树 - 郭孝星 - CSDN博客</a></h3><h3 id="input-onclick事件实现页面跳转-Tiger覃-博客园"><a href="#input-onclick事件实现页面跳转-Tiger覃-博客园" class="headerlink" title="input onclick事件实现页面跳转 - Tiger覃 - 博客园"></a><a href="https://www.baidu.com/link?url=oYzJOFiJE67ugOW2KTdehG_8orftfT3u1odJM0DsEsH9GAhjPRWfUkMc5db8FEJc4zgBTZ3kW8z6GIUvsF8WxsMgbbtFoPhTgpqptMpsQwu&wd=&eqid=e9fe19b50000435d000000065be0ff64" target="_blank" rel="noopener"><em>input</em> onclick事件实现<em>页面跳转</em> - Tiger覃 - 博客园</a></h3><h3 id="CountDownLatch的简单理解-joenqc的博客-CSDN博客"><a href="#CountDownLatch的简单理解-joenqc的博客-CSDN博客" class="headerlink" title="CountDownLatch的简单理解 - joenqc的博客 - CSDN博客"></a><a href="https://www.baidu.com/link?url=0l1I7uEoVhFQe9pZcS1PVWaDxuWxmhPHjxx4h3OBV8e1EwNuHjbXiiBk0-Qj4Nxi4645xYbFFJGo_vtsALWv3_&wd=&eqid=f865177b0007037f000000065be188f4" target="_blank" rel="noopener"><em>CountDownLatch</em>的简单理解 - joenqc的博客 - CSDN博客</a></h3><p><a href="https://blog.csdn.net/zilie972803341/article/details/78444703" target="_blank" rel="noopener">MySql数据库：数据查重、去重的实现</a></p>
<h3 id="宝塔linux主机面板查看网站日志记录及分析网站日志的方法-…"><a href="#宝塔linux主机面板查看网站日志记录及分析网站日志的方法-…" class="headerlink" title="宝塔linux主机面板查看网站日志记录及分析网站日志的方法 - …"></a><a href="https://www.baidu.com/link?url=_9LBpJL0trtgpfUZUMzJLBAQyiBhJKgiWGIhoRmQQHQ8ynGOolAo2-mm2XAYA2UdSjbcfiK1-8oCTeC135e-c_&wd=&eqid=e873bd8e00067a2b000000065be2960d" target="_blank" rel="noopener"><em>宝塔linux</em>主机面板查看网站<em>日志</em>记录及分析网站<em>日志</em>的方法 - …</a></h3><h3 id="在intellij-idea-中不用git-解除关联-Alex-81D的博客-CSDN博客"><a href="#在intellij-idea-中不用git-解除关联-Alex-81D的博客-CSDN博客" class="headerlink" title="在intellij idea 中不用git 解除关联 - Alex_81D的博客 - CSDN博客"></a><a href="https://www.baidu.com/link?url=wgWYPlRgfNfuo_VzzyAjVSZURujkQJvAMwxBMM5x5YYT37yYCilt1r3PR3HELxMN4yv9wZEJGIzYo8IpKmnkWhl7zSb9QjyWiCeVzN8aM9W&wd=&eqid=e77c4020000b209f000000065be2b70b" target="_blank" rel="noopener">在intellij <em>idea</em> 中不用<em>git</em> 解除关联 - Alex_81D的博客 - CSDN博客</a></h3><h1 id="使用-Google-Guava-美化你的-Java-代码"><a href="#使用-Google-Guava-美化你的-Java-代码" class="headerlink" title="使用 Google Guava 美化你的 Java 代码"></a><a href="https://my.oschina.net/leejun2005/blog/172328" target="_blank" rel="noopener">使用 Google Guava 美化你的 Java 代码</a></h1><p><a href="http://marklodato.github.io/visual-git-guide/index-zh-cn.html#merge" target="_blank" rel="noopener">图解Git</a></p>
<p><a href="https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000" target="_blank" rel="noopener">廖雪峰Git教程</a></p>
<p><a href="https://git-scm.com/book/en/v2" target="_blank" rel="noopener">Pro Git book</a></p>
<h1 id="【原】js实现复制到剪贴板功能，兼容所有浏览器"><a href="#【原】js实现复制到剪贴板功能，兼容所有浏览器" class="headerlink" title="【原】js实现复制到剪贴板功能，兼容所有浏览器"></a><a href="https://www.cnblogs.com/PeunZhang/p/3324727.html" target="_blank" rel="noopener">【原】js实现复制到剪贴板功能，兼容所有浏览器</a></h1><p><a href="https://clipboardjs.com/" target="_blank" rel="noopener">clipboard.js 将文本复制到剪贴板的现代方法</a></p>
<h1 id="用jmeter进行多用户并发压力测试"><a href="#用jmeter进行多用户并发压力测试" class="headerlink" title="用jmeter进行多用户并发压力测试"></a><a href="https://www.cnblogs.com/opps/p/4538523.html" target="_blank" rel="noopener">用jmeter进行多用户并发压力测试</a></h1><p><a href="https://blog.csdn.net/tengxing007/article/details/83186121" target="_blank" rel="noopener">Jmeter5.0脚本录制</a></p>
<p><a href="http://mp.baomidou.com/" target="_blank" rel="noopener">MyBatis-Plus</a></p>
<h3 id="ssm框架中-mybatis的sql语句日志输出-逸致-CSDN博客"><a href="#ssm框架中-mybatis的sql语句日志输出-逸致-CSDN博客" class="headerlink" title="ssm框架中,mybatis的sql语句日志输出 - 逸致 - CSDN博客"></a><a href="https://www.baidu.com/link?url=B0sVgB3R2sDkWvBb2S9gOaU2lWLHGRMkqAfAD6eRtHVCAvQicG7imNGE7rp_X03h3Am375ReHwjNjIpPrRlPjE5OtTOYIN3cakJKkLWZsFC&wd=&eqid=f2c9eefb0001f4f1000000065be65670" target="_blank" rel="noopener">ssm框架中,<em>mybatis</em>的sql语句<em>日志</em>输出 - 逸致 - CSDN博客</a></h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看nginx</span></span><br><span class="line">netstat -n | awk '/^tcp/ &#123;++S[$NF]&#125; END &#123;for(a in S) print a, S[a]&#125;'</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 查看tomcat</span></span><br><span class="line">netstat -antp | grep 9333 | grep ESTABLISHED -c</span><br></pre></td></tr></table></figure>



<p><a href="https://blog.csdn.net/u011328417/article/details/73610930" target="_blank" rel="noopener">MySQL更新某个字段的值为原来的值加1 (非auto_increament) - 全国花 …</a></p>
<p><a href="https://blog.csdn.net/fly910905/article/details/79501896" target="_blank" rel="noopener">Idea:Git的常用菜单操作和常用命令【含分支创建、检出、提交、合并】</a></p>
<p><a href="http://blog.didispace.com/springbootasync-2/" target="_blank" rel="noopener">Spring Boot使用@Async实现异步调用：自定义线程池</a></p>
<p>handler有四个选择</p>
<ol>
<li>ThreadPoolExecutor.AbortPolicy() ：抛出java.util.concurrent.RejectedExecutionException异常 </li>
<li>ThreadPoolExecutor.CallerRunsPolicy() : 重试添加当前的任务，他会自动重复调用execute()方法</li>
<li>ThreadPoolExecutor.DiscardOldestPolicy() : 抛弃旧的任务 </li>
<li>ThreadPoolExecutor.DiscardPolicy() : 抛弃当前的任务</li>
</ol>
<p><a href="https://blog.csdn.net/xusheng_Mr/article/details/78771746" target="_blank" rel="noopener">springboot 在idea中实现热部署</a></p>
<p><a href="https://blog.csdn.net/gnail_oug/article/details/80252188" target="_blank" rel="noopener">Spring Boot教程(十二)：Spring Boot集成热部署插件devtools</a></p>
<p><a href="https://blog.csdn.net/gld824125233/article/details/52842914" target="_blank" rel="noopener">Jmeter使用CSV Data Set Config参数化数据不重复的多次循环执行（实现多用户多次抽奖功能）</a></p>
<p><a href="https://blog.csdn.net/daguanjia11/article/details/80059002" target="_blank" rel="noopener">spring boot中返回httpcode和错误处理</a></p>
<h3 id="去掉文本框前后的空格-JS-JQuery-大da脸-博客园"><a href="#去掉文本框前后的空格-JS-JQuery-大da脸-博客园" class="headerlink" title="去掉文本框前后的空格(JS+JQuery) - 大da脸 - 博客园"></a><a href="https://www.baidu.com/link?url=Zy51saLB8mzLu-M1idHvWODW1SMhrHgxX9xcXB-lwOFAuwfN2Cc2lIK69emmjS9R74KidhavKH2jEFMlDNr_6q&wd=&eqid=f8aef5540001df72000000065bed0bb1" target="_blank" rel="noopener"><em>去掉文本框前后<em>的</em>空格</em>(JS+<em>JQuery</em>) - 大da脸 - 博客园</a></h3><p><a href="https://blog.csdn.net/qq_26525215/article/details/53726690" target="_blank" rel="noopener">【问题解决】IDEA右键选择new新文件的时候没有JSP文件选项解决</a></p>
<h3 id="IntelliJ-IDEA手动配置连接MySQL数据库-竹山一叶-博客园"><a href="#IntelliJ-IDEA手动配置连接MySQL数据库-竹山一叶-博客园" class="headerlink" title="IntelliJ IDEA手动配置连接MySQL数据库 - 竹山一叶 - 博客园"></a><a href="https://www.baidu.com/link?url=w8UYQ5qOipuf81w43M61rS-Tu7g39vicZrhKbl0kZTjGLehncnq9nv_YaxSfgQROXUhxZfPQW9OCWW6zkz6P4_&wd=&eqid=ab6c433600001335000000065bf2c093" target="_blank" rel="noopener">IntelliJ <em>IDEA<em>手动配置连接MySQL</em>数据库</em> - 竹山一叶 - 博客园</a></h3><p><a href="https://blog.csdn.net/weixin_40845165/article/details/80780159" target="_blank" rel="noopener">java.sql.SQLException: The server time zone value ‘ÖÐ¹ú±ê×¼Ê±¼ 解决方案</a></p>
<h1 id="idea中xml打开方式变成file，代码变成灰色"><a href="#idea中xml打开方式变成file，代码变成灰色" class="headerlink" title="idea中xml打开方式变成file，代码变成灰色"></a><a href="https://www.cnblogs.com/psyche61/p/9328224.html" target="_blank" rel="noopener">idea中xml打开方式变成file，代码变成灰色</a></h1><h3 id="Builder-与-NoArgsConstructor-Lombok-N-CE波-博客园"><a href="#Builder-与-NoArgsConstructor-Lombok-N-CE波-博客园" class="headerlink" title="@Builder*与@NoArgsConstructor* | Lombok - N!CE波 - 博客园"></a><a href="https://www.baidu.com/link?url=aLHwIX1c2Ig2c-Ov4Tfxlni1uGeF3N_uqpD5gKcNWcBGnnreMaFQIIdy5Ks8ixInMsAvCo_ljhF7nbLFM31eOa&wd=&eqid=d531bd3a00001e81000000065bf5620d" target="_blank" rel="noopener"><em>@Builder*与</em>@NoArgsConstructor* | <em>Lombok</em> - N!CE波 - 博客园</a></h3><h3 id="Lombok-Builder-和-NoArgsConstructor-冲突-编程之路-Segment…"><a href="#Lombok-Builder-和-NoArgsConstructor-冲突-编程之路-Segment…" class="headerlink" title="Lombok@Builder*和@NoArgsConstructor*冲突 - 编程之路 - Segment…"></a><a href="https://www.baidu.com/link?url=EMpP0owriCRvISKN7AHK6IeU1L-T5_xVBDLq6rzl_6D9jTTQS0gp80lGcL9V0Sb2XJo46vAfUS9FVyO05mLGPK&wd=&eqid=d531bd3a00001e81000000065bf5620d" target="_blank" rel="noopener"><em>Lombok@Builder*和</em>@NoArgsConstructor*冲突 - 编程之路 - Segment…</a></h3><p><a href="https://stackoverflow.com/questions/50696100/difference-in-resource-and-autowired" target="_blank" rel="noopener">spring - Difference in @Resource and @Autowired - Stack Overflow</a></p>
<h3 id="BootStrapTable的JS封装-Javascript教程-JS教程-技术…-红黑联盟"><a href="#BootStrapTable的JS封装-Javascript教程-JS教程-技术…-红黑联盟" class="headerlink" title="BootStrapTable的JS封装 - Javascript教程_JS教程_技术…_红黑联盟"></a><a href="https://www.baidu.com/link?url=tLr8fkTmBXPOVG_tw6NwdKgHZkFhSdtzInfhK-KeDFoSaFMsMNp550nPW7YnSRINAomUxbVbnp6AhiX0NryKda&wd=&eqid=90486ce000010aa5000000065bf766eb" target="_blank" rel="noopener"><em>BootStrapTable</em>的<em>JS</em>封装 - Javascript教程_<em>JS</em>教程_技术…_红黑联盟</a></h3><h1 id="JS组件系列——表格组件神器：bootstrap-table"><a href="#JS组件系列——表格组件神器：bootstrap-table" class="headerlink" title="JS组件系列——表格组件神器：bootstrap table"></a><a href="https://www.cnblogs.com/landeanfen/p/4976838.html" target="_blank" rel="noopener">JS组件系列——表格组件神器：bootstrap table</a></h1><p><a href="https://blog.csdn.net/q_linchao/article/details/79700807" target="_blank" rel="noopener">Spring Boot 读取配置文件到静态工具类</a></p>
<p><a href="https://blog.csdn.net/kongrun12/article/details/76246369" target="_blank" rel="noopener">spring boot 静态变量注入配置文件</a></p>
<p><a href="https://blog.csdn.net/testcs_dn/article/details/78799203" target="_blank" rel="noopener">Java 逐行读写 TXT 文件</a></p>
<p><a href="http://link.zhihu.com/?target=https%3A//github.com/whinc/blog/issues/7">程序变量命名的几种叫法</a></p>
<p>查询MYSQl数据表中的最后一条记录</p>
<p><code>SELECT * from tb where id = (SELECT max(id) FROM tb);</code></p>
<p><a href="https://projectlombok.org/features/Cleanup" target="_blank" rel="noopener">Lombok-@Cleanup</a></p>
<p><a href="https://www.cnblogs.com/12kk/p/8663408.html" target="_blank" rel="noopener">httpclient中post提交json和map参数</a></p>
<p><a href="https://www.cnblogs.com/jingmoxukong/p/7755643.html" target="_blank" rel="noopener">WebSocket 详解教程</a></p>
<p><a href="https://blog.csdn.net/Solar24/article/details/80248683" target="_blank" rel="noopener">前端数组 后端java mvc list 接收</a></p>
<p><a href="http://www.woshipm.com/pd/478366.html" target="_blank" rel="noopener">支付系统设计：绑卡、签约和身份验证（四）</a></p>
<h3 id="java中的replace和replaceAll的区别-人非生而知之者-…-CSDN博客"><a href="#java中的replace和replaceAll的区别-人非生而知之者-…-CSDN博客" class="headerlink" title="java中的replace和replaceAll的区别 - 人非生而知之者,…_CSDN博客"></a><a href="https://www.baidu.com/link?url=KWrlaOBn0pZF_aJ1gsyu6IHuAfuBDBnzfjxj-QL0GddeCOZa2H06omyKVZfV9FsWbOOAFCjYDF0yWI0qW8VBHeE2h72a0lpvtsSs0Dx9qTm&wd=&eqid=fb2a80c90003e1a1000000065c0759b3" target="_blank" rel="noopener">java中的<em>replace和replaceAll</em>的区别 - 人非生而知之者,…_CSDN博客</a></h3><p><a href="https://github.com/mybatis/mybatis-3/blob/master/src/test/java/org/apache/ibatis/submitted/primitive_result_type/ProductMapper.xml" target="_blank" rel="noopener">mybatis-3/ProductMapper.xml at master · mybatis/mybatis-3 · GitHub</a></p>
<p><a href="https://blog.csdn.net/qing_gee/article/details/50518795" target="_blank" rel="noopener">Mybatis+0+null，小问题引发的血案</a></p>
<p><a href="https://blog.csdn.net/john1337/article/details/70230563" target="_blank" rel="noopener">mybatis把整数0识别为null</a></p>
<p><a href="https://stackoverflow.com/questions/28216251/bigdecimal-scale-not-working" target="_blank" rel="noopener">java - BigDecimal scale not working - Stack Overflow</a></p>
<p><a href="https://www.baidu.com/link?url=bssC1KBkxlxbFa-n31GkX0_WuWK-4Q3kgadMorX0rQ4YlVP2NR-jD32D7vjCfpHL&wd=&eqid=c75720540000b303000000065c08c05c" target="_blank" rel="noopener"><em>BigDecimal.setScale</em>用法总结 - 简书</a></p>
<p><a href="https://blog.csdn.net/DOCALLEN/article/details/62050608" target="_blank" rel="noopener">layer：子父之间的数据传递</a></p>
<p><a href="https://blog.csdn.net/u012110719/article/details/48420693" target="_blank" rel="noopener">JS函数修改html的元素内容，及修改属性内容</a></p>
<p><a href="https://blog.csdn.net/Yeomer/article/details/79582815" target="_blank" rel="noopener">JavaScript 运算出现多位小数的解决办法</a></p>
<p><a href="https://www.cnblogs.com/SuperLiangG/p/5964439.html" target="_blank" rel="noopener">js float浮点数计算精度问题</a></p>
<p>MySQL时间操作</p>
<p><code>SELECT amount, orderid, date_add(order_time, interval 16 hour) &#39;order_time&#39;, date_add(pay_time, interval 16 hour) &#39;pay_time&#39; FROM pay_record WHERE cpid = 1003 and ispay = 2</code></p>
<p><a href="https://blog.csdn.net/guanmjie/article/details/4458604" target="_blank" rel="noopener">BigDecimal不整除异常- hello world - CSDN博客</a></p>
<p><a href="https://forum.fastadmin.net/thread/1580" target="_blank" rel="noopener">bootstrap-Table 统计 求和 footerFormatter 分享</a></p>
<p><a href="https://forum.fastadmin.net/thread/1816" target="_blank" rel="noopener">bootstrap-Table 统计 求和 footerFormatter PC WAP 手机端 安卓 等各种不显示 版面崩坏的解决办法</a></p>
<p><a href="https://segmentfault.com/a/1190000016620289" target="_blank" rel="noopener">Java异步编程——深入源码分析FutureTask</a></p>
<p><a href="https://blog.csdn.net/lichuangcsdn/article/details/80862172" target="_blank" rel="noopener">IDEA Mybatis Plugin插件（方便在Dao接口和Mappper XML文件之间进行切换）</a></p>
<p><a href="https://blog.csdn.net/James_qqh/article/details/60325983" target="_blank" rel="noopener">判断一个BigDecimal数值是否为零</a></p>
<p><a href="https://blog.csdn.net/wangziqiangai/article/details/51245246" target="_blank" rel="noopener">MySQL查询一小时之内的数据</a></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectTotalCountByChannelId"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span> <span class="attr">resultType</span>=<span class="string">"BigDecimal"</span>&gt;</span></span><br><span class="line">     select count(*)</span><br><span class="line">     from pay_record</span><br><span class="line">     where channel_id = #&#123;channelId&#125;</span><br><span class="line">     and order_time &gt; DATE_SUB(NOW(), INTERVAL 1 HOUR)</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p><a href="https://formulahendry.github.io/2016/12/04/hexo-ci/#" target="_blank" rel="noopener">Hexo的版本控制与持续集成</a></p>
<p><a href="https://github.com/tommy351/tommy351.github.io/blob/source/.travis.yml" target="_blank" rel="noopener">Hexo作者的.travis.yml配置</a></p>
<p>78ce4df05e1e44bec02266d66758943d3cedf4de</p>
<p><img src="https://i.loli.net/2018/12/14/5c13287562f08.jpg" alt=""></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 提交本地hexo分支到远程仓库的hexo分支</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> git push origin hexo:hexo</span></span><br></pre></td></tr></table></figure>

<p><a href="https://www.itfanr.cc/2017/08/09/using-travis-ci-automatic-deploy-hexo-blogs/" target="_blank" rel="noopener">使用Travis CI自动部署Hexo博客</a></p>
<p><a href="https://notes.iissnan.com/2016/publishing-github-pages-with-travis-ci/" target="_blank" rel="noopener">使用 Travis CI 自动更新 GitHub Pages</a></p>
<p><a href="http://magicse7en.github.io/2016/03/27/travis-ci-auto-deploy-hexo-github/" target="_blank" rel="noopener">使用Travis CI自动构建hexo博客</a></p>
<p>「<a href="https://snatix.com/categories/Hexo%E5%8D%9A%E5%AE%A2%E9%87%8D%E5%90%AF%E8%AE%A1%E5%88%92/" target="_blank" rel="noopener">Hexo博客重启计划</a>」</p>
<p><a href="https://reuixiy.github.io/technology/computer/computer-aided-art/2017/06/09/hexo-next-optimization.html" target="_blank" rel="noopener">打造个性超赞博客Hexo+NexT+GitHubPages的超深度优化| reuixiy</a></p>
<p><a href="https://godweiyang.com/2018/04/13/hexo-blog/" target="_blank" rel="noopener">https://godweiyang.com/2018/04/13/hexo-blog/</a></p>
<p><a href="https://liolok.github.io/Hexo-Travis-CI/" target="_blank" rel="noopener">Hexo + Travis CI 博客管理</a></p>
<p>git rm –cached next</p>
<p><a href="https://www.jianshu.com/p/0f3fdf6c0d5f" target="_blank" rel="noopener">Windows系统下更新npm和node</a></p>
<p>node的n模块并不支持windows，所以以上命令只能算是linux等系统下的更新命令。</p>
<p><a href="https://blog.csdn.net/junhuahouse/article/details/23087755" target="_blank" rel="noopener">怎么进行：URLEncode编码 与 URLDecode解码</a></p>
<p><a href="https://meyerweb.com/eric/tools/dencoder/" target="_blank" rel="noopener">URL在线编解码</a></p>
<p><a href="https://blog.csdn.net/yelllowcong/article/details/79711429" target="_blank" rel="noopener">Springboot之接收json字符串的两种方式-yellowcong</a></p>
<p><a href="https://blog.csdn.net/wangjun5159/article/details/47781301" target="_blank" rel="noopener">postman 发送json请求</a></p>
<p><a href="https://www.bejson.com/jsoneditoronline/" target="_blank" rel="noopener">json在线编辑</a></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.dubbo.pay.modular.api.chanel.channel4.notify;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSONObject;</span><br><span class="line"><span class="keyword">import</span> com.dubbo.pay.modular.api.chanel.channel4.consts.Channel4Constent;</span><br><span class="line"><span class="keyword">import</span> com.dubbo.pay.modular.api.service.IPayNotifyService;</span><br><span class="line"><span class="keyword">import</span> com.dubbo.pay.modular.api.utils.PayDigestUtil;</span><br><span class="line"><span class="keyword">import</span> com.dubbo.pay.modular.api.utils.ResponseUtil;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.StringUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestBody;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMethod;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>：</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Auther</span>： libo</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span>： 2018/12/8:17:39</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Channel4NotifyController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    IPayNotifyService payNotifyService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * status     订单状态,1:成功，其他失败</span></span><br><span class="line"><span class="comment">     * customerid 商户编号</span></span><br><span class="line"><span class="comment">     * sdpayno    平台订单号</span></span><br><span class="line"><span class="comment">     * sdorderno  商户订单号</span></span><br><span class="line"><span class="comment">     * total_fee  交易金额</span></span><br><span class="line"><span class="comment">     * paytype    支付类型</span></span><br><span class="line"><span class="comment">     * sign       MD5加密验证</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">"/pnotify/channel4"</span>, method = RequestMethod.POST, produces = <span class="string">"application/json;charset=UTF-8"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">payNotifyRes</span><span class="params">(@RequestBody JSONObject param, HttpServletResponse response)</span> </span>&#123;</span><br><span class="line">        String status = param.getString(<span class="string">"status"</span>);</span><br><span class="line">        String sdorderno = param.getString(<span class="string">"sdorderno"</span>);</span><br><span class="line">        String customerid = param.getString(<span class="string">"customerid"</span>);</span><br><span class="line">        String sdpayno = param.getString(<span class="string">"sdpayno"</span>);</span><br><span class="line">        String totalFee = param.getString(<span class="string">"total_fee"</span>);</span><br><span class="line">        String paytype = param.getString(<span class="string">"paytype"</span>);</span><br><span class="line">        String sign = param.getString(<span class="string">"sign"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> payResult = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//解析参数</span></span><br><span class="line">            log.info(<span class="string">"====== 通道4：接收支付回调通知开始解析参数。param=&#123;&#125; ======"</span>, param);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (sdorderno == <span class="keyword">null</span> || status == <span class="keyword">null</span>) &#123;</span><br><span class="line">                log.error(<span class="string">"====== 通道4：回调数据解析失败,sdorderno=&#123;&#125;,status=&#123;&#125; ======"</span>, sdorderno, status);</span><br><span class="line">                ResponseUtil.write(response, <span class="string">"回调数据解析失败"</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            String signStr = <span class="string">"customerid="</span> + customerid + <span class="string">"&amp;status="</span> + status + <span class="string">"&amp;sdpayno="</span> + sdpayno + <span class="string">"&amp;sdorderno="</span> + sdorderno + <span class="string">"&amp;total_fee="</span> + totalFee + <span class="string">"&amp;paytype="</span> + paytype + <span class="string">"&amp;"</span> + Channel4Constent.KEY;</span><br><span class="line">            <span class="keyword">if</span> (StringUtils.isBlank(sign) || !sign.equals(PayDigestUtil.md5(signStr))) &#123;</span><br><span class="line">                log.error(<span class="string">"====== 通道4：签名验证失败。签名参数：&#123;&#125;，md5加密后实际值：&#123;&#125; ======"</span>, sign, PayDigestUtil.md5(signStr));</span><br><span class="line">                ResponseUtil.write(response, <span class="string">"签名验证失败"</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (<span class="string">"1"</span>.equals(status)) &#123;</span><br><span class="line">                payResult = <span class="number">1</span>;</span><br><span class="line">                log.info(<span class="string">"====== 支付成功 ======"</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (payNotifyService.payHandler(sdorderno, payResult)) &#123;</span><br><span class="line">                ResponseUtil.write(response, <span class="string">"success"</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            log.error(<span class="string">"====== 通道4：回调异常。e=&#123;&#125; ======"</span>, e);</span><br><span class="line">        &#125;</span><br><span class="line">        ResponseUtil.write(response, <span class="string">"-1"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<p><a href="http://imshuai.com/change-linux-timezone/" target="_blank" rel="noopener">Linux查看和修改时区 - 毛帅的博客</a></p>
<p><a href="https://blog.csdn.net/halfclear/article/details/77573956" target="_blank" rel="noopener">Java中的Date和时区转换</a></p>
<p>Date里存放的毫秒数是与时区无关的,Date对象里存的是自格林威治时间（ GMT）1970年1月1日0点至Date对象所表示时刻所经过的毫秒数。</p>
<p>Sysytem.out.println函数在打印时间时，会取操作系统当前所设置的时区，然后根据这个时区将同毫秒数解释成该时区的时间。</p>
<p><a href="https://blog.csdn.net/Mr_linjw/article/details/49849691" target="_blank" rel="noopener">Mysql 更新时间（加上或者减去一段时间）</a></p>
<p><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html" target="_blank" rel="noopener">Java List API</a></p>
<p><a href="https://blog.csdn.net/qq754772661/article/details/81452131" target="_blank" rel="noopener">win10更新后 chrome内核浏览器总是打开网页一直加载 甚至打不开 解决方法</a></p>
<p><a href="https://www.cnblogs.com/wlandwl/p/bootstrap_table.html" target="_blank" rel="noopener">新的表格展示利器 Bootstrap Table Ⅰ</a></p>
<p><a href="https://github.com/Snailclimb/JavaGuide" target="_blank" rel="noopener">【Java学习+面试指南】 一份涵盖大部分Java程序员所需要掌握的核心知识。</a></p>
<p><a href="https://blog.csdn.net/qq_37599827/article/details/78731437" target="_blank" rel="noopener">js比较两个日期大小</a></p>
<p>@RequestParam 可以使用方法来填充默认值吗？？？</p>
<p>分析<code>DateUtil.offsetMinute()</code></p>
<p>位置：支付后台<code>com.dubbo.pay.modular.pay.controller.list()</code></p>
<p>总结Guns后台分页逻辑</p>
<p><a href="https://blog.csdn.net/xuanzhangran/article/details/60329357" target="_blank" rel="noopener">mybatis中大于等于小于等于的写法- chenxingde的博客- CSDN博客</a></p>
<p>什么是js中的闭包？</p>
<p><a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html" target="_blank" rel="noopener">学习Javascript闭包（Closure） - 阮一峰的网络日志</a></p>
<p><a href="https://blog.csdn.net/catoop/article/details/50501676" target="_blank" rel="noopener">Spring Boot Controller - 小单的博客专栏- CSDN博客 - CSDN Blog</a></p>
<p><a href="https://blog.csdn.net/isea533/article/details/50412212" target="_blank" rel="noopener">Spring Boot 静态资源处理</a></p>
<p><a href="https://blog.csdn.net/wangb_java/article/details/71775637" target="_blank" rel="noopener">spring boot(4)-html和templates</a></p>
<p><a href="https://blog.csdn.net/tim_yip/article/details/43466451" target="_blank" rel="noopener">微信内置浏览器是什么？</a></p>
<p><a href="https://www.jianshu.com/p/6a10f833b099" target="_blank" rel="noopener">判断微信客户端的那些坑</a></p>
<p><a href="https://blog.csdn.net/Q389281541/article/details/76502158" target="_blank" rel="noopener">如何区分客户端是手机端还是PC端</a></p>
<p><a href="https://blog.csdn.net/chendeyou5/article/details/79722731" target="_blank" rel="noopener">java request判断是否是微信客户端访问</a></p>
<p><a href="https://segmentfault.com/a/1190000014517685" target="_blank" rel="noopener">移动端监听安卓手机返回键</a></p>
<p><a href="http://phpstudy.php.cn/c.php/41712.html" target="_blank" rel="noopener">移动端web开发，页面如何监听安卓手机物理返回键的回退事件</a></p>
<p>@Value默认值</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Value</span>(<span class="string">"$&#123;spring.datasource.db-name:guns&#125;"</span>)</span><br></pre></td></tr></table></figure>



<p><a href="https://blog.csdn.net/thekenofDIS/article/details/75116580" target="_blank" rel="noopener">使用AOP处理注解时出现error Type referred to is not an annotation type:xxx</a></p>
<p><a href="https://stackoverflow.com/questions/8574348/error-type-referred-to-is-not-an-annotation-type" target="_blank" rel="noopener">error Type referred to is not an annotation type:</a></p>
<p>Excel 怎么实现让部分内容滚动，比如表头不动，只又表体跟着鼠标滚轮滚动。</p>
<blockquote>
<p><a href="https://support.office.com/zh-cn/article/%E5%86%BB%E7%BB%93%E7%AA%97%E6%A0%BC%E4%BB%A5%E9%94%81%E5%AE%9A%E8%A1%8C%E5%92%8C%E5%88%97-dab2ffc9-020d-4026-8121-67dd25f2508f" target="_blank" rel="noopener">冻结窗格以锁定行和列</a></p>
</blockquote>
<p>Excel怎么设置时间间隔</p>
<p><a href="https://blog.csdn.net/Mint6/article/details/78363761" target="_blank" rel="noopener">@Transactional(rollbackFor=Exception.class)的使用- Mint6的博客 …</a></p>
<p><a href="https://zh.wikipedia.org/zh-hans/RC4" target="_blank" rel="noopener">RC4加密算法 - 维基百科</a></p>
<p><a href="https://blog.csdn.net/fengshizty/article/details/48754609" target="_blank" rel="noopener">App开放接口api安全性—Token签名sign的设计与实现</a></p>
<p><a href="http://www.morecoder.com/article/1115597.html" target="_blank" rel="noopener">PAT——甲级1042：Shuffling Mashine</a></p>
<p>jQuery 去掉字符串前后空格</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">$.trim(str)</span><br></pre></td></tr></table></figure>



<p>mybatis 不能将string类型的时间 插入到数据库。</p>
]]></content>
  </entry>
  <entry>
    <title>Wget for windows</title>
    <url>/2018/12/24/Wget-for-windows/</url>
    <content><![CDATA[<img src="https://i.loli.net/2018/12/29/5c274920e1243.jpg" width="100%"/>

<a id="more"></a>

<blockquote>
<p><a href="https://zhuanlan.zhihu.com/p/28826000" target="_blank" rel="noopener">Wget for windows——优雅地实现批量下载</a></p>
</blockquote>
<h1 id="下载与安装"><a href="#下载与安装" class="headerlink" title="下载与安装"></a>下载与安装</h1><ol>
<li>点击<a href="http://link.zhihu.com/?target=https%3A//eternallybored.org/misc/wget/">Windows binaries of GNU Wget</a>下载ZIP格式文件</li>
<li>加压到任意目录（如<code>D:/APPS/wget/</code>）</li>
</ol>
<h1 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h1><ol>
<li>使用快捷键<code>win+r</code>，输入<code>sysdm.cpl</code>，然后回车。</li>
<li>选择高级&gt;环境变量&gt;系统变量中选中<code>Path</code>&gt;编辑&gt;新建&gt;浏览&gt;找到对应目录（如<code>D:/APPS/wget/</code>）&gt;确定</li>
<li>控制台输入命令<code>wget -V</code>查看版本</li>
</ol>
]]></content>
      <categories>
        <category>Tools</category>
        <category>Download</category>
      </categories>
      <tags>
        <tag>Wget</tag>
      </tags>
  </entry>
  <entry>
    <title>Fillder4</title>
    <url>/2018/12/15/Fillder4/</url>
    <content><![CDATA[<img src="http://www.rahulpnath.com/images/fiddler.png" width="100%"/>

<a id="more"></a>

<h1 id="不同请求字体颜色的含义"><a href="#不同请求字体颜色的含义" class="headerlink" title="不同请求字体颜色的含义"></a>不同请求字体颜色的含义</h1><p><img src="https://i.loli.net/2018/12/25/5c21de1b6ae27.png" alt="fillder4"></p>
]]></content>
      <categories>
        <category>Network</category>
        <category>HTTP</category>
      </categories>
      <tags>
        <tag>Tool</tag>
        <tag>Fillder</tag>
      </tags>
  </entry>
  <entry>
    <title>Goals Offer</title>
    <url>/2018/12/15/Goals-Offer/</url>
    <content><![CDATA[<p><img src="https://mahatest.com/img/Uploads/special-offer.gif" alt=""></p>
<a id="more"></a>

<h1 id="数组中重复的数字"><a href="#数组中重复的数字" class="headerlink" title="数组中重复的数字"></a>数组中重复的数字</h1><h2 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h2><p>在一个长度为n的数组里的所有数字都在0到n-1的范围内。 数组中某些数字是重复的，但不知道有几个数字是重复的。也不知道每个数字重复几次。请找出数组中任意一个重复的数字。 例如，如果输入长度为7的数组{2,3,1,0,2,5,3}，那么对应的输出是第一个重复的数字2。 </p>
<h2 id="解法一"><a href="#解法一" class="headerlink" title="解法一"></a>解法一</h2><blockquote>
<p>来源：<a href="https://www.nowcoder.com/questionTerminal/623a5ac0ea5b4e5f95552655361ae0a8" target="_blank" rel="noopener">牛客网回答区</a></p>
</blockquote>
<h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>循环遍历数组，给数组下标为当前元素的数组元素的值减去n，当有重复元素时，访问后一个重复值时发现此时对应位序上的值已经小于n了，放回这个位序即可。</p>
<p>注：</p>
<ol>
<li>使用“减n”而不用“加n”是为了避免加法溢出</li>
<li>当当前元素值p小于0时，要做减n操作的元素是位于（p+n）上的元素</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">eg：array = [<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">5</span>] , n = <span class="number">6</span></span><br><span class="line">position-<span class="number">0</span> : [<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">5</span>] <span class="comment">// array[2] - 6</span></span><br><span class="line">             [<span class="number">2</span>,<span class="number">3</span>,-<span class="number">5</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">5</span>] </span><br><span class="line">position-<span class="number">1</span> : [<span class="number">2</span>,<span class="number">3</span>,-<span class="number">5</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">5</span>] <span class="comment">// array[3] - 6</span></span><br><span class="line">             [<span class="number">2</span>,<span class="number">3</span>,-<span class="number">5</span>,-<span class="number">6</span>,<span class="number">2</span>,<span class="number">5</span>]            </span><br><span class="line">position-<span class="number">2</span> : [<span class="number">2</span>,<span class="number">3</span>,-<span class="number">5</span>,-<span class="number">6</span>,<span class="number">2</span>,<span class="number">5</span>] <span class="comment">// array[array[2] + 6] - 6</span></span><br><span class="line">             [<span class="number">2</span>,-<span class="number">3</span>,-<span class="number">5</span>,-<span class="number">6</span>,<span class="number">2</span>,<span class="number">5</span>] </span><br><span class="line">position-<span class="number">3</span> : [<span class="number">2</span>,-<span class="number">3</span>,-<span class="number">5</span>,-<span class="number">6</span>,<span class="number">2</span>,<span class="number">5</span>] <span class="comment">// array[array[3] + 6] - 6             </span></span><br><span class="line">             [-<span class="number">4</span>,-<span class="number">3</span>,-<span class="number">5</span>,-<span class="number">6</span>,<span class="number">2</span>,<span class="number">5</span>]</span><br><span class="line">position-<span class="number">4</span> : [-<span class="number">4</span>,-<span class="number">3</span>,-<span class="number">5</span>,-<span class="number">6</span>,<span class="number">2</span>,<span class="number">5</span>] <span class="comment">// array[2] &lt; 0，结束，重复数字为2</span></span><br></pre></td></tr></table></figure>

<h3 id="Java代码实现"><a href="#Java代码实现" class="headerlink" title="Java代码实现"></a>Java代码实现</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">duplicate</span><span class="params">(<span class="keyword">int</span> numbers[],<span class="keyword">int</span> length,<span class="keyword">int</span> [] duplication)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(numbers == <span class="keyword">null</span> || length &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; length; i++)&#123;</span><br><span class="line">        <span class="keyword">int</span> index = numbers[i];</span><br><span class="line">        <span class="keyword">if</span> (index &lt; <span class="number">0</span>)&#123;</span><br><span class="line">            index += length;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (numbers[index] &lt; <span class="number">0</span>)&#123;</span><br><span class="line">            duplication[<span class="number">0</span>] = index;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        numbers[index] -= length;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="解法二"><a href="#解法二" class="headerlink" title="解法二"></a>解法二</h2><blockquote>
<p>来源：<a href="https://github.com/CyC2018/Interview-Notebook/blob/master/notes/%E5%89%91%E6%8C%87%20offer%20%E9%A2%98%E8%A7%A3.md#3-%E6%95%B0%E7%BB%84%E4%B8%AD%E9%87%8D%E5%A4%8D%E7%9A%84%E6%95%B0%E5%AD%97" target="_blank" rel="noopener"><a href="https://github.com/CyC2018" target="_blank" rel="noopener">CyC2018</a>/<strong>Interview-Notebook</strong></a></p>
</blockquote>
<h3 id="思路-1"><a href="#思路-1" class="headerlink" title="思路"></a>思路</h3><p>将值为i的元素交换到位序为i的位置上，如果对应位置上已经有正确的值（元素值等于位序即为正确）了则可判定该值即为重复值。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">eg：array = [<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">5</span>] </span><br><span class="line">position-<span class="number">0</span> : [<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">5</span>] <span class="comment">// 2 &lt;-&gt; 1</span></span><br><span class="line">             [<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">5</span>] <span class="comment">// 1 &lt;-&gt; 3</span></span><br><span class="line">             [<span class="number">3</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">5</span>] <span class="comment">// 3 &lt;-&gt; 0</span></span><br><span class="line">             [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">5</span>] <span class="comment">// already in position</span></span><br><span class="line">position-<span class="number">1</span> : [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">5</span>] <span class="comment">// already in position</span></span><br><span class="line">position-<span class="number">2</span> : [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">5</span>] <span class="comment">// already in position</span></span><br><span class="line">position-<span class="number">3</span> : [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">5</span>] <span class="comment">// already in position</span></span><br><span class="line">position-<span class="number">4</span> : [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">5</span>] <span class="comment">// array[i] == array[array[i]], exit</span></span><br></pre></td></tr></table></figure>

<h3 id="Java代码实现-1"><a href="#Java代码实现-1" class="headerlink" title="Java代码实现"></a>Java代码实现</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">duplicate</span><span class="params">(<span class="keyword">int</span> numbers[],<span class="keyword">int</span> length,<span class="keyword">int</span> [] duplication)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(numbers == <span class="keyword">null</span> || length &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; length; i++)&#123;</span><br><span class="line">        <span class="keyword">while</span>(numbers[i] != i)&#123;</span><br><span class="line">            <span class="keyword">if</span>(numbers[i] == numbers[numbers[i]])&#123;</span><br><span class="line">                duplication[<span class="number">0</span>] = numbers[i];</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            swap(numbers, i, numbers[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span> arrays[], <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> temp = arrays[i];</span><br><span class="line">    arrays[i] = arrays[j];</span><br><span class="line">    arrays[j] = temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
      <tags>
        <tag>Offer</tag>
        <tag>Algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title>Use of Chrome</title>
    <url>/2018/12/15/Use-of-Chrome/</url>
    <content><![CDATA[<p><img src="https://images.pexels.com/photos/67112/pexels-photo-67112.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260" alt=""></p>
<a id="more"></a>

<blockquote>
<p>Windows 10 x64</p>
</blockquote>
<p>本文记录我使用Chrome的一些习惯</p>
<h2 id="Chrome快捷键"><a href="#Chrome快捷键" class="headerlink" title="Chrome快捷键"></a>Chrome快捷键</h2><blockquote>
<p><a href="https://support.google.com/chrome/answer/157179?hl=zh-Hans" target="_blank" rel="noopener">Chrome 键盘快捷键</a></p>
</blockquote>
<p>标签页和窗口快捷键</p>
<table>
<thead>
<tr>
<th><strong>操作</strong></th>
<th><strong>快捷键</strong></th>
</tr>
</thead>
<tbody><tr>
<td>打开新窗口</td>
<td><strong>Ctrl + n</strong></td>
</tr>
<tr>
<td>在无痕模式下打开新窗口</td>
<td><strong>Ctrl + Shift + n</strong></td>
</tr>
<tr>
<td>打开新的标签页，并跳转到该标签页</td>
<td><strong>Ctrl + t</strong></td>
</tr>
<tr>
<td>重新打开最后关闭的标签页，并跳转到该标签页</td>
<td><strong>Ctrl + Shift + t</strong></td>
</tr>
<tr>
<td>跳转到下一个打开的标签页</td>
<td><strong>Ctrl + Tab</strong> 或 <strong>Ctrl + PgDn</strong></td>
</tr>
<tr>
<td>跳转到上一个打开的标签页</td>
<td><strong>Ctrl + Shift + Tab</strong> 或 <strong>Ctrl + PgUp</strong></td>
</tr>
<tr>
<td>跳转到特定标签页</td>
<td><strong>Ctrl + 1</strong> 到 <strong>Ctrl + 8</strong></td>
</tr>
<tr>
<td>跳转到最后一个标签页</td>
<td><strong>Ctrl + 9</strong></td>
</tr>
<tr>
<td>在当前标签页中打开主页</td>
<td><strong>Alt + Home</strong></td>
</tr>
<tr>
<td>打开当前标签页浏览记录中记录的上一个页面</td>
<td><strong>Alt + 向左箭头键</strong></td>
</tr>
<tr>
<td>打开当前标签页浏览记录中记录的下一个页面</td>
<td><strong>Alt + 向右箭头键</strong></td>
</tr>
<tr>
<td>关闭当前标签页</td>
<td><strong>Ctrl + w</strong> 或 <strong>Ctrl + F4</strong></td>
</tr>
<tr>
<td>关闭当前窗口</td>
<td><strong>Ctrl + Shift + w</strong></td>
</tr>
<tr>
<td>最小化当前窗口</td>
<td><strong>Alt + 空格键 + n</strong></td>
</tr>
<tr>
<td>最大化当前窗口</td>
<td><strong>Alt + 空格键 + x</strong></td>
</tr>
<tr>
<td>关闭当前窗口</td>
<td><strong>Alt + F4</strong></td>
</tr>
<tr>
<td>退出 Google Chrome</td>
<td><strong>Ctrl + Shift + q</strong></td>
</tr>
</tbody></table>
<h2 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h2><h3 id="vimium"><a href="#vimium" class="headerlink" title="vimium"></a>vimium</h3><blockquote>
<p>使用键盘流的方式操纵chrome</p>
</blockquote>
<h4 id="页面浏览"><a href="#页面浏览" class="headerlink" title="页面浏览"></a>页面浏览</h4><table>
<thead>
<tr>
<th>操作</th>
<th>快捷键</th>
</tr>
</thead>
<tbody><tr>
<td>复制当前URL到剪切板</td>
<td>yy</td>
</tr>
</tbody></table>
<h4 id="帮助文档"><a href="#帮助文档" class="headerlink" title="帮助文档"></a>帮助文档</h4><table>
<thead>
<tr>
<th>操作</th>
<th>快捷键</th>
</tr>
</thead>
<tbody><tr>
<td>打开帮助文档</td>
<td>?</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>Chrome</category>
      </categories>
      <tags>
        <tag>Chrome</tag>
      </tags>
  </entry>
  <entry>
    <title>Build Your Blog with GitHub Pages+Hexo+NexT</title>
    <url>/2018/12/15/Build-Your-Blog-with-GitHub-Pages-Hexo-NexT/</url>
    <content><![CDATA[<p><img src="https://i.loli.net/2018/12/26/5c231d3ac8a4c.jpg" alt="NexT"></p>
<a id="more"></a>

<blockquote>
<p>环境：</p>
<p>Windows 10，x64</p>
<p>node.js v10.14.2</p>
<p>npm 6.5.0</p>
</blockquote>
<h2 id="GitHub创建Github-Pages项目"><a href="#GitHub创建Github-Pages项目" class="headerlink" title="GitHub创建Github Pages项目"></a>GitHub创建Github Pages项目</h2><p>创建一个名称为<code>username.github.io</code>的新仓库。username为你的GitHub账号用户名。</p>
<h2 id="搭建Hexo环境"><a href="#搭建Hexo环境" class="headerlink" title="搭建Hexo环境"></a>搭建Hexo环境</h2><h3 id="安装node-js"><a href="#安装node-js" class="headerlink" title="安装node.js"></a>安装node.js</h3><h4 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h4><blockquote>
<p><a href="https://www.zhihu.com/question/33578075" target="_blank" rel="noopener">Node.js是用来做什么的？ - 知乎</a></p>
</blockquote>
<p><strong>Node.js</strong>是一个 JavaScript 运行环境。</p>
<h4 id="下载与安装"><a href="#下载与安装" class="headerlink" title="下载与安装"></a>下载与安装</h4><p>去<a href="https://nodejs.org/zh-cn/" target="_blank" rel="noopener">官网</a>下载对应版本</p>
<p>下载完后双击傻瓜式安装即可</p>
<p>安装完后<strong>win+R</strong> 输入<strong>cmd</strong>打开终端，然后输入<code>node -v</code>即可查看Node版本</p>
<h3 id="安装npm"><a href="#安装npm" class="headerlink" title="安装npm"></a>安装npm</h3><h4 id="简介-1"><a href="#简介-1" class="headerlink" title="简介"></a>简介</h4><p>npm是Node.js的包管理工具</p>
<blockquote>
<p><a href="https://www.liaoxuefeng.com/wiki/001434446689867b27157e896e74d51a89c25cc8b43bdb3000/00143450141843488beddae2a1044cab5acb5125baf0882000" target="_blank" rel="noopener">npm安装 - 安装Node.js和npm - 廖雪峰的官方网站</a></p>
<p>为啥我们需要一个包管理工具呢？因为我们在Node.js上开发时，会用到很多别人写的JavaScript代码。如果我们要使用别人写的某个包，每次都根据名称搜索一下官方网站，下载代码，解压，再使用，非常繁琐。于是一个集中管理的工具应运而生：大家都把自己开发的模块打包后放到npm官网上，如果要使用，直接通过npm安装就可以直接用，不用管代码存在哪，应该从哪下载。</p>
<p>更重要的是，如果我们要使用模块A，而模块A又依赖于模块B，模块B又依赖于模块X和模块Y，npm可以根据依赖关系，把所有依赖的包都下载下来并管理起来。否则，靠我们自己手动管理，肯定既麻烦又容易出错。</p>
</blockquote>
<h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><p>安装完Node.js以后npm已经顺带被安装了。</p>
<p>命令行输入<code>npm -v</code>即可查看npm版本信息。</p>
<h3 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install -g hexo</span><br></pre></td></tr></table></figure>

<h4 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h4><p>新建一个空文件夹，在该目录下右键选择<code>Git Bash Here</code>（需要安装<a href="https://git-scm.com/book/zh/v2/%E8%B5%B7%E6%AD%A5-%E5%AE%89%E8%A3%85-Git" target="_blank" rel="noopener">Git客户端</a>）</p>
<p>执行命令（需要注意的是该命令必须在空目录下执行）：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hexo init</span><br></pre></td></tr></table></figure>

<p>安装依赖：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure>

<h2 id="利用Travis-CI自动发布博客"><a href="#利用Travis-CI自动发布博客" class="headerlink" title="利用Travis-CI自动发布博客"></a>利用Travis-CI自动发布博客</h2><blockquote>
<p>hexo生成的静态文件统一存放在public目录下，其余的文件都是hexo用来生成静态网页的。</p>
<p>为了能够适应不同环境（不同主机、不同系统、甚至在GitHub网页端操作等），可以利用Travis-CI对hexo进行<a href="http://www.ruanyifeng.com/blog/2015/09/continuous-integration.html" target="_blank" rel="noopener">持续集成</a> 。</p>
</blockquote>
<h3 id="远程仓库创建hexo分支对hexo源码进行版本控制"><a href="#远程仓库创建hexo分支对hexo源码进行版本控制" class="headerlink" title="远程仓库创建hexo分支对hexo源码进行版本控制"></a>远程仓库创建hexo分支对hexo源码进行版本控制</h3><ol>
<li><p>将远程仓库clone到本地</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/username/username.github.io.git</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建本地分支hexo并切换到该分支</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git checkout -b hexo</span><br></pre></td></tr></table></figure>
</li>
<li><p>将本地仓库里的文件清空（除了<code>.git</code>文件），替换为hexo源码文件（即<code>hexo init</code>生成的那些文件）。</p>
</li>
<li><p>添加并提交到本地仓库</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m "提交信息"</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建并提交到远程hexo分支</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">git push --set-upstream origin hexo</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="GitHub生成Access-Token"><a href="#GitHub生成Access-Token" class="headerlink" title="GitHub生成Access Token"></a>GitHub生成Access Token</h3><p>头像&gt;Settings&gt;Developer settings&gt;Personal access tokens</p>
<p>点击Generate new token生成一个token</p>
<p><img src="https://i.loli.net/2018/12/15/5c14c217c5fb9.jpg" alt=""></p>
<p>注意：token生成后只又一次查看的机会，一定要保存好，否则要删掉重新生成</p>
<h3 id="设置Travis-CI"><a href="#设置Travis-CI" class="headerlink" title="设置Travis-CI"></a>设置Travis-CI</h3><p>使用GitHub账号登录<a href="https://travis-ci.org/" target="_blank" rel="noopener">Travis-CI</a></p>
<p><img src="https://i.loli.net/2018/12/15/5c14c08f2392e.jpg" alt=""></p>
<p>点击Settings，将GitHub生成的token添加到里面</p>
<p><img src="https://i.loli.net/2018/12/15/5c14c305516b7.jpg" alt=""></p>
<h3 id="hexo源码仓库中添加Travis-CI的配置文件-travis-yml"><a href="#hexo源码仓库中添加Travis-CI的配置文件-travis-yml" class="headerlink" title="hexo源码仓库中添加Travis-CI的配置文件.travis.yml"></a>hexo源码仓库中添加Travis-CI的配置文件<code>.travis.yml</code></h3><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">language:</span> <span class="string">node_js</span>  <span class="comment">#设置语言</span></span><br><span class="line"></span><br><span class="line"><span class="attr">node_js:</span> <span class="string">stable</span>  <span class="comment">#设置相应的版本</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 开始构建</span></span><br><span class="line"><span class="attr">before_install:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">export</span> <span class="string">TZ='Asia/Shanghai'</span>  <span class="comment">#统一构建环境和博客配置的时区, 防止文章时间错误</span></span><br><span class="line">  </span><br><span class="line"><span class="attr">install:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span>  <span class="comment">#配置Hexo环境</span></span><br><span class="line"></span><br><span class="line"><span class="attr">script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">hexo</span> <span class="string">cl</span>  <span class="comment">#清除</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">hexo</span> <span class="string">g</span>  <span class="comment">#生成</span></span><br><span class="line"></span><br><span class="line"><span class="attr">after_script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">clone</span> <span class="string">https://$&#123;GH_REF&#125;</span> <span class="string">.deploy_git</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">cd</span> <span class="string">.deploy_git</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">checkout</span> <span class="string">master</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">cd</span> <span class="string">../</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">mv</span> <span class="string">.deploy_git/.git/</span> <span class="string">./public/</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">cd</span> <span class="string">./public</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">user.name</span> <span class="string">"username"</span>  <span class="comment">#github用户名</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">user.email</span> <span class="string">"email@xxx.com"</span>  <span class="comment">#邮箱</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">add</span> <span class="string">.</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">commit</span> <span class="string">-m</span> <span class="string">"Travis CI Auto Builder at `date +"</span><span class="string">%Y-%m-%d</span> <span class="string">%H:%M"`"</span>  <span class="comment">#提交时的说明</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">git</span> <span class="string">push</span> <span class="string">--force</span> <span class="string">--quiet</span> <span class="string">"https://$&#123;GH_TOKEN&#125;@$&#123;GH_REF&#125;"</span> <span class="string">master:master</span>  <span class="comment">#GH_TOKEN是在Travis中配置Token的名称</span></span><br><span class="line"><span class="comment">## 结束构建</span></span><br><span class="line"></span><br><span class="line"><span class="attr">branches:</span></span><br><span class="line">  <span class="attr">only:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">hexo</span>  <span class="comment">#只监测master之外新增的hexo分支</span></span><br><span class="line"><span class="attr">env:</span></span><br><span class="line"> <span class="attr">global:</span></span><br><span class="line">   <span class="bullet">-</span> <span class="attr">GH_REF:</span> <span class="string">github.com/username/username.github.io.git</span>  <span class="comment">#设置GH_REF</span></span><br><span class="line"></span><br><span class="line"><span class="attr">cache:</span></span><br><span class="line">  <span class="attr">directories:</span>  <span class="comment">#缓存特定目录, 加快构建速度</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">node_modules</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>原理图</p>
<p><img src="https://i.loli.net/2018/12/25/5c219ecc93bcd.png" alt=""></p>
</blockquote>
<h2 id="主题优化"><a href="#主题优化" class="headerlink" title="主题优化"></a>主题优化</h2><blockquote>
<p><a href="http://theme-next.iissnan.com/" target="_blank" rel="noopener">NexT使用文档</a></p>
</blockquote>
<h3 id="文章预览"><a href="#文章预览" class="headerlink" title="文章预览"></a>文章预览</h3><blockquote>
<p><a href="http://theme-next.iissnan.com/faqs.html#read-more" target="_blank" rel="noopener">如何设置「阅读全文」？</a></p>
</blockquote>
<h4 id="文章封面"><a href="#文章封面" class="headerlink" title="文章封面"></a>文章封面</h4><ol>
<li><p>关闭<strong>主体配置文件</strong>中的<code>Automatically Excerpt</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Automatically excerpt description in homepage as preamble text.</span></span><br><span class="line"><span class="attr">excerpt_description:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Automatically Excerpt. Not recommend.</span></span><br><span class="line"><span class="comment"># Please use &lt;!-- more --&gt; in the post to control excerpt accurately.</span></span><br><span class="line"><span class="attr">auto_excerpt:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">length:</span> <span class="number">150</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在<code>手动截断标签</code>上只放一张图片即可</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">![NexT](https://i.loli.net/2018/12/26/5c231d3ac8a4c.jpg)</span><br><span class="line"><span class="comment">&lt;!-- more --&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="评论系统"><a href="#评论系统" class="headerlink" title="评论系统"></a>评论系统</h3><blockquote>
<p><a href="https://ryanluoxu.github.io/2017/11/27/Hexo-Next-%E6%B7%BB%E5%8A%A0-Gitment-%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F/" target="_blank" rel="noopener">Hexo-Next 添加 Gitment 评论系统</a></p>
<p><a href="https://xiaotiandi.github.io/publicBlog/2018-09-19-d196c9ad.html" target="_blank" rel="noopener">hexo博客配置-添加评论系统-gitment和valine-需注册</a></p>
<p><a href="https://meesong.github.io/StaticBlog/2017/NexT+Gitment/" target="_blank" rel="noopener">为 hexo NexT 添加 Gitment 评论插件</a></p>
<p><a href="https://github.com/gitalk/gitalk/wiki/%E5%9C%A8hexo-next%E4%B8%BB%E9%A2%98%E4%B8%8A%E4%BD%BF%E7%94%A8gitalk" target="_blank" rel="noopener">在hexo next主题上使用gitalk</a></p>
<p><a href="https://www.bluelzy.com/articles/use_valine_for_your_blog.html" target="_blank" rel="noopener">为你的Hexo加上评论系统-Valine</a></p>
</blockquote>
<p><img src="https://i.loli.net/2018/12/17/5c171d0e2a281.jpg" alt=""></p>
<p><img src="https://i.loli.net/2018/12/17/5c171f261cf6c.jpg" alt=""></p>
<p>由于gitment长期未维护,所有最后使用gitalk,之后可以增加其他三方的评论插件更加灵活.</p>
<p>如需取消某个 页面/文章 的评论，在 md 文件的 <a href="https://hexo.io/docs/front-matter.html" target="_blank" rel="noopener">front-matter </a>中增加 <code>comments: false</code></p>
<h3 id="自定义内建标签"><a href="#自定义内建标签" class="headerlink" title="自定义内建标签"></a>自定义内建标签</h3><blockquote>
<p><a href="https://blog.rmiao.top/hexo-fold-block/" target="_blank" rel="noopener">Hexo next博客添加折叠块功能添加折叠代码块</a></p>
</blockquote>
<h3 id="进度条"><a href="#进度条" class="headerlink" title="进度条"></a>进度条</h3><blockquote>
<p><a href="https://github.com/theme-next/theme-next-pace" target="_blank" rel="noopener"><strong>theme-next-pace</strong></a></p>
</blockquote>
<h3 id="自定义页面样式"><a href="#自定义页面样式" class="headerlink" title="自定义页面样式"></a>自定义页面样式</h3><blockquote>
<p><a href="http://www.cduyzh.com/hexo-settings-3/" target="_blank" rel="noopener">2017年最新基于hexo搭建个人免费博客——自定义页面样式一</a></p>
<p><a href="https://reuixiy.github.io/technology/computer/computer-aided-art/2017/06/09/hexo-next-optimization.html#%E4%BC%98%E5%8C%96-%E7%BD%91%E9%A1%B5%E6%A0%B7%E5%BC%8F%E5%B8%83%E5%B1%80" target="_blank" rel="noopener">优化 网页样式布局</a></p>
</blockquote>
<h4 id="调整文章元信息区域离文章主体的间距"><a href="#调整文章元信息区域离文章主体的间距" class="headerlink" title="调整文章元信息区域离文章主体的间距"></a>调整文章元信息区域离文章主体的间距</h4><p>一般文章都会添加<code>description</code>和一张图片作为封面，但元信息离正文太远视野上不舒服，故做如下调整。</p>
<p><img src="https://i.loli.net/2018/12/26/5c23347219069.jpg" alt="Before"></p>
<p>修改<code>themes\next\source\css\_common\components\post\post-meta.styl</code>如下：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">// before</span><br><span class="line"><span class="selector-class">.posts-expand</span> <span class="selector-class">.post-meta</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">3px</span> <span class="number">0</span> <span class="number">60px</span> <span class="number">0</span>;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// after</span><br><span class="line"><span class="selector-class">.posts-expand</span> <span class="selector-class">.post-meta</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">3px</span> <span class="number">0</span> <span class="number">10px</span> <span class="number">0</span>;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="显示文章更新时间"><a href="#显示文章更新时间" class="headerlink" title="显示文章更新时间"></a>显示文章更新时间</h3><blockquote>
<p><a href="https://blog.csdn.net/ganzhilin520/article/details/79053399" target="_blank" rel="noopener"><del>hexo添加文章更新时间</del></a></p>
</blockquote>
<p>修改主题配置文件的</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">post_meta:</span></span><br><span class="line">  <span class="attr">updated_at:</span> </span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>要想具体显示到时分秒,则修改站点配置文件的</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">date_format:</span> <span class="string">YYYY-MM-DD</span> <span class="string">HH:mm:ss</span></span><br></pre></td></tr></table></figure>

<h3 id="复制代码按钮"><a href="#复制代码按钮" class="headerlink" title="复制代码按钮"></a>复制代码按钮</h3><blockquote>
<p><a href="https://www.ofind.cn/blog/HEXO/HEXO%E4%BC%98%E5%8C%96%E4%B9%8B%EF%BC%88%E4%BA%8C%EF%BC%89-%E6%B7%BB%E5%8A%A0%E5%A4%8D%E5%88%B6%E5%8A%9F%E8%83%BD.html" target="_blank" rel="noopener"><del>HEXO优化之（二）—-添加复制功能</del></a></p>
<p><a href="http://www.missfli.com/2018/06/19/github-hexo-next-08.html" target="_blank" rel="noopener">Hexo NexT主题代码块添加复制功能</a></p>
</blockquote>
<h3 id="显示当前浏览进度"><a href="#显示当前浏览进度" class="headerlink" title="显示当前浏览进度"></a>显示当前浏览进度</h3><blockquote>
<p><a href="https://www.jianshu.com/p/3ff20be8574c" target="_blank" rel="noopener">7.浏览页面的时候显示当前浏览进度</a></p>
</blockquote>
<h3 id="背景图片"><a href="#背景图片" class="headerlink" title="背景图片"></a>背景图片</h3><blockquote>
<p><a href="https://www.simon96.online/2018/10/12/hexo-tutorial/#%E6%B7%BB%E5%8A%A0%E8%83%8C%E6%99%AF%E5%9B%BE" target="_blank" rel="noopener">添加背景图</a></p>
</blockquote>
<h3 id="文章加密"><a href="#文章加密" class="headerlink" title="文章加密"></a>文章加密</h3><blockquote>
<p><a href="https://github.com/MikeCoder/hexo-blog-encrypt/blob/master/ReadMe.zh.md" target="_blank" rel="noopener">hexo-blog-encrypt</a></p>
</blockquote>
<p>注意实在<strong>站点配置文件</strong>中添加</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Security</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="attr">encrypt:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h4 id="给文章添加密码："><a href="#给文章添加密码：" class="headerlink" title="给文章添加密码："></a>给文章添加密码：</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: hello world</span><br><span class="line">date: 2016-03-30 21:18:02</span><br><span class="line">tags:</span><br><span class="line">    - fdsfadsfa</span><br><span class="line">    - fdsafsdaf</span><br><span class="line">password: Mike</span><br><span class="line">abstract: Welcome to my blog, enter password to read.</span><br><span class="line">message: Welcome to my blog, enter password to read.</span><br><span class="line">---</span><br></pre></td></tr></table></figure>

<ul>
<li>password: 是该博客加密使用的密码</li>
<li>abstract: 是该博客的摘要，会显示在博客的列表页</li>
<li>message: 这个是博客查看时，密码输入框上面的描述性文字</li>
</ul>
<h3 id="二次元看板娘"><a href="#二次元看板娘" class="headerlink" title="二次元看板娘"></a>二次元看板娘</h3><blockquote>
<p><a href="https://github.com/EYHN/hexo-helper-live2d/blob/master/README.zh-CN.md" target="_blank" rel="noopener">hexo-helper-live2d</a></p>
</blockquote>
<h3 id="站内搜索"><a href="#站内搜索" class="headerlink" title="站内搜索"></a>站内搜索</h3><blockquote>
<p><a href="https://github.com/theme-next/hexo-generator-searchdb" target="_blank" rel="noopener">theme-next/<strong>hexo-generator-searchdb</strong></a></p>
</blockquote>
<ol>
<li><p><code>npm install hexo-generator-searchdb --save</code></p>
</li>
<li><p><strong>站点配置文件</strong>中添加如下配置：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">search.xml</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span></span><br><span class="line">  <span class="attr">format:</span> <span class="string">html</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">10000</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>主题配置文件</strong>中打开如下配置：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Local search</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/theme-next/hexo-generator-searchdb</span></span><br><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="文章置顶-置顶标签"><a href="#文章置顶-置顶标签" class="headerlink" title="文章置顶+置顶标签"></a>文章置顶+置顶标签</h3><blockquote>
<p><a href="https://blog.csdn.net/qwerty200696/article/details/79010629" target="_blank" rel="noopener">hexo博客优化之文章置顶+置顶标签</a></p>
<p><a href="https://github.mayuxiao.com/swig.zh-CN/docs/index.html#comments" target="_blank" rel="noopener">Swig » 文档 » 注释</a></p>
</blockquote>
<ol>
<li><p>使用插件<a href="https://github.com/netcan/hexo-generator-index-pin-top" target="_blank" rel="noopener">hexo-generator-index-pin-top</a></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> npm uninstall hexo-generator-index --save</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> npm install hexo-generator-index-pin-top --save</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在需要置顶的文章的<code>Front-matter</code>中加上<code>top: true</code></p>
</li>
<li><p><code>/blog/themes/next/layout/_macro</code> 目录下的<code>post.swig</code>文件，定位到<code>&lt;div class=&quot;post-meta&quot;&gt;</code>标签下，做如下修改：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"post-meta"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"post-time"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            &#123;% set date_diff = date(post.date) != date(post.updated) %&#125;</span><br><span class="line">            &#123;% set time_diff = time(post.date) != time(post.updated) %&#125;</span><br><span class="line">            &#123;% set datetime_diff = date_diff or time_diff %&#125;</span><br><span class="line"></span><br><span class="line">            &#123;# 置顶标签 #&#125;</span><br><span class="line">            &#123;% if post.top %&#125;</span><br><span class="line">              <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-thumb-tack"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">FFC0CB</span>&gt;</span>置顶<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"post-meta-divider"</span>&gt;</span>|<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            &#123;% endif %&#125;</span><br><span class="line">            &#123;# 置顶标签 #&#125;</span><br><span class="line">            ...</span><br><span class="line">    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="版权声明"><a href="#版权声明" class="headerlink" title="版权声明"></a>版权声明</h3><blockquote>
<p><a href="https://zhuanlan.zhihu.com/p/20641764" target="_blank" rel="noopener">“知识共享”（CC协议）简单介绍</a></p>
</blockquote>
<ol>
<li><p>修改<strong>主题配置文件</strong>中如下配置：</p>
 <figure class="highlight yaml"><figcaption><span>\source\_data</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment"># Creative Commons 4.0 International License.</span></span><br><span class="line"><span class="comment"># https://creativecommons.org/share-your-work/licensing-types-examples</span></span><br><span class="line"><span class="comment"># Available: by | by-nc | by-nc-nd | by-nc-sa | by-nd | by-sa | zero</span></span><br><span class="line"><span class="attr">creative_commons:</span></span><br><span class="line">  <span class="attr">license:</span> <span class="string">by-nc-sa</span></span><br><span class="line">  <span class="attr">sidebar:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">post:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>修改<strong>站点配置文件</strong>中如下配置：</p>
<figure class="highlight yml"><figcaption><span>_config.yml</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment">## If your site is put in a subdirectory, set url as 'http://yoursite.com/child' and root as '/child/'</span></span><br><span class="line"><span class="attr">url:</span> <span class="string">http://username.github.io</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="首页隐藏指定文章"><a href="#首页隐藏指定文章" class="headerlink" title="首页隐藏指定文章"></a>首页隐藏指定文章</h3><blockquote>
<p><a href="https://blog.csdn.net/m0_37323771/article/details/80672271" target="_blank" rel="noopener">Hexo 设置首页隐藏指定文章</a></p>
</blockquote>
<ol>
<li><p>对主题 index.swig 文件做如下修改</p>
<figure class="highlight javascript"><figcaption><span>Hexo\themes\next\layout</span></figcaption><table><tr><td class="code"><pre><span class="line">&#123;% <span class="keyword">for</span> post <span class="keyword">in</span> page.posts %&#125;</span><br><span class="line">	&#123;# 首页隐藏指定文章 #&#125;</span><br><span class="line">	&#123;% <span class="keyword">if</span> post.hidden != <span class="literal">true</span> %&#125;</span><br><span class="line">        &#123;&#123; post_template.render(post, <span class="literal">true</span>) &#125;&#125;</span><br><span class="line">	&#123;% endif %&#125;</span><br><span class="line">	&#123;# 首页隐藏指定文章 #&#125;</span><br><span class="line">&#123;% endfor %&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>在需要首页隐藏的文章 front-matter 中添加 <code>hidden: true</code></p>
</li>
</ol>
<h3 id="Emoji-表情"><a href="#Emoji-表情" class="headerlink" title="Emoji 表情"></a>Emoji 表情</h3><blockquote>
<p><a href="https://chaxiaoniu.oschina.io/2017/07/10/HexoAddEmoji/" target="_blank" rel="noopener">Hexo中添加emoji表情</a></p>
<p>Hexo默认采用 <a href="https://github.com/hexojs/hexo-renderer-marked" target="_blank" rel="noopener">hexo-renderer-marked</a> 这个渲染器，但其不支持插件扩展。还有一个支持插件扩展的是 <a href="https://github.com/hexojs/hexo-renderer-markdown-it" target="_blank" rel="noopener">hexo-renderer-markdown-it</a>，可以使用 <a href="https://github.com/markdown-it/markdown-it-emoji" target="_blank" rel="noopener">markdwon-it-emoji</a> 插件来支持 emoji。</p>
</blockquote>
<ol>
<li><p>替换渲染器</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm un hexo-renderer-marked --save</span><br><span class="line">npm i hexo-renderer-markdown-it --save</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装<code>markdown-it-emoji</code>插件</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm i markdown-it-emoji --save</span><br></pre></td></tr></table></figure>
</li>
<li><p>站点配置文件添加 markdown-it 配置</p>
<figure class="highlight shell"><figcaption><span>_config.yml</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># hexo-renderer-markdown-it</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># Markdown-it config</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># Docs: https://github.com/celsomiranda/hexo-renderer-markdown-it/wiki</span></span></span><br><span class="line">markdown:</span><br><span class="line">  render:</span><br><span class="line">    html: true</span><br><span class="line">    xhtmlOut: false</span><br><span class="line">    breaks: true</span><br><span class="line">    linkify: true</span><br><span class="line">    typographer: true</span><br><span class="line">    quotes: '“”‘’'</span><br><span class="line">  plugins:</span><br><span class="line">    - markdown-it-abbr</span><br><span class="line">    - markdown-it-footnote</span><br><span class="line">    - markdown-it-ins</span><br><span class="line">    - markdown-it-sub</span><br><span class="line">    - markdown-it-sup</span><br><span class="line">    - markdown-it-emoji  ## add emoji</span><br><span class="line">  anchors:</span><br><span class="line">    level: 2</span><br><span class="line">    collisionSuffix: 'v'</span><br><span class="line">    # If `true`, creates an anchor tag with a permalink besides the heading.</span><br><span class="line">    permalink: false</span><br><span class="line">    permalinkClass: header-anchor</span><br><span class="line">    # The symbol used to make the permalink</span><br><span class="line">    permalinkSymbol: ¶</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用</p>
<p>在 <a href="https://www.webfx.com/tools/emoji-cheat-sheet/" target="_blank" rel="noopener">EMOJI CHEAT SHEET</a> 中找你想要的表情，点击即可复制。:smile:</p>
</li>
</ol>
<h3 id="文件下载功能"><a href="#文件下载功能" class="headerlink" title="文件下载功能"></a>文件下载功能</h3><ol>
<li>在 <code>source</code> 目录下，新建 <code>download</code> 目录</li>
<li>通过诸如 <code>[点击下载 xxx.pdf](/download/xxx.pdf)</code> 这样的链接，提供下载功能。</li>
</ol>
<h2 id="填坑记录"><a href="#填坑记录" class="headerlink" title="填坑记录"></a>填坑记录</h2><h3 id="选用主题后页面空白"><a href="#选用主题后页面空白" class="headerlink" title="选用主题后页面空白"></a>选用主题后页面空白</h3><p>原因：themes目录下主题相关文件未正确提交到远程仓库</p>
<p>解决：</p>
<ol>
<li><p>删除主题目录下的<code>.git</code>目录和<code>.gitignore</code>文件</p>
</li>
<li><p><code>git rm --cached 主题目录</code></p>
</li>
<li><p><code>git add 主题目录</code></p>
</li>
<li><p><code>git push</code></p>
</li>
</ol>
<h2 id="写作"><a href="#写作" class="headerlink" title="写作"></a>写作</h2><h3 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h3><blockquote>
<p><a href="https://hexo.io/zh-cn/docs/writing.html" target="_blank" rel="noopener">布局</a></p>
</blockquote>
<p>Hexo 有三种默认布局：<code>post</code>、<code>page</code> 和 <code>draft</code>，它们分别对应不同的路径，而您自定义的其他布局和 <code>post</code> 相同，都将储存到 <code>source/_posts</code> 文件夹。</p>
<table>
<thead>
<tr>
<th>布局</th>
<th>路径</th>
</tr>
</thead>
<tbody><tr>
<td>post</td>
<td>source/_posts</td>
</tr>
<tr>
<td>page</td>
<td>source</td>
</tr>
<tr>
<td>draft</td>
<td>source/_drafts</td>
</tr>
</tbody></table>
<h4 id="草稿"><a href="#草稿" class="headerlink" title="草稿"></a>草稿</h4><p>Hexo 的一种特殊布局：<code>draft</code>，这种布局在建立文章时会被保存到 <code>source/_drafts</code> 文件夹，您可通过 <code>publish</code> 命令将草稿移动到 <code>source/_posts</code> 文件夹。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> hexo publish [layout] &lt;filename&gt;</span></span><br></pre></td></tr></table></figure>

<p>注意：</p>
<ol>
<li><p><code>hexo new</code>命令新建文章时会将特殊字符（空格、加号等）转化为<code>-</code></p>
<p>eg：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> hexo new <span class="string">"GitHub Pages+Hexo+NexT"</span></span></span><br><span class="line">INFO  Created: E:\xxx\Hexo\source\_posts\GitHub-Pages-Hexo-NexT.md</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">2. 在使用&#96;publish&#96;命令发布草稿时需要用**文件名**，而不是文章标题</span><br><span class="line"></span><br><span class="line">   eg：</span><br><span class="line"></span><br><span class="line">   &#96;&#96;&#96;shell</span><br><span class="line">   $ hexo publish post GitHub-Pages-Hexo-NexT # post可以省略，因为layout默认就是post</span><br><span class="line">   INFO  Published: E:\Github\Hexo\source\_posts\GitHub-Pages-Hexo-NexT.md</span><br></pre></td></tr></table></figure>
</li>
<li><p>文件名为空时默认发布第一篇草稿</p>
<p>eg：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> hexo publish post .</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 或者</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> hexo publish post <span class="string">""</span></span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="代码块"><a href="#代码块" class="headerlink" title="代码块"></a>代码块</h3><p><a href="https://hexo.io/zh-cn/docs/tag-plugins.html#%E4%BB%A3%E7%A0%81%E5%9D%97" target="_blank" rel="noopener"><strong>指定语言，附加说明和网址</strong></a></p>
<ol>
<li><p>Hexo 格式</p>
<p>代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;% codeblock lang:java title http:<span class="comment">//www.baidu.com link test %&#125;</span></span><br><span class="line">public <span class="keyword">static</span> <span class="keyword">void</span> main(<span class="built_in">String</span>[] args) &#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br><span class="line">&#123;% endcodeblock %&#125;</span><br></pre></td></tr></table></figure>

<p>样式：</p>
<p><img src="https://i.loli.net/2019/01/04/5c2ec9c02da97.jpg" alt=""></p>
</li>
<li><p>Markdown 格式</p>
<p>代码：</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">​<span class="code">```</span> java title http://www.baidu.com link test</span><br><span class="line">public static void main(String[] args) &#123;</span><br><span class="line"><span class="code">	...</span></span><br><span class="line">&#125;</span><br><span class="line">​</span><br></pre></td></tr></table></figure>

<p>样式：</p>
<p><img src="https://i.loli.net/2019/01/04/5c2ec9c02da97.jpg" alt=""></p>
</li>
</ol>
<h3 id="引用站内文章"><a href="#引用站内文章" class="headerlink" title="引用站内文章"></a>引用站内文章</h3><blockquote>
<p><a href="https://www.jibing57.com/2017/10/30/how-to-use-post-link-on-hexo/" target="_blank" rel="noopener">Hexo引用站内文章</a></p>
</blockquote>
<h4 id="语法："><a href="#语法：" class="headerlink" title="语法："></a>语法：</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% post_link slug [title] %&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>slug </p>
<p>_posts 文件夹下需要引用的文章的 markdown 文件的名字，不带后缀</p>
</li>
<li><p>title</p>
<p>链接显示的文字</p>
</li>
</ul>
<h4 id="eg："><a href="#eg：" class="headerlink" title="eg："></a>eg：</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;% post_link Comments 留言板 %&#125;</span><br></pre></td></tr></table></figure>

<h4 id="效果："><a href="#效果：" class="headerlink" title="效果："></a>效果：</h4><a href="/2019/01/03/Comments/" title="留言板">留言板</a>

<h2 id="底层原理"><a href="#底层原理" class="headerlink" title="底层原理"></a>底层原理</h2><blockquote>
<p><a href="https://www.jianshu.com/p/c5d333e6353c" target="_blank" rel="noopener">next主题的模板引擎swig语法介绍</a></p>
</blockquote>
]]></content>
      <categories>
        <category>Blog</category>
      </categories>
      <tags>
        <tag>GitHub Pages</tag>
        <tag>Hexo</tag>
        <tag>NexT</tag>
      </tags>
  </entry>
  <entry>
    <title>Study Notes of MySQL</title>
    <url>/2018/06/09/Study-Notes-of-MySQL/</url>
    <content><![CDATA[<p><img src="https://upload.wikimedia.org/wikipedia/zh/thumb/6/62/MySQL.svg/1200px-MySQL.svg.png" alt=""></p>
<a id="more"></a>

<h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><p>单行注释：–</p>
<p>多行注释：/* */</p>
<h2 id="主键"><a href="#主键" class="headerlink" title="主键"></a>主键</h2><p><strong>修改自增 ID 起始值</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">alter table tablename AUTO_INCREMENT&#x3D;1;</span><br></pre></td></tr></table></figure>

<h2 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h2><ol>
<li><p><code>IN</code>运算符不要嵌套使用，效率会急剧下降。因此一般使用连接查询，而不使用子查询。</p>
<p>执行子查询时，MYSQL 需要创建临时表，查询完毕后再删除这些临时表，所以，子查询的速度慢。</p>
</li>
</ol>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><h3 id="日期"><a href="#日期" class="headerlink" title="日期"></a>日期</h3><h4 id="DATE-FORMAT"><a href="#DATE-FORMAT" class="headerlink" title="DATE_FORMAT"></a>DATE_FORMAT</h4><blockquote>
<p><a href="http://www.w3school.com.cn/sql/func_date_format.asp" target="_blank" rel="noopener">MySQL DATE_FORMAT() 函数</a></p>
<p><a href="https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html#function_date-format" target="_blank" rel="noopener">DATE_FORMAT(date,format)</a></p>
</blockquote>
<p>DATE_FORMAT() 函数用于以不同的格式显示日期/时间数据。</p>
<p>eg: 输出格式为：YYYY-mm-dd HH:ss</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line"><span class="keyword">DATE_FORMAT</span>(startTime,<span class="string">"%Y-%m-%d %H:%i"</span>) <span class="keyword">AS</span> startTime,</span><br><span class="line"><span class="keyword">DATE_FORMAT</span>(endTime,<span class="string">"%Y-%m-%d %H:%i"</span>) <span class="keyword">AS</span> endTime</span><br><span class="line"><span class="keyword">from</span> tableName;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>格式</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>%a</td>
<td>缩写星期名</td>
</tr>
<tr>
<td>%b</td>
<td>缩写月名</td>
</tr>
<tr>
<td>%c</td>
<td>月，数值</td>
</tr>
<tr>
<td>%D</td>
<td>带有英文前缀的月中的天</td>
</tr>
<tr>
<td>%d</td>
<td>月的天，数值(00-31)</td>
</tr>
<tr>
<td>%e</td>
<td>月的天，数值(0-31)</td>
</tr>
<tr>
<td>%f</td>
<td>微秒</td>
</tr>
<tr>
<td>%H</td>
<td>小时 (00-23)</td>
</tr>
<tr>
<td>%h</td>
<td>小时 (01-12)</td>
</tr>
<tr>
<td>%I</td>
<td>小时 (01-12)</td>
</tr>
<tr>
<td>%i</td>
<td>分钟，数值(00-59)</td>
</tr>
<tr>
<td>%j</td>
<td>年的天 (001-366)</td>
</tr>
<tr>
<td>%k</td>
<td>小时 (0-23)</td>
</tr>
<tr>
<td>%l</td>
<td>小时 (1-12)</td>
</tr>
<tr>
<td>%M</td>
<td>月名</td>
</tr>
<tr>
<td>%m</td>
<td>月，数值(00-12)</td>
</tr>
<tr>
<td>%p</td>
<td>AM 或 PM</td>
</tr>
<tr>
<td>%r</td>
<td>时间，12-小时（hh:mm:ss AM 或 PM）</td>
</tr>
<tr>
<td>%S</td>
<td>秒(00-59)</td>
</tr>
<tr>
<td>%s</td>
<td>秒(00-59)</td>
</tr>
<tr>
<td>%T</td>
<td>时间, 24-小时 (hh:mm:ss)</td>
</tr>
<tr>
<td>%U</td>
<td>周 (00-53) 星期日是一周的第一天</td>
</tr>
<tr>
<td>%u</td>
<td>周 (00-53) 星期一是一周的第一天</td>
</tr>
<tr>
<td>%V</td>
<td>周 (01-53) 星期日是一周的第一天，与 %X 使用</td>
</tr>
<tr>
<td>%v</td>
<td>周 (01-53) 星期一是一周的第一天，与 %x 使用</td>
</tr>
<tr>
<td>%W</td>
<td>星期名</td>
</tr>
<tr>
<td>%w</td>
<td>周的天 （0=星期日, 6=星期六）</td>
</tr>
<tr>
<td>%X</td>
<td>年，其中的星期日是周的第一天，4 位，与 %V 使用</td>
</tr>
<tr>
<td>%x</td>
<td>年，其中的星期一是周的第一天，4 位，与 %v 使用</td>
</tr>
<tr>
<td>%Y</td>
<td>年，4 位</td>
</tr>
<tr>
<td>%y</td>
<td>年，2 位</td>
</tr>
</tbody></table>
<h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><h4 id="CONCAT"><a href="#CONCAT" class="headerlink" title="CONCAT"></a>CONCAT</h4><blockquote>
<p><a href="https://www.w3cschool.cn/sql/sz8w1ozt.html" target="_blank" rel="noopener">SQL CONCAT() 函数</a></p>
<p><a href="https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_concat" target="_blank" rel="noopener">CONCAT(str1,str2,…)</a></p>
</blockquote>
<p><strong>CONCAT</strong> 函数用于将两个字符串连接为一个字符串</p>
<p>eg: </p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">SQL&gt; SELECT CONCAT('FIRST ', 'SECOND');</span><br><span class="line">+<span class="comment">----------------------------+</span></span><br><span class="line">| CONCAT('FIRST ', 'SECOND') |</span><br><span class="line">+<span class="comment">----------------------------+</span></span><br><span class="line">| FIRST SECOND               |</span><br><span class="line">+<span class="comment">----------------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<p>在 MyBatis 中常用于编写模糊查询语句：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"list"</span> <span class="attr">resultType</span>=<span class="string">"map"</span>&gt;</span></span><br><span class="line">    select * from tableName</span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"condition != null and condition != ''"</span>&gt;</span></span><br><span class="line">        where fieldName like CONCAT('%',#&#123;condition&#125;,'%')</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><ul>
<li>MySql 中<code>select null + 1</code>的结果是<code>null</code></li>
</ul>
]]></content>
      <categories>
        <category>Notes</category>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>World Cup Mini Programe</title>
    <url>/2018/06/06/World-Cup-Mini-Programe/</url>
    <content><![CDATA[<p>[TOC]</p>
<h1 id="原型设计"><a href="#原型设计" class="headerlink" title="原型设计"></a>原型设计</h1><blockquote>
<p><a href="http://pro.modao.cc/app/yNV6IjXGdgKjzuzbWWoCESKpAsUV3a1#screen=sACD9810F7B1527599208486" target="_blank" rel="noopener">世界杯</a></p>
</blockquote>
<h1 id="建表"><a href="#建表" class="headerlink" title="建表"></a>建表</h1><blockquote>
<p><a href="http://gz-dmc.cloud.tencent.com/v2/login" target="_blank" rel="noopener">数据库</a></p>
</blockquote>
<h2 id="用户表"><a href="#用户表" class="headerlink" title="用户表"></a>用户表</h2><p>表名：my_user</p>
<table>
<thead>
<tr>
<th>列名</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>int(11)</td>
<td>用户自增id</td>
</tr>
<tr>
<td>open_id</td>
<td>varchar(100)</td>
<td>用户在小程序中的唯一识别id</td>
</tr>
<tr>
<td>union_id</td>
<td>varchar(100)</td>
<td>用户在同一主体的多个小程序中的唯一识别id</td>
</tr>
<tr>
<td>nick_name</td>
<td>varchar(50)</td>
<td>用户昵称，由于用户的昵称中可能包含表情，所以要用UTF8MB4编码</td>
</tr>
<tr>
<td>head_img_url</td>
<td>varchar(255)</td>
<td>用户头像地址</td>
</tr>
<tr>
<td>gender</td>
<td>enum</td>
<td>性别(1：男，2：女)</td>
</tr>
<tr>
<td>source</td>
<td>tinyint</td>
<td>用户来源，从分享进来或者直接搜索等</td>
</tr>
<tr>
<td>region</td>
<td>varchar</td>
<td>用户所在地区</td>
</tr>
<tr>
<td>first_login_time</td>
<td>timestamp</td>
<td>用户第一次登录的时间</td>
</tr>
<tr>
<td>last_login_time</td>
<td>timestamp</td>
<td>用户最后一次登录时间</td>
</tr>
<tr>
<td>collection_count</td>
<td>int</td>
<td>今日集球衣的次数</td>
</tr>
<tr>
<td>collection_shirts</td>
<td>varchar(255)</td>
<td>今日可收集的候选集合（球队名之间用”_”连接）</td>
</tr>
</tbody></table>
<h2 id="海报表"><a href="#海报表" class="headerlink" title="海报表"></a>海报表</h2><p>表名：poster</p>
<table>
<thead>
<tr>
<th>列名</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>int</td>
<td>海报自增id</td>
</tr>
<tr>
<td>template_id</td>
<td>int</td>
<td>模板id</td>
</tr>
<tr>
<td>team_name</td>
<td>varchar(50)</td>
<td>球队名</td>
</tr>
<tr>
<td>music_url</td>
<td>varchar(255)</td>
<td>海报背景音乐的链接地址</td>
</tr>
<tr>
<td>slogan_id</td>
<td>int</td>
<td>标语id</td>
</tr>
<tr>
<td>poster_url</td>
<td>varchar(255)</td>
<td>生成后的海报图片链接地址</td>
</tr>
</tbody></table>
<h2 id="模板表"><a href="#模板表" class="headerlink" title="模板表"></a>模板表</h2><p>表名：template</p>
<table>
<thead>
<tr>
<th>列名</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>int</td>
<td>模板自增id</td>
</tr>
<tr>
<td>template_url</td>
<td>varchar(255)</td>
<td>模板图片的链接地址</td>
</tr>
<tr>
<td>music_url</td>
<td>varchar(255)</td>
<td>海报背景音乐链接地址</td>
</tr>
</tbody></table>
<h2 id="加油词表"><a href="#加油词表" class="headerlink" title="加油词表"></a>加油词表</h2><p>表名：slogan</p>
<table>
<thead>
<tr>
<th>列名</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>int</td>
<td>标语自增id</td>
</tr>
<tr>
<td>content</td>
<td>varchar(100)</td>
<td>标语内容</td>
</tr>
</tbody></table>
<h2 id="音乐表"><a href="#音乐表" class="headerlink" title="音乐表"></a><del>音乐表</del></h2><p>表名：music</p>
<table>
<thead>
<tr>
<th>列名</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>int</td>
<td>音乐自增id</td>
</tr>
<tr>
<td>music_url</td>
<td>varchar(255)</td>
<td>音乐链接地址</td>
</tr>
</tbody></table>
<h2 id="球队表"><a href="#球队表" class="headerlink" title="球队表"></a><del>球队表</del></h2><p>表名：team</p>
<table>
<thead>
<tr>
<th>列名</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>int</td>
<td>球队自增id</td>
</tr>
<tr>
<td>name</td>
<td>varchar(50)</td>
<td>球队名</td>
</tr>
</tbody></table>
<h2 id="赛程表"><a href="#赛程表" class="headerlink" title="赛程表"></a>赛程表</h2><p>表名：match_schedule</p>
<table>
<thead>
<tr>
<th>列名</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>int</td>
<td>赛程自增id</td>
</tr>
<tr>
<td>match_type</td>
<td>varchar(10)</td>
<td>比赛类型</td>
</tr>
<tr>
<td>group</td>
<td>varchar(10)</td>
<td>分组情况</td>
</tr>
<tr>
<td>home_team</td>
<td>varchar(10)</td>
<td>主队</td>
</tr>
<tr>
<td>away_team</td>
<td>varchar(10)</td>
<td>客队</td>
</tr>
<tr>
<td>begin_time</td>
<td>timestamp</td>
<td>比赛开始时间</td>
</tr>
<tr>
<td>state</td>
<td>int</td>
<td>比赛状态（0：未开始；1：已开始；2：已结束）</td>
</tr>
</tbody></table>
<h2 id="预约表"><a href="#预约表" class="headerlink" title="预约表"></a>预约表</h2><p>表名：subscribe</p>
<table>
<thead>
<tr>
<th>列名</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>u_id</td>
<td>int</td>
<td>用户id</td>
</tr>
<tr>
<td>m_id</td>
<td>int</td>
<td>赛程id</td>
</tr>
</tbody></table>
<h2 id="球衣表"><a href="#球衣表" class="headerlink" title="球衣表"></a><del>球衣表</del></h2><p>表名：polo_shirt</p>
<table>
<thead>
<tr>
<th>列名</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>int</td>
<td>球衣自增id</td>
</tr>
<tr>
<td>team_name</td>
<td>varchar(50)</td>
<td>所属球队名称</td>
</tr>
<tr>
<td>repertory</td>
<td>int</td>
<td>库存</td>
</tr>
<tr>
<td>probability</td>
<td>double</td>
<td>概率</td>
</tr>
<tr>
<td></td>
<td>String</td>
<td>注释</td>
</tr>
</tbody></table>
<h2 id="球衣收集记录表"><a href="#球衣收集记录表" class="headerlink" title="球衣收集记录表"></a>球衣收集记录表</h2><p>表名：collection_record</p>
<table>
<thead>
<tr>
<th>列名</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>int</td>
<td>集到的球衣记录id</td>
</tr>
<tr>
<td>u_id</td>
<td>int</td>
<td>用户id</td>
</tr>
<tr>
<td>argentina</td>
<td>int</td>
<td>集到阿根廷队球衣的数量</td>
</tr>
<tr>
<td>belgium</td>
<td>int</td>
<td>集到比利时队球衣的数量</td>
</tr>
<tr>
<td>brazil</td>
<td>int</td>
<td>集到巴西队球衣的数量</td>
</tr>
<tr>
<td>england</td>
<td>int</td>
<td>集到英国队球衣的数量</td>
</tr>
<tr>
<td>france</td>
<td>int</td>
<td>集到法国队球衣的数量</td>
</tr>
<tr>
<td>germany</td>
<td>int</td>
<td>集到德国队球衣的数量</td>
</tr>
<tr>
<td>mexico</td>
<td>int</td>
<td>集到墨西哥队球衣的数量</td>
</tr>
<tr>
<td>poland</td>
<td>int</td>
<td>集到波兰队球衣的数量</td>
</tr>
<tr>
<td>portugal</td>
<td>int</td>
<td>集到葡萄牙队球衣的数量</td>
</tr>
<tr>
<td>russia</td>
<td>int</td>
<td>集到俄罗斯队球衣的数量</td>
</tr>
<tr>
<td>serbia</td>
<td>int</td>
<td>集到塞尔维亚队球衣的数量</td>
</tr>
<tr>
<td>south_korea</td>
<td>int</td>
<td>集到韩国队球衣的数量</td>
</tr>
<tr>
<td>spain</td>
<td>int</td>
<td>集到西班牙队球衣的数量</td>
</tr>
<tr>
<td>sweden</td>
<td>int</td>
<td>集到瑞典队球衣的数量</td>
</tr>
<tr>
<td>switzerland</td>
<td>int</td>
<td>集到瑞士队球衣的数量</td>
</tr>
</tbody></table>
<h2 id="球衣赠送记录表"><a href="#球衣赠送记录表" class="headerlink" title="球衣赠送记录表"></a>球衣赠送记录表</h2><p>表名：shirt_share</p>
<table>
<thead>
<tr>
<th>列名</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>int</td>
<td>球衣分享记录id</td>
</tr>
<tr>
<td>sharer_id</td>
<td>int</td>
<td>分享者id</td>
</tr>
<tr>
<td>receiver_id</td>
<td>int</td>
<td>领取者id（-1代表没有人领取）</td>
</tr>
<tr>
<td>team_name</td>
<td>varchar(50)</td>
<td>分享的球衣所属球队名</td>
</tr>
</tbody></table>
<h2 id="奖品表"><a href="#奖品表" class="headerlink" title="奖品表"></a>奖品表</h2><p>表名：award </p>
<table>
<thead>
<tr>
<th>列名</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>int</td>
<td>奖品自增id</td>
</tr>
<tr>
<td>name</td>
<td>varchar(50)</td>
<td>奖品名称</td>
</tr>
<tr>
<td>real_price</td>
<td>varchar(50)</td>
<td>真实价格</td>
</tr>
<tr>
<td>price</td>
<td>double</td>
<td>标价</td>
</tr>
<tr>
<td>award_img_url</td>
<td>varchar(255)</td>
<td>奖品图片链接地址</td>
</tr>
<tr>
<td>award_url</td>
<td>varchar(255)</td>
<td>奖品详情链接地址</td>
</tr>
<tr>
<td>win_condition</td>
<td>varchar(255)</td>
<td>获取条件（所需球衣id拼接字符串，例如：1_2_3）</td>
</tr>
<tr>
<td>v_repertory</td>
<td>int</td>
<td>虚拟库存</td>
</tr>
<tr>
<td>repertory</td>
<td>int</td>
<td>真实库存</td>
</tr>
</tbody></table>
<h2 id="兑换记录表"><a href="#兑换记录表" class="headerlink" title="兑换记录表"></a>兑换记录表</h2><p>表名：convert_record</p>
<table>
<thead>
<tr>
<th>列名</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>int</td>
<td>兑换记录id</td>
</tr>
<tr>
<td>u_id</td>
<td>int</td>
<td>中奖用户id</td>
</tr>
<tr>
<td>user_name</td>
<td>String</td>
<td>中奖用户名</td>
</tr>
<tr>
<td>a_id</td>
<td>int</td>
<td>中将奖品id</td>
</tr>
<tr>
<td>award_name</td>
<td>String</td>
<td>中奖奖品名称</td>
</tr>
<tr>
<td>win_time</td>
<td>timestamp</td>
<td>中奖时间</td>
</tr>
</tbody></table>
<h1 id="用户相关信息"><a href="#用户相关信息" class="headerlink" title="用户相关信息"></a>用户相关信息</h1><h2 id="登陆接口"><a href="#登陆接口" class="headerlink" title="登陆接口"></a>登陆接口</h2><h3 id="接口概述"><a href="#接口概述" class="headerlink" title="接口概述"></a>接口概述</h3><h3 id="URL说明"><a href="#URL说明" class="headerlink" title="URL说明"></a>URL说明</h3><p>URL地址：<code>http://api.99yhrc.com/worldCup_test/user/login</code></p>
<p>请求方式：POST</p>
<h3 id="请求参数"><a href="#请求参数" class="headerlink" title="请求参数"></a>请求参数</h3><table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>参数说明</th>
</tr>
</thead>
<tbody><tr>
<td>code</td>
<td>String</td>
<td>登陆码</td>
</tr>
</tbody></table>
<h3 id="返回内容"><a href="#返回内容" class="headerlink" title="返回内容"></a>返回内容</h3><table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>result</td>
<td>Result&lt;Map&lt;String, Object&gt;&gt;</td>
<td>请求结果封装</td>
</tr>
<tr>
<td>++success</td>
<td>boolean</td>
<td>请求是否成功</td>
</tr>
<tr>
<td>++error</td>
<td>String</td>
<td>请求失败时的提示信息</td>
</tr>
<tr>
<td>++data</td>
<td>Map&lt;String, Object&gt;</td>
<td>请求成功时返回的数据封装</td>
</tr>
<tr>
<td>++++userId</td>
<td>int</td>
<td>用户自增id</td>
</tr>
<tr>
<td>++++loginResult</td>
<td>LoginResult</td>
<td>登陆结果集封装</td>
</tr>
<tr>
<td>++++++openId</td>
<td>String</td>
<td>用户在小程序中的唯一识别id</td>
</tr>
<tr>
<td>++++++sessionId</td>
<td>String</td>
<td>加盐后的小程序密钥</td>
</tr>
</tbody></table>
<h2 id="获取用户信息"><a href="#获取用户信息" class="headerlink" title="获取用户信息"></a>获取用户信息</h2><h3 id="接口概述-1"><a href="#接口概述-1" class="headerlink" title="接口概述"></a>接口概述</h3><h3 id="URL说明-1"><a href="#URL说明-1" class="headerlink" title="URL说明"></a>URL说明</h3><p>URL地址：<code>http://api.99yhrc.com/worldCup_test/user/userInf</code></p>
<p>请求方式：POST</p>
<h3 id="请求参数-1"><a href="#请求参数-1" class="headerlink" title="请求参数"></a>请求参数</h3><table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>参数说明</th>
</tr>
</thead>
<tbody><tr>
<td>openId</td>
<td>String</td>
<td>微信小程序中用于唯一标识一个用户</td>
</tr>
<tr>
<td>sessionId</td>
<td>String</td>
<td>加盐后的小程序密钥</td>
</tr>
<tr>
<td>uID</td>
<td>int</td>
<td>用户自增id</td>
</tr>
<tr>
<td>nick_name</td>
<td>String</td>
<td>用户昵称，由于用户的昵称中可能包含表情，所以要用UTF8MB4编码</td>
</tr>
<tr>
<td>head_img_url</td>
<td>String</td>
<td>用户头像地址</td>
</tr>
</tbody></table>
<h3 id="返回内容-1"><a href="#返回内容-1" class="headerlink" title="返回内容"></a>返回内容</h3><table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>result</td>
<td>Result&lt;Map&lt;String, Object&gt;&gt;</td>
<td>请求结果封装</td>
</tr>
<tr>
<td>++success</td>
<td>boolean</td>
<td>请求是否成功</td>
</tr>
<tr>
<td>++error</td>
<td>String</td>
<td>请求失败时的提示信息</td>
</tr>
</tbody></table>
<h1 id="为喜欢的球队加油"><a href="#为喜欢的球队加油" class="headerlink" title="为喜欢的球队加油"></a>为喜欢的球队加油</h1><h2 id="生成海报"><a href="#生成海报" class="headerlink" title="生成海报"></a>生成海报</h2><h3 id="接口概述-2"><a href="#接口概述-2" class="headerlink" title="接口概述"></a>接口概述</h3><p>根据用户选择的球队生成海报。</p>
<h3 id="URL"><a href="#URL" class="headerlink" title="URL"></a>URL</h3><p>URL地址：<code>http://api.99yhrc.com/worldCup_test/poster/makePoster</code></p>
<p>请求方式：POST</p>
<h3 id="请求参数-2"><a href="#请求参数-2" class="headerlink" title="请求参数"></a>请求参数</h3><table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>参数说明</th>
</tr>
</thead>
<tbody><tr>
<td>openId</td>
<td>String</td>
<td>微信小程序中用于唯一标识一个用户</td>
</tr>
<tr>
<td>sessionId</td>
<td>String</td>
<td>加盐后的小程序密钥</td>
</tr>
<tr>
<td>uID</td>
<td>int</td>
<td>用户id</td>
</tr>
<tr>
<td>teamName</td>
<td>String</td>
<td>球队名</td>
</tr>
<tr>
<td>templateName</td>
<td>String</td>
<td>使用的模板名（”template1“—“template6”）</td>
</tr>
</tbody></table>
<h3 id="返回内容-2"><a href="#返回内容-2" class="headerlink" title="返回内容"></a>返回内容</h3><table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>result</td>
<td>Result&lt;Map&lt;String, String&gt;&gt;</td>
<td>请求结果封装</td>
</tr>
<tr>
<td>++success</td>
<td>boolean</td>
<td>请求是否成功</td>
</tr>
<tr>
<td>++error</td>
<td>String</td>
<td>请求失败时的提示信息</td>
</tr>
<tr>
<td>++data</td>
<td>Map&lt;String, String&gt;</td>
<td>请求成功时返回的数据封装</td>
</tr>
<tr>
<td>++++posterUrl</td>
<td>String</td>
<td>海报链接</td>
</tr>
<tr>
<td>++++templateName</td>
<td>String</td>
<td>使用的模板名（”template1“—“template6”）</td>
</tr>
</tbody></table>
<h1 id="分享集球衣"><a href="#分享集球衣" class="headerlink" title="分享集球衣"></a>分享集球衣</h1><h2 id="分享集球衣-1"><a href="#分享集球衣-1" class="headerlink" title="分享集球衣"></a>分享集球衣</h2><h3 id="接口概述-3"><a href="#接口概述-3" class="headerlink" title="接口概述"></a>接口概述</h3><h3 id="URL说明-2"><a href="#URL说明-2" class="headerlink" title="URL说明"></a>URL说明</h3><p>URL地址：<code>http://api.99yhrc.com/worldCup_test/collection/getPoloShirt</code></p>
<p>请求方式：GET</p>
<h3 id="请求参数-3"><a href="#请求参数-3" class="headerlink" title="请求参数"></a>请求参数</h3><table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>参数说明</th>
</tr>
</thead>
<tbody><tr>
<td>uID</td>
<td>int</td>
<td>用户id</td>
</tr>
<tr>
<td>openId</td>
<td>String</td>
<td>微信小程序中用于唯一标识一个用户</td>
</tr>
</tbody></table>
<h3 id="返回内容-3"><a href="#返回内容-3" class="headerlink" title="返回内容"></a>返回内容</h3><table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>success</td>
<td>boolean</td>
<td>请求是否成功</td>
</tr>
<tr>
<td>error</td>
<td>String</td>
<td>请求失败时的提示信息</td>
</tr>
<tr>
<td>data</td>
<td>String</td>
<td>请求成功时返回的数据（球衣所属球队名称）</td>
</tr>
</tbody></table>
<h2 id="集球衣记录"><a href="#集球衣记录" class="headerlink" title="集球衣记录"></a>集球衣记录</h2><h3 id="接口概述-4"><a href="#接口概述-4" class="headerlink" title="接口概述"></a>接口概述</h3><h3 id="URL说明-3"><a href="#URL说明-3" class="headerlink" title="URL说明"></a>URL说明</h3><p>URL地址：<code>http://localhost:8090/world_cup_test/collection/records</code></p>
<p>请求方式：GET</p>
<h3 id="请求参数-4"><a href="#请求参数-4" class="headerlink" title="请求参数"></a>请求参数</h3><table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>参数说明</th>
</tr>
</thead>
<tbody><tr>
<td>uID</td>
<td>int</td>
<td>用户自增id</td>
</tr>
<tr>
<td>openId</td>
<td>String</td>
<td>微信小程序中用于唯一标识一个用户</td>
</tr>
<tr>
<td>sessionId</td>
<td>String</td>
<td>加盐后的小程序密钥</td>
</tr>
</tbody></table>
<h3 id="返回内容-4"><a href="#返回内容-4" class="headerlink" title="返回内容"></a>返回内容</h3><table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>result</td>
<td>Result&lt;List<ShirtRecord>&gt;</td>
<td>请求结果封装</td>
</tr>
<tr>
<td>++success</td>
<td>boolean</td>
<td>请求是否成功</td>
</tr>
<tr>
<td>++error</td>
<td>String</td>
<td>请求失败时的提示信息</td>
</tr>
<tr>
<td>++data</td>
<td>List<ShirtRecord></td>
<td>按集到的球衣数量从大到小排好序的记录列表</td>
</tr>
</tbody></table>
<p>ShirtRecord说明</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>teamName</td>
<td>String</td>
<td>球队名</td>
</tr>
<tr>
<td>count</td>
<td>int</td>
<td>集到的数量</td>
</tr>
</tbody></table>
<h2 id="赠送球衣"><a href="#赠送球衣" class="headerlink" title="赠送球衣"></a>赠送球衣</h2><h3 id="接口概述-5"><a href="#接口概述-5" class="headerlink" title="接口概述"></a>接口概述</h3><h3 id="URL说明-4"><a href="#URL说明-4" class="headerlink" title="URL说明"></a>URL说明</h3><p>URL地址：<code>http://api.99yhrc.com/worldCup_test/poloShirt/sendShirt</code></p>
<p>请求方式：POST</p>
<h3 id="请求参数-5"><a href="#请求参数-5" class="headerlink" title="请求参数"></a>请求参数</h3><table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>参数说明</th>
</tr>
</thead>
<tbody><tr>
<td>uID</td>
<td>int</td>
<td>用户自增id</td>
</tr>
<tr>
<td>openId</td>
<td>String</td>
<td>微信小程序中用于唯一标识一个用户</td>
</tr>
<tr>
<td>sessionId</td>
<td>String</td>
<td>加盐后的小程序密钥</td>
</tr>
<tr>
<td>teamName</td>
<td>String</td>
<td>球衣所属球队的名称</td>
</tr>
</tbody></table>
<h3 id="返回内容-5"><a href="#返回内容-5" class="headerlink" title="返回内容"></a>返回内容</h3><table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>result</td>
<td>Result<Integer></td>
<td>请求结果封装</td>
</tr>
<tr>
<td>++success</td>
<td>boolean</td>
<td>请求是否成功</td>
</tr>
<tr>
<td>++error</td>
<td>String</td>
<td>请求失败时的提示信息</td>
</tr>
<tr>
<td>++data</td>
<td>Integer</td>
<td>赠送记录Id</td>
</tr>
</tbody></table>
<h2 id="领取球衣"><a href="#领取球衣" class="headerlink" title="领取球衣"></a>领取球衣</h2><h3 id="接口概述-6"><a href="#接口概述-6" class="headerlink" title="接口概述"></a>接口概述</h3><h3 id="URL说明-5"><a href="#URL说明-5" class="headerlink" title="URL说明"></a>URL说明</h3><p>URL地址：<code>http://api.99yhrc.com/worldCup_test/poloShirt/receiveShirt</code></p>
<p>请求方式：POST</p>
<h3 id="请求参数-6"><a href="#请求参数-6" class="headerlink" title="请求参数"></a>请求参数</h3><table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>参数说明</th>
</tr>
</thead>
<tbody><tr>
<td>uID</td>
<td>int</td>
<td>当前用户id</td>
</tr>
<tr>
<td>openId</td>
<td>String</td>
<td>微信小程序中用于唯一标识一个用户</td>
</tr>
<tr>
<td>sessionId</td>
<td>String</td>
<td>加盐后的小程序密钥</td>
</tr>
<tr>
<td>sharerId</td>
<td>int</td>
<td>球衣分享者的id</td>
</tr>
<tr>
<td>teamName</td>
<td>String</td>
<td>球衣所属球队名</td>
</tr>
<tr>
<td>sendRecordId</td>
<td>int</td>
<td>赠送记录id</td>
</tr>
</tbody></table>
<h3 id="返回内容-6"><a href="#返回内容-6" class="headerlink" title="返回内容"></a>返回内容</h3><table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>result</td>
<td>Result</td>
<td>请求结果封装</td>
</tr>
<tr>
<td>++success</td>
<td>boolean</td>
<td>请求是否成功</td>
</tr>
<tr>
<td>++error</td>
<td>String</td>
<td>请求失败时的提示信息</td>
</tr>
</tbody></table>
<h2 id="索要球衣"><a href="#索要球衣" class="headerlink" title="索要球衣"></a>索要球衣</h2><h3 id="接口概述-7"><a href="#接口概述-7" class="headerlink" title="接口概述"></a>接口概述</h3><h3 id="URL说明-6"><a href="#URL说明-6" class="headerlink" title="URL说明"></a>URL说明</h3><p>URL地址：<code>http://api.99yhrc.com/worldCup_test/poloShirt/chargeShirt</code></p>
<p>请求方式：POST</p>
<h3 id="请求参数-7"><a href="#请求参数-7" class="headerlink" title="请求参数"></a>请求参数</h3><table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>参数说明</th>
</tr>
</thead>
<tbody><tr>
<td>uID</td>
<td>int</td>
<td>当前用户ID</td>
</tr>
<tr>
<td>openId</td>
<td>String</td>
<td>微信小程序中用于唯一标识一个用户</td>
</tr>
<tr>
<td>sessionId</td>
<td>String</td>
<td>加盐后的小程序密钥</td>
</tr>
<tr>
<td>chargerId</td>
<td>int</td>
<td>索要者的ID</td>
</tr>
<tr>
<td>teamName</td>
<td>String</td>
<td>球衣所属球队名称</td>
</tr>
</tbody></table>
<h3 id="返回内容-7"><a href="#返回内容-7" class="headerlink" title="返回内容"></a>返回内容</h3><table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>result</td>
<td>Result&lt;Map&lt;String, Object&gt;&gt;</td>
<td>请求结果封装</td>
</tr>
<tr>
<td>++success</td>
<td>boolean</td>
<td>请求是否成功</td>
</tr>
<tr>
<td>++error</td>
<td>String</td>
<td>请求失败时的提示信息</td>
</tr>
</tbody></table>
<h2 id="活动奖品"><a href="#活动奖品" class="headerlink" title="活动奖品"></a>活动奖品</h2><h3 id="接口概述-8"><a href="#接口概述-8" class="headerlink" title="接口概述"></a>接口概述</h3><h3 id="URL说明-7"><a href="#URL说明-7" class="headerlink" title="URL说明"></a>URL说明</h3><p>URL地址：<code>http://api.99yhrc.com/worldCup_test/collection/awards</code></p>
<p>请求方式：GET</p>
<h3 id="请求参数-8"><a href="#请求参数-8" class="headerlink" title="请求参数"></a>请求参数</h3><p>无</p>
<h3 id="返回内容-8"><a href="#返回内容-8" class="headerlink" title="返回内容"></a>返回内容</h3><table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>result</td>
<td>Result&lt;List<Award>&gt;</td>
<td>请求结果封装</td>
</tr>
<tr>
<td>++success</td>
<td>boolean</td>
<td>请求是否成功</td>
</tr>
<tr>
<td>++error</td>
<td>String</td>
<td>请求失败时的提示信息</td>
</tr>
<tr>
<td>++data</td>
<td>List<Award></td>
<td>请求成功时返回的数据封装</td>
</tr>
<tr>
<td>++++name</td>
<td>String</td>
<td>奖品名称</td>
</tr>
<tr>
<td>++++price</td>
<td>double</td>
<td>标价</td>
</tr>
<tr>
<td>++++awardUrl</td>
<td>String</td>
<td>奖品链接地址</td>
</tr>
<tr>
<td>++++winCondition</td>
<td>String</td>
<td>获取条件</td>
</tr>
</tbody></table>
<h1 id="赛程数据"><a href="#赛程数据" class="headerlink" title="赛程数据"></a>赛程数据</h1><blockquote>
<p><a href="http://data.2018.163.com/" target="_blank" rel="noopener">世界杯数据中心</a></p>
</blockquote>
<h1 id="接口模板"><a href="#接口模板" class="headerlink" title="接口模板"></a>接口模板</h1><h2 id="接口名"><a href="#接口名" class="headerlink" title="接口名"></a>接口名</h2><h3 id="接口概述-9"><a href="#接口概述-9" class="headerlink" title="接口概述"></a>接口概述</h3><h3 id="URL说明-8"><a href="#URL说明-8" class="headerlink" title="URL说明"></a>URL说明</h3><p>URL地址：<code>http://api.99yhrc.com/worldCup_test/</code></p>
<p>请求方式：GET/POST</p>
<h3 id="请求参数-9"><a href="#请求参数-9" class="headerlink" title="请求参数"></a>请求参数</h3><table>
<thead>
<tr>
<th>参数名</th>
<th>类型</th>
<th>参数说明</th>
</tr>
</thead>
<tbody><tr>
<td>openId</td>
<td>String</td>
<td>微信小程序中用于唯一标识一个用户</td>
</tr>
<tr>
<td>sessionId</td>
<td>String</td>
<td>加盐后的小程序密钥</td>
</tr>
</tbody></table>
<h3 id="返回内容-9"><a href="#返回内容-9" class="headerlink" title="返回内容"></a>返回内容</h3><table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>result</td>
<td>Result&lt;Map&lt;String, Object&gt;&gt;</td>
<td>请求结果封装</td>
</tr>
<tr>
<td>++success</td>
<td>boolean</td>
<td>请求是否成功</td>
</tr>
<tr>
<td>++error</td>
<td>String</td>
<td>请求失败时的提示信息</td>
</tr>
<tr>
<td>++data</td>
<td>Map&lt;String, Object&gt;</td>
<td>请求成功时返回的数据封装</td>
</tr>
</tbody></table>
]]></content>
  </entry>
  <entry>
    <title>Use of Markdown</title>
    <url>/2018/06/01/Markdown/</url>
    <content><![CDATA[<img src="https://i.loli.net/2018/12/26/5c23262feb7b6.jpg" width="100%"/>

<a id="more"></a>

<blockquote>
<p>Markdown 是一个 Web 上使用的文本到HTML的转换工具，可以通过简单、易读易写的文本格式生成结构化的HTML文档。目前 github、Stackoverflow 等网站均支持这种格式。</p>
<p><a href="http://www.markdown.cn/" target="_blank" rel="noopener">Markdown</a></p>
</blockquote>
<h2 id="生成目录"><a href="#生成目录" class="headerlink" title="生成目录"></a>生成目录</h2><p>TOC：table of contents</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[TOC]</span><br></pre></td></tr></table></figure>

<h2 id="修改图片尺寸"><a href="#修改图片尺寸" class="headerlink" title="修改图片尺寸"></a>修改图片尺寸</h2><blockquote>
<p><a href="https://support.typora.io/Resize-Image/" target="_blank" rel="noopener">Typora-Resize Images</a></p>
</blockquote>
<p>使用<code>img</code>标签指定图片样式，eg：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://www.google.com/doodles/kamma-rahbeks-241st-birthday"</span> <span class="attr">width</span>=<span class="string">"100%"</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h2><blockquote>
<p><a href="http://xianbai.me/learn-md/article/extension/table.html" target="_blank" rel="noopener">表格</a></p>
</blockquote>
<h3 id="单元格和表头"><a href="#单元格和表头" class="headerlink" title="单元格和表头"></a>单元格和表头</h3><p>使用 <code>|</code> 来分隔不同的单元格，使用 <code>-</code> 来分隔表头和其他行：</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">列名 | 列名</span><br><span class="line">--- | ---</span><br><span class="line">列值 | 列值</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>列名</th>
<th>列名</th>
</tr>
</thead>
<tbody><tr>
<td>列值</td>
<td>列值</td>
</tr>
</tbody></table>
<h3 id="对齐方式"><a href="#对齐方式" class="headerlink" title="对齐方式"></a>对齐方式</h3><p>在表头下方的分隔线标记中加入 <code>:</code>，即可标记下方单元格内容的对齐方式：</p>
<ul>
<li><code>:---</code> 代表左对齐</li>
<li><code>:--:</code> 代表居中对齐</li>
<li><code>---:</code> 代表右对齐</li>
</ul>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">| left | center | right |</span><br><span class="line">| :--- | :----: | ----: |</span><br><span class="line">| aaaa | bbbbbb | ccccc |</span><br><span class="line">| a    | b      | c     |</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left">left</th>
<th align="center">center</th>
<th align="right">right</th>
</tr>
</thead>
<tbody><tr>
<td align="left">aaaa</td>
<td align="center">bbbbbb</td>
<td align="right">ccccc</td>
</tr>
<tr>
<td align="left">a</td>
<td align="center">b</td>
<td align="right">c</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>Markdown</category>
      </categories>
      <tags>
        <tag>Markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>Use of Markdown</title>
    <url>/2018/06/01/Use-of-Markdown/</url>
    <content><![CDATA[<img src="https://i.loli.net/2018/12/26/5c23262feb7b6.jpg" width="100%"/>

<a id="more"></a>

<blockquote>
<p>Markdown 是一个 Web 上使用的文本到HTML的转换工具，可以通过简单、易读易写的文本格式生成结构化的HTML文档。目前 github、Stackoverflow 等网站均支持这种格式。——<a href="http://www.markdown.cn/" target="_blank" rel="noopener">Markdown</a></p>
</blockquote>
<h2 id="生成目录"><a href="#生成目录" class="headerlink" title="生成目录"></a>生成目录</h2><p>TOC：table of contents</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[TOC]</span><br></pre></td></tr></table></figure>

<h2 id="修改图片尺寸"><a href="#修改图片尺寸" class="headerlink" title="修改图片尺寸"></a>修改图片尺寸</h2><blockquote>
<p><a href="https://support.typora.io/Resize-Image/" target="_blank" rel="noopener">Typora-Resize Images</a></p>
</blockquote>
<p>使用<code>img</code>标签指定图片样式，eg：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://www.google.com/doodles/kamma-rahbeks-241st-birthday"</span> <span class="attr">width</span>=<span class="string">"100%"</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h2><blockquote>
<p><a href="http://xianbai.me/learn-md/article/extension/table.html" target="_blank" rel="noopener">表格</a></p>
</blockquote>
<h3 id="单元格和表头"><a href="#单元格和表头" class="headerlink" title="单元格和表头"></a>单元格和表头</h3><p>使用 <code>|</code> 来分隔不同的单元格，使用 <code>-</code> 来分隔表头和其他行：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">copy列名 | 列名</span><br><span class="line">--- | ---</span><br><span class="line">列值 | 列值</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left">列名</th>
<th align="left">列名</th>
</tr>
</thead>
<tbody><tr>
<td align="left">列值</td>
<td align="left">列值</td>
</tr>
</tbody></table>
<h3 id="对齐方式"><a href="#对齐方式" class="headerlink" title="对齐方式"></a>对齐方式</h3><p>在表头下方的分隔线标记中加入 <code>:</code>，即可标记下方单元格内容的对齐方式：</p>
<ul>
<li><code>:---</code> 代表左对齐</li>
<li><code>:--:</code> 代表居中对齐</li>
<li><code>---:</code> 代表右对齐</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">copy| left | center | right |</span><br><span class="line">| :--- | :----: | ----: |</span><br><span class="line">| aaaa | bbbbbb | ccccc |</span><br><span class="line">| a    | b      | c     |</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left">left</th>
<th align="center">center</th>
<th align="right">right</th>
</tr>
</thead>
<tbody><tr>
<td align="left">aaaa</td>
<td align="center">bbbbbb</td>
<td align="right">ccccc</td>
</tr>
<tr>
<td align="left">a</td>
<td align="center">b</td>
<td align="right">c</td>
</tr>
</tbody></table>
<h2 id="页面内跳转"><a href="#页面内跳转" class="headerlink" title="页面内跳转"></a>页面内跳转</h2><ol>
<li><p>页面内定义一个锚，及要跳转到的位置</p>
<p><code>&lt;span id=&quot;1&quot;&gt;XXX&lt;/span&gt;</code></p>
</li>
<li><p>使用如下格式定义链接即可</p>
<p><code>[跳转到XXX](#1)</code></p>
</li>
</ol>
]]></content>
      <categories>
        <category>Markdown</category>
      </categories>
      <tags>
        <tag>Markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>Study Notes of Spring Boot</title>
    <url>/2018/05/31/Study-Notes-of-Spring-Boot/</url>
    <content><![CDATA[<img src="https://www.zuojl.com/content/images/2018/11/spring-boot.png" width="100%"/>

<a id="more"></a>

<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><h3 id="规范"><a href="#规范" class="headerlink" title="规范"></a>规范</h3><blockquote>
<p><a href="https://blog.csdn.net/qq_42564846/article/details/84566822" target="_blank" rel="noopener">史上最全面的Spring Boot配置文件详解</a></p>
</blockquote>
<p>配置文件中的字符串尽量不要有下划线。配置中 key 不能带下划线，value 可以。</p>
<h3 id="多环境配置"><a href="#多环境配置" class="headerlink" title="多环境配置"></a>多环境配置</h3><blockquote>
<p><a href="https://yulaiz.com/spring-boot-maven-profiles/" target="_blank" rel="noopener">Spring-Boot application.yml 文件拆分，实现 maven 多环境动态启用 Profiles</a></p>
<p><a href="https://blog.csdn.net/qq_42564846/article/details/84566822#t12" target="_blank" rel="noopener">多配置文件</a></p>
</blockquote>
<h2 id="注解"><a href="#注解" class="headerlink" title="注解"></a>注解</h2><h3 id="CrossOrigin"><a href="#CrossOrigin" class="headerlink" title="@CrossOrigin"></a>@CrossOrigin</h3><blockquote>
<p><a href="http://www.spring4all.com/article/177" target="_blank" rel="noopener">SpringBoot 实现前后端分离的跨域访问（CORS）</a></p>
</blockquote>
<p><strong>什么是跨域HTTP请求</strong></p>
<blockquote>
<p><a href="https://zhuanlan.zhihu.com/p/28562290" target="_blank" rel="noopener">跨域的那些事儿</a></p>
</blockquote>
<p>浏览器的同源策略会导致跨域，这里同源策略又分为以下两种</p>
<ol>
<li>DOM 同源策略：禁止对不同源页面 DOM 进行操作。这里主要场景是 iframe 跨域的情况，不同域名的 iframe 是限制互相访问的。</li>
<li>XmlHttpRequest 同源策略：禁止使用 XHR 对象向不同源的服务器地址发起 HTTP 请求。</li>
</ol>
<p>只要协议、域名、端口有任何一个不同，都被当作是不同的域，之间的请求就是跨域操作。</p>
<h2 id="数据源"><a href="#数据源" class="headerlink" title="数据源"></a>数据源</h2><h3 id="SpringBoot-中-JPA-的使用"><a href="#SpringBoot-中-JPA-的使用" class="headerlink" title="SpringBoot 中 JPA 的使用"></a><a href="">SpringBoot 中 JPA 的使用</a></h3><h2 id="Spring-Cache"><a href="#Spring-Cache" class="headerlink" title="Spring Cache"></a>Spring Cache</h2><ol>
<li><p>@EnableCaching</p>
<p>启动类上加该注解</p>
</li>
<li><p>查询方法上添加注解<code>@Cacheable(value = &quot;cacheName&quot;, key=&quot;#id&quot;)</code>，缓存本质是一个 map。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Cacheable</span>(value = <span class="string">"cacheName"</span>, key=<span class="string">"#id"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getXXX</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>更新和删除方法上添加注解<code>@CacheEvict(value = “cacheName”, key = “#id”)</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@CacheEvict</span>(value = <span class="string">"cacheName"</span>, key=<span class="string">"#id"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteXXX</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p><strong>使用原则</strong>：需要过期时间使用 redis，不需要过期时间使用 spring cache</p>
<h2 id="Spring-Boot项目中设置Content-Type的方法"><a href="#Spring-Boot项目中设置Content-Type的方法" class="headerlink" title="Spring Boot项目中设置Content-Type的方法"></a>Spring Boot项目中设置Content-Type的方法</h2><p><strong>一种比较简单优雅的方法是在注解@RequestMapping中添加produces参数即可</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/api"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ApiController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping</span>(value = <span class="string">"/collection"</span>, produces=<span class="string">"application/json;charset=UTF-8"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">home</span><span class="params">(String op)</span> </span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Java</category>
        <category>SpringBoot</category>
      </categories>
      <tags>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
</search>
